{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/BingSiteAuth.xml","path":"BingSiteAuth.xml","modified":0,"renderable":0},{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/fbafcf3e755aa4a0b7ac04ea7ccab5ed.txt","path":"fbafcf3e755aa4a0b7ac04ea7ccab5ed.txt","modified":0,"renderable":0},{"_id":"source/sitemap.xml","path":"sitemap.xml","modified":0,"renderable":0},{"_id":"source/sogousiteverification.txt","path":"sogousiteverification.txt","modified":0,"renderable":0},{"_id":"source/images/spring-boot-one/1.png","path":"images/spring-boot-one/1.png","modified":0,"renderable":0},{"_id":"source/images/spring-boot-two/1.png","path":"images/spring-boot-two/1.png","modified":0,"renderable":0},{"_id":"source/images/spring-boot-two/4.png","path":"images/spring-boot-two/4.png","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.jpg","path":"images/avatar.jpg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon.ico","path":"images/favicon.ico","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/wechat-qcode.jpg","path":"images/wechat-qcode.jpg","modified":0,"renderable":1},{"_id":"themes/next/source/images/weixin.jpg","path":"images/weixin.jpg","modified":0,"renderable":1},{"_id":"source/images/java-properties/2.png","path":"images/java-properties/2.png","modified":0,"renderable":0},{"_id":"source/images/java-properties/5.png","path":"images/java-properties/5.png","modified":0,"renderable":0},{"_id":"source/images/spring-boot-one/3.png","path":"images/spring-boot-one/3.png","modified":0,"renderable":0},{"_id":"source/images/spring-boot-two/2.png","path":"images/spring-boot-two/2.png","modified":0,"renderable":0},{"_id":"themes/next/source/images/zhifubao.jpg","path":"images/zhifubao.jpg","modified":0,"renderable":1},{"_id":"source/images/java-properties/4.png","path":"images/java-properties/4.png","modified":0,"renderable":0},{"_id":"source/images/spring-boot-two/6.png","path":"images/spring-boot-two/6.png","modified":0,"renderable":0},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/HELP-US-OUT.txt","path":"vendors/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/bower.json","path":"vendors/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/LICENSE","path":"vendors/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/README.md","path":"vendors/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/bower.json","path":"vendors/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/CONTRIBUTING.md","path":"vendors/jquery_lazyload/CONTRIBUTING.md","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/README.md","path":"vendors/jquery_lazyload/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/bower.json","path":"vendors/jquery_lazyload/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.lazyload.js","path":"vendors/jquery_lazyload/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.scrollstop.js","path":"vendors/jquery_lazyload/jquery.scrollstop.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/bower.json","path":"vendors/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","path":"vendors/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","path":"vendors/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","path":"vendors/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery/index.js","path":"vendors/jquery/index.js","modified":0,"renderable":1},{"_id":"source/images/spring-boot-two/3.png","path":"images/spring-boot-two/3.png","modified":0,"renderable":0},{"_id":"source/images/spring-boot-two/5.png","path":"images/spring-boot-two/5.png","modified":0,"renderable":0},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","path":"vendors/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","path":"vendors/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","path":"vendors/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","path":"vendors/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","path":"vendors/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","path":"vendors/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","path":"vendors/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","path":"vendors/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","path":"vendors/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css","path":"vendors/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css.map","path":"vendors/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.min.css","path":"vendors/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff2","path":"vendors/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.min.js","path":"vendors/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.js","path":"vendors/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.min.js","path":"vendors/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.pack.js","path":"vendors/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"source/images/java-properties/3.png","path":"images/java-properties/3.png","modified":0,"renderable":0},{"_id":"themes/next/source/vendors/font-awesome/fonts/FontAwesome.otf","path":"vendors/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.eot","path":"vendors/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff","path":"vendors/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.js","path":"vendors/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","path":"vendors/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.ttf","path":"vendors/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"source/images/spring-boot-two/7.png","path":"images/spring-boot-two/7.png","modified":0,"renderable":0},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.svg","path":"vendors/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"source/images/java-properties/1.png","path":"images/java-properties/1.png","modified":0,"renderable":0},{"_id":"themes/next/source/images/BaiduSafeInput1.1.exe","path":"images/BaiduSafeInput1.1.exe","modified":0,"renderable":1},{"_id":"source/images/spring-boot-one/2.png","path":"images/spring-boot-one/2.png","modified":0,"renderable":0}],"Cache":[{"_id":"source/404.md","hash":"4c694b948cc61020be6774960b030f3c3a2e74fd","modified":1462855614245},{"_id":"source/BingSiteAuth.xml","hash":"6cbb1fe16d460a2f18b04f5999874a0fe2bb12c4","modified":1462855614245},{"_id":"source/CNAME","hash":"810a3ef016f95a1720dcaeab67b2aaf67ba673cb","modified":1462855614245},{"_id":"source/README.md","hash":"84340a25602b119788ea1238bc20c5a542396980","modified":1462855614245},{"_id":"source/fbafcf3e755aa4a0b7ac04ea7ccab5ed.txt","hash":"f71d735e3f29edfef7554619b8ecf49a7f8f2511","modified":1462855614298},{"_id":"source/googlecceda086cc2f933f.html","hash":"2a9d471b0a4e60497a6dd9e1f6198894b038e626","modified":1463735443680},{"_id":"source/sitemap.xml","hash":"b5eef311f81b151f6a6fb919e2b423b94d3fce1e","modified":1463844439724},{"_id":"source/sogousiteverification.txt","hash":"7c88d98100090dd15833d33e3f7463a74aecfd48","modified":1462855614345},{"_id":"themes/next/.bowerrc","hash":"20038353db532b4c40625419d396da7359f89cbe","modified":1462855614645},{"_id":"themes/next/.editorconfig","hash":"211d2c92bfdddb3e81ea946f4ca7a539f150f4da","modified":1462855614683},{"_id":"themes/next/.hound.yml","hash":"289dcf5bfe92dbd680d54d6e0668f41c9c9c0c78","modified":1462855614683},{"_id":"themes/next/.javascript_ignore","hash":"beb0b95736650284ceb712a162cc033847a83cd3","modified":1462855614699},{"_id":"themes/next/.jshintrc","hash":"b7d23f2ce8d99fa073f22f9960605f318acd7710","modified":1462855614699},{"_id":"themes/next/README.en.md","hash":"fa31bbc6dd8778b8dee469740c92b3b5b59702af","modified":1462855614699},{"_id":"themes/next/README.md","hash":"06aaf1241e9e1619956c86d8b1397a643840a9d1","modified":1462855614714},{"_id":"themes/next/_config.yml","hash":"c5b792c1ec6955564daf3895d795367c959006ca","modified":1463905377737},{"_id":"themes/next/_config.yml_bak","hash":"22f3f4adbc433badb6dc089e60c9fb994dcb0bd3","modified":1462855614730},{"_id":"themes/next/bower.json","hash":"da39b00fcdf2e7a42af412de0a4d3617cc6d7084","modified":1462855614730},{"_id":"themes/next/gulpfile.coffee","hash":"4e8c1082fa82e383494ff5b5963b7936d9c7bb2e","modified":1462855614730},{"_id":"themes/next/package.json","hash":"95eaba1607544965e432d56406bae391dd11bcbb","modified":1462855614983},{"_id":"source/_posts/Java程序员的就业指导.md","hash":"11e038d4564269ee8563dde32606d10e1157cf6c","modified":1462855614261},{"_id":"source/_posts/Properties配置文件读取相关java知识.md","hash":"b5e485f0eea057c030977a6dd41ffecea8b08257","modified":1476432262992},{"_id":"source/_posts/HTML5应用之文件拖拽上传.md","hash":"730782f28c787a7bf41ce009f775bbcaee6055ce","modified":1462855614261},{"_id":"source/_posts/hello-world.md","hash":"94da445cf40727689a120377e653ba867a21abe8","modified":1462855614280},{"_id":"source/_posts/Spring Boot特点之SpringApplication.md","hash":"63f146deac969fb9eab45a46d451af3edeb08c64","modified":1470736522432},{"_id":"source/_posts/Date、String、Calendar三种时间类型的转换.md","hash":"715ca078398f91b16cf9090920b754270137448c","modified":1462855614261},{"_id":"source/_posts/pay.md","hash":"12cc37f22f89735d3babdce57fab1d8ec0e3e64a","modified":1484812211938},{"_id":"source/_posts/test-md.md","hash":"23708b535ee8bca4e8e5c507647bce7a93c332a0","modified":1462855614283},{"_id":"source/_posts/SpringMVC Controller接收List Map或List Object.md","hash":"075ee5bf608bbc58233675c9726202a147d70259","modified":1462855614277},{"_id":"source/_posts/倒计时功能参数传递.md","hash":"fd2ba2e069bfc7a0e007b63f98deebbf10cc193f","modified":1466782617749},{"_id":"source/_posts/利用GitHub搭建个人maven仓库.md","hash":"aadba269b9110391ea5abe94c3ce6b97c9382ab9","modified":1476759843727},{"_id":"source/_posts/在线工具推荐.md","hash":"69181cd47a7cdb37895480e007d1ca5ac8444a65","modified":1464252147648},{"_id":"source/_posts/如何成为一个牛掰的Java大神.md","hash":"e3d8d6e0cb6d38c3fc3e5e4abd936e295e86434a","modified":1462855614283},{"_id":"source/_posts/开发第一个Spring Boot项目.md","hash":"fd493fb8cfbaec57fa927911293432334b22cd7a","modified":1470299018612},{"_id":"source/_posts/新的开始.md","hash":"c9c610a0a9d677ee329f16467f8332f2f0a5f40d","modified":1462855614283},{"_id":"source/_posts/服务器 JDK + Tomcat + Nginx 部署环境整体搭建及自动化部署的具体实现.md","hash":"406672b77d41ee3e09baa02ec6aaaa770cbaccc0","modified":1484812452794},{"_id":"source/_posts/用Hexo与GitHub打造属于自己的博客.md","hash":"1a1aec31fe426a0bda6bbc9d498296eab6b4525e","modified":1462855614283},{"_id":"source/_posts/网站后台页面左侧收缩折叠效果.md","hash":"184974f43fd71fa5bc602318b768756fc9a93858","modified":1462855614298},{"_id":"source/_posts/软件推荐.md","hash":"c33cb86175bb04e885e7bcbf5031921c1c7f7fb4","modified":1463728062237},{"_id":"source/about/index.md","hash":"092f8c94619fd9c4dcb90af02e255f1362c5166b","modified":1462855614298},{"_id":"source/categories/index.md","hash":"f5c5965860b692225496d26f4cd8f18a222645ab","modified":1462855614298},{"_id":"source/resume/_index.md","hash":"393d8d75d3755f2c0de2a5af681dd440eea41e1a","modified":1462855614298},{"_id":"source/scaffolds/draft.md","hash":"9df7cdb0f3d439e222a8f466e416e70a39c4a9f3","modified":1462855614330},{"_id":"source/scaffolds/page.md","hash":"67e8c4608530e28b162ab869de6fd5aa274c9ab3","modified":1462855614330},{"_id":"source/scaffolds/post.md","hash":"8b4799da35dad6202f539ad22a62db3d85583b21","modified":1462855614330},{"_id":"source/search/index.md","hash":"569876de89dff5211a5448b1bb65a5857173cf3c","modified":1462855614345},{"_id":"source/something/index.md","hash":"863ecd5c0fff9d3e5096442558c0a431efa2acba","modified":1464252171363},{"_id":"source/tags/index.md","hash":"9f0da5dddfa3b04c92e8d7433a4da940211a5834","modified":1462855614345},{"_id":"themes/next/languages/default.yml","hash":"d2f6784b9c6567b64e58736e36025dbf96d863d4","modified":1462855614746},{"_id":"themes/next/languages/en.yml","hash":"df81ab6b1cf3c88ed053d3766381cd12eb659fe3","modified":1462855614746},{"_id":"themes/next/languages/fr-FR.yml","hash":"d8a40fe025fad6f42df0cf16d4be2d513769b062","modified":1462855614746},{"_id":"themes/next/languages/de.yml","hash":"4c3ffeb0d214c807a226dd98214958cb5483df1c","modified":1462855614746},{"_id":"themes/next/languages/ja.yml","hash":"e594aa42a33c489e4a65065659a01bb76c3c0cb5","modified":1462855614746},{"_id":"themes/next/languages/pt.yml","hash":"4c64594f477905d5d2d9ca2422f03175b7b0c617","modified":1462855614761},{"_id":"themes/next/languages/ru.yml","hash":"c3aedb94decf05a301662afc3398ab563dd9995a","modified":1462855614761},{"_id":"themes/next/languages/zh-Hans.yml","hash":"7f2ba7d1ee4e745f2def5e7f310d83e582af30f5","modified":1462855614761},{"_id":"themes/next/languages/zh-hk.yml","hash":"88e603eb0f3fd25c35bb37bd30372fd77bba7c46","modified":1462855614761},{"_id":"themes/next/languages/zh-tw.yml","hash":"04479b419c72b71fd34046f3fc33ebda4fe8de84","modified":1462855614761},{"_id":"themes/next/layout/_layout.swig","hash":"1138b849e1240249480849cc2b6c6d09b28207a5","modified":1462855614778},{"_id":"themes/next/layout/archive.swig","hash":"b867a08f6b43de8b5d700c84b943df55917407ae","modified":1462855614962},{"_id":"themes/next/layout/category.swig","hash":"58cf08388901f7549b1fca95548b2c79173aa840","modified":1462855614962},{"_id":"themes/next/layout/index.swig","hash":"e5b52e04296203262a400e8e36ae12426d31fd5b","modified":1462855614978},{"_id":"themes/next/layout/page.swig","hash":"a91e3fd7aef26e8a02e339e3372801c517f400cf","modified":1462855614980},{"_id":"themes/next/layout/post.swig","hash":"de9372ee969f40e4029569b3d8f250065c528639","modified":1463907831173},{"_id":"themes/next/layout/tag.swig","hash":"6f764ea3ab11eeb7c530df45528d449b14f5dc62","modified":1462855614983},{"_id":"themes/next/scripts/merge-configs.js","hash":"f8cde6953939802f92da5b7a2458c6c539e9be69","modified":1462855614983},{"_id":"themes/next/test/.jshintrc","hash":"1dae9d1cf7df1ae6d5c5efd6cffb949e9b8dcebb","modified":1462855615963},{"_id":"themes/next/test/helpers.js","hash":"f25e7f3265eb5a6e1ccbb5e5012fa9bebf134105","modified":1462855615963},{"_id":"themes/next/test/intern.js","hash":"db90b1063356727d72be0d77054fdc32fa882a66","modified":1462855615983},{"_id":"source/resume/index.html","hash":"c3c966e11a1e86f7e5cd921c6090a882244c06d3","modified":1467621478608},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1462855615431},{"_id":"source/images/spring-boot-one/1.png","hash":"7abd2aa5fa67787d46fe688cc8e4a11068fa002d","modified":1470297451098},{"_id":"source/images/spring-boot-two/1.png","hash":"b8df937d27be22aaf69425ecb9426b2d90c44013","modified":1470734252510},{"_id":"source/images/spring-boot-two/4.png","hash":"ca1d625fe7e87b8dbba2871f35ae472f4b10c537","modified":1470734286584},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"b87a5122dbff1d5fccf8f3d09d1640bd4b01c4a0","modified":1462855614781},{"_id":"themes/next/layout/_macro/post.swig","hash":"34f5698b141dee31d20000fdb4a381c3656e8a59","modified":1463908720309},{"_id":"themes/next/layout/_macro/post-article.swig","hash":"d430178bdc05c936976fb17c5aea98849a92c102","modified":1462855614783},{"_id":"themes/next/layout/_macro/reward.swig","hash":"05cad11b3efcb8b7e74677bd7c13ad53d268476a","modified":1462855614783},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"acd67503899324b892bdbc1b9dbb2e78472d0975","modified":1462855614783},{"_id":"themes/next/layout/_scripts/baidu-push.swig","hash":"c5db707b46eac6a5df1d2a77f8556945a66fd181","modified":1462855614861},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"d569af20d20a960d534a5b60f90c20fef519d351","modified":1462855614783},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"c0f5a0955f69ca4ed9ee64a2d5f8aa75064935ad","modified":1462855614861},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"931808ad9b8d8390c0dcf9bdeb0954eeb9185d68","modified":1462855614861},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"c9d45628330ce8bf5fbe71c9f131c7d75334c1c4","modified":1462855614962},{"_id":"themes/next/layout/_partials/comments.swig","hash":"325dd5923d845a539fc0524ca72ce40edd1e516a","modified":1462855614783},{"_id":"themes/next/layout/_partials/duoshuo-hot-articles.swig","hash":"ba75672183d94f1de7c8bd0eeee497a58c70e889","modified":1462855614799},{"_id":"themes/next/layout/_partials/footer.swig","hash":"8138f5c4b13e42e86affbdd0843b254ead66edae","modified":1462855614799},{"_id":"themes/next/layout/_partials/head.swig","hash":"d5eadfe13cd28aa4626a1b17e18deaafe0a0452e","modified":1462855614799},{"_id":"themes/next/layout/_partials/header.swig","hash":"b3f4f07f03bedd615039934b44d552b91e2a4a1d","modified":1462855614799},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"1634fb887842698e01ff6e632597fe03c75d2d01","modified":1462855614815},{"_id":"themes/next/layout/_partials/search.swig","hash":"95b55fe35f2d2c22f2cc055d4379b5435314c7ec","modified":1462855614815},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"99b66949f18398689b904907af23c013be1b978f","modified":1462855614983},{"_id":"themes/next/scripts/tags/full-image.js","hash":"86194a05a8c6499de0b2aaa525d6de135778c0ae","modified":1462855614999},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"ac681b0d0d8d39ba3817336c0270c6787c2b6b70","modified":1462855614999},{"_id":"themes/next/source/css/main.styl","hash":"a91dbb7ef799f0a171b5e726c801139efe545176","modified":1462855615431},{"_id":"themes/next/source/images/avatar.jpg","hash":"cc7bd3acd034f0bacb53b0c57e7172d63f8486cf","modified":1462855615631},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1462855615631},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1462855615631},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1462855615631},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1462855615631},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1462855615679},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1462855615682},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1462855615682},{"_id":"themes/next/source/images/favicon.ico","hash":"d535bce0bee527f48c95bda887ae1778ee618e0b","modified":1462855615683},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1462855615684},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1462855615684},{"_id":"themes/next/source/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1462855615684},{"_id":"themes/next/source/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1462855615684},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1462855615684},{"_id":"themes/next/source/images/wechat-qcode.jpg","hash":"eae38ce5fbfb697fa8650d4f66a1d798e3945d6d","modified":1462855615684},{"_id":"themes/next/source/images/weixin.jpg","hash":"3f5ed507e87f017306f586c31cbdfdc6402ec41b","modified":1462855615684},{"_id":"source/images/java-properties/2.png","hash":"154cecac6b4992b6994fc2904ec31fd88b5f9f33","modified":1476431560000},{"_id":"source/images/java-properties/5.png","hash":"a7ad374f35aee05fa87ed7e56326f6a838b0ef19","modified":1476431562000},{"_id":"source/images/spring-boot-one/3.png","hash":"31cccbe980a3d01162b1938847cd6a977b654588","modified":1470297477818},{"_id":"source/images/spring-boot-two/2.png","hash":"c84d45162db989beb6330750a59d00c6b1248b3d","modified":1470734269772},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1462855614879},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1462855614878},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1462855615315},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1462855615315},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1462855615315},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1462855615415},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1462855615415},{"_id":"themes/next/source/images/zhifubao.jpg","hash":"f06710b32081d1be5bad7c4b82ccd0d487a0c486","modified":1462855615684},{"_id":"source/images/java-properties/4.png","hash":"897b5fd943a8a7e4f3b1fac31bc81998c3212685","modified":1476431560000},{"_id":"source/images/spring-boot-two/6.png","hash":"c70aaa548d69af320678039f0f946fa25bbb4842","modified":1470734305047},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"9b84ab576982b2c3bb0291da49143bc77fba3cc6","modified":1462855614878},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1462855614881},{"_id":"themes/next/layout/_scripts/third-party/analytics.swig","hash":"91c5353fcb94cc3b3f265b06ad2341734bc4c826","modified":1462855614884},{"_id":"themes/next/layout/_scripts/third-party/comments.swig","hash":"8ba01f1ac07fbca62a4b00f5a0a3a506122c1530","modified":1462855614915},{"_id":"themes/next/layout/_scripts/third-party/lean-analytics.swig","hash":"aebc73513c9cbbbbda2935e2eb18e09bb1c24bf8","modified":1462855614931},{"_id":"themes/next/layout/_scripts/third-party/localsearch.swig","hash":"5bd98c26cc188a2a30504d1330a0eaae34034db0","modified":1462855614946},{"_id":"themes/next/layout/_scripts/third-party/mathjax.swig","hash":"4a5c6df1579a4ca72ed17f7dbd6d16a509aa7dc8","modified":1462855614946},{"_id":"themes/next/layout/_scripts/third-party/tinysou.swig","hash":"fe95dd3d166634c466e19aa756e65ad6e8254d3e","modified":1462855614962},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"774ec124c8b4312200f0f5a2b333182535cd2f42","modified":1462855614799},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"a8c7f9ca7c605d039a1f3bf4e4d3183700a3dd62","modified":1462855614815},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"efa7efcbb575381b508f9aa0e0c53140eef72a7b","modified":1462855614815},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"b25002a83cbd2ca0c4a5df87ad5bff26477c0457","modified":1462855614815},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"bf8e9223a40748b2e3ef77d753a8e1dbbce8095e","modified":1462855614830},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"3fdde03f45a80f7a85097a40b40358adde618fc7","modified":1462855614846},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"d4fbffd7fa8f2090eb32a871872665d90a885fac","modified":1462855614861},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"12684840de632eb16e53ffa863166306a756fd4f","modified":1462855614861},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"9bf9cae677ac20a92fead6606468adf83ed706de","modified":1462855615315},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1462855615315},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"10ca6744a8594c1a085b50120f4ed0a1ef433f40","modified":1462855615315},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"e55265c8a8a6ae0c3c08e3509de92ee62c3cb5f6","modified":1462855615415},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"6da593f19a9c8e76b43bc05172923d82b2aefa03","modified":1462855615415},{"_id":"themes/next/source/css/_variables/base.styl","hash":"ea6e519065702dfdb1dc299f85411b9ee2bcf4ce","modified":1462855615415},{"_id":"themes/next/source/css/_variables/default.styl","hash":"17779fa6fa3c9e1262ba100a86a8dec730c2f312","modified":1462855615431},{"_id":"themes/next/source/js/src/affix.js","hash":"1b509c3b5b290a6f4607f0f06461a0c33acb69b1","modified":1462855615684},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"4a0da1bed19e65bd7db42421b447061bc1618710","modified":1462855615684},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"b35a7dc47b634197b93487cea8671a40a9fdffce","modified":1462855615700},{"_id":"themes/next/source/js/src/motion.js","hash":"ff9ea37d05c269e3a140c4ab448af03efc4bcc76","modified":1462855615700},{"_id":"themes/next/source/js/src/post-details.js","hash":"b8c0b5563cc6edbac82ed5a4f43f72800029ea87","modified":1462855615700},{"_id":"themes/next/source/js/src/utils.js","hash":"14521498ba62a9a4050b86fb1eae0babd5b88c8a","modified":1462855615700},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"b7657be25fc52ec67c75ab5481bdcb483573338b","modified":1462855615700},{"_id":"themes/next/source/vendors/fancybox/.bower.json","hash":"9be892a4e14e0da18ff9cb962c9ef71f163b1b22","modified":1462855615700},{"_id":"themes/next/source/vendors/fancybox/.gitattributes","hash":"672d3b5767e0eacd83bb41b188c913f2cf754793","modified":1462855615716},{"_id":"themes/next/source/vendors/font-awesome/.bower.json","hash":"bb093f2ac1f1305069d873a7941324c8e0de3135","modified":1462855615763},{"_id":"themes/next/source/vendors/font-awesome/.gitignore","hash":"03ddbf76c1dd1afb93eed0b670d2eee747472ef1","modified":1462855615780},{"_id":"themes/next/source/vendors/font-awesome/.npmignore","hash":"c31ff06a740955e44edd4403902e653ccabfd4db","modified":1462855615782},{"_id":"themes/next/source/vendors/font-awesome/HELP-US-OUT.txt","hash":"ed80b43dbc7e3009b2f436741b9796df8eb3be02","modified":1462855615785},{"_id":"themes/next/source/vendors/font-awesome/bower.json","hash":"71e7183634dc1b9449f590f15ebd7201add22ca7","modified":1462855615785},{"_id":"themes/next/source/vendors/fastclick/.bower.json","hash":"bf3eef9d647cd7c9b62feda3bc708c6cdd7c0877","modified":1462855615747},{"_id":"themes/next/source/vendors/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1462855615747},{"_id":"themes/next/source/vendors/fastclick/README.md","hash":"68a9b9d53126405b0fa5f3324f1fb96dbcc547aa","modified":1462855615763},{"_id":"themes/next/source/vendors/fastclick/bower.json","hash":"a9b3ee1e4db71a0e4ea6d5bed292d176dd68b261","modified":1462855615763},{"_id":"themes/next/source/vendors/jquery/.bower.json","hash":"865d6c1328ab209a4376b9d2b7a7824369565f28","modified":1462855615832},{"_id":"themes/next/source/vendors/jquery_lazyload/.bower.json","hash":"90fa628f156d8045357ff11eaf32e61abacf10e8","modified":1462855615863},{"_id":"themes/next/source/vendors/jquery_lazyload/CONTRIBUTING.md","hash":"4ded6fee668544778e97e38c2b211fc56c848e77","modified":1462855615863},{"_id":"themes/next/source/vendors/jquery_lazyload/README.md","hash":"b930297cb98b8e1dbd5abe9bc1ed9d5935d18ce8","modified":1462855615885},{"_id":"themes/next/source/vendors/jquery_lazyload/bower.json","hash":"e0acf1db27b0cc16128a59c46db1db406b5c4c58","modified":1462855615885},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.lazyload.js","hash":"f4a570908f6c89c6edfb1c74959e733eaadea4f2","modified":1462855615900},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.scrollstop.js","hash":"bf773ad48a0b9aa77681a89d7569eefc0f7b7b18","modified":1462855615900},{"_id":"themes/next/source/vendors/velocity/.bower.json","hash":"63da5e80ebb61bb66a2794d5936315ca44231f0c","modified":1462855615916},{"_id":"themes/next/source/vendors/velocity/bower.json","hash":"92d92860418c4216aa59eb4cb4a556290a7ad9c3","modified":1462855615916},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1462855615947},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","hash":"dbbfb50f6502f6b81dcc9fee7b31f1e812da3464","modified":1462855615947},{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1462855615963},{"_id":"themes/next/source/vendors/jquery/index.js","hash":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1462855615863},{"_id":"source/images/spring-boot-two/3.png","hash":"2da93ccc336f0eeb9ed84fee3910c0edd79b6cff","modified":1470734277977},{"_id":"source/images/spring-boot-two/5.png","hash":"a53ef566c22e564a94c865c660290953e6b46483","modified":1470734295989},{"_id":"themes/next/layout/_scripts/third-party/analytics/busuanzi-counter.swig","hash":"24105e62d7f26946907fa14cd02589f899bf8122","modified":1462855614884},{"_id":"themes/next/layout/_scripts/third-party/analytics/facebook-sdk.swig","hash":"61347b9cf5c42a02f28cda4b6d920d6d17099d44","modified":1462855614899},{"_id":"themes/next/layout/_scripts/third-party/analytics/cnzz-analytics.swig","hash":"096e7a6958b3bcacaa94361266832871ccb989c0","modified":1462855614884},{"_id":"themes/next/layout/_scripts/third-party/analytics/tencent-analytics.swig","hash":"8a399df90dadba5ad4e781445b58f4765aeb701e","modified":1462855614915},{"_id":"themes/next/layout/_scripts/third-party/analytics/baidu-analytics.swig","hash":"ae5b8597603d4e42ee66ed121544e7b1c644767e","modified":1462855614884},{"_id":"themes/next/layout/_scripts/third-party/analytics/google-analytics.swig","hash":"1b6af02fd0ba3f729675cd95429a0cea4aebf358","modified":1462855614899},{"_id":"themes/next/layout/_scripts/third-party/comments/disqus.swig","hash":"c1186e609d4810ebfb3e675e9045b023a557d1db","modified":1462855614915},{"_id":"themes/next/layout/_scripts/third-party/comments/duoshuo.swig","hash":"2338be12ffee58bc08197cb9da8aaf31737aaf5c","modified":1462855614931},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"ad69cbf94eedacc27e756cdb9c7073416db697d0","modified":1462855614999},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"ff4489cd582f518bba6909a301ac1292a38b4e96","modified":1462855615015},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"b7d5cc29586ac796a50d90974ad99d24a5982137","modified":1462855615015},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"22828f5141c0cecb9ef25a110e194cdfa3a36423","modified":1462855614999},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"88559b13ce94311405b170a0506ded91273beceb","modified":1462855615062},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"6eb4bcc3056bd279d000607e8b4dad50d368ca69","modified":1462855615215},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"12662536c7a07fff548abe94171f34b768dd610f","modified":1462855615246},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"5a35aa0381b0e1d465b952a997194441020446ea","modified":1462855615262},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"302fca2d38d0175f5b5c7c42bc80b5a87404a50d","modified":1462855615262},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"3f40e8a9fe8e7bd5cfc4cf4cbbbcb9539462e973","modified":1462855615262},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"c9218b48c56e52c06af9ce3cc8fbdae737cf16fe","modified":1462855615299},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"d110befc142dbb881c4fdcb94df65ed2f603f1c1","modified":1462855615315},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"25d5e45a355ee2093f3b8b8eeac125ebf3905026","modified":1462855615330},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"d0bfd1bef988c76f7d7dd72d88af6f0908a8b0db","modified":1462855615330},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"b1025c421406d2c24cc92a02ae28c1915b01e240","modified":1462855615330},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"26666c1f472bf5f3fb9bc62081cca22b4de15ccb","modified":1462855615330},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"55b44e03054cd20ed8129bf986b15fba5fd85aad","modified":1462855615330},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1462855615346},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"5187512cc4b2ce095230928c7046e0b26c3897bd","modified":1462855615346},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"124b540f059fd1ed13514362007cfc70355278c6","modified":1462855615346},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"748dbfbf9c08e719ddc775958003c64b00d39dab","modified":1462855615346},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"13af2fb21fabfc4df4b577ce5363e13d03daff71","modified":1462855615346},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1462855615346},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"f70fa81275eb4e0ea5e5a740b7a35539c6ffa9ba","modified":1462855615362},{"_id":"themes/next/source/css/_schemes/Pisces/_full-image.styl","hash":"de31e923bf5102498f06b1ae6bdf2ea22409f3e0","modified":1462855615362},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"c9875c010bebd77b4f59d459a10455fceb0a66a1","modified":1462855615362},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"2182a6da3434a6fd4d03ab1592c645d3d3c88500","modified":1462855615362},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"9887bd3894db5394c1e64e800afaae55f47e8dd0","modified":1462855615362},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"1f6e2ce674735269599acc6d77b3ea18d31967fc","modified":1462855615399},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"7e8da9aa4b0ef05f8100bdb6998b6db6e4d39639","modified":1462855615399},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"88a5e0e95f93e4adb196bff1aac17d6cfb03768a","modified":1462855615399},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"a9d064d600ee35acd66508167e1ac8c6cfdbdcd8","modified":1462855615700},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1462855615716},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1462855615716},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1462855615716},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1462855615716},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1462855615716},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1462855615716},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","hash":"d71602cbca33b9ecdb7ab291b7f86a49530f3601","modified":1462855615731},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","hash":"82f33ad0842aa9c154d029e0dada2497d4eb1d57","modified":1462855615731},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","hash":"ae6318aeb62ad4ce7a7e9a4cdacd93ffb004f0fb","modified":1462855615747},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css","hash":"811432ad1e2d6c1f6da9a63fd919bf2a02b71dd9","modified":1462855615785},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1462855615785},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.min.css","hash":"4c2c5f5f6cc86d775a44b944661e038b7be98149","modified":1462855615785},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff2","hash":"574ea2698c03ae9477db2ea3baf460ee32f1a7ea","modified":1462855615832},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1462855615763},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.js","hash":"1d6aeda0480d0e4cb6198edf7719d601d4ae2ccc","modified":1462855615763},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.min.js","hash":"41ea797c68dbcff2f6fb3aba1d1043a22e7cc0f6","modified":1462855615900},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.pack.js","hash":"a817b6c158cbc5bab3582713de9fe18a18a80552","modified":1462855615916},{"_id":"source/images/java-properties/3.png","hash":"5aa5e8363ede4512e9e3ba336ae2ff7ace7f7521","modified":1476431560000},{"_id":"themes/next/source/vendors/font-awesome/fonts/FontAwesome.otf","hash":"0112e96f327d413938d37c1693806f468ffdbace","modified":1462855615800},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.eot","hash":"b3c2f08e73320135b69c23a3908b87a12053a2f6","modified":1462855615816},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff","hash":"507970402e328b2baeb05bde73bf9ded4e2c3a2d","modified":1462855615832},{"_id":"themes/next/source/vendors/velocity/velocity.js","hash":"4237c6e9d59da349639de20e559e87c2c0218cfd","modified":1462855615932},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d63e0cacc53dd375fcc113465a4328c59ff5f2c1","modified":1462855615015},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"53cde051e0337f4bf42fb8d6d7a79fa3fa6d4ef2","modified":1462855615015},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"4c4ef6e997d0c6e21de39c2daa0c768e12c8c6fa","modified":1462855615015},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"852fd77500bda2c1a6651a14aa48d7d6222adc9d","modified":1462855615015},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"0656e753f182c9f47fef7304c847b7587a85ef0d","modified":1462855615030},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"1727702eac5d326b5c81a667944a245016668231","modified":1462855615046},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"321f9683514d6a045e9c5f4fb2306b317984a83b","modified":1462855615046},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"12e366f04497e3f44388fd40111a03e02f7c26af","modified":1462855615046},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"104b5c79cd891506e0beaf938b083685f1da8637","modified":1462855615062},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"7fb593f90d74a99c21840679933b9ef6fdc16a61","modified":1462855615062},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"b8f9c95702e87fd0b170ab586c82c9718a245f8a","modified":1462855615062},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"4e3838d7ac81d9ad133960f0f7ed58a44a015285","modified":1462855615062},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"a45f5fce643eec4e1b927165229d560364bcace1","modified":1462855615062},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"4866fb9453d7d4c83a1c4e55d74e4afed336eb8b","modified":1462855615081},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"a200c0a1c5a895ac9dc41e0641a5dfcd766be99b","modified":1462855615078},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"cd9e214e502697f2f2db84eb721bac57a49b0fce","modified":1462855615084},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"ca20affaeaf33c0904cb6356864fc6b78e95f447","modified":1462855615084},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"929fac3a505bacbce6ba63009fd15851e2a8669d","modified":1462855615146},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5a982d8ef3b3623ea5f59e63728990f5623c1b57","modified":1462855615146},{"_id":"themes/next/source/css/_common/components/post/post-more-link.styl","hash":"2bc3e33fdfbcf348c96ca60598f629dcd7ba3617","modified":1462855615084},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"758d64ad65f718537ab5bfe5592a626abc40987e","modified":1462855615162},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"01567edaea6978628aa5521a122a85434c418bfd","modified":1462855615162},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"a1e83e7cd686239d75caa12b7e74d69f3e1d2d90","modified":1462855615178},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"7f2bdd6109614d35408ee5ac3335aad4464c69c7","modified":1462855615184},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"821991c0890966a512b43e8b1cf9537e738a09a0","modified":1462855615184},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"08b8547fc448b21cab05bd2c7ed5b55e7f94dd47","modified":1462855615184},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"61f8cea3c01acd600e90e1bc2a07def405503748","modified":1462855615184},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"1153bb71edf253765145559674390e16dd67c633","modified":1462855615184},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"394888efec32749b353292a59ec7f1b609d6325e","modified":1462855615199},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"06b9a99d63b4d57fdbf70b88ab7036fbc47e3f52","modified":1462855615199},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"702be9e57dd6ff5fa99642a1f6e3df26215b8805","modified":1462855615199},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"99c4b7d1459569cda394c733845d368008a180bf","modified":1462855615199},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"2fe76476432b31993338cb45cdb3b29a518b6379","modified":1462855615215},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"dd941824210733588841897457e0cc9697ca5608","modified":1462855615215},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"2ad1a2a9bbf6742d1b0762c4c623b68113d1e0fe","modified":1462855615215},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"a83f493e494f5c73fab8f6f5b686ef1670490095","modified":1462855615231},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"5dbeed535d63a50265d96b396a5440f9bb31e4ba","modified":1462855615231},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"7f7e9df15148608a9c29326dd880d8e8e8efc0ec","modified":1462855615231},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"717cc7f82be9cc151e23a7678601ff2fd3a7fa1d","modified":1462855615231},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"15975ba7456b96916b1dbac448a1a0d2c38b8f3d","modified":1462855615246},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"dcb4548d07cbb38b645b1753cf3ee7157e16921a","modified":1462855615246},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"7bd182d918f3117335a5ee87a1b544e6d2b54d7d","modified":1462855615246},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"a07aa12cc36ac5c819670c2a3c17d07ed7a08986","modified":1462855615346},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1462855615716},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"ee948b4489aedeb548a77c9e45d8c7c5732fd62d","modified":1462855615716},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"6394c48092085788a8c0ef72670b0652006231a1","modified":1462855615716},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","hash":"51139a4c79573d372a347ef01a493222a1eaf10a","modified":1462855615731},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"b88b589f5f1aa1b3d87cc7eef34c281ff749b1ae","modified":1462855615731},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"d22b1629cb23a6181bebb70d0cf653ffe4b835c8","modified":1462855615731},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.ttf","hash":"27cf1f2ec59aece6938c7bb2feb0e287ea778ff9","modified":1462855615832},{"_id":"source/images/spring-boot-two/7.png","hash":"cc72479a97a49cbae7d4a228b5bc50db3acb8068","modified":1470734312466},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.svg","hash":"f346b8b3df147e4059e1a7d66c52c9a6e1cec3e8","modified":1462855615816},{"_id":"source/images/java-properties/1.png","hash":"213543c8f32df6e557e5d0a29f7b686f5ea34276","modified":1476431560000},{"_id":"themes/next/source/images/BaiduSafeInput1.1.exe","hash":"064c8e7e5b512248898457a41ff229828d1aa791","modified":1462855615616},{"_id":"source/images/spring-boot-one/2.png","hash":"de45c9362d2075c0b83beb9c7e99178cbd3c5faf","modified":1470297471312},{"_id":"public/404.html","hash":"d96fab73034f734c0dd17d404bbd4e4be9917121","modified":1484812578859},{"_id":"public/googlecceda086cc2f933f.html","hash":"f0d18bda445c8ca23fcab94e7b60f7fa5eceba0d","modified":1484812578860},{"_id":"public/README.html","hash":"6db51f710b3326bb5d9383913a750817be722e93","modified":1484812578860},{"_id":"public/about/index.html","hash":"ef5bbe2cf203f24d7129cdb884d90a948e8d9e57","modified":1484812578860},{"_id":"public/categories/index.html","hash":"6c5b7e6ed0dd0f0c4f1b9f72d3836bcc9717332b","modified":1484812578860},{"_id":"public/scaffolds/draft.html","hash":"ae441fc3e258eb0cd904f0839c6fde67b5403e80","modified":1484812578860},{"_id":"public/scaffolds/page.html","hash":"e2fa808092aede4b1e3262659015e120915b6471","modified":1484812578860},{"_id":"public/scaffolds/post.html","hash":"92c7aed8c32aadb3d222d4d35eef98a0b2983e18","modified":1484812578860},{"_id":"public/search/index.html","hash":"91bf035e9ee01e2667fa7fa4d595ae5e34f8f08c","modified":1484812578860},{"_id":"public/tags/index.html","hash":"71208adb59b06ea8ad9ff3acd22bbf0b902e8a4b","modified":1484812578860},{"_id":"public/archives/2015/08/index.html","hash":"7f8039fa9926ef487a555263b0fabb578889bbfb","modified":1484812578860},{"_id":"public/archives/2015/12/index.html","hash":"fda24670bc57ef61062fb7eb695c0ddc5d52450b","modified":1484812578860},{"_id":"public/archives/2016/04/index.html","hash":"5a06b8de1e64113708b116c23dcb01b946d09bc9","modified":1484812578860},{"_id":"public/archives/2016/05/index.html","hash":"aa3fa8a5da55fdf6bc77c73e970963e6b90d7b0b","modified":1484812578861},{"_id":"public/archives/2016/06/index.html","hash":"ee890bf0897ef67d14f55e07d0fcfd0f88e34cc9","modified":1484812578861},{"_id":"public/archives/2016/08/index.html","hash":"f07557a0b2433a26c6de7f182e9bde27886aff36","modified":1484812578861},{"_id":"public/archives/2016/10/index.html","hash":"d9369cadf3a4796643ab6334cd538bc06b6820d8","modified":1484812578861},{"_id":"public/archives/2017/index.html","hash":"3e4171026f6d5905618e6dbe66bc163e5ea5db8d","modified":1484812578861},{"_id":"public/archives/2017/01/index.html","hash":"3a019e8a14d0b06e4c9ab4df582dc05922900050","modified":1484812578861},{"_id":"public/categories/java/index.html","hash":"77396af70e808f93cb97c18a9c8b0e672278d93a","modified":1484812578861},{"_id":"public/categories/Hexo/index.html","hash":"9a4e18322894182df503e2daa88e0df8a03af9e4","modified":1484812578861},{"_id":"public/categories/Spring-Boot/index.html","hash":"35caba6c36bc4dab4db7ceb5c39c8418e1c8db09","modified":1484812578861},{"_id":"public/categories/Java/index.html","hash":"84d21a87336488d1fc68591d6e699a3140702f12","modified":1484812578861},{"_id":"public/categories/Spring/index.html","hash":"5af6bb2b5320ecaaa70e46c49e782e1fda22ccf8","modified":1484812578861},{"_id":"public/categories/tips/index.html","hash":"14f72b6b18d2dc077e8a370cf84067bab7c8a69b","modified":1484812578862},{"_id":"public/categories/maven/index.html","hash":"6183a7780955252970878abaf4cbc7bdaf819501","modified":1484812578862},{"_id":"public/categories/软件/index.html","hash":"01c93abcb7d8f0a01b518ca83587714e5e05c793","modified":1484812578862},{"_id":"public/categories/hexo/index.html","hash":"b678d12bc3d3eff23174bc2b106b01c94f855373","modified":1484812578862},{"_id":"public/categories/html/index.html","hash":"e134056483bb05f8f102c355e247051994155e45","modified":1484812578862},{"_id":"public/categories/linux/index.html","hash":"5d23a48da990c1d10414f495f3fcf7689e7bccbd","modified":1484812578862},{"_id":"public/tags/java/index.html","hash":"ce22b722d60843de11019b335a7d3b0b6bddf48f","modified":1484812578862},{"_id":"public/tags/html5/index.html","hash":"135233c42825384a90cffdb81cd243866c46f122","modified":1484812578862},{"_id":"public/tags/Hexo/index.html","hash":"af53e0d4b5178d957998ad40a2caca7957c91fd4","modified":1484812578862},{"_id":"public/tags/Spring-Boot/index.html","hash":"2dc0c4a9de3ee1e4f632c81a9b373828e3d44638","modified":1484812578862},{"_id":"public/tags/Java/index.html","hash":"0b731e7598d69ae16a6c78a8c978f70a55c3d80f","modified":1484812578862},{"_id":"public/tags/test/index.html","hash":"463f17d44b99c08f1b497d15cd18c9af94db17e9","modified":1484812578862},{"_id":"public/tags/支付/index.html","hash":"975f435605e180454732225730ee958440e2d4e7","modified":1484812578862},{"_id":"public/tags/Spring/index.html","hash":"5746a44ab8bce83a82749734cd6eb8aca73a87a4","modified":1484812578862},{"_id":"public/tags/tips/index.html","hash":"c5c8c2e792af4b566c03e670ec367e6922735bce","modified":1484812578862},{"_id":"public/tags/github-maven/index.html","hash":"b26a5bd63fa8599817ef3b812d4ddd73d4a1fe99","modified":1484812578862},{"_id":"public/tags/软件/index.html","hash":"5686efc7f67538ca11627bd0c062541b72491c67","modified":1484812578863},{"_id":"public/tags/hexo/index.html","hash":"449a66952e33ad8e5b7ecfc14d69a1f666fb95eb","modified":1484812578864},{"_id":"public/tags/html/index.html","hash":"1b29d981ac3b0d7781b5b20bfb971624f709ee29","modified":1484812578865},{"_id":"public/tags/软件推荐/index.html","hash":"11e38f4bd8bd504dd47a3bc8e58877373129b553","modified":1484812578865},{"_id":"public/tags/linux/index.html","hash":"96f8a998c4201c47a9221bd3473e05b302dabb93","modified":1484812578865},{"_id":"public/tags/部署/index.html","hash":"b9cbd83003382eeca9fae8e2f34f43ee885f1960","modified":1484812578865},{"_id":"public/tags/服务器/index.html","hash":"f291509e8b1858f24cbac79c8bdc251ff89de7bd","modified":1484812578865},{"_id":"public/something/index.html","hash":"f98c2b6b44698ebd347a4e20e55f885db3bbc769","modified":1484812578865},{"_id":"public/resume/index.html","hash":"f8c07cb41bff4cfe7f984dd17502d6aa0d6c6ad2","modified":1484812578865},{"_id":"public/2017/01/19/pay/index.html","hash":"208d7bd16bd59e0238663e9087b3e40a4c555623","modified":1484812578865},{"_id":"public/2017/01/19/linux/index.html","hash":"7c7329e970ed85f91ce92ba212de3ad7e98c53a1","modified":1484812578865},{"_id":"public/2016/10/18/github-maven-repository/index.html","hash":"6d25a720593ee18d7e915f70921bab8ab597b5ca","modified":1484812578865},{"_id":"public/2016/10/14/java-properties/index.html","hash":"c81f7af80ed3650243e1c979102447259484918d","modified":1484812578865},{"_id":"public/2016/08/09/Spring-Boot-2/index.html","hash":"b31cf39b0516fb8b5ebecadc1225f718b04d3c79","modified":1484812578865},{"_id":"public/2016/08/04/Spring-Boot-1/index.html","hash":"daceeb051edac58ee6fd47fab36f667c6422001c","modified":1484812578865},{"_id":"public/2016/05/26/online-soft/index.html","hash":"cf3a1683a5fa5b69900bd4b377047ac1b44b461a","modified":1484812578865},{"_id":"public/2016/05/20/soft-1/index.html","hash":"d4441634329c250a96b49e04ba8f192c0ac0efd1","modified":1484812578865},{"_id":"public/2016/06/24/倒计时功能参数传递/index.html","hash":"fff725eb7d21dbf563fb4c37737d9629df03fd21","modified":1484812578865},{"_id":"public/2016/05/10/hello-world/index.html","hash":"6ed47186489f68a02a4b4f144a8655654245b4db","modified":1484812578865},{"_id":"public/2016/04/23/test-md/index.html","hash":"b35611813966de426b6d189cfa967762af30fbbf","modified":1484812578865},{"_id":"public/2015/12/24/java00003/index.html","hash":"290637dedab8502412db4bafbd44ef59630bd3c2","modified":1484812578865},{"_id":"public/2015/12/24/java00002/index.html","hash":"318a1948544612f051764a3797dd266069f92def","modified":1484812578865},{"_id":"public/2015/12/23/java00001/index.html","hash":"ddf1cf23370748e9f6a43e9de4d41979bf8c9a0a","modified":1484812578866},{"_id":"public/2015/12/23/spring00001/index.html","hash":"652961644f0c36e327dd6566b5079b88f5cc3206","modified":1484812578866},{"_id":"public/2015/08/19/hexo001/index.html","hash":"4b6ec1523b01c8aca2d0d4d95bb30badadedbe65","modified":1484812578866},{"_id":"public/2015/08/18/dropPic/index.html","hash":"dac380c8d7dd53461ee086be357bcceddfbe2668","modified":1484812578866},{"_id":"public/2015/08/15/hexo-writing/index.html","hash":"0cf6e415bf05043ba48701ffe95cb940f80a6cf2","modified":1484812578866},{"_id":"public/2015/08/02/hexo001/index.html","hash":"32f3d8f7a1e0290ef9f28d6876e11ba5f8bbab67","modified":1484812578866},{"_id":"public/archives/index.html","hash":"40850ba7875038f298165fe77ff45ecee56c6034","modified":1484812578866},{"_id":"public/archives/page/2/index.html","hash":"1820e5540775122b8bf1423d32299bc6db2c985f","modified":1484812578866},{"_id":"public/archives/2015/index.html","hash":"0f20c8d1fb2306e56fedcc3cdea35cbb3e452edf","modified":1484812578866},{"_id":"public/archives/2016/index.html","hash":"ec1a76a1607b51f4fd7c6ca6dbea16fcbc2077ed","modified":1484812578866},{"_id":"public/index.html","hash":"53785c17cb1ead21478ec5b9fa650249eabb85ba","modified":1484812578866},{"_id":"public/page/2/index.html","hash":"76a87b05d79812abbc28f600a01d3ffcb1bcb962","modified":1484812578866},{"_id":"public/BingSiteAuth.xml","hash":"6cbb1fe16d460a2f18b04f5999874a0fe2bb12c4","modified":1484812578923},{"_id":"public/CNAME","hash":"810a3ef016f95a1720dcaeab67b2aaf67ba673cb","modified":1484812578923},{"_id":"public/fbafcf3e755aa4a0b7ac04ea7ccab5ed.txt","hash":"f71d735e3f29edfef7554619b8ecf49a7f8f2511","modified":1484812578923},{"_id":"public/sitemap.xml","hash":"b5eef311f81b151f6a6fb919e2b423b94d3fce1e","modified":1484812578923},{"_id":"public/sogousiteverification.txt","hash":"7c88d98100090dd15833d33e3f7463a74aecfd48","modified":1484812578923},{"_id":"public/images/spring-boot-one/1.png","hash":"7abd2aa5fa67787d46fe688cc8e4a11068fa002d","modified":1484812578923},{"_id":"public/images/spring-boot-two/1.png","hash":"b8df937d27be22aaf69425ecb9426b2d90c44013","modified":1484812578923},{"_id":"public/images/spring-boot-two/4.png","hash":"ca1d625fe7e87b8dbba2871f35ae472f4b10c537","modified":1484812578923},{"_id":"public/images/avatar.jpg","hash":"cc7bd3acd034f0bacb53b0c57e7172d63f8486cf","modified":1484812578923},{"_id":"public/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1484812578924},{"_id":"public/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1484812578924},{"_id":"public/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1484812578924},{"_id":"public/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1484812578924},{"_id":"public/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1484812578924},{"_id":"public/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1484812578924},{"_id":"public/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1484812578924},{"_id":"public/images/favicon.ico","hash":"d535bce0bee527f48c95bda887ae1778ee618e0b","modified":1484812578924},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1484812578924},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1484812578924},{"_id":"public/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1484812578924},{"_id":"public/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1484812578924},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1484812578924},{"_id":"public/images/wechat-qcode.jpg","hash":"eae38ce5fbfb697fa8650d4f66a1d798e3945d6d","modified":1484812578925},{"_id":"public/images/weixin.jpg","hash":"3f5ed507e87f017306f586c31cbdfdc6402ec41b","modified":1484812578925},{"_id":"public/vendors/font-awesome/HELP-US-OUT.txt","hash":"ed80b43dbc7e3009b2f436741b9796df8eb3be02","modified":1484812578925},{"_id":"public/vendors/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1484812578925},{"_id":"public/vendors/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1484812578925},{"_id":"public/vendors/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1484812578925},{"_id":"public/vendors/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1484812578925},{"_id":"public/vendors/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1484812578925},{"_id":"public/vendors/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1484812578925},{"_id":"public/vendors/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1484812578926},{"_id":"public/vendors/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1484812578926},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.woff2","hash":"574ea2698c03ae9477db2ea3baf460ee32f1a7ea","modified":1484812578926},{"_id":"public/vendors/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1484812578926},{"_id":"public/images/java-properties/2.png","hash":"154cecac6b4992b6994fc2904ec31fd88b5f9f33","modified":1484812579832},{"_id":"public/images/java-properties/5.png","hash":"a7ad374f35aee05fa87ed7e56326f6a838b0ef19","modified":1484812579833},{"_id":"public/images/spring-boot-one/3.png","hash":"31cccbe980a3d01162b1938847cd6a977b654588","modified":1484812579838},{"_id":"public/images/spring-boot-two/2.png","hash":"c84d45162db989beb6330750a59d00c6b1248b3d","modified":1484812579838},{"_id":"public/images/zhifubao.jpg","hash":"f06710b32081d1be5bad7c4b82ccd0d487a0c486","modified":1484812579838},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.eot","hash":"b3c2f08e73320135b69c23a3908b87a12053a2f6","modified":1484812579838},{"_id":"public/vendors/font-awesome/fonts/FontAwesome.otf","hash":"0112e96f327d413938d37c1693806f468ffdbace","modified":1484812579838},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.woff","hash":"507970402e328b2baeb05bde73bf9ded4e2c3a2d","modified":1484812579838},{"_id":"public/js/src/bootstrap.js","hash":"39bf93769d9080fa01a9a875183b43198f79bc19","modified":1484812579850},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1484812579850},{"_id":"public/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1484812579850},{"_id":"public/js/src/motion.js","hash":"269414e84df544a4ccb88519f6abae4943db3c67","modified":1484812579850},{"_id":"public/js/src/utils.js","hash":"a3a3375de818964f4cbed4d0e2c2f97ccee7199e","modified":1484812579850},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1484812579850},{"_id":"public/js/src/post-details.js","hash":"10247c78fe933a0cfcaad22a2a03e7a026864461","modified":1484812579850},{"_id":"public/vendors/fastclick/README.html","hash":"4a6074903daa9004301ef30a6fb96556ba3eab60","modified":1484812579850},{"_id":"public/vendors/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1484812579850},{"_id":"public/vendors/fastclick/bower.json","hash":"4dcecf83afddba148464d5339c93f6d0aa9f42e9","modified":1484812579850},{"_id":"public/vendors/jquery_lazyload/CONTRIBUTING.html","hash":"0bd87f225f3d850b299f68efc2ffafce870c0333","modified":1484812579850},{"_id":"public/vendors/jquery_lazyload/bower.json","hash":"ae3c3b61e6e7f9e1d7e3585ad854380ecc04cf53","modified":1484812579850},{"_id":"public/vendors/jquery_lazyload/README.html","hash":"1eeb7414f97f8ac1f91c19eed31ebba591df787d","modified":1484812579850},{"_id":"public/vendors/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1484812579850},{"_id":"public/vendors/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1484812579851},{"_id":"public/vendors/velocity/bower.json","hash":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409","modified":1484812579851},{"_id":"public/vendors/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1484812579852},{"_id":"public/js/src/schemes/pisces.js","hash":"7506e7490c69a200831393c38d25e91c156bd471","modified":1484812579852},{"_id":"public/vendors/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1484812579852},{"_id":"public/vendors/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1484812579852},{"_id":"public/vendors/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1484812579852},{"_id":"public/vendors/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1484812579852},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1484812579852},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1484812579852},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1484812579852},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1484812579852},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1484812579853},{"_id":"public/css/main.css","hash":"b89edd62984a20ba96c056163f040bac852f2caa","modified":1484812579853},{"_id":"public/vendors/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1484812579853},{"_id":"public/vendors/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1484812579853},{"_id":"public/vendors/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1484812579855},{"_id":"public/vendors/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1484812579857},{"_id":"public/vendors/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1484812579858},{"_id":"public/vendors/font-awesome/css/font-awesome.css","hash":"3b87c2560832748cd06f9bfd2fd6ea8edbdae8c7","modified":1484812579858},{"_id":"public/vendors/font-awesome/css/font-awesome.min.css","hash":"05ea25bc9b3ac48993e1fee322d3bc94b49a6e22","modified":1484812579858},{"_id":"public/vendors/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1484812579858},{"_id":"public/vendors/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1484812579858},{"_id":"public/images/java-properties/4.png","hash":"897b5fd943a8a7e4f3b1fac31bc81998c3212685","modified":1484812579858},{"_id":"public/images/spring-boot-two/6.png","hash":"c70aaa548d69af320678039f0f946fa25bbb4842","modified":1484812579858},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.ttf","hash":"27cf1f2ec59aece6938c7bb2feb0e287ea778ff9","modified":1484812579858},{"_id":"public/images/spring-boot-two/3.png","hash":"2da93ccc336f0eeb9ed84fee3910c0edd79b6cff","modified":1484812579903},{"_id":"public/images/spring-boot-two/5.png","hash":"a53ef566c22e564a94c865c660290953e6b46483","modified":1484812579903},{"_id":"public/images/java-properties/3.png","hash":"5aa5e8363ede4512e9e3ba336ae2ff7ace7f7521","modified":1484812580082},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.svg","hash":"f346b8b3df147e4059e1a7d66c52c9a6e1cec3e8","modified":1484812580082},{"_id":"public/images/spring-boot-two/7.png","hash":"cc72479a97a49cbae7d4a228b5bc50db3acb8068","modified":1484812580715},{"_id":"public/images/java-properties/1.png","hash":"213543c8f32df6e557e5d0a29f7b686f5ea34276","modified":1484812580954},{"_id":"public/images/BaiduSafeInput1.1.exe","hash":"064c8e7e5b512248898457a41ff229828d1aa791","modified":1484812581352},{"_id":"public/images/spring-boot-one/2.png","hash":"de45c9362d2075c0b83beb9c7e99178cbd3c5faf","modified":1484812581419}],"Category":[{"name":"java","_id":"ciy431ol30008uco0s4phx2km"},{"name":"Hexo","_id":"ciy431olh000fuco0yqym1chw"},{"name":"Spring Boot","_id":"ciy431ols000quco0rmvk25wq"},{"name":"Java","_id":"ciy431om1000xuco0fl1f76fe"},{"name":"Spring","_id":"ciy431om50014uco0yatygbhe"},{"name":"tips","_id":"ciy431oma001cuco0ey8611rc"},{"name":"maven","_id":"ciy431omi001kuco0o9g26413"},{"name":"软件","_id":"ciy431oms001ruco0jbav5zu5"},{"name":"hexo","_id":"ciy431omv001wuco0iwz9g0si"},{"name":"html","_id":"ciy431omx0020uco0ojdijxtu"},{"name":"linux","_id":"ciy431omy0027uco01s8equgf"}],"Data":[],"Page":[{"layout":"default","_content":"<html>\n    <head>\n         <meta charset=\"UTF-8\" />\n         <title>404</title>                                                                                                                                        \n    </head>\n    <body>\n         <script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\"></script>\n    </body>\n</html>","source":"404.md","raw":"---\nlayout: default\n---\n<html>\n    <head>\n         <meta charset=\"UTF-8\" />\n         <title>404</title>                                                                                                                                        \n    </head>\n    <body>\n         <script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\"></script>\n    </body>\n</html>","date":"2016-05-10T04:46:54.245Z","updated":"2016-05-10T04:46:54.245Z","path":"404.html","title":"","comments":1,"_id":"ciy431oj30000uco0jo3a9cyx","content":"<html><br>    <head><br>         <meta charset=\"UTF-8\"><br>         <title>404</title><br>    </head><br>    <body><br>         <script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\"></script><br>    </body><br></html>","excerpt":"","more":"<html><br>    <head><br>         <meta charset=\"UTF-8\" /><br>         <title>404</title><br>    </head><br>    <body><br>         <script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\"></script><br>    </body><br></html>"},{"_content":"google-site-verification: googlecceda086cc2f933f.html","source":"googlecceda086cc2f933f.html","raw":"google-site-verification: googlecceda086cc2f933f.html","date":"2016-05-20T09:10:59.483Z","updated":"2016-05-20T09:10:43.680Z","path":"googlecceda086cc2f933f.html","title":"","comments":1,"layout":"page","_id":"ciy431oj50001uco0lnfnqcyy","content":"google-site-verification: googlecceda086cc2f933f.html","excerpt":"","more":"google-site-verification: googlecceda086cc2f933f.html"},{"_content":"# dongxiaoxia.github.io\ntest\n","source":"README.md","raw":"# dongxiaoxia.github.io\ntest\n","date":"2016-05-21T17:43:50.032Z","updated":"2016-05-10T04:46:54.245Z","path":"README.html","title":"","comments":1,"layout":"page","_id":"ciy431oj60002uco0kqf3fnda","content":"<h1 id=\"dongxiaoxia-github-io\">dongxiaoxia.github.io</h1><p>test</p>\n","excerpt":"","more":"<h1 id=\"dongxiaoxia-github-io\">dongxiaoxia.github.io</h1><p>test</p>\n"},{"title":"something","layout":"page","date":"2016-04-28T09:27:38.000Z","type":"post","comments":0,"_content":"\n\n### 东小侠正在构思。。。\n\n---\n","source":"about/index.md","raw":"title: something\nlayout: page\ndate: 2016-04-28 17:27:38\ntype: post\ncomments: false\n\n---\n\n\n### 东小侠正在构思。。。\n\n---\n","updated":"2016-05-10T04:46:54.298Z","path":"about/index.html","_id":"ciy431okx0004uco0ariiio5z","content":"<h3 id=\"东小侠正在构思。。。\">东小侠正在构思。。。</h3><hr>\n","excerpt":"","more":"<h3 id=\"东小侠正在构思。。。\">东小侠正在构思。。。</h3><hr>\n"},{"layout":"page","title":"categories","date":"2016-04-28T09:27:38.000Z","type":"categories","comments":0,"tags":null,"_content":"","source":"categories/index.md","raw":"layout: page\ntitle: categories\ndate: 2016-04-28 17:27:38\ntype: categories\ncomments: false\ntags:\n---\n","updated":"2016-05-10T04:46:54.298Z","path":"categories/index.html","_id":"ciy431ol00006uco0rjypnyxh","content":"","excerpt":"","more":""},{"title":"[object Object]","tags":null,"_content":"","source":"scaffolds/draft.md","raw":"title: {{ title }}\ntags:\n---\n","date":"2016-05-10T04:46:54.330Z","updated":"2016-05-10T04:46:54.330Z","path":"scaffolds/draft.html","comments":1,"layout":"page","_id":"ciy431ol9000auco0dprlu0n5","content":"","excerpt":"","more":""},{"title":"[object Object]","date":"2016-05-10T04:46:54.330Z","_content":"","source":"scaffolds/page.md","raw":"title: {{ title }}\ndate: {{ date }}\n---\n","updated":"2016-05-10T04:46:54.330Z","path":"scaffolds/page.html","comments":1,"layout":"page","_id":"ciy431old000cuco0er1b9xke","content":"","excerpt":"","more":""},{"title":"[object Object]","date":"2016-05-10T04:46:54.330Z","tags":null,"_content":"","source":"scaffolds/post.md","raw":"title: {{ title }}\ndate: {{ date }}\ntags:\n---\n","updated":"2016-05-10T04:46:54.330Z","path":"scaffolds/post.html","comments":1,"layout":"page","_id":"ciy431orp002nuco02zrs1onb","content":"","excerpt":"","more":""},{"layout":"search","title":"search","_content":"","source":"search/index.md","raw":"layout: search\ntitle: search\n----","date":"2016-05-10T04:46:54.345Z","updated":"2016-05-10T04:46:54.345Z","path":"search/index.html","comments":1,"_id":"ciy431orq002ouco0ai3zf936","content":"","excerpt":"","more":""},{"title":"something","layout":"page","date":"2016-04-28T09:27:38.000Z","type":"post","comments":0,"_content":"\n\n# 在线工具推荐\n\n\n\n> 能在云端遨游就不要呆在线下，一直是我的一个习惯。下面记录了我觉得很好用的也很有帮助的一些在线工具。    —— [东小侠](http://www.dongxiaoxia.xyz)\n\n- **[ProcessOn](https://www.processon.com/)** ：ProcessOn是一个在线协作绘图平台，为用户提供最强大、易用的作图工具！支持在线创作流程图、BPMN、UML图、UI界面原型设计、iOS界面原型设计等。同时依托于互联网实现了人与人之间的实时协作和共享。\n\n- **[马克飞象](https://maxiang.io/)** :马克飞象是一款专为印象笔记（Evernote）打造的Markdown编辑器，通过精心的设计与技术实现，配合印象笔记强大的存储和同步功能，带来前所未有的书写体验。\n- **[MaHua](http://mahua.jser.me/)** :另外一款在线编辑markdown文档的编辑器。\n- **[谷歌翻译](https://translate.google.cn/)** :能不用百度就不用百度。\n- **[MVN REPOSITORY](http://mvnrepository.com/)** :Maven在线仓库。\n- **[开源中国](http://tool.oschina.net/)** :开源中国社区在线工具。\n- **[tool.lu](http://tool.lu/)** :在线工具 - 程序员的工具箱。\n- **[coolaf.com](http://coolaf.com/)** :在线工具。\n- **[http://grepcode.com](http://grepcode.com)** :源代码搜索。\n- **[https://searchcode.com](https://searchcode.com/)** :源代码搜索。\n- **[http://json.cn](http://json.cn/)** :json解析。\n- **[diffchecker](https://www.diffchecker.com/)** :在线对比文件的不同部分。\n- **[AutoJcode](http://www.autojcode.com/)** :Java Web在线代码生成工具，快速、高效的实现模块的增删改查。\n- **[http://tool.lu/sql](http://tool.lu/sql/ )** :SQL美化工具。\n- **[glot.io](https://glot.io/)** :在线代码运行。\n- **[http://tool.lu/coderunner/](http://tool.lu/coderunner/)** :在线代码运行。\n- **[http://tool.chinaz.com/regex](http://tool.chinaz.com/regex)** :正则测试。\n- **[http://tool.chinaz.com/tools/regexgenerate](http://tool.chinaz.com/tools/regexgenerate)** :正则生成代码。\n- **[http://tool.chinaz.com/Tools/unixtime.aspx](http://tool.chinaz.com/Tools/unixtime.aspx)** :时间戳转换。\n- **[http://tool.chinaz.com/tools/textencrypt.aspx](http://tool.chinaz.com/tools/textencrypt.aspx)** :加密解密。\n- **[http://tool.chinaz.com/Tools/OnlineColor.aspx](http://tool.chinaz.com/Tools/OnlineColor.aspx)** :在线调色板。\n- **[http://tool.oschina.net/commons](http://tool.oschina.net/commons)** :常用对照表。\n\n\n> 这里列举出了一些常用的工具，其实有一些工具链接是主页，进去后可以自己挖掘自己想要的在线工具，这里就不一一列举出来了@_@!\n> 喜欢的话不妨在看看我推荐的一些软件，打破[次元壁](http://www.dongxiaoxia.xyz/2016/05/20/soft-1/)\n\n\n---\n","source":"something/index.md","raw":"title: something\nlayout: page\ndate: 2016-04-28 17:27:38\ntype: post\ncomments: false\n\n---\n\n\n# 在线工具推荐\n\n\n\n> 能在云端遨游就不要呆在线下，一直是我的一个习惯。下面记录了我觉得很好用的也很有帮助的一些在线工具。    —— [东小侠](http://www.dongxiaoxia.xyz)\n\n- **[ProcessOn](https://www.processon.com/)** ：ProcessOn是一个在线协作绘图平台，为用户提供最强大、易用的作图工具！支持在线创作流程图、BPMN、UML图、UI界面原型设计、iOS界面原型设计等。同时依托于互联网实现了人与人之间的实时协作和共享。\n\n- **[马克飞象](https://maxiang.io/)** :马克飞象是一款专为印象笔记（Evernote）打造的Markdown编辑器，通过精心的设计与技术实现，配合印象笔记强大的存储和同步功能，带来前所未有的书写体验。\n- **[MaHua](http://mahua.jser.me/)** :另外一款在线编辑markdown文档的编辑器。\n- **[谷歌翻译](https://translate.google.cn/)** :能不用百度就不用百度。\n- **[MVN REPOSITORY](http://mvnrepository.com/)** :Maven在线仓库。\n- **[开源中国](http://tool.oschina.net/)** :开源中国社区在线工具。\n- **[tool.lu](http://tool.lu/)** :在线工具 - 程序员的工具箱。\n- **[coolaf.com](http://coolaf.com/)** :在线工具。\n- **[http://grepcode.com](http://grepcode.com)** :源代码搜索。\n- **[https://searchcode.com](https://searchcode.com/)** :源代码搜索。\n- **[http://json.cn](http://json.cn/)** :json解析。\n- **[diffchecker](https://www.diffchecker.com/)** :在线对比文件的不同部分。\n- **[AutoJcode](http://www.autojcode.com/)** :Java Web在线代码生成工具，快速、高效的实现模块的增删改查。\n- **[http://tool.lu/sql](http://tool.lu/sql/ )** :SQL美化工具。\n- **[glot.io](https://glot.io/)** :在线代码运行。\n- **[http://tool.lu/coderunner/](http://tool.lu/coderunner/)** :在线代码运行。\n- **[http://tool.chinaz.com/regex](http://tool.chinaz.com/regex)** :正则测试。\n- **[http://tool.chinaz.com/tools/regexgenerate](http://tool.chinaz.com/tools/regexgenerate)** :正则生成代码。\n- **[http://tool.chinaz.com/Tools/unixtime.aspx](http://tool.chinaz.com/Tools/unixtime.aspx)** :时间戳转换。\n- **[http://tool.chinaz.com/tools/textencrypt.aspx](http://tool.chinaz.com/tools/textencrypt.aspx)** :加密解密。\n- **[http://tool.chinaz.com/Tools/OnlineColor.aspx](http://tool.chinaz.com/Tools/OnlineColor.aspx)** :在线调色板。\n- **[http://tool.oschina.net/commons](http://tool.oschina.net/commons)** :常用对照表。\n\n\n> 这里列举出了一些常用的工具，其实有一些工具链接是主页，进去后可以自己挖掘自己想要的在线工具，这里就不一一列举出来了@_@!\n> 喜欢的话不妨在看看我推荐的一些软件，打破[次元壁](http://www.dongxiaoxia.xyz/2016/05/20/soft-1/)\n\n\n---\n","updated":"2016-05-26T08:42:51.363Z","path":"something/index.html","_id":"ciy431ors002puco02s5ay89e","content":"<h1 id=\"在线工具推荐\">在线工具推荐</h1><blockquote>\n<p>能在云端遨游就不要呆在线下，一直是我的一个习惯。下面记录了我觉得很好用的也很有帮助的一些在线工具。    —— <a href=\"http://www.dongxiaoxia.xyz\">东小侠</a></p>\n</blockquote>\n<ul>\n<li><p><strong><a href=\"https://www.processon.com/\" target=\"_blank\" rel=\"external\">ProcessOn</a></strong> ：ProcessOn是一个在线协作绘图平台，为用户提供最强大、易用的作图工具！支持在线创作流程图、BPMN、UML图、UI界面原型设计、iOS界面原型设计等。同时依托于互联网实现了人与人之间的实时协作和共享。</p>\n</li>\n<li><p><strong><a href=\"https://maxiang.io/\" target=\"_blank\" rel=\"external\">马克飞象</a></strong> :马克飞象是一款专为印象笔记（Evernote）打造的Markdown编辑器，通过精心的设计与技术实现，配合印象笔记强大的存储和同步功能，带来前所未有的书写体验。</p>\n</li>\n<li><strong><a href=\"http://mahua.jser.me/\" target=\"_blank\" rel=\"external\">MaHua</a></strong> :另外一款在线编辑markdown文档的编辑器。</li>\n<li><strong><a href=\"https://translate.google.cn/\" target=\"_blank\" rel=\"external\">谷歌翻译</a></strong> :能不用百度就不用百度。</li>\n<li><strong><a href=\"http://mvnrepository.com/\" target=\"_blank\" rel=\"external\">MVN REPOSITORY</a></strong> :Maven在线仓库。</li>\n<li><strong><a href=\"http://tool.oschina.net/\" target=\"_blank\" rel=\"external\">开源中国</a></strong> :开源中国社区在线工具。</li>\n<li><strong><a href=\"http://tool.lu/\" target=\"_blank\" rel=\"external\">tool.lu</a></strong> :在线工具 - 程序员的工具箱。</li>\n<li><strong><a href=\"http://coolaf.com/\" target=\"_blank\" rel=\"external\">coolaf.com</a></strong> :在线工具。</li>\n<li><strong><a href=\"http://grepcode.com\" target=\"_blank\" rel=\"external\">http://grepcode.com</a></strong> :源代码搜索。</li>\n<li><strong><a href=\"https://searchcode.com/\" target=\"_blank\" rel=\"external\">https://searchcode.com</a></strong> :源代码搜索。</li>\n<li><strong><a href=\"http://json.cn/\" target=\"_blank\" rel=\"external\">http://json.cn</a></strong> :json解析。</li>\n<li><strong><a href=\"https://www.diffchecker.com/\" target=\"_blank\" rel=\"external\">diffchecker</a></strong> :在线对比文件的不同部分。</li>\n<li><strong><a href=\"http://www.autojcode.com/\" target=\"_blank\" rel=\"external\">AutoJcode</a></strong> :Java Web在线代码生成工具，快速、高效的实现模块的增删改查。</li>\n<li><strong><a href=\"http://tool.lu/sql/\" target=\"_blank\" rel=\"external\">http://tool.lu/sql</a></strong> :SQL美化工具。</li>\n<li><strong><a href=\"https://glot.io/\" target=\"_blank\" rel=\"external\">glot.io</a></strong> :在线代码运行。</li>\n<li><strong><a href=\"http://tool.lu/coderunner/\" target=\"_blank\" rel=\"external\">http://tool.lu/coderunner/</a></strong> :在线代码运行。</li>\n<li><strong><a href=\"http://tool.chinaz.com/regex\" target=\"_blank\" rel=\"external\">http://tool.chinaz.com/regex</a></strong> :正则测试。</li>\n<li><strong><a href=\"http://tool.chinaz.com/tools/regexgenerate\" target=\"_blank\" rel=\"external\">http://tool.chinaz.com/tools/regexgenerate</a></strong> :正则生成代码。</li>\n<li><strong><a href=\"http://tool.chinaz.com/Tools/unixtime.aspx\" target=\"_blank\" rel=\"external\">http://tool.chinaz.com/Tools/unixtime.aspx</a></strong> :时间戳转换。</li>\n<li><strong><a href=\"http://tool.chinaz.com/tools/textencrypt.aspx\" target=\"_blank\" rel=\"external\">http://tool.chinaz.com/tools/textencrypt.aspx</a></strong> :加密解密。</li>\n<li><strong><a href=\"http://tool.chinaz.com/Tools/OnlineColor.aspx\" target=\"_blank\" rel=\"external\">http://tool.chinaz.com/Tools/OnlineColor.aspx</a></strong> :在线调色板。</li>\n<li><strong><a href=\"http://tool.oschina.net/commons\" target=\"_blank\" rel=\"external\">http://tool.oschina.net/commons</a></strong> :常用对照表。</li>\n</ul>\n<blockquote>\n<p>这里列举出了一些常用的工具，其实有一些工具链接是主页，进去后可以自己挖掘自己想要的在线工具，这里就不一一列举出来了@_@!<br>喜欢的话不妨在看看我推荐的一些软件，打破<a href=\"http://www.dongxiaoxia.xyz/2016/05/20/soft-1/\">次元壁</a></p>\n</blockquote>\n<hr>\n","excerpt":"","more":"<h1 id=\"在线工具推荐\">在线工具推荐</h1><blockquote>\n<p>能在云端遨游就不要呆在线下，一直是我的一个习惯。下面记录了我觉得很好用的也很有帮助的一些在线工具。    —— <a href=\"http://www.dongxiaoxia.xyz\">东小侠</a></p>\n</blockquote>\n<ul>\n<li><p><strong><a href=\"https://www.processon.com/\">ProcessOn</a></strong> ：ProcessOn是一个在线协作绘图平台，为用户提供最强大、易用的作图工具！支持在线创作流程图、BPMN、UML图、UI界面原型设计、iOS界面原型设计等。同时依托于互联网实现了人与人之间的实时协作和共享。</p>\n</li>\n<li><p><strong><a href=\"https://maxiang.io/\">马克飞象</a></strong> :马克飞象是一款专为印象笔记（Evernote）打造的Markdown编辑器，通过精心的设计与技术实现，配合印象笔记强大的存储和同步功能，带来前所未有的书写体验。</p>\n</li>\n<li><strong><a href=\"http://mahua.jser.me/\">MaHua</a></strong> :另外一款在线编辑markdown文档的编辑器。</li>\n<li><strong><a href=\"https://translate.google.cn/\">谷歌翻译</a></strong> :能不用百度就不用百度。</li>\n<li><strong><a href=\"http://mvnrepository.com/\">MVN REPOSITORY</a></strong> :Maven在线仓库。</li>\n<li><strong><a href=\"http://tool.oschina.net/\">开源中国</a></strong> :开源中国社区在线工具。</li>\n<li><strong><a href=\"http://tool.lu/\">tool.lu</a></strong> :在线工具 - 程序员的工具箱。</li>\n<li><strong><a href=\"http://coolaf.com/\">coolaf.com</a></strong> :在线工具。</li>\n<li><strong><a href=\"http://grepcode.com\">http://grepcode.com</a></strong> :源代码搜索。</li>\n<li><strong><a href=\"https://searchcode.com/\">https://searchcode.com</a></strong> :源代码搜索。</li>\n<li><strong><a href=\"http://json.cn/\">http://json.cn</a></strong> :json解析。</li>\n<li><strong><a href=\"https://www.diffchecker.com/\">diffchecker</a></strong> :在线对比文件的不同部分。</li>\n<li><strong><a href=\"http://www.autojcode.com/\">AutoJcode</a></strong> :Java Web在线代码生成工具，快速、高效的实现模块的增删改查。</li>\n<li><strong><a href=\"http://tool.lu/sql/\">http://tool.lu/sql</a></strong> :SQL美化工具。</li>\n<li><strong><a href=\"https://glot.io/\">glot.io</a></strong> :在线代码运行。</li>\n<li><strong><a href=\"http://tool.lu/coderunner/\">http://tool.lu/coderunner/</a></strong> :在线代码运行。</li>\n<li><strong><a href=\"http://tool.chinaz.com/regex\">http://tool.chinaz.com/regex</a></strong> :正则测试。</li>\n<li><strong><a href=\"http://tool.chinaz.com/tools/regexgenerate\">http://tool.chinaz.com/tools/regexgenerate</a></strong> :正则生成代码。</li>\n<li><strong><a href=\"http://tool.chinaz.com/Tools/unixtime.aspx\">http://tool.chinaz.com/Tools/unixtime.aspx</a></strong> :时间戳转换。</li>\n<li><strong><a href=\"http://tool.chinaz.com/tools/textencrypt.aspx\">http://tool.chinaz.com/tools/textencrypt.aspx</a></strong> :加密解密。</li>\n<li><strong><a href=\"http://tool.chinaz.com/Tools/OnlineColor.aspx\">http://tool.chinaz.com/Tools/OnlineColor.aspx</a></strong> :在线调色板。</li>\n<li><strong><a href=\"http://tool.oschina.net/commons\">http://tool.oschina.net/commons</a></strong> :常用对照表。</li>\n</ul>\n<blockquote>\n<p>这里列举出了一些常用的工具，其实有一些工具链接是主页，进去后可以自己挖掘自己想要的在线工具，这里就不一一列举出来了@_@!<br>喜欢的话不妨在看看我推荐的一些软件，打破<a href=\"http://www.dongxiaoxia.xyz/2016/05/20/soft-1/\">次元壁</a></p>\n</blockquote>\n<hr>\n"},{"layout":"tags","title":"tags","type":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"layout: tags\ntitle: tags\ntype: \"tags\"\ncomments: false\n---","date":"2016-05-10T04:46:54.345Z","updated":"2016-05-10T04:46:54.345Z","path":"tags/index.html","_id":"ciy431ors002quco0bb7wi1g0","content":"","excerpt":"","more":""},{"_content":"<!DOCTYPE HTML>\n<html>\n<head>\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=10;IE=9;IE=8;IE=7;IE=EDGE\">\n<meta http-equiv=\"Cache-Control\" content=\"no-siteapp\" />\n<link rel=\"alternate\" media=\"handheld\" href=\"#\" />\n<meta charset=\"utf-8\">\n<title>简历</title>\n</head>\n<body>\n<div id=\"body\">\n    <div id=\"container\">\n<style type=\"text/css\">\nbody{margin: 0;padding: 0;font: 14px/22px \"微软雅黑\",\"宋体\",Arial;color: #333;word-wrap: break-word;}\n.clearfixs:before,.clearfixs:after{content:\"\";display:table;}\n.clearfixs:after{display:block;clear:both;}\n.clearfixs{*zoom:1;}\ninput[type=\"text\"]:focus{border:1px solid #32dbb3;}\n.mr_created input[type=\"text\"]:focus{border-width:1px;}\n.mr_content input[type=\"text\"]:focus{border:none;}\n.mr_created input{border:none;}\na:hover{color:#00b88d;}\n.fl{float:left;}\nh1, h2, h3, h4, h5 {\nfont-weight: normal;\n}\n/* 为创建在线简历 */\n.dn{display:none;}\n.mr_created input,.mr_created textarea{font-size:14px;}\n.mr_uncreate *{list-style:none;}\n.mr_uncreate *,.mr_created *{margin:0;padding:0;}\n.mr_created .city_s .xl_list ,.mr_uncreate .city_s .xl_list{height:130px;}\n.mr_created .mr_selCity,.mr_uncreate .mr_selCity{top:0;}\n.mr_created .mr_selCity ul.mr_province ul,.mr_uncreate .mr_selCity ul.mr_province ul{width:287px;height:110px;padding:10px;}\n.mr_created #mr_mr_head *,.mr_created .mr_myresume_r *{list-style:none;}\n.mr_created #mr_mr_head{margin-bottom:0;}\n.mr_created .mr_baseinfo{border-bottom:none;border-bottom-right-radius:0px;border-bottom-left-radius:0px;}\n.mr_created .mr_infoed{margin-bottom:0px;}\n.mr_myresume_l{float:left;width:702px;margin-bottom:20px;}\n.mr_created #mr_mr_head{margin-bottom:0;}\n.mr_created #mr_mr_head *,.mr_created .mr_myresume_r *{list-style:none;}\n\n.mr_w604{width:604px;margin:0 auto;}\n.mr_p_name{height:40px;line-height:38px;margin-bottom:8px;}\n.mr_name{display:block;height:40px;width:468px;margin:0 auto;line-height:40px;font-size:30px;color:#333;text-align:center;}\n.mr_intro{display:block;color:#333;text-align:center;margin:0 auto;}\n.mr_p_introduce .mr_intro{font-size:16px;width:468px;line-height:26px;}\n.mr_p_introduce .mr_intro_grey{color:#bdbdbd;font-style: italic;}\n.mr_active{background-color: #fefef2;}\n/* 未创建在线 基本信息 */\n.mr_myresume_l input{margin:0;}\n.form_wrap{position:relative;cursor:pointer;width:396px;height:46px;border:1px solid #f1f3e9;background-color:#fff;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;margin-bottom:9px;}\n.form_wrap .mr_button{text-align:left;padding-left:17px;width:327px;height:46px;background-color:#fff;}\n.form_wrap .mr_input{width:327px;padding:0 0 0 17px;border:none;height:46px;}\n.form_wrap .mr_input:focus{border:none;}\n.form_wrap_y .mr_button{width:150px;}\n.mr_sj{position:absolute;right:18px;top:20px;border: 6px solid #fff;border-color: #d3d3d3 transparent transparent;display: block;font-size: 0px;height: 0;width: 0;}\n\n.form_wrap_y{width:188px;}\n\n/*已创建在线简历 jason 2014/9/8*/\n.mr_p_introduce{min-height:34px;line-height:32px;margin-bottom:4px;}\n/*在线简历页面主内容区域*/\n.mr_myresume_l .mr_content{padding-top:26px;background-color: #fafafa;border: 1px solid #f2f2f2;border-bottom:2px solid #f2f2f2;border-top:none;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;}\n.mr_moudle_head{margin-bottom:23px;}\n.mr_moudle_head .mr_head_l{float:left;}\n.mr_moudle_head .mr_head_r{float:right;margin-top:3px;cursor:pointer;}\n.mr_title span{vertical-align:middle;display:inline-block;}\n.mr_title .mr_title_l{width:230px;height:0;border-top:1px solid #ededed;}\n.mr_title .mr_title_c{font-size:18px;padding:6px 24px;text-align:center;background-color:#eee;-moz-border-radius:26px;-webkit-border-radius:26px;border-radius:26px;margin:0 13px;}\n.mr_title .mr_title_r{width:152px;height:0;border-top:1px solid #ededed;}\n.mr_moudle_head .mr_head_r *{vertical-align:middle;}\n.mr_moudle_head .mr_head_r em{font-size:16px;color:#00b88d;}\n.mr_moudle_head .mr_head_r i{display: inline-block;width: 15px;height: 15px;background: url(http://www.lagou.com/images/myresume/icons_mr.png) -5px -69px no-repeat;margin-right:6px;}\n.mr_moudle_content{padding-bottom:21px;color:#555;font-size:14px;} /* 块  margin-bottom 48*/\n.mr_moudle_content .mr_content_l{float:left;max-width: 445px;}\n.mr_moudle_content .mr_content_r{float:right;}\n.mr_content_l .l1{float:left;margin-right:10px;}\n.mr_content_l .l2{position: relative;float: left;padding-top: 10px;max-width: 380px;}\n.mr_content_l .l2 a.projectTitle{/* position:relative; */font-size:16px;color:#555;text-decoration:none}\n.mr_content_l .l2 a.projectTitle:hover{color:#00b88d}\n.mr_content_l .l2 a.nourl{cursor:default;}\n.mr_content_l .l2 a.nourl:hover{color:#555;}\n.mr_content_l .l2 p{color:#999;}\n.mr_content_l .l2 a.projectTitle span{position:absolute;top:14px;right:-18px;width:12px;height:12px;background:url(http://www.lagou.com/images/myresume/icons_mr.png) -95px -197px no-repeat;}\n.mr_content_l .l1 img{width:46px;height:46px;border:2px solid #eee;}\n.mr_content_l .l2 h4{font-size:16px;}\n.mr_content_l .l2 span{color:#999;display:block;}\n.mr_c_r_t{text-align:right;margin:5px 0 2px 0;*margin-top:8px;float:none;}\n.mr_content_r span{color:#999;}\n.mr_content_m{padding:14px 0 0 0px;*padding-left:1px;color:#555;}\n.mr_jobe_list{padding-bottom:10px;}\n.mr_wo_show{padding:13px 18px 46px 42px;background-color:#00b88d;margin-bottom:38px;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;}\n.mr_wo_show p{line-height:26px;color:#fff;}\n.mr_self_site{color:#fff;margin-bottom:8px;font-size:24px;}\n.mr_self_sitelink {font-weight:bold;text-decoration:none;/* display:inline-block;width:558px; */word-break:break-all;color: #fff;}\n.mr_self_sitelink:hover{color:#fff;}\n.mr_wo_show .mr_c_r_t em{color:#50f9d2;}\n.mr_wo_show .mr_c_r_t i{background:url(http://www.lagou.com/images/myresume/icons_mr.png) -131px -115px no-repeat;}\n.wh43{width:100%;}\n.mr_work_upload .l2 span{display:inline-block;}\n.mr_wu_con .mr_work_title{margin:0 6px;}\n.mr_wu_show{margin-bottom:20px;}\n.mr_wu_show .mr_c_r_t{padding-top:4px;}\n.mr_wu_con .l2 span{color:#333;}\n.mr_wu_show .mr_wu_con_m{color:#555;}\n.mr_self_l{position:relative;height:81px;}\n.mr_self_l img{position:absolute;left:4px;width:73px;height:73px;top:8px;}\n.mr_self_l i{position:absolute;z-index:2;width:81px;height:81px;background:url(http://www.lagou.com/images/myresume/mr_txs.png) no-repeat;} \n.mr_moudle_content .mr_self_l{float:left;width:100px;padding-top:5px;}\n.mr_moudle_content .mr_self_r{float:left;width:504px;color:#555;line-height:26px;}\n.mr_jobtype_li{width:128px;}\n.mr_sns .sns10 span{min-width:56px;}\n.mr_jobtype_li i{width:17px;height:17px;background-position:-93px -247px;}\n/* \n.mr_skill_con{padding-left:20px;margin-bottom:18px;}\n.mr_skill_con span{vertical-align:middle;display:inline-block;}\n.mr_skill_con .mr_skill_name{width:90px;height:22px;text-align:right;margin-right:13px;word-wrap:break-word;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;}\n.mr_skill_con .mr_skill_name:after{\ncontent:\"...\";\n}\n.mr_skill_con .mr_skill_plan{position:relative;width:420px;height:8px;border-radius:4px;background-color:#eee;margin-right:21px;overflow:hidden;}\n.mr_skill_plan em{position:absolute;left:0;top:0;display:inline-block;height:8px;width:370px;background-color:#00b88d;border-radius:4px;overflow:hidden;} */\n.mr_skill_con{padding-left:16px;margin-bottom:14px;position:relative;}\n.mr_skill_con span{vertical-align:middle;display:inline-block;}\n.mr_skill_con .mr_skill_name{width:90px;height:22px;text-align:right;margin-right:13px;word-wrap:break-word;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;}\n/* .mr_skill_con .mr_skill_name:after{\ncontent:\"...\";\n} */\n.mr_skill_con .mr_skill_plan{position:relative;width:410px;height:8px;border-radius:4px;background-color:#eee;margin-right:21px;overflow:hidden;}\n.mr_skill_plan em{position:absolute;left:0;top:0;display:inline-block;height:8px;background-color:#00b88d;border-radius:4px;overflow:hidden;}\n.mr_skill_con .mr_skill_delete{width:13px;height:13px;background:url(http://www.lagou.com/images/myresume/skill_delete.png) center top no-repeat;cursor:pointer;}\n.mr_moudle_content .mr_skill_add{padding-left:125px;*padding-left:104px;color:#999999;font-size:16px;}\n.mr_skill_add span{display:inline-block;width:88px;text-indent:22px;background:url(http://www.lagou.com/images/myresume/skill_add.png) left 3px no-repeat;cursor:pointer;}\n\n.mr_title .cust_title{position:absolute;top:-4px;left: 50%;padding:0 13px;background-color:#FAFAFA;}\n\n.cust_title span{padding:6px 24px;text-align: center;font-size: 18px;background-color: #eee;-moz-border-radius: 26px;-webkit-border-radius: 26px;border-radius: 26px;}\n.mr_skill_con .mr_skill_circle{display:inline-block;width:20px;height:19px;position:absolute;left:122px;top:3px;background:url(http://www.lagou.com/images/myresume/skill_circle.png) no-repeat center top;}\n.mr_skill_circle em{display:inline-block;width:29px;height:23px;position:absolute;right: -4px;top: -22px;text-align: center;line-height:18px;padding: 0px;color: #ffffff;background:url(http://www.lagou.com/images/myresume/skill_img.png) center top no-repeat;font-size:10px;}\n\n\n/****一句话介绍****/\n.mrcenter{margin:0 auto 20px auto; float:none;}\n\n\n\n/*底部求职者职场状态*/\n.mr_self_state{position:relative;height:94px;background-color:#f6f6f6;color:#555;font-size:14px;text-align: center;}\n.mr_self_state *{list-style:none;}\n.mr_self_state .form_wrap{position:absolute;top:50%;left:50%;margin:-24px 0 0 -135px;border:1px solid #eaeced;width:270px;}\n.mr_self_state .mr_button{width:240px;}\n.mr_self_state .select_color{border-color:#32dbb3;}\n.mr_self_state .xl_list{width:270px;}\n\n\n\n.m_portrait{width:100%;height:135px;position:relative;z-index:2;background:url(http://www.lagou.com/images/myresume/head_bg.jpg) no-repeat;}\n.m_portrait .opa{position:absolute;}\n.mr_wo_preview ol,.mr_wu_con_m ol,.mr_self_r ol,.mr_expjob_content ol,.mr_wo_preview ul,.mr_wu_con_m ul,.mr_self_r ul,.mr_expjob_content ul{padding-left:19px;}\n.olpf ol,.olpf ul{padding-left:19px;}\n.mr_wo_preview {color:#fff;}\n.mr_preview .mr_title .mr_title_r{width:228px;}\n.resume_status {background: #f6f6f6;border: none!important;text-align: center;margin: -12px 0 0 -135px!important;cursor: default;}\n.m_portrait div {\n\t/* background: url(http://www.lagou.com/images/profile_cover.png) no-repeat;\n\twidth: 120px;\n\theight: 120px;\n\tposition: absolute;\n\tz-index: 5; */\n\twidth:200px;\n\theight:132px;\n\tposition:absolute;\n\tleft:41%;\n\ttop:39px;\n\tz-index:100;\n}\n</style>\n\t<div class=\"clearfixs mr_created mr_preview\">\n\t\t<div class=\"mr_myresume_l mrcenter\">\n\t\t\n\t\t\t<!--                  工作经历                                                 -->\n\t\t\t<div class=\"mr_content\">\n\t\t\t\t<div class=\"mr_w604\">\n\t\t\t\t\t<div id=\"workExperience\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\"> 工作经历  </span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t<div class=\"list_show\">\n\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>广州**信息技术有限公司</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>java工程师</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.03 -- 至今</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>广州美络信息科技有限公司</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>java工程师</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2015.03 -- 2016.03</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>广州阳光耐特电子有限公司</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>java工程师</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2014.10 -- 2015.03</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"educationalBackground\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">教育经历</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<!-- <div class=\"mr_head_r\">\n\t\t\t\t\t\t\t\t\t<i></i><em>添加</em>\n\t\t\t\t\t\t\t\t</div> -->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t<div class=\"list_show\">\t\n\t\t\t\t\t\t\t\t<div class=\"clearfixs mb46 mr_jobe_list\" style=\"padding-bottom:0px;\" >\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l1\">\n\t\t\t\t\t\t\t\t\t\t\t<!-- 学校图片后台还没有给（待确认是否没有图片就不展示），参照工作经历 -->\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"http://www.lagou.com/images/schoolBadge/875fc22f853842579608bff745cf3f1f.jpeg\"/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>五邑大学</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>本科 · 电子信息工程</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"projectExperience\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">项目经验</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\" id=\"projectList\">\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle\"  target=\"_blank\" href=\"http://www.goaleasy.cn/\"><span></span>目标易</a>\n\t\t\t\t\t\t\t\t\t\t\t<p>java工程师</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2015.07 -- 2016.03</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>1.项目描述：&quot;目标易&quot;是基于移动即时通讯并且适用于IOS、Android、PC等终端的系统，旨在满足集团型企业内部员工之间的移动化沟通需求，实现更便捷、顺畅的办公交流；另外，“目标易”支持现有业务系统功能的整合，构建基于移动互联网的企业“微应用”中心，扩大电子政务的实际利用范围。</p>\n<p>2.使用技术： Spring SpringMVC Mybatis</p>\n<p>3.责任描述：1）负责服务器端的用户、企业、部门等组织模块的API接口的开发</p>\n<p>2）负责“外勤管理”、“企业日程”、“通知公告”、“企业黄页”、“电子便签”、“任务协作”等微应用的系统设计、后台代码编写、测试。</p>\n<p>3）与前端人员协作完成部分前端模块功能。</p>\n<p>4）参与系统需求分析、系统设计、文档编写。</p>\n<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">基于大集中的企业级非结构数据管理平台</a>\n\t\t\t\t\t\t\t\t\t\t\t<p>java工程师</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2015.03 -- 2015.10</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>1.项目描述：面对电力企业非结构化数据分散存储在各个业务系统和大量的个人桌面，从而造成难以管理、利用乏力的现状，项目提出在业务系统省级大集中部署模式下构建分布式非结构数据管理平台的思路，将业务系统中的非结构文档剥离和个人桌面的非结构文档自动归集,采用省地两级存储和集中统一管理的方式，结合数据采集获取、数据二维管理及数据分布式传输等技术手段，为企业非结构化数据统一管理、快速访问、减轻骨干网传输压力、大数据分析利用应用提供解决方案。</p>\n<p>2.使用技术： J2EE Mybatis EXT JS Jquery Lucene Groovy FreeMaker MYSQL</p>\n<p>3.责任描述：1）负责“业务模拟系统”中“客户附件”、“服务发票”、“服务合同”三个模拟场景的模块开发、维护。</p>\n<p>2）在管理平台上负责“非结构借阅”、“非结构收藏夹”、“非结构邮件同步”、“元数据管理”、“全文检索”等模块的主要代码编写。</p>\n<p>3）对系统进行测试，负责对整个系统中出现的bug进行修复。</p>\n<p>3）参与系统需求分析、系统设计、文档编写、系统维护。</p>\n<p>4）去跟客户联系交流，讲解项目功能，部署软件环境。</p>\n<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">微信开发</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.03 -- 至今</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>负责公司微信服务号的开发与后台维护以及微信平台运营活动开发</p>\n\t\t\t\t\t\t\t\t\t<p style=\"color:#00b88d\">Coding</p>\n\t\t\t\t\t\t\t\t\t<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">运营平台</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.04-- 2016.06</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>一个医生与专家沟通的病例管理平台，负责大部分模块的开发</p>\n\t\t\t\t\t\t\t\t\t<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">官网首页</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.05-- 2016.06</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>都成前端大神了-_-</p>\n\t\t\t\t\t\t\t\t\t<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\"> \n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">挂号网公众号开发</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.06-- 2016.07</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>公众号项目整体开发</p>\n\t\t\t\t\t\t\t\t\t<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--                 作品展示                                                -->\n\t\t\t\t\t<div id=\"worksShow\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">作品展示</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t\t<div class=\"mr_work_online\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_show\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_c_r_t\">\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_self_site\">\n                                            <a class=\"mr_self_sitelink\" href=\"http://t.cn/RGIuWYq\" target=\"_blank\">http://t.cn/RGIuWYq</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_preview olpf\"><p>一个基于Spring Security 的权限管理系统雏形！</p></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_work_online\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_show\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_c_r_t\">\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_self_site\">\n                                            <a class=\"mr_self_sitelink\" href=\"http://t.cn/RGI34vz\" target=\"_blank\">http://t.cn/RGI34vz</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_preview olpf\"><p>一个基于Lucene 的全文检索系统！</p></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_work_online\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_show\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_c_r_t\">\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_self_site\">\n                                            <a class=\"mr_self_sitelink\" href=\"http://t.cn/RGMMe5C\" target=\"_blank\">http://t.cn/RGMMe5C</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_preview olpf\"><p>目标易</p></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"mr_work_upload\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_show\"> \n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_t\">\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"http://www.lagou.com/image2/M00/2A/69/CgqLKVbBgWSAYYSrAAFi9GJHjIk377.png\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\t<img class=\"wh43\" src=\"http://www.lagou.com/image2/M00/2A/69/CgqLKVbBgXGAA_QyAAEPYecTtcY416.png\" />\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_con\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>[</span><span class=\"mr_work_title\">基于大集中的企业级非结构数据管理平台</span><span>]</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_con_m olpf\">\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t\t<!--               自我描述                                             -->\n\t\t\t\t\t<div id=\"selfDescription\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">自我描述</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_self_l\">\n\t\t\t\t\t\t\t\t\t<!-- 自我描述头像为基本信息页面上传的头像，稍后和后台确认这个 -->\n\t\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t\t\t<img src=\"http://www.lagou.com/i/image/M00/03/54/Cgp3O1a192CADfftAADkLf41PVk149.jpg\" alt=\"陈文东\"/>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_self_r\">\n\t\t\t\t\t\t\t\t\t<p>一.我认为值得称道的工作细节是脚踏实地。细节决定成败，脚踏实地学好每个步骤、领会涵义，才能减少出错、拥有全盘考虑的能力。</p>\n<p>二.我曾经克服过的最大挑战是一个人在没有同事的教导，没有公司预先带领，出差到另外一个城市去客户现场跟客户对接。去跟客户联系交流，部署软件环境，讲解项目功能，完成出差任务。这考验了我的能力，平时学到的沟通技巧、对项目的整体认识以及临场反应等。</p>\n<p>三.对于一个热爱编程的家伙，利用工作外的业余时间，曾在Github上连击了47天的记录。</p>\n<p>四.我找工作时最看重技术氛围这方面，作为一名热爱编程的程序员，我对于各种技术非常感兴趣，希望能在一个充满技术氛围的地方学习到更多的技术，认识更多的大牛前辈。</p> \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"skillsAssess\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">技能评价</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"java\">java</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"spring\">spring</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"web\">web</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"mysql、oracle\">mysql、oracle</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"mybatis\">mybatis</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t</div><!-- end  mr_w604 -->\n\t\t\t\t\n\t\t\t\t<div class=\"mr_self_state\">\n   \t \t\t\t\t<div class=\"form_wrap mr_self_s resume_status\">\n\t\t\t\t\t\t·&nbsp;简历就放着吧，万一哪个Boss看中呢&nbsp;·\t\t\t\t   \t \t\t\t\t\n\t   \t \t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t  </div>\n\t    </div> \n\t  </div><!-- end #container -->\n\t</div><!-- end #body -->\n\t<script>\n\t(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p=\"1.9.1\",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,w=/\\S+/g,T=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,N=/^(?:(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,C=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,k=/^[\\],:{}\\s]*$/,E=/(?:^|:|,)(?:\\s*\\[)+/g,S=/\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,A=/\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)/g,j=/^-ms-/,D=/-([\\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||\"load\"===e.type||\"complete\"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener(\"DOMContentLoaded\",H,!1),e.removeEventListener(\"load\",H,!1)):(o.detachEvent(\"onreadystatechange\",H),e.detachEvent(\"onload\",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if(\"string\"==typeof e){if(i=\"<\"===e.charAt(0)&&\">\"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:\"\",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for(\"boolean\"==typeof s&&(c=s,s=arguments[1]||{},u=2),\"object\"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger(\"ready\").off(\"ready\"))}},isFunction:function(e){return\"function\"===b.type(e)},isArray:Array.isArray||function(e){return\"array\"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?l[m.call(e)]||\"object\":typeof e},isPlainObject:function(e){if(!e||\"object\"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,\"constructor\")&&!y.call(e.constructor.prototype,\"isPrototypeOf\"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||\"string\"!=typeof e)return null;\"boolean\"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:\"string\"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,\"@\").replace(A,\"]\").replace(E,\"\")))?Function(\"return \"+n)():(b.error(\"Invalid JSON: \"+n),t)},parseXML:function(n){var r,i;if(!n||\"string\"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,\"text/xml\")):(r=new ActiveXObject(\"Microsoft.XMLDOM\"),r.async=\"false\",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName(\"parsererror\").length||b.error(\"Invalid XML: \"+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,\"ms-\").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call(\"\\ufeff\\u00a0\")?function(e){return null==e?\"\":v.call(e)}:function(e){return null==e?\"\":(e+\"\").replace(T,\"\")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,\"string\"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if(\"number\"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return\"string\"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if(\"object\"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),\"complete\"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener(\"DOMContentLoaded\",H,!1),e.addEventListener(\"load\",H,!1);else{o.attachEvent(\"onreadystatechange\",H),e.attachEvent(\"onload\",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll(\"left\")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(e,t){l[\"[object \"+t+\"]\"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:\"array\"===n||\"function\"!==n&&(0===t||\"number\"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e=\"string\"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);\"function\"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&\"string\"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[[\"resolve\",\"done\",b.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",b.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",b.Callbacks(\"memory\")]],n=\"pending\",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+\"With\"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+\"With\"](this===i?r:this,arguments),this},i[o[0]+\"With\"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement(\"div\");if(d.setAttribute(\"className\",\"t\"),d.innerHTML=\"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\",n=d.getElementsByTagName(\"*\"),r=d.getElementsByTagName(\"a\")[0],!n||!r||!n.length)return{};s=o.createElement(\"select\"),l=s.appendChild(o.createElement(\"option\")),a=d.getElementsByTagName(\"input\")[0],r.style.cssText=\"top:1px;float:left;opacity:.5\",t={getSetAttribute:\"t\"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName(\"tbody\").length,htmlSerialize:!!d.getElementsByTagName(\"link\").length,style:/top/.test(r.getAttribute(\"style\")),hrefNormalized:\"/a\"===r.getAttribute(\"href\"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement(\"form\").enctype,html5Clone:\"<:nav></:nav>\"!==o.createElement(\"nav\").cloneNode(!0).outerHTML,boxModel:\"CSS1Compat\"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement(\"input\"),a.setAttribute(\"value\",\"\"),t.input=\"\"===a.getAttribute(\"value\"),a.value=\"t\",a.setAttribute(\"type\",\"radio\"),t.radioValue=\"t\"===a.value,a.setAttribute(\"checked\",\"t\"),a.setAttribute(\"name\",\"t\"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent(\"onclick\",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c=\"on\"+f,\"t\"),t[f+\"Bubbles\"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip=\"content-box\",d.cloneNode(!0).style.backgroundClip=\"\",t.clearCloneStyle=\"content-box\"===d.style.backgroundClip,b(function(){var n,r,a,s=\"padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;\",u=o.getElementsByTagName(\"body\")[0];u&&(n=o.createElement(\"div\"),n.style.cssText=\"border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px\",u.appendChild(n).appendChild(d),d.innerHTML=\"<table><tr><td></td><td>t</td></tr></table>\",a=d.getElementsByTagName(\"td\"),a[0].style.cssText=\"padding:0;margin:0;border:0;display:none\",p=0===a[0].offsetHeight,a[0].style.display=\"\",a[1].style.display=\"none\",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML=\"\",d.style.cssText=\"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition=\"1%\"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable=\"4px\"===(e.getComputedStyle(d,null)||{width:\"4px\"}).width,r=d.appendChild(o.createElement(\"div\")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width=\"0\",d.style.width=\"1px\",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML=\"\",d.style.cssText=s+\"width:1px;padding:1px;display:inline;zoom:1\",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display=\"block\",d.innerHTML=\"<div></div>\",d.firstChild.style.width=\"5px\",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u=\"string\"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),(\"object\"==typeof n||\"function\"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(\" \"));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:\"jQuery\"+(p+Math.random()).replace(/\\D/g,\"\"),noData:{embed:!0,object:\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute(\"classid\")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,\"parsedAttrs\"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf(\"data-\")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,\"parsedAttrs\",!0)}return s}return\"object\"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i=\"data-\"+n.replace(B,\"-$1\").toLowerCase();if(r=e.getAttribute(i),\"string\"==typeof r){try{r=\"true\"===r?!0:\"false\"===r?!1:\"null\"===r?null:+r+\"\"===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if((\"data\"!==t||!b.isEmptyObject(e[t]))&&\"toJSON\"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||\"fx\")+\"queue\",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||\"fx\";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};\"inprogress\"===i&&(i=n.shift(),r--),o.cur=i,i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks(\"once memory\").add(function(){b._removeData(e,t+\"queue\"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return\"string\"!=typeof e&&(n=e,e=\"fx\",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),\"fx\"===e&&\"inprogress\"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||\"fx\",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};\"string\"!=typeof e&&(n=e,e=t),e=e||\"fx\";while(s--)r=b._data(a[s],e+\"queueHooks\"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\\t\\r\\n]/g,U=/\\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=\"string\"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||\"\").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(X,\" \"):\" \")){o=0;while(i=t[o++])0>r.indexOf(\" \"+i+\" \")&&(r+=i+\" \");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||\"string\"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||\"\").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(X,\" \"):\"\")){o=0;while(i=t[o++])while(r.indexOf(\" \"+i+\" \")>=0)r=r.replace(\" \"+i+\" \",\" \");n.className=e?b.trim(r):\"\"}return this},toggleClass:function(e,t){var n=typeof e,r=\"boolean\"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(\"string\"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?\"addClass\":\"removeClass\"](o)}else(n===i||\"boolean\"===n)&&(this.className&&b._data(this,\"__className__\",this.className),this.className=this.className||e===!1?\"\":b._data(this,\"__className__\")||\"\")})},hasClass:function(e){var t=\" \"+e+\" \",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(\" \"+this[n].className+\" \").replace(X,\" \").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o=\"\":\"number\"==typeof o?o+=\"\":b.isArray(o)&&(o=b.map(o,function(e){return null==e?\"\":e+\"\"})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&\"set\"in r&&r.set(this,o,\"value\")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&\"get\"in r&&(n=r.get(o,\"value\"))!==t?n:(n=o.value,\"string\"==typeof n?n.replace(U,\"\"):null==n?\"\":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o=\"select-one\"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute(\"disabled\"))||n.parentNode.disabled&&b.nodeName(n.parentNode,\"optgroup\"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find(\"option\").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&\"get\"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&\"set\"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+\"\"),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase(\"default-\"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,\"\"),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&\"radio\"===t&&b.nodeName(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},propFix:{tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&\"set\"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&\"get\"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode(\"tabindex\");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i=\"boolean\"==typeof r&&e.getAttribute(n),o=\"boolean\"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase(\"default-\"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase(\"default-\"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,\"input\")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,\"input\")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(\"id\"===n||\"name\"===n||\"coords\"===n?\"\"!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+=\"\",\"value\"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,\"\"===t?!1:t,n)}},b.each([\"width\",\"height\"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return\"\"===r?(e.setAttribute(n,\"auto\"),r):t}})})),b.support.hrefNormalized||(b.each([\"href\",\"src\",\"width\",\"height\"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each([\"href\",\"src\"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+\"\"}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype=\"encoding\"),b.support.checkOn||b.each([\"radio\",\"checkbox\"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute(\"value\")?\"on\":e.value}}}),b.each([\"radio\",\"checkbox\"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||\"\").match(w)||[\"\"],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||\"\").split(\".\").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(\".\")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent(\"on\"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||\"\").match(w)||[\"\"],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||\"\").split(\".\").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&(\"**\"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,\"events\"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,\"type\")?n.type:n,m=y.call(n,\"namespace\")?n.namespace.split(\".\"):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(\".\")>=0&&(m=g.split(\".\"),g=m.shift(),m.sort()),u=0>g.indexOf(\":\")&&\"on\"+g,n=n[b.expando]?n:new b.Event(g,\"object\"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join(\".\"),n.namespace_re=n.namespace?RegExp(\"(^|\\\\.)\"+m.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,\"events\")||{})[n.type]&&b._data(l,\"handle\"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||\"click\"===g&&b.nodeName(i,\"a\")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,\"events\")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||\"click\"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||\"click\"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+\" \",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:\"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:\"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,\"input\")&&\"checkbox\"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:\"focusin\"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:\"focusout\"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r=\"on\"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;\n\treturn(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,\"form\")?!1:(b.event.add(this,\"click._submit keypress._submit\",function(e){var n=e.target,r=b.nodeName(n,\"input\")||b.nodeName(n,\"button\")?n.form:t;r&&!b._data(r,\"submitBubbles\")&&(b.event.add(r,\"submit._submit\",function(e){e._submit_bubble=!0}),b._data(r,\"submitBubbles\",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate(\"submit\",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,\"form\")?!1:(b.event.remove(this,\"._submit\"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?((\"checkbox\"===this.type||\"radio\"===this.type)&&(b.event.add(this,\"propertychange._change\",function(e){\"checked\"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,\"click._change\",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate(\"change\",this,e,!0)})),!1):(b.event.add(this,\"beforeactivate._change\",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,\"changeBubbles\")&&(b.event.add(t,\"change._change\",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate(\"change\",this.parentNode,e,!0)}),b._data(t,\"changeBubbles\",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||\"radio\"!==n.type&&\"checkbox\"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,\"._change\"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if(\"object\"==typeof e){\"string\"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&(\"string\"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+\".\"+i.namespace:i.origType,i.selector,i.handler),this;if(\"object\"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||\"function\"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x=\"sizzle\"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",F=\"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",O=F.replace(\"w\",\"w#\"),B=\"([*^$|!~]?=)\",P=\"\\\\[\"+_+\"*(\"+F+\")\"+_+\"*(?:\"+B+_+\"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\"+O+\")|)|)\"+_+\"*\\\\]\",R=\":(\"+F+\")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+P.replace(3,8)+\")*)|.*)\\\\)|)\",W=RegExp(\"^\"+_+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+_+\"+$\",\"g\"),$=RegExp(\"^\"+_+\"*,\"+_+\"*\"),I=RegExp(\"^\"+_+\"*([\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])\"+_+\"*\"),z=RegExp(R),X=RegExp(\"^\"+O+\"$\"),U={ID:RegExp(\"^#(\"+F+\")\"),CLASS:RegExp(\"^\\\\.(\"+F+\")\"),NAME:RegExp(\"^\\\\[name=['\\\"]?(\"+F+\")['\\\"]?\\\\]\"),TAG:RegExp(\"^(\"+F.replace(\"w\",\"w*\")+\")\"),ATTR:RegExp(\"^\"+P),PSEUDO:RegExp(\"^\"+R),CHILD:RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+_+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+_+\"*(?:([+-]|)\"+_+\"*(\\\\d+)|))\"+_+\"*\\\\)|)\",\"i\"),needsContext:RegExp(\"^\"+_+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+_+\"*((?:-\\\\d)?\\\\d*)\"+_+\"*\\\\)|)(?=[^-]|$)\",\"i\")},V=/[\\x20\\t\\r\\n\\f]*[+~]/,Y=/^[^{]+\\{\\s*\\[native code/,J=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\\d$/i,K=/'|\\\\/g,Z=/\\=[\\x20\\t\\r\\n\\f]*([^'\"\\]]*)[\\x20\\t\\r\\n\\f]*\\]/g,et=/\\\\([\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|.)/g,tt=function(e,t){var n=\"0x\"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+\"\")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=\" \")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement(\"div\");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||\"string\"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&\"object\"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute(\"id\"))?g=f.replace(K,\"\\\\$&\"):t.setAttribute(\"id\",g),g=\"[id='\"+g+\"'] \",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(\",\")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute(\"id\")}}}return wt(e.replace(W,\"$1\"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?\"HTML\"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),T.attributes=at(function(e){e.innerHTML=\"<select></select>\";var t=typeof e.lastChild.getAttribute(\"multiple\");return\"boolean\"!==t&&\"string\"!==t}),T.getByClassName=at(function(e){return e.innerHTML=\"<div class='hidden e'></div><div class='hidden'></div>\",e.getElementsByClassName&&e.getElementsByClassName(\"e\").length?(e.lastChild.className=\"e\",2===e.getElementsByClassName(\"e\").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML=\"<a name='\"+x+\"'></a><div name='\"+x+\"'></div>\",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML=\"<a href='#'></a>\",e.firstChild&&typeof e.firstChild.getAttribute!==A&&\"#\"===e.firstChild.getAttribute(\"href\")})?{}:{href:function(e){return e.getAttribute(\"href\",2)},type:function(e){return e.getAttribute(\"type\")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute(\"id\")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode(\"id\").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode(\"id\");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[\":focus\"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML=\"<select><option selected=''></option></select>\",e.querySelectorAll(\"[selected]\").length||h.push(\"\\\\[\"+_+\"*(?:checked|disabled|ismap|multiple|readonly|selected|value)\"),e.querySelectorAll(\":checked\").length||h.push(\":checked\")}),at(function(e){e.innerHTML=\"<input type='hidden' i=''/>\",e.querySelectorAll(\"[i^='']\").length&&h.push(\"[*^$]=\"+_+\"*(?:\\\"\\\"|'')\"),e.querySelectorAll(\":enabled\").length||h.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),h.push(\",.*:\")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,\"div\"),m.call(e,\"[s!='']:x\"),g.push(\"!=\",R)}),h=RegExp(h.join(\"|\")),g=RegExp(g.join(\"|\")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,\"='$1']\"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error(\"Syntax error, unrecognized expression: \"+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return\"input\"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return(\"input\"===n||\"button\"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||\"\").replace(et,tt),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return\"*\"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+\" \"];return t||(t=RegExp(\"(^|\"+_+\")\"+e+\"(\"+_+\"|$)\"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute(\"class\")||\"\")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?\"!=\"===t:t?(i+=\"\",\"=\"===t?i===n:\"!=\"===t?i!==n:\"^=\"===t?n&&0===i.indexOf(n):\"*=\"===t?n&&i.indexOf(n)>-1:\"$=\"===t?n&&i.slice(-n.length)===n:\"~=\"===t?(\" \"+i+\" \").indexOf(n)>-1:\"|=\"===t?i===n||i.slice(0,n.length+1)===n+\"-\":!1):!0}},CHILD:function(e,t,n,r,i){var o=\"nth\"!==e.slice(0,3),a=\"last\"!==e.slice(-4),s=\"of-type\"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?\"nextSibling\":\"previousSibling\",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g=\"only\"===e&&!h&&\"nextSibling\"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error(\"unsupported pseudo: \"+e);return r[x]?r(t):r.length>1?(n=[e,e,\"\",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,\"$1\"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||\"\")||st.error(\"unsupported lang: \"+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute(\"xml:lang\")||t.getAttribute(\"lang\"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+\"-\");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>\"@\"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+\" \"];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W,\" \")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r=\"\";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&\"parentNode\"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+\" \"+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||\"*\",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[\" \"],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,\"$1\"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b=\"0\",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG(\"*\",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+\" \"];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&\"ID\"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[\":\"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\\[\\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if(\"string\"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+\" \":\"\")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&(\"string\"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||\"string\"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?\"string\"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=\"string\"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,\"parentNode\")},parentsUntil:function(e,t,n){return b.dir(e,\"parentNode\",n)},next:function(e){return pt(e,\"nextSibling\")},prev:function(e){return pt(e,\"previousSibling\")},nextAll:function(e){return b.dir(e,\"nextSibling\")},prevAll:function(e){return b.dir(e,\"previousSibling\")},nextUntil:function(e,t,n){return b.dir(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return b.dir(e,\"previousSibling\",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,\"iframe\")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&\"string\"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=\":not(\"+e+\")\"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if(\"string\"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split(\"|\"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",gt=/ jQuery\\d+=\"(?:null|\\d+)\"/g,mt=RegExp(\"<(?:\"+ht+\")[\\\\s/>]\",\"i\"),yt=/^\\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,bt=/<([\\w:]+)/,xt=/<tbody/i,wt=/<|&#?\\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\\s*(?:[^=]|=\\s*.checked.)/i,kt=/^$|\\/(?:java|ecma)script/i,Et=/^true\\/(.*)/,St=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,At={option:[1,\"<select multiple='multiple'>\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],area:[1,\"<map>\",\"</map>\"],param:[1,\"<object>\",\"</object>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:b.support.htmlSerialize?[0,\"\",\"\"]:[1,\"X<div>\",\"</div>\"]},jt=dt(o),Dt=jt.appendChild(o.createElement(\"div\"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,\"body\")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,\"script\")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,\"select\")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,\"\"):t;if(!(\"string\"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||[\"\",\"\"])[1].toLowerCase()])){e=e.replace(vt,\"<$1></$2>\");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||\"string\"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||\"string\"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,\"tr\"),s=b.map(Ot(l,\"script\"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,\"script\"))),r.call(n&&b.nodeName(this[c],\"table\")?Lt(this[c],\"tbody\"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||\"\")&&!b._data(o,\"globalEval\")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:\"GET\",dataType:\"script\",async:!1,global:!1,\"throws\":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||\"\").replace(St,\"\")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode(\"type\");return e.type=(t&&t.specified)+\"/\"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute(\"type\"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,\"globalEval\",!t||b._data(t[r],\"globalEval\"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}\"script\"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):\"object\"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):\"input\"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):\"option\"===n?t.defaultSelected=t.selected=e.defaultSelected:(\"input\"===n||\"textarea\"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||\"*\"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||\"*\"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test(\"<\"+e.nodeName+\">\")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,\"script\"),r.length>0&&Mt(r,!u&&Ot(e,\"script\")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if(\"object\"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement(\"div\")),u=(bt.exec(o)||[\"\",\"\"])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,\"<$1></$2>\")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o=\"table\"!==u||xt.test(o)?\"<table>\"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],\"tbody\")&&!l.childNodes.length&&o.removeChild(l)\n\t}b.merge(d,s.childNodes),s.textContent=\"\";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,\"input\"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),\"script\"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||\"\")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\\([^)]*\\)/i,It=/opacity\\s*=\\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp(\"^(\"+x+\")(.*)$\",\"i\"),Yt=RegExp(\"^(\"+x+\")(?!px)[a-z%]+$\",\"i\"),Jt=RegExp(\"^([+-])=(\"+x+\")\",\"i\"),Gt={BODY:\"block\"},Qt={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Kt={letterSpacing:0,fontWeight:400},Zt=[\"Top\",\"Right\",\"Bottom\",\"Left\"],en=[\"Webkit\",\"O\",\"Moz\",\"ms\"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,\"none\"===b.css(e,\"display\")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,\"olddisplay\"),n=r.style.display,t?(o[a]||\"none\"!==n||(r.style.display=\"\"),\"\"===r.style.display&&nn(r)&&(o[a]=b._data(r,\"olddisplay\",un(r.nodeName)))):o[a]||(i=nn(r),(n&&\"none\"!==n||!i)&&b._data(r,\"olddisplay\",i?n:b.css(r,\"display\"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&\"none\"!==r.style.display&&\"\"!==r.style.display||(r.style.display=t?o[a]||\"\":\"none\"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t=\"boolean\"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":b.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&\"get\"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,\"string\"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a=\"number\"),!(null==r||\"number\"===a&&isNaN(r)||(\"number\"!==a||b.cssNumber[u]||(r+=\"px\"),b.support.clearCloneStyle||\"\"!==r||0!==n.indexOf(\"background\")||(l[n]=\"inherit\"),s&&\"set\"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&\"get\"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),\"normal\"===a&&n in Kt&&(a=Kt[n]),\"\"===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(\"\"!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left=\"fontSize\"===n?\"1em\":u,u=l.pixelLeft+\"px\",l.left=i,a&&(o.left=a)),\"\"===u?\"auto\":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||\"px\"):t}function an(e,t,n,r,i){var o=n===(r?\"border\":\"content\")?4:\"width\"===t?1:0,a=0;for(;4>o;o+=2)\"margin\"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?(\"content\"===n&&(a-=b.css(e,\"padding\"+Zt[o],!0,i)),\"margin\"!==n&&(a-=b.css(e,\"border\"+Zt[o]+\"Width\",!0,i))):(a+=b.css(e,\"padding\"+Zt[o],!0,i),\"padding\"!==n&&(a+=b.css(e,\"border\"+Zt[o]+\"Width\",!0,i)));return a}function sn(e,t,n){var r=!0,i=\"width\"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&\"border-box\"===b.css(e,\"boxSizing\",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?\"border\":\"content\"),r,o)+\"px\"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),\"none\"!==n&&n||(Pt=(Pt||b(\"<iframe frameborder='0' width='0' height='0'/>\").css(\"cssText\",\"display:block !important\")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write(\"<!doctype html><html><body>\"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],\"display\");return n.remove(),r}b.each([\"height\",\"width\"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,\"display\"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&\"border-box\"===b.css(e,\"boxSizing\",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||\"\")?.01*parseFloat(RegExp.$1)+\"\":t?\"1\":\"\"},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?\"alpha(opacity=\"+100*t+\")\":\"\",o=r&&r.filter||n.filter||\"\";n.zoom=1,(t>=1||\"\"===t)&&\"\"===b.trim(o.replace($t,\"\"))&&n.removeAttribute&&(n.removeAttribute(\"filter\"),\"\"===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+\" \"+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:\"inline-block\"},Wt,[e,\"marginRight\"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each([\"top\",\"left\"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+\"px\":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&\"none\"===(e.style&&e.style.display||b.css(e,\"display\"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:\"\",padding:\"\",border:\"Width\"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o=\"string\"==typeof n?n.split(\" \"):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\\[\\]$/,fn=/\\r?\\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,\"elements\");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(\":disabled\")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,\"\\r\\n\")}}):{name:t.name,value:n.replace(fn,\"\\r\\n\")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?\"\":t,i[i.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join(\"&\").replace(cn,\"+\")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+\"[\"+(\"object\"==typeof i?t:\"\")+\"]\",i,n,r)});else if(n||\"object\"!==b.type(t))r(e,t);else for(i in t)gn(e+\"[\"+i+\"]\",t[i],n,r)}b.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\\/\\//,En=/^([\\w.+-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn=\"*/\".concat(\"*\");try{yn=a.href}catch(Ln){yn=o.createElement(\"a\"),yn.href=\"\",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){\"string\"!=typeof t&&(n=t,t=\"*\");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])\"+\"===r[0]?(r=r.slice(1)||\"*\",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return\"string\"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o[\"*\"]&&s(\"*\")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if(\"string\"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(\" \");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&\"object\"==typeof n&&(a=\"POST\"),s.length>0&&b.ajax({url:e,type:a,dataType:\"html\",data:n}).done(function(e){o=arguments,s.html(i?b(\"<div>\").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each([\"get\",\"post\"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:\"GET\",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":Dn,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\"},converters:{\"* text\":e.String,\"text html\":!0,\"text json\":b.parseJSON,\"text xml\":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){\"object\"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks(\"once memory\"),m=p.statusCode||{},y={},v={},x=0,T=\"canceled\",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+\"\").replace(xn,\"\").replace(kn,mn[1]+\"//\"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||\"*\").toLowerCase().match(w)||[\"\"],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(\"http:\"===r[1]?80:443))==(mn[3]||(\"http:\"===mn[1]?80:443)))),p.data&&p.processData&&\"string\"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger(\"ajaxStart\"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?\"&\":\"?\")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,\"$1_=\"+vn++):o+(bn.test(o)?\"&\":\"?\")+\"_=\"+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader(\"If-Modified-Since\",b.lastModified[o]),b.etag[o]&&N.setRequestHeader(\"If-None-Match\",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader(\"Content-Type\",p.contentType),N.setRequestHeader(\"Accept\",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(\"*\"!==p.dataTypes[0]?\", \"+Dn+\"; q=0.01\":\"\"):p.accepts[\"*\"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T=\"abort\";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger(\"ajaxSend\",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort(\"timeout\")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,\"No Transport\");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||\"\",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader(\"Last-Modified\"),T&&(b.lastModified[o]=T),T=N.getResponseHeader(\"etag\"),T&&(b.etag[o]=T)),204===e?(c=!0,C=\"nocontent\"):304===e?(c=!0,C=\"notmodified\"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C=\"error\",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+\"\",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?\"ajaxSuccess\":\"ajaxError\",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger(\"ajaxComplete\",[N,p]),--b.active||b.event.trigger(\"ajaxStop\")))}return N},getScript:function(e,n){return b.get(e,t,n,\"script\")},getJSON:function(e,t,n){return b.get(e,t,n,\"json\")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while(\"*\"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader(\"Content-Type\"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+\" \"+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if(\"*\"!==r){if(\"*\"!==l&&l!==r){if(i=a[l+\" \"+r]||a[\"* \"+r],!i)for(n in a)if(o=n.split(\" \"),o[1]===r&&(i=a[l+\" \"+o[0]]||a[\"* \"+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e[\"throws\"])t=i(t);else try{t=i(t)}catch(c){return{state:\"parsererror\",error:i?c:\"No conversion from \"+l+\" to \"+r}}}l=r}return{state:\"success\",data:t}}b.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/(?:java|ecma)script/},converters:{\"text script\":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter(\"script\",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\",e.global=!1)}),b.ajaxTransport(\"script\",function(e){if(e.crossDomain){var n,r=o.head||b(\"head\")[0]||o.documentElement;return{send:function(t,i){n=o.createElement(\"script\"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,\"success\"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\\?(?=&|$)|\\?\\?/;b.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=On.pop()||b.expando+\"_\"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter(\"json jsonp\",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?\"url\":\"string\"==typeof n.data&&!(n.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Bn.test(n.data)&&\"data\");return u||\"jsonp\"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,\"$1\"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?\"&\":\"?\")+n.jsonp+\"=\"+o),n.converters[\"script json\"]=function(){return s||b.error(o+\" was not called\"),s[0]},n.dataTypes[0]=\"json\",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),\"script\"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&\"withCredentials\"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i[\"X-Requested-With\"]||(i[\"X-Requested-With\"]=\"XMLHttpRequest\");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),\"string\"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=\"\"}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp(\"^(?:([+-])=|)(\"+x+\")([a-z%]*)$\",\"i\"),Jn=/queueHooks$/,Gn=[nr],Qn={\"*\":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?\"\":\"px\"),\"px\"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||\".5\",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn[\"*\"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&\"expand\"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=[\"*\"]):e=e.split(\" \");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,\"fx\"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,\"fx\").length||c.empty.fire()})})),1===e.nodeType&&(\"height\"in t||\"width\"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],\"inline\"===b.css(e,\"display\")&&\"none\"===b.css(e,\"float\")&&(b.support.inlineBlockNeedsLayout&&\"inline\"!==un(e.nodeName)?d.zoom=1:d.display=\"inline-block\")),n.overflow&&(d.overflow=\"hidden\",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||\"toggle\"===a,a===(m?\"hide\":\"show\"))continue;g.push(i)}if(o=g.length){s=b._data(e,\"fxshow\")||b._data(e,\"fxshow\",{}),\"hidden\"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,\"fxshow\");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start=\"width\"===r||\"height\"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||\"swing\",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?\"\":\"px\")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,\"\"),t&&\"auto\"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each([\"toggle\",\"show\",\"hide\"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||\"boolean\"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,\"finish\"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return\"string\"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||\"fx\",[]),this.each(function(){var t=!0,n=null!=e&&e+\"queueHooks\",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||\"fx\"),this.each(function(){var t,n=b._data(this),r=n[e+\"queue\"],i=n[e+\"queueHooks\"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r[\"margin\"+n]=r[\"padding\"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir(\"show\"),slideUp:ir(\"hide\"),slideToggle:ir(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&\"object\"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:\"number\"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,\"position\");\"static\"===r&&(e.style.position=\"relative\");var i=b(e),o=i.offset(),a=b.css(e,\"top\"),s=b.css(e,\"left\"),u=(\"absolute\"===r||\"fixed\"===r)&&b.inArray(\"auto\",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),\"using\"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return\"fixed\"===b.css(r,\"position\")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],\"html\")||(n=e.offset()),n.top+=b.css(e[0],\"borderTopWidth\",!0),n.left+=b.css(e[0],\"borderLeftWidth\",!0)),{top:t.top-n.top-b.css(r,\"marginTop\",!0),left:t.left-n.left-b.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,\"html\")&&\"static\"===b.css(e,\"position\"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:\"height\",Width:\"width\"},function(e,n){b.each({padding:\"inner\"+e,content:n,\"\":\"outer\"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||\"boolean\"!=typeof i),s=r||(i===!0||o===!0?\"margin\":\"border\");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement[\"client\"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body[\"scroll\"+e],o[\"scroll\"+e],n.body[\"offset\"+e],o[\"offset\"+e],o[\"client\"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,\"function\"==typeof define&&define.amd&&define.amd.jQuery&&define(\"jquery\",[],function(){return b})})(window);\t\t\n\t\t$(function(){\n\t\t\t//技能评价\n\t\t\t$('.mr_skill_con .mr_skill_plan').each(function(){\n\t\t\t\tvar percent = $(this).attr('data-skillLevel');\n\t\t\t\tvar width = $(this).outerWidth();\n\t\t\t\tvar pre = percent / 100 * width;\n\t\t\t\t$(this).find('em').width(pre + 10 );\n\t\t\t});\n\t\t})\n\t</script>\n</body>\n</html>","source":"resume/index.html","raw":"<!DOCTYPE HTML>\n<html>\n<head>\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=10;IE=9;IE=8;IE=7;IE=EDGE\">\n<meta http-equiv=\"Cache-Control\" content=\"no-siteapp\" />\n<link rel=\"alternate\" media=\"handheld\" href=\"#\" />\n<meta charset=\"utf-8\">\n<title>简历</title>\n</head>\n<body>\n<div id=\"body\">\n    <div id=\"container\">\n<style type=\"text/css\">\nbody{margin: 0;padding: 0;font: 14px/22px \"微软雅黑\",\"宋体\",Arial;color: #333;word-wrap: break-word;}\n.clearfixs:before,.clearfixs:after{content:\"\";display:table;}\n.clearfixs:after{display:block;clear:both;}\n.clearfixs{*zoom:1;}\ninput[type=\"text\"]:focus{border:1px solid #32dbb3;}\n.mr_created input[type=\"text\"]:focus{border-width:1px;}\n.mr_content input[type=\"text\"]:focus{border:none;}\n.mr_created input{border:none;}\na:hover{color:#00b88d;}\n.fl{float:left;}\nh1, h2, h3, h4, h5 {\nfont-weight: normal;\n}\n/* 为创建在线简历 */\n.dn{display:none;}\n.mr_created input,.mr_created textarea{font-size:14px;}\n.mr_uncreate *{list-style:none;}\n.mr_uncreate *,.mr_created *{margin:0;padding:0;}\n.mr_created .city_s .xl_list ,.mr_uncreate .city_s .xl_list{height:130px;}\n.mr_created .mr_selCity,.mr_uncreate .mr_selCity{top:0;}\n.mr_created .mr_selCity ul.mr_province ul,.mr_uncreate .mr_selCity ul.mr_province ul{width:287px;height:110px;padding:10px;}\n.mr_created #mr_mr_head *,.mr_created .mr_myresume_r *{list-style:none;}\n.mr_created #mr_mr_head{margin-bottom:0;}\n.mr_created .mr_baseinfo{border-bottom:none;border-bottom-right-radius:0px;border-bottom-left-radius:0px;}\n.mr_created .mr_infoed{margin-bottom:0px;}\n.mr_myresume_l{float:left;width:702px;margin-bottom:20px;}\n.mr_created #mr_mr_head{margin-bottom:0;}\n.mr_created #mr_mr_head *,.mr_created .mr_myresume_r *{list-style:none;}\n\n.mr_w604{width:604px;margin:0 auto;}\n.mr_p_name{height:40px;line-height:38px;margin-bottom:8px;}\n.mr_name{display:block;height:40px;width:468px;margin:0 auto;line-height:40px;font-size:30px;color:#333;text-align:center;}\n.mr_intro{display:block;color:#333;text-align:center;margin:0 auto;}\n.mr_p_introduce .mr_intro{font-size:16px;width:468px;line-height:26px;}\n.mr_p_introduce .mr_intro_grey{color:#bdbdbd;font-style: italic;}\n.mr_active{background-color: #fefef2;}\n/* 未创建在线 基本信息 */\n.mr_myresume_l input{margin:0;}\n.form_wrap{position:relative;cursor:pointer;width:396px;height:46px;border:1px solid #f1f3e9;background-color:#fff;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;margin-bottom:9px;}\n.form_wrap .mr_button{text-align:left;padding-left:17px;width:327px;height:46px;background-color:#fff;}\n.form_wrap .mr_input{width:327px;padding:0 0 0 17px;border:none;height:46px;}\n.form_wrap .mr_input:focus{border:none;}\n.form_wrap_y .mr_button{width:150px;}\n.mr_sj{position:absolute;right:18px;top:20px;border: 6px solid #fff;border-color: #d3d3d3 transparent transparent;display: block;font-size: 0px;height: 0;width: 0;}\n\n.form_wrap_y{width:188px;}\n\n/*已创建在线简历 jason 2014/9/8*/\n.mr_p_introduce{min-height:34px;line-height:32px;margin-bottom:4px;}\n/*在线简历页面主内容区域*/\n.mr_myresume_l .mr_content{padding-top:26px;background-color: #fafafa;border: 1px solid #f2f2f2;border-bottom:2px solid #f2f2f2;border-top:none;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;}\n.mr_moudle_head{margin-bottom:23px;}\n.mr_moudle_head .mr_head_l{float:left;}\n.mr_moudle_head .mr_head_r{float:right;margin-top:3px;cursor:pointer;}\n.mr_title span{vertical-align:middle;display:inline-block;}\n.mr_title .mr_title_l{width:230px;height:0;border-top:1px solid #ededed;}\n.mr_title .mr_title_c{font-size:18px;padding:6px 24px;text-align:center;background-color:#eee;-moz-border-radius:26px;-webkit-border-radius:26px;border-radius:26px;margin:0 13px;}\n.mr_title .mr_title_r{width:152px;height:0;border-top:1px solid #ededed;}\n.mr_moudle_head .mr_head_r *{vertical-align:middle;}\n.mr_moudle_head .mr_head_r em{font-size:16px;color:#00b88d;}\n.mr_moudle_head .mr_head_r i{display: inline-block;width: 15px;height: 15px;background: url(http://www.lagou.com/images/myresume/icons_mr.png) -5px -69px no-repeat;margin-right:6px;}\n.mr_moudle_content{padding-bottom:21px;color:#555;font-size:14px;} /* 块  margin-bottom 48*/\n.mr_moudle_content .mr_content_l{float:left;max-width: 445px;}\n.mr_moudle_content .mr_content_r{float:right;}\n.mr_content_l .l1{float:left;margin-right:10px;}\n.mr_content_l .l2{position: relative;float: left;padding-top: 10px;max-width: 380px;}\n.mr_content_l .l2 a.projectTitle{/* position:relative; */font-size:16px;color:#555;text-decoration:none}\n.mr_content_l .l2 a.projectTitle:hover{color:#00b88d}\n.mr_content_l .l2 a.nourl{cursor:default;}\n.mr_content_l .l2 a.nourl:hover{color:#555;}\n.mr_content_l .l2 p{color:#999;}\n.mr_content_l .l2 a.projectTitle span{position:absolute;top:14px;right:-18px;width:12px;height:12px;background:url(http://www.lagou.com/images/myresume/icons_mr.png) -95px -197px no-repeat;}\n.mr_content_l .l1 img{width:46px;height:46px;border:2px solid #eee;}\n.mr_content_l .l2 h4{font-size:16px;}\n.mr_content_l .l2 span{color:#999;display:block;}\n.mr_c_r_t{text-align:right;margin:5px 0 2px 0;*margin-top:8px;float:none;}\n.mr_content_r span{color:#999;}\n.mr_content_m{padding:14px 0 0 0px;*padding-left:1px;color:#555;}\n.mr_jobe_list{padding-bottom:10px;}\n.mr_wo_show{padding:13px 18px 46px 42px;background-color:#00b88d;margin-bottom:38px;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;}\n.mr_wo_show p{line-height:26px;color:#fff;}\n.mr_self_site{color:#fff;margin-bottom:8px;font-size:24px;}\n.mr_self_sitelink {font-weight:bold;text-decoration:none;/* display:inline-block;width:558px; */word-break:break-all;color: #fff;}\n.mr_self_sitelink:hover{color:#fff;}\n.mr_wo_show .mr_c_r_t em{color:#50f9d2;}\n.mr_wo_show .mr_c_r_t i{background:url(http://www.lagou.com/images/myresume/icons_mr.png) -131px -115px no-repeat;}\n.wh43{width:100%;}\n.mr_work_upload .l2 span{display:inline-block;}\n.mr_wu_con .mr_work_title{margin:0 6px;}\n.mr_wu_show{margin-bottom:20px;}\n.mr_wu_show .mr_c_r_t{padding-top:4px;}\n.mr_wu_con .l2 span{color:#333;}\n.mr_wu_show .mr_wu_con_m{color:#555;}\n.mr_self_l{position:relative;height:81px;}\n.mr_self_l img{position:absolute;left:4px;width:73px;height:73px;top:8px;}\n.mr_self_l i{position:absolute;z-index:2;width:81px;height:81px;background:url(http://www.lagou.com/images/myresume/mr_txs.png) no-repeat;} \n.mr_moudle_content .mr_self_l{float:left;width:100px;padding-top:5px;}\n.mr_moudle_content .mr_self_r{float:left;width:504px;color:#555;line-height:26px;}\n.mr_jobtype_li{width:128px;}\n.mr_sns .sns10 span{min-width:56px;}\n.mr_jobtype_li i{width:17px;height:17px;background-position:-93px -247px;}\n/* \n.mr_skill_con{padding-left:20px;margin-bottom:18px;}\n.mr_skill_con span{vertical-align:middle;display:inline-block;}\n.mr_skill_con .mr_skill_name{width:90px;height:22px;text-align:right;margin-right:13px;word-wrap:break-word;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;}\n.mr_skill_con .mr_skill_name:after{\ncontent:\"...\";\n}\n.mr_skill_con .mr_skill_plan{position:relative;width:420px;height:8px;border-radius:4px;background-color:#eee;margin-right:21px;overflow:hidden;}\n.mr_skill_plan em{position:absolute;left:0;top:0;display:inline-block;height:8px;width:370px;background-color:#00b88d;border-radius:4px;overflow:hidden;} */\n.mr_skill_con{padding-left:16px;margin-bottom:14px;position:relative;}\n.mr_skill_con span{vertical-align:middle;display:inline-block;}\n.mr_skill_con .mr_skill_name{width:90px;height:22px;text-align:right;margin-right:13px;word-wrap:break-word;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;}\n/* .mr_skill_con .mr_skill_name:after{\ncontent:\"...\";\n} */\n.mr_skill_con .mr_skill_plan{position:relative;width:410px;height:8px;border-radius:4px;background-color:#eee;margin-right:21px;overflow:hidden;}\n.mr_skill_plan em{position:absolute;left:0;top:0;display:inline-block;height:8px;background-color:#00b88d;border-radius:4px;overflow:hidden;}\n.mr_skill_con .mr_skill_delete{width:13px;height:13px;background:url(http://www.lagou.com/images/myresume/skill_delete.png) center top no-repeat;cursor:pointer;}\n.mr_moudle_content .mr_skill_add{padding-left:125px;*padding-left:104px;color:#999999;font-size:16px;}\n.mr_skill_add span{display:inline-block;width:88px;text-indent:22px;background:url(http://www.lagou.com/images/myresume/skill_add.png) left 3px no-repeat;cursor:pointer;}\n\n.mr_title .cust_title{position:absolute;top:-4px;left: 50%;padding:0 13px;background-color:#FAFAFA;}\n\n.cust_title span{padding:6px 24px;text-align: center;font-size: 18px;background-color: #eee;-moz-border-radius: 26px;-webkit-border-radius: 26px;border-radius: 26px;}\n.mr_skill_con .mr_skill_circle{display:inline-block;width:20px;height:19px;position:absolute;left:122px;top:3px;background:url(http://www.lagou.com/images/myresume/skill_circle.png) no-repeat center top;}\n.mr_skill_circle em{display:inline-block;width:29px;height:23px;position:absolute;right: -4px;top: -22px;text-align: center;line-height:18px;padding: 0px;color: #ffffff;background:url(http://www.lagou.com/images/myresume/skill_img.png) center top no-repeat;font-size:10px;}\n\n\n/****一句话介绍****/\n.mrcenter{margin:0 auto 20px auto; float:none;}\n\n\n\n/*底部求职者职场状态*/\n.mr_self_state{position:relative;height:94px;background-color:#f6f6f6;color:#555;font-size:14px;text-align: center;}\n.mr_self_state *{list-style:none;}\n.mr_self_state .form_wrap{position:absolute;top:50%;left:50%;margin:-24px 0 0 -135px;border:1px solid #eaeced;width:270px;}\n.mr_self_state .mr_button{width:240px;}\n.mr_self_state .select_color{border-color:#32dbb3;}\n.mr_self_state .xl_list{width:270px;}\n\n\n\n.m_portrait{width:100%;height:135px;position:relative;z-index:2;background:url(http://www.lagou.com/images/myresume/head_bg.jpg) no-repeat;}\n.m_portrait .opa{position:absolute;}\n.mr_wo_preview ol,.mr_wu_con_m ol,.mr_self_r ol,.mr_expjob_content ol,.mr_wo_preview ul,.mr_wu_con_m ul,.mr_self_r ul,.mr_expjob_content ul{padding-left:19px;}\n.olpf ol,.olpf ul{padding-left:19px;}\n.mr_wo_preview {color:#fff;}\n.mr_preview .mr_title .mr_title_r{width:228px;}\n.resume_status {background: #f6f6f6;border: none!important;text-align: center;margin: -12px 0 0 -135px!important;cursor: default;}\n.m_portrait div {\n\t/* background: url(http://www.lagou.com/images/profile_cover.png) no-repeat;\n\twidth: 120px;\n\theight: 120px;\n\tposition: absolute;\n\tz-index: 5; */\n\twidth:200px;\n\theight:132px;\n\tposition:absolute;\n\tleft:41%;\n\ttop:39px;\n\tz-index:100;\n}\n</style>\n\t<div class=\"clearfixs mr_created mr_preview\">\n\t\t<div class=\"mr_myresume_l mrcenter\">\n\t\t\n\t\t\t<!--                  工作经历                                                 -->\n\t\t\t<div class=\"mr_content\">\n\t\t\t\t<div class=\"mr_w604\">\n\t\t\t\t\t<div id=\"workExperience\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\"> 工作经历  </span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t<div class=\"list_show\">\n\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>广州**信息技术有限公司</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>java工程师</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.03 -- 至今</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>广州美络信息科技有限公司</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>java工程师</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2015.03 -- 2016.03</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>广州阳光耐特电子有限公司</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>java工程师</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2014.10 -- 2015.03</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"educationalBackground\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">教育经历</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<!-- <div class=\"mr_head_r\">\n\t\t\t\t\t\t\t\t\t<i></i><em>添加</em>\n\t\t\t\t\t\t\t\t</div> -->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t<div class=\"list_show\">\t\n\t\t\t\t\t\t\t\t<div class=\"clearfixs mb46 mr_jobe_list\" style=\"padding-bottom:0px;\" >\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l1\">\n\t\t\t\t\t\t\t\t\t\t\t<!-- 学校图片后台还没有给（待确认是否没有图片就不展示），参照工作经历 -->\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"http://www.lagou.com/images/schoolBadge/875fc22f853842579608bff745cf3f1f.jpeg\"/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>五邑大学</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>本科 · 电子信息工程</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"projectExperience\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">项目经验</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\" id=\"projectList\">\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle\"  target=\"_blank\" href=\"http://www.goaleasy.cn/\"><span></span>目标易</a>\n\t\t\t\t\t\t\t\t\t\t\t<p>java工程师</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2015.07 -- 2016.03</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>1.项目描述：&quot;目标易&quot;是基于移动即时通讯并且适用于IOS、Android、PC等终端的系统，旨在满足集团型企业内部员工之间的移动化沟通需求，实现更便捷、顺畅的办公交流；另外，“目标易”支持现有业务系统功能的整合，构建基于移动互联网的企业“微应用”中心，扩大电子政务的实际利用范围。</p>\n<p>2.使用技术： Spring SpringMVC Mybatis</p>\n<p>3.责任描述：1）负责服务器端的用户、企业、部门等组织模块的API接口的开发</p>\n<p>2）负责“外勤管理”、“企业日程”、“通知公告”、“企业黄页”、“电子便签”、“任务协作”等微应用的系统设计、后台代码编写、测试。</p>\n<p>3）与前端人员协作完成部分前端模块功能。</p>\n<p>4）参与系统需求分析、系统设计、文档编写。</p>\n<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">基于大集中的企业级非结构数据管理平台</a>\n\t\t\t\t\t\t\t\t\t\t\t<p>java工程师</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2015.03 -- 2015.10</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>1.项目描述：面对电力企业非结构化数据分散存储在各个业务系统和大量的个人桌面，从而造成难以管理、利用乏力的现状，项目提出在业务系统省级大集中部署模式下构建分布式非结构数据管理平台的思路，将业务系统中的非结构文档剥离和个人桌面的非结构文档自动归集,采用省地两级存储和集中统一管理的方式，结合数据采集获取、数据二维管理及数据分布式传输等技术手段，为企业非结构化数据统一管理、快速访问、减轻骨干网传输压力、大数据分析利用应用提供解决方案。</p>\n<p>2.使用技术： J2EE Mybatis EXT JS Jquery Lucene Groovy FreeMaker MYSQL</p>\n<p>3.责任描述：1）负责“业务模拟系统”中“客户附件”、“服务发票”、“服务合同”三个模拟场景的模块开发、维护。</p>\n<p>2）在管理平台上负责“非结构借阅”、“非结构收藏夹”、“非结构邮件同步”、“元数据管理”、“全文检索”等模块的主要代码编写。</p>\n<p>3）对系统进行测试，负责对整个系统中出现的bug进行修复。</p>\n<p>3）参与系统需求分析、系统设计、文档编写、系统维护。</p>\n<p>4）去跟客户联系交流，讲解项目功能，部署软件环境。</p>\n<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">微信开发</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.03 -- 至今</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>负责公司微信服务号的开发与后台维护以及微信平台运营活动开发</p>\n\t\t\t\t\t\t\t\t\t<p style=\"color:#00b88d\">Coding</p>\n\t\t\t\t\t\t\t\t\t<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">运营平台</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.04-- 2016.06</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>一个医生与专家沟通的病例管理平台，负责大部分模块的开发</p>\n\t\t\t\t\t\t\t\t\t<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">官网首页</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.05-- 2016.06</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>都成前端大神了-_-</p>\n\t\t\t\t\t\t\t\t\t<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\"> \n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">挂号网公众号开发</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.06-- 2016.07</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>公众号项目整体开发</p>\n\t\t\t\t\t\t\t\t\t<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--                 作品展示                                                -->\n\t\t\t\t\t<div id=\"worksShow\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">作品展示</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t\t<div class=\"mr_work_online\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_show\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_c_r_t\">\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_self_site\">\n                                            <a class=\"mr_self_sitelink\" href=\"http://t.cn/RGIuWYq\" target=\"_blank\">http://t.cn/RGIuWYq</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_preview olpf\"><p>一个基于Spring Security 的权限管理系统雏形！</p></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_work_online\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_show\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_c_r_t\">\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_self_site\">\n                                            <a class=\"mr_self_sitelink\" href=\"http://t.cn/RGI34vz\" target=\"_blank\">http://t.cn/RGI34vz</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_preview olpf\"><p>一个基于Lucene 的全文检索系统！</p></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_work_online\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_show\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_c_r_t\">\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_self_site\">\n                                            <a class=\"mr_self_sitelink\" href=\"http://t.cn/RGMMe5C\" target=\"_blank\">http://t.cn/RGMMe5C</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_preview olpf\"><p>目标易</p></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"mr_work_upload\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_show\"> \n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_t\">\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"http://www.lagou.com/image2/M00/2A/69/CgqLKVbBgWSAYYSrAAFi9GJHjIk377.png\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\t<img class=\"wh43\" src=\"http://www.lagou.com/image2/M00/2A/69/CgqLKVbBgXGAA_QyAAEPYecTtcY416.png\" />\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_con\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>[</span><span class=\"mr_work_title\">基于大集中的企业级非结构数据管理平台</span><span>]</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_con_m olpf\">\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t\t<!--               自我描述                                             -->\n\t\t\t\t\t<div id=\"selfDescription\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">自我描述</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_self_l\">\n\t\t\t\t\t\t\t\t\t<!-- 自我描述头像为基本信息页面上传的头像，稍后和后台确认这个 -->\n\t\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t\t\t<img src=\"http://www.lagou.com/i/image/M00/03/54/Cgp3O1a192CADfftAADkLf41PVk149.jpg\" alt=\"陈文东\"/>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_self_r\">\n\t\t\t\t\t\t\t\t\t<p>一.我认为值得称道的工作细节是脚踏实地。细节决定成败，脚踏实地学好每个步骤、领会涵义，才能减少出错、拥有全盘考虑的能力。</p>\n<p>二.我曾经克服过的最大挑战是一个人在没有同事的教导，没有公司预先带领，出差到另外一个城市去客户现场跟客户对接。去跟客户联系交流，部署软件环境，讲解项目功能，完成出差任务。这考验了我的能力，平时学到的沟通技巧、对项目的整体认识以及临场反应等。</p>\n<p>三.对于一个热爱编程的家伙，利用工作外的业余时间，曾在Github上连击了47天的记录。</p>\n<p>四.我找工作时最看重技术氛围这方面，作为一名热爱编程的程序员，我对于各种技术非常感兴趣，希望能在一个充满技术氛围的地方学习到更多的技术，认识更多的大牛前辈。</p> \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"skillsAssess\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">技能评价</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"java\">java</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"spring\">spring</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"web\">web</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"mysql、oracle\">mysql、oracle</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"mybatis\">mybatis</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t</div><!-- end  mr_w604 -->\n\t\t\t\t\n\t\t\t\t<div class=\"mr_self_state\">\n   \t \t\t\t\t<div class=\"form_wrap mr_self_s resume_status\">\n\t\t\t\t\t\t·&nbsp;简历就放着吧，万一哪个Boss看中呢&nbsp;·\t\t\t\t   \t \t\t\t\t\n\t   \t \t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t  </div>\n\t    </div> \n\t  </div><!-- end #container -->\n\t</div><!-- end #body -->\n\t<script>\n\t(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p=\"1.9.1\",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,w=/\\S+/g,T=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,N=/^(?:(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,C=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,k=/^[\\],:{}\\s]*$/,E=/(?:^|:|,)(?:\\s*\\[)+/g,S=/\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,A=/\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)/g,j=/^-ms-/,D=/-([\\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||\"load\"===e.type||\"complete\"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener(\"DOMContentLoaded\",H,!1),e.removeEventListener(\"load\",H,!1)):(o.detachEvent(\"onreadystatechange\",H),e.detachEvent(\"onload\",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if(\"string\"==typeof e){if(i=\"<\"===e.charAt(0)&&\">\"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:\"\",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for(\"boolean\"==typeof s&&(c=s,s=arguments[1]||{},u=2),\"object\"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger(\"ready\").off(\"ready\"))}},isFunction:function(e){return\"function\"===b.type(e)},isArray:Array.isArray||function(e){return\"array\"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?l[m.call(e)]||\"object\":typeof e},isPlainObject:function(e){if(!e||\"object\"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,\"constructor\")&&!y.call(e.constructor.prototype,\"isPrototypeOf\"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||\"string\"!=typeof e)return null;\"boolean\"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:\"string\"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,\"@\").replace(A,\"]\").replace(E,\"\")))?Function(\"return \"+n)():(b.error(\"Invalid JSON: \"+n),t)},parseXML:function(n){var r,i;if(!n||\"string\"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,\"text/xml\")):(r=new ActiveXObject(\"Microsoft.XMLDOM\"),r.async=\"false\",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName(\"parsererror\").length||b.error(\"Invalid XML: \"+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,\"ms-\").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call(\"\\ufeff\\u00a0\")?function(e){return null==e?\"\":v.call(e)}:function(e){return null==e?\"\":(e+\"\").replace(T,\"\")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,\"string\"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if(\"number\"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return\"string\"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if(\"object\"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),\"complete\"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener(\"DOMContentLoaded\",H,!1),e.addEventListener(\"load\",H,!1);else{o.attachEvent(\"onreadystatechange\",H),e.attachEvent(\"onload\",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll(\"left\")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(e,t){l[\"[object \"+t+\"]\"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:\"array\"===n||\"function\"!==n&&(0===t||\"number\"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e=\"string\"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);\"function\"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&\"string\"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[[\"resolve\",\"done\",b.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",b.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",b.Callbacks(\"memory\")]],n=\"pending\",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+\"With\"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+\"With\"](this===i?r:this,arguments),this},i[o[0]+\"With\"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement(\"div\");if(d.setAttribute(\"className\",\"t\"),d.innerHTML=\"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\",n=d.getElementsByTagName(\"*\"),r=d.getElementsByTagName(\"a\")[0],!n||!r||!n.length)return{};s=o.createElement(\"select\"),l=s.appendChild(o.createElement(\"option\")),a=d.getElementsByTagName(\"input\")[0],r.style.cssText=\"top:1px;float:left;opacity:.5\",t={getSetAttribute:\"t\"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName(\"tbody\").length,htmlSerialize:!!d.getElementsByTagName(\"link\").length,style:/top/.test(r.getAttribute(\"style\")),hrefNormalized:\"/a\"===r.getAttribute(\"href\"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement(\"form\").enctype,html5Clone:\"<:nav></:nav>\"!==o.createElement(\"nav\").cloneNode(!0).outerHTML,boxModel:\"CSS1Compat\"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement(\"input\"),a.setAttribute(\"value\",\"\"),t.input=\"\"===a.getAttribute(\"value\"),a.value=\"t\",a.setAttribute(\"type\",\"radio\"),t.radioValue=\"t\"===a.value,a.setAttribute(\"checked\",\"t\"),a.setAttribute(\"name\",\"t\"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent(\"onclick\",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c=\"on\"+f,\"t\"),t[f+\"Bubbles\"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip=\"content-box\",d.cloneNode(!0).style.backgroundClip=\"\",t.clearCloneStyle=\"content-box\"===d.style.backgroundClip,b(function(){var n,r,a,s=\"padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;\",u=o.getElementsByTagName(\"body\")[0];u&&(n=o.createElement(\"div\"),n.style.cssText=\"border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px\",u.appendChild(n).appendChild(d),d.innerHTML=\"<table><tr><td></td><td>t</td></tr></table>\",a=d.getElementsByTagName(\"td\"),a[0].style.cssText=\"padding:0;margin:0;border:0;display:none\",p=0===a[0].offsetHeight,a[0].style.display=\"\",a[1].style.display=\"none\",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML=\"\",d.style.cssText=\"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition=\"1%\"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable=\"4px\"===(e.getComputedStyle(d,null)||{width:\"4px\"}).width,r=d.appendChild(o.createElement(\"div\")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width=\"0\",d.style.width=\"1px\",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML=\"\",d.style.cssText=s+\"width:1px;padding:1px;display:inline;zoom:1\",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display=\"block\",d.innerHTML=\"<div></div>\",d.firstChild.style.width=\"5px\",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u=\"string\"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),(\"object\"==typeof n||\"function\"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(\" \"));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:\"jQuery\"+(p+Math.random()).replace(/\\D/g,\"\"),noData:{embed:!0,object:\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute(\"classid\")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,\"parsedAttrs\"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf(\"data-\")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,\"parsedAttrs\",!0)}return s}return\"object\"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i=\"data-\"+n.replace(B,\"-$1\").toLowerCase();if(r=e.getAttribute(i),\"string\"==typeof r){try{r=\"true\"===r?!0:\"false\"===r?!1:\"null\"===r?null:+r+\"\"===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if((\"data\"!==t||!b.isEmptyObject(e[t]))&&\"toJSON\"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||\"fx\")+\"queue\",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||\"fx\";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};\"inprogress\"===i&&(i=n.shift(),r--),o.cur=i,i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks(\"once memory\").add(function(){b._removeData(e,t+\"queue\"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return\"string\"!=typeof e&&(n=e,e=\"fx\",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),\"fx\"===e&&\"inprogress\"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||\"fx\",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};\"string\"!=typeof e&&(n=e,e=t),e=e||\"fx\";while(s--)r=b._data(a[s],e+\"queueHooks\"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\\t\\r\\n]/g,U=/\\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=\"string\"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||\"\").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(X,\" \"):\" \")){o=0;while(i=t[o++])0>r.indexOf(\" \"+i+\" \")&&(r+=i+\" \");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||\"string\"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||\"\").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(X,\" \"):\"\")){o=0;while(i=t[o++])while(r.indexOf(\" \"+i+\" \")>=0)r=r.replace(\" \"+i+\" \",\" \");n.className=e?b.trim(r):\"\"}return this},toggleClass:function(e,t){var n=typeof e,r=\"boolean\"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(\"string\"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?\"addClass\":\"removeClass\"](o)}else(n===i||\"boolean\"===n)&&(this.className&&b._data(this,\"__className__\",this.className),this.className=this.className||e===!1?\"\":b._data(this,\"__className__\")||\"\")})},hasClass:function(e){var t=\" \"+e+\" \",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(\" \"+this[n].className+\" \").replace(X,\" \").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o=\"\":\"number\"==typeof o?o+=\"\":b.isArray(o)&&(o=b.map(o,function(e){return null==e?\"\":e+\"\"})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&\"set\"in r&&r.set(this,o,\"value\")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&\"get\"in r&&(n=r.get(o,\"value\"))!==t?n:(n=o.value,\"string\"==typeof n?n.replace(U,\"\"):null==n?\"\":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o=\"select-one\"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute(\"disabled\"))||n.parentNode.disabled&&b.nodeName(n.parentNode,\"optgroup\"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find(\"option\").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&\"get\"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&\"set\"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+\"\"),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase(\"default-\"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,\"\"),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&\"radio\"===t&&b.nodeName(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},propFix:{tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&\"set\"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&\"get\"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode(\"tabindex\");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i=\"boolean\"==typeof r&&e.getAttribute(n),o=\"boolean\"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase(\"default-\"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase(\"default-\"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,\"input\")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,\"input\")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(\"id\"===n||\"name\"===n||\"coords\"===n?\"\"!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+=\"\",\"value\"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,\"\"===t?!1:t,n)}},b.each([\"width\",\"height\"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return\"\"===r?(e.setAttribute(n,\"auto\"),r):t}})})),b.support.hrefNormalized||(b.each([\"href\",\"src\",\"width\",\"height\"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each([\"href\",\"src\"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+\"\"}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype=\"encoding\"),b.support.checkOn||b.each([\"radio\",\"checkbox\"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute(\"value\")?\"on\":e.value}}}),b.each([\"radio\",\"checkbox\"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||\"\").match(w)||[\"\"],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||\"\").split(\".\").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(\".\")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent(\"on\"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||\"\").match(w)||[\"\"],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||\"\").split(\".\").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&(\"**\"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,\"events\"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,\"type\")?n.type:n,m=y.call(n,\"namespace\")?n.namespace.split(\".\"):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(\".\")>=0&&(m=g.split(\".\"),g=m.shift(),m.sort()),u=0>g.indexOf(\":\")&&\"on\"+g,n=n[b.expando]?n:new b.Event(g,\"object\"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join(\".\"),n.namespace_re=n.namespace?RegExp(\"(^|\\\\.)\"+m.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,\"events\")||{})[n.type]&&b._data(l,\"handle\"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||\"click\"===g&&b.nodeName(i,\"a\")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,\"events\")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||\"click\"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||\"click\"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+\" \",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:\"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:\"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,\"input\")&&\"checkbox\"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:\"focusin\"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:\"focusout\"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r=\"on\"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;\n\treturn(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,\"form\")?!1:(b.event.add(this,\"click._submit keypress._submit\",function(e){var n=e.target,r=b.nodeName(n,\"input\")||b.nodeName(n,\"button\")?n.form:t;r&&!b._data(r,\"submitBubbles\")&&(b.event.add(r,\"submit._submit\",function(e){e._submit_bubble=!0}),b._data(r,\"submitBubbles\",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate(\"submit\",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,\"form\")?!1:(b.event.remove(this,\"._submit\"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?((\"checkbox\"===this.type||\"radio\"===this.type)&&(b.event.add(this,\"propertychange._change\",function(e){\"checked\"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,\"click._change\",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate(\"change\",this,e,!0)})),!1):(b.event.add(this,\"beforeactivate._change\",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,\"changeBubbles\")&&(b.event.add(t,\"change._change\",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate(\"change\",this.parentNode,e,!0)}),b._data(t,\"changeBubbles\",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||\"radio\"!==n.type&&\"checkbox\"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,\"._change\"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if(\"object\"==typeof e){\"string\"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&(\"string\"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+\".\"+i.namespace:i.origType,i.selector,i.handler),this;if(\"object\"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||\"function\"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x=\"sizzle\"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",F=\"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",O=F.replace(\"w\",\"w#\"),B=\"([*^$|!~]?=)\",P=\"\\\\[\"+_+\"*(\"+F+\")\"+_+\"*(?:\"+B+_+\"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\"+O+\")|)|)\"+_+\"*\\\\]\",R=\":(\"+F+\")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+P.replace(3,8)+\")*)|.*)\\\\)|)\",W=RegExp(\"^\"+_+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+_+\"+$\",\"g\"),$=RegExp(\"^\"+_+\"*,\"+_+\"*\"),I=RegExp(\"^\"+_+\"*([\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])\"+_+\"*\"),z=RegExp(R),X=RegExp(\"^\"+O+\"$\"),U={ID:RegExp(\"^#(\"+F+\")\"),CLASS:RegExp(\"^\\\\.(\"+F+\")\"),NAME:RegExp(\"^\\\\[name=['\\\"]?(\"+F+\")['\\\"]?\\\\]\"),TAG:RegExp(\"^(\"+F.replace(\"w\",\"w*\")+\")\"),ATTR:RegExp(\"^\"+P),PSEUDO:RegExp(\"^\"+R),CHILD:RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+_+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+_+\"*(?:([+-]|)\"+_+\"*(\\\\d+)|))\"+_+\"*\\\\)|)\",\"i\"),needsContext:RegExp(\"^\"+_+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+_+\"*((?:-\\\\d)?\\\\d*)\"+_+\"*\\\\)|)(?=[^-]|$)\",\"i\")},V=/[\\x20\\t\\r\\n\\f]*[+~]/,Y=/^[^{]+\\{\\s*\\[native code/,J=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\\d$/i,K=/'|\\\\/g,Z=/\\=[\\x20\\t\\r\\n\\f]*([^'\"\\]]*)[\\x20\\t\\r\\n\\f]*\\]/g,et=/\\\\([\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|.)/g,tt=function(e,t){var n=\"0x\"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+\"\")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=\" \")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement(\"div\");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||\"string\"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&\"object\"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute(\"id\"))?g=f.replace(K,\"\\\\$&\"):t.setAttribute(\"id\",g),g=\"[id='\"+g+\"'] \",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(\",\")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute(\"id\")}}}return wt(e.replace(W,\"$1\"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?\"HTML\"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),T.attributes=at(function(e){e.innerHTML=\"<select></select>\";var t=typeof e.lastChild.getAttribute(\"multiple\");return\"boolean\"!==t&&\"string\"!==t}),T.getByClassName=at(function(e){return e.innerHTML=\"<div class='hidden e'></div><div class='hidden'></div>\",e.getElementsByClassName&&e.getElementsByClassName(\"e\").length?(e.lastChild.className=\"e\",2===e.getElementsByClassName(\"e\").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML=\"<a name='\"+x+\"'></a><div name='\"+x+\"'></div>\",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML=\"<a href='#'></a>\",e.firstChild&&typeof e.firstChild.getAttribute!==A&&\"#\"===e.firstChild.getAttribute(\"href\")})?{}:{href:function(e){return e.getAttribute(\"href\",2)},type:function(e){return e.getAttribute(\"type\")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute(\"id\")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode(\"id\").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode(\"id\");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[\":focus\"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML=\"<select><option selected=''></option></select>\",e.querySelectorAll(\"[selected]\").length||h.push(\"\\\\[\"+_+\"*(?:checked|disabled|ismap|multiple|readonly|selected|value)\"),e.querySelectorAll(\":checked\").length||h.push(\":checked\")}),at(function(e){e.innerHTML=\"<input type='hidden' i=''/>\",e.querySelectorAll(\"[i^='']\").length&&h.push(\"[*^$]=\"+_+\"*(?:\\\"\\\"|'')\"),e.querySelectorAll(\":enabled\").length||h.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),h.push(\",.*:\")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,\"div\"),m.call(e,\"[s!='']:x\"),g.push(\"!=\",R)}),h=RegExp(h.join(\"|\")),g=RegExp(g.join(\"|\")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,\"='$1']\"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error(\"Syntax error, unrecognized expression: \"+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return\"input\"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return(\"input\"===n||\"button\"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||\"\").replace(et,tt),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return\"*\"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+\" \"];return t||(t=RegExp(\"(^|\"+_+\")\"+e+\"(\"+_+\"|$)\"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute(\"class\")||\"\")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?\"!=\"===t:t?(i+=\"\",\"=\"===t?i===n:\"!=\"===t?i!==n:\"^=\"===t?n&&0===i.indexOf(n):\"*=\"===t?n&&i.indexOf(n)>-1:\"$=\"===t?n&&i.slice(-n.length)===n:\"~=\"===t?(\" \"+i+\" \").indexOf(n)>-1:\"|=\"===t?i===n||i.slice(0,n.length+1)===n+\"-\":!1):!0}},CHILD:function(e,t,n,r,i){var o=\"nth\"!==e.slice(0,3),a=\"last\"!==e.slice(-4),s=\"of-type\"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?\"nextSibling\":\"previousSibling\",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g=\"only\"===e&&!h&&\"nextSibling\"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error(\"unsupported pseudo: \"+e);return r[x]?r(t):r.length>1?(n=[e,e,\"\",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,\"$1\"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||\"\")||st.error(\"unsupported lang: \"+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute(\"xml:lang\")||t.getAttribute(\"lang\"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+\"-\");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>\"@\"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+\" \"];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W,\" \")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r=\"\";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&\"parentNode\"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+\" \"+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||\"*\",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[\" \"],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,\"$1\"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b=\"0\",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG(\"*\",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+\" \"];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&\"ID\"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[\":\"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\\[\\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if(\"string\"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+\" \":\"\")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&(\"string\"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||\"string\"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?\"string\"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=\"string\"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,\"parentNode\")},parentsUntil:function(e,t,n){return b.dir(e,\"parentNode\",n)},next:function(e){return pt(e,\"nextSibling\")},prev:function(e){return pt(e,\"previousSibling\")},nextAll:function(e){return b.dir(e,\"nextSibling\")},prevAll:function(e){return b.dir(e,\"previousSibling\")},nextUntil:function(e,t,n){return b.dir(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return b.dir(e,\"previousSibling\",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,\"iframe\")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&\"string\"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=\":not(\"+e+\")\"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if(\"string\"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split(\"|\"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",gt=/ jQuery\\d+=\"(?:null|\\d+)\"/g,mt=RegExp(\"<(?:\"+ht+\")[\\\\s/>]\",\"i\"),yt=/^\\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,bt=/<([\\w:]+)/,xt=/<tbody/i,wt=/<|&#?\\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\\s*(?:[^=]|=\\s*.checked.)/i,kt=/^$|\\/(?:java|ecma)script/i,Et=/^true\\/(.*)/,St=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,At={option:[1,\"<select multiple='multiple'>\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],area:[1,\"<map>\",\"</map>\"],param:[1,\"<object>\",\"</object>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:b.support.htmlSerialize?[0,\"\",\"\"]:[1,\"X<div>\",\"</div>\"]},jt=dt(o),Dt=jt.appendChild(o.createElement(\"div\"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,\"body\")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,\"script\")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,\"select\")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,\"\"):t;if(!(\"string\"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||[\"\",\"\"])[1].toLowerCase()])){e=e.replace(vt,\"<$1></$2>\");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||\"string\"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||\"string\"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,\"tr\"),s=b.map(Ot(l,\"script\"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,\"script\"))),r.call(n&&b.nodeName(this[c],\"table\")?Lt(this[c],\"tbody\"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||\"\")&&!b._data(o,\"globalEval\")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:\"GET\",dataType:\"script\",async:!1,global:!1,\"throws\":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||\"\").replace(St,\"\")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode(\"type\");return e.type=(t&&t.specified)+\"/\"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute(\"type\"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,\"globalEval\",!t||b._data(t[r],\"globalEval\"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}\"script\"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):\"object\"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):\"input\"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):\"option\"===n?t.defaultSelected=t.selected=e.defaultSelected:(\"input\"===n||\"textarea\"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||\"*\"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||\"*\"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test(\"<\"+e.nodeName+\">\")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,\"script\"),r.length>0&&Mt(r,!u&&Ot(e,\"script\")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if(\"object\"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement(\"div\")),u=(bt.exec(o)||[\"\",\"\"])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,\"<$1></$2>\")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o=\"table\"!==u||xt.test(o)?\"<table>\"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],\"tbody\")&&!l.childNodes.length&&o.removeChild(l)\n\t}b.merge(d,s.childNodes),s.textContent=\"\";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,\"input\"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),\"script\"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||\"\")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\\([^)]*\\)/i,It=/opacity\\s*=\\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp(\"^(\"+x+\")(.*)$\",\"i\"),Yt=RegExp(\"^(\"+x+\")(?!px)[a-z%]+$\",\"i\"),Jt=RegExp(\"^([+-])=(\"+x+\")\",\"i\"),Gt={BODY:\"block\"},Qt={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Kt={letterSpacing:0,fontWeight:400},Zt=[\"Top\",\"Right\",\"Bottom\",\"Left\"],en=[\"Webkit\",\"O\",\"Moz\",\"ms\"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,\"none\"===b.css(e,\"display\")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,\"olddisplay\"),n=r.style.display,t?(o[a]||\"none\"!==n||(r.style.display=\"\"),\"\"===r.style.display&&nn(r)&&(o[a]=b._data(r,\"olddisplay\",un(r.nodeName)))):o[a]||(i=nn(r),(n&&\"none\"!==n||!i)&&b._data(r,\"olddisplay\",i?n:b.css(r,\"display\"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&\"none\"!==r.style.display&&\"\"!==r.style.display||(r.style.display=t?o[a]||\"\":\"none\"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t=\"boolean\"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":b.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&\"get\"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,\"string\"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a=\"number\"),!(null==r||\"number\"===a&&isNaN(r)||(\"number\"!==a||b.cssNumber[u]||(r+=\"px\"),b.support.clearCloneStyle||\"\"!==r||0!==n.indexOf(\"background\")||(l[n]=\"inherit\"),s&&\"set\"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&\"get\"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),\"normal\"===a&&n in Kt&&(a=Kt[n]),\"\"===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(\"\"!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left=\"fontSize\"===n?\"1em\":u,u=l.pixelLeft+\"px\",l.left=i,a&&(o.left=a)),\"\"===u?\"auto\":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||\"px\"):t}function an(e,t,n,r,i){var o=n===(r?\"border\":\"content\")?4:\"width\"===t?1:0,a=0;for(;4>o;o+=2)\"margin\"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?(\"content\"===n&&(a-=b.css(e,\"padding\"+Zt[o],!0,i)),\"margin\"!==n&&(a-=b.css(e,\"border\"+Zt[o]+\"Width\",!0,i))):(a+=b.css(e,\"padding\"+Zt[o],!0,i),\"padding\"!==n&&(a+=b.css(e,\"border\"+Zt[o]+\"Width\",!0,i)));return a}function sn(e,t,n){var r=!0,i=\"width\"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&\"border-box\"===b.css(e,\"boxSizing\",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?\"border\":\"content\"),r,o)+\"px\"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),\"none\"!==n&&n||(Pt=(Pt||b(\"<iframe frameborder='0' width='0' height='0'/>\").css(\"cssText\",\"display:block !important\")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write(\"<!doctype html><html><body>\"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],\"display\");return n.remove(),r}b.each([\"height\",\"width\"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,\"display\"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&\"border-box\"===b.css(e,\"boxSizing\",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||\"\")?.01*parseFloat(RegExp.$1)+\"\":t?\"1\":\"\"},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?\"alpha(opacity=\"+100*t+\")\":\"\",o=r&&r.filter||n.filter||\"\";n.zoom=1,(t>=1||\"\"===t)&&\"\"===b.trim(o.replace($t,\"\"))&&n.removeAttribute&&(n.removeAttribute(\"filter\"),\"\"===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+\" \"+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:\"inline-block\"},Wt,[e,\"marginRight\"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each([\"top\",\"left\"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+\"px\":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&\"none\"===(e.style&&e.style.display||b.css(e,\"display\"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:\"\",padding:\"\",border:\"Width\"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o=\"string\"==typeof n?n.split(\" \"):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\\[\\]$/,fn=/\\r?\\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,\"elements\");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(\":disabled\")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,\"\\r\\n\")}}):{name:t.name,value:n.replace(fn,\"\\r\\n\")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?\"\":t,i[i.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join(\"&\").replace(cn,\"+\")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+\"[\"+(\"object\"==typeof i?t:\"\")+\"]\",i,n,r)});else if(n||\"object\"!==b.type(t))r(e,t);else for(i in t)gn(e+\"[\"+i+\"]\",t[i],n,r)}b.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\\/\\//,En=/^([\\w.+-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn=\"*/\".concat(\"*\");try{yn=a.href}catch(Ln){yn=o.createElement(\"a\"),yn.href=\"\",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){\"string\"!=typeof t&&(n=t,t=\"*\");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])\"+\"===r[0]?(r=r.slice(1)||\"*\",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return\"string\"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o[\"*\"]&&s(\"*\")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if(\"string\"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(\" \");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&\"object\"==typeof n&&(a=\"POST\"),s.length>0&&b.ajax({url:e,type:a,dataType:\"html\",data:n}).done(function(e){o=arguments,s.html(i?b(\"<div>\").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each([\"get\",\"post\"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:\"GET\",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":Dn,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\"},converters:{\"* text\":e.String,\"text html\":!0,\"text json\":b.parseJSON,\"text xml\":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){\"object\"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks(\"once memory\"),m=p.statusCode||{},y={},v={},x=0,T=\"canceled\",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+\"\").replace(xn,\"\").replace(kn,mn[1]+\"//\"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||\"*\").toLowerCase().match(w)||[\"\"],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(\"http:\"===r[1]?80:443))==(mn[3]||(\"http:\"===mn[1]?80:443)))),p.data&&p.processData&&\"string\"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger(\"ajaxStart\"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?\"&\":\"?\")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,\"$1_=\"+vn++):o+(bn.test(o)?\"&\":\"?\")+\"_=\"+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader(\"If-Modified-Since\",b.lastModified[o]),b.etag[o]&&N.setRequestHeader(\"If-None-Match\",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader(\"Content-Type\",p.contentType),N.setRequestHeader(\"Accept\",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(\"*\"!==p.dataTypes[0]?\", \"+Dn+\"; q=0.01\":\"\"):p.accepts[\"*\"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T=\"abort\";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger(\"ajaxSend\",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort(\"timeout\")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,\"No Transport\");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||\"\",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader(\"Last-Modified\"),T&&(b.lastModified[o]=T),T=N.getResponseHeader(\"etag\"),T&&(b.etag[o]=T)),204===e?(c=!0,C=\"nocontent\"):304===e?(c=!0,C=\"notmodified\"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C=\"error\",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+\"\",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?\"ajaxSuccess\":\"ajaxError\",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger(\"ajaxComplete\",[N,p]),--b.active||b.event.trigger(\"ajaxStop\")))}return N},getScript:function(e,n){return b.get(e,t,n,\"script\")},getJSON:function(e,t,n){return b.get(e,t,n,\"json\")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while(\"*\"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader(\"Content-Type\"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+\" \"+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if(\"*\"!==r){if(\"*\"!==l&&l!==r){if(i=a[l+\" \"+r]||a[\"* \"+r],!i)for(n in a)if(o=n.split(\" \"),o[1]===r&&(i=a[l+\" \"+o[0]]||a[\"* \"+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e[\"throws\"])t=i(t);else try{t=i(t)}catch(c){return{state:\"parsererror\",error:i?c:\"No conversion from \"+l+\" to \"+r}}}l=r}return{state:\"success\",data:t}}b.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/(?:java|ecma)script/},converters:{\"text script\":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter(\"script\",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\",e.global=!1)}),b.ajaxTransport(\"script\",function(e){if(e.crossDomain){var n,r=o.head||b(\"head\")[0]||o.documentElement;return{send:function(t,i){n=o.createElement(\"script\"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,\"success\"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\\?(?=&|$)|\\?\\?/;b.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=On.pop()||b.expando+\"_\"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter(\"json jsonp\",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?\"url\":\"string\"==typeof n.data&&!(n.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Bn.test(n.data)&&\"data\");return u||\"jsonp\"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,\"$1\"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?\"&\":\"?\")+n.jsonp+\"=\"+o),n.converters[\"script json\"]=function(){return s||b.error(o+\" was not called\"),s[0]},n.dataTypes[0]=\"json\",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),\"script\"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&\"withCredentials\"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i[\"X-Requested-With\"]||(i[\"X-Requested-With\"]=\"XMLHttpRequest\");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),\"string\"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=\"\"}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp(\"^(?:([+-])=|)(\"+x+\")([a-z%]*)$\",\"i\"),Jn=/queueHooks$/,Gn=[nr],Qn={\"*\":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?\"\":\"px\"),\"px\"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||\".5\",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn[\"*\"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&\"expand\"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=[\"*\"]):e=e.split(\" \");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,\"fx\"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,\"fx\").length||c.empty.fire()})})),1===e.nodeType&&(\"height\"in t||\"width\"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],\"inline\"===b.css(e,\"display\")&&\"none\"===b.css(e,\"float\")&&(b.support.inlineBlockNeedsLayout&&\"inline\"!==un(e.nodeName)?d.zoom=1:d.display=\"inline-block\")),n.overflow&&(d.overflow=\"hidden\",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||\"toggle\"===a,a===(m?\"hide\":\"show\"))continue;g.push(i)}if(o=g.length){s=b._data(e,\"fxshow\")||b._data(e,\"fxshow\",{}),\"hidden\"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,\"fxshow\");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start=\"width\"===r||\"height\"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||\"swing\",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?\"\":\"px\")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,\"\"),t&&\"auto\"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each([\"toggle\",\"show\",\"hide\"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||\"boolean\"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,\"finish\"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return\"string\"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||\"fx\",[]),this.each(function(){var t=!0,n=null!=e&&e+\"queueHooks\",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||\"fx\"),this.each(function(){var t,n=b._data(this),r=n[e+\"queue\"],i=n[e+\"queueHooks\"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r[\"margin\"+n]=r[\"padding\"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir(\"show\"),slideUp:ir(\"hide\"),slideToggle:ir(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&\"object\"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:\"number\"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,\"position\");\"static\"===r&&(e.style.position=\"relative\");var i=b(e),o=i.offset(),a=b.css(e,\"top\"),s=b.css(e,\"left\"),u=(\"absolute\"===r||\"fixed\"===r)&&b.inArray(\"auto\",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),\"using\"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return\"fixed\"===b.css(r,\"position\")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],\"html\")||(n=e.offset()),n.top+=b.css(e[0],\"borderTopWidth\",!0),n.left+=b.css(e[0],\"borderLeftWidth\",!0)),{top:t.top-n.top-b.css(r,\"marginTop\",!0),left:t.left-n.left-b.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,\"html\")&&\"static\"===b.css(e,\"position\"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:\"height\",Width:\"width\"},function(e,n){b.each({padding:\"inner\"+e,content:n,\"\":\"outer\"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||\"boolean\"!=typeof i),s=r||(i===!0||o===!0?\"margin\":\"border\");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement[\"client\"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body[\"scroll\"+e],o[\"scroll\"+e],n.body[\"offset\"+e],o[\"offset\"+e],o[\"client\"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,\"function\"==typeof define&&define.amd&&define.amd.jQuery&&define(\"jquery\",[],function(){return b})})(window);\t\t\n\t\t$(function(){\n\t\t\t//技能评价\n\t\t\t$('.mr_skill_con .mr_skill_plan').each(function(){\n\t\t\t\tvar percent = $(this).attr('data-skillLevel');\n\t\t\t\tvar width = $(this).outerWidth();\n\t\t\t\tvar pre = percent / 100 * width;\n\t\t\t\t$(this).find('em').width(pre + 10 );\n\t\t\t});\n\t\t})\n\t</script>\n</body>\n</html>","date":"2016-07-04T08:37:58.608Z","updated":"2016-07-04T08:37:58.608Z","path":"resume/index.html","title":"","comments":1,"layout":"page","_id":"ciy431ort002ruco080rspqxp","content":"<!DOCTYPE HTML>\n<html>\n<head>\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=10;IE=9;IE=8;IE=7;IE=EDGE\">\n<meta http-equiv=\"Cache-Control\" content=\"no-siteapp\">\n<link rel=\"alternate\" media=\"handheld\" href=\"#\">\n<meta charset=\"utf-8\">\n<title>简历</title>\n</head>\n<body>\n<div id=\"body\">\n    <div id=\"container\">\n<style type=\"text/css\">\nbody{margin: 0;padding: 0;font: 14px/22px \"微软雅黑\",\"宋体\",Arial;color: #333;word-wrap: break-word;}\n.clearfixs:before,.clearfixs:after{content:\"\";display:table;}\n.clearfixs:after{display:block;clear:both;}\n.clearfixs{*zoom:1;}\ninput[type=\"text\"]:focus{border:1px solid #32dbb3;}\n.mr_created input[type=\"text\"]:focus{border-width:1px;}\n.mr_content input[type=\"text\"]:focus{border:none;}\n.mr_created input{border:none;}\na:hover{color:#00b88d;}\n.fl{float:left;}\nh1, h2, h3, h4, h5 {\nfont-weight: normal;\n}\n/* 为创建在线简历 */\n.dn{display:none;}\n.mr_created input,.mr_created textarea{font-size:14px;}\n.mr_uncreate *{list-style:none;}\n.mr_uncreate *,.mr_created *{margin:0;padding:0;}\n.mr_created .city_s .xl_list ,.mr_uncreate .city_s .xl_list{height:130px;}\n.mr_created .mr_selCity,.mr_uncreate .mr_selCity{top:0;}\n.mr_created .mr_selCity ul.mr_province ul,.mr_uncreate .mr_selCity ul.mr_province ul{width:287px;height:110px;padding:10px;}\n.mr_created #mr_mr_head *,.mr_created .mr_myresume_r *{list-style:none;}\n.mr_created #mr_mr_head{margin-bottom:0;}\n.mr_created .mr_baseinfo{border-bottom:none;border-bottom-right-radius:0px;border-bottom-left-radius:0px;}\n.mr_created .mr_infoed{margin-bottom:0px;}\n.mr_myresume_l{float:left;width:702px;margin-bottom:20px;}\n.mr_created #mr_mr_head{margin-bottom:0;}\n.mr_created #mr_mr_head *,.mr_created .mr_myresume_r *{list-style:none;}\n\n.mr_w604{width:604px;margin:0 auto;}\n.mr_p_name{height:40px;line-height:38px;margin-bottom:8px;}\n.mr_name{display:block;height:40px;width:468px;margin:0 auto;line-height:40px;font-size:30px;color:#333;text-align:center;}\n.mr_intro{display:block;color:#333;text-align:center;margin:0 auto;}\n.mr_p_introduce .mr_intro{font-size:16px;width:468px;line-height:26px;}\n.mr_p_introduce .mr_intro_grey{color:#bdbdbd;font-style: italic;}\n.mr_active{background-color: #fefef2;}\n/* 未创建在线 基本信息 */\n.mr_myresume_l input{margin:0;}\n.form_wrap{position:relative;cursor:pointer;width:396px;height:46px;border:1px solid #f1f3e9;background-color:#fff;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;margin-bottom:9px;}\n.form_wrap .mr_button{text-align:left;padding-left:17px;width:327px;height:46px;background-color:#fff;}\n.form_wrap .mr_input{width:327px;padding:0 0 0 17px;border:none;height:46px;}\n.form_wrap .mr_input:focus{border:none;}\n.form_wrap_y .mr_button{width:150px;}\n.mr_sj{position:absolute;right:18px;top:20px;border: 6px solid #fff;border-color: #d3d3d3 transparent transparent;display: block;font-size: 0px;height: 0;width: 0;}\n\n.form_wrap_y{width:188px;}\n\n/*已创建在线简历 jason 2014/9/8*/\n.mr_p_introduce{min-height:34px;line-height:32px;margin-bottom:4px;}\n/*在线简历页面主内容区域*/\n.mr_myresume_l .mr_content{padding-top:26px;background-color: #fafafa;border: 1px solid #f2f2f2;border-bottom:2px solid #f2f2f2;border-top:none;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;}\n.mr_moudle_head{margin-bottom:23px;}\n.mr_moudle_head .mr_head_l{float:left;}\n.mr_moudle_head .mr_head_r{float:right;margin-top:3px;cursor:pointer;}\n.mr_title span{vertical-align:middle;display:inline-block;}\n.mr_title .mr_title_l{width:230px;height:0;border-top:1px solid #ededed;}\n.mr_title .mr_title_c{font-size:18px;padding:6px 24px;text-align:center;background-color:#eee;-moz-border-radius:26px;-webkit-border-radius:26px;border-radius:26px;margin:0 13px;}\n.mr_title .mr_title_r{width:152px;height:0;border-top:1px solid #ededed;}\n.mr_moudle_head .mr_head_r *{vertical-align:middle;}\n.mr_moudle_head .mr_head_r em{font-size:16px;color:#00b88d;}\n.mr_moudle_head .mr_head_r i{display: inline-block;width: 15px;height: 15px;background: url(http://www.lagou.com/images/myresume/icons_mr.png) -5px -69px no-repeat;margin-right:6px;}\n.mr_moudle_content{padding-bottom:21px;color:#555;font-size:14px;} /* 块  margin-bottom 48*/\n.mr_moudle_content .mr_content_l{float:left;max-width: 445px;}\n.mr_moudle_content .mr_content_r{float:right;}\n.mr_content_l .l1{float:left;margin-right:10px;}\n.mr_content_l .l2{position: relative;float: left;padding-top: 10px;max-width: 380px;}\n.mr_content_l .l2 a.projectTitle{/* position:relative; */font-size:16px;color:#555;text-decoration:none}\n.mr_content_l .l2 a.projectTitle:hover{color:#00b88d}\n.mr_content_l .l2 a.nourl{cursor:default;}\n.mr_content_l .l2 a.nourl:hover{color:#555;}\n.mr_content_l .l2 p{color:#999;}\n.mr_content_l .l2 a.projectTitle span{position:absolute;top:14px;right:-18px;width:12px;height:12px;background:url(http://www.lagou.com/images/myresume/icons_mr.png) -95px -197px no-repeat;}\n.mr_content_l .l1 img{width:46px;height:46px;border:2px solid #eee;}\n.mr_content_l .l2 h4{font-size:16px;}\n.mr_content_l .l2 span{color:#999;display:block;}\n.mr_c_r_t{text-align:right;margin:5px 0 2px 0;*margin-top:8px;float:none;}\n.mr_content_r span{color:#999;}\n.mr_content_m{padding:14px 0 0 0px;*padding-left:1px;color:#555;}\n.mr_jobe_list{padding-bottom:10px;}\n.mr_wo_show{padding:13px 18px 46px 42px;background-color:#00b88d;margin-bottom:38px;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;}\n.mr_wo_show p{line-height:26px;color:#fff;}\n.mr_self_site{color:#fff;margin-bottom:8px;font-size:24px;}\n.mr_self_sitelink {font-weight:bold;text-decoration:none;/* display:inline-block;width:558px; */word-break:break-all;color: #fff;}\n.mr_self_sitelink:hover{color:#fff;}\n.mr_wo_show .mr_c_r_t em{color:#50f9d2;}\n.mr_wo_show .mr_c_r_t i{background:url(http://www.lagou.com/images/myresume/icons_mr.png) -131px -115px no-repeat;}\n.wh43{width:100%;}\n.mr_work_upload .l2 span{display:inline-block;}\n.mr_wu_con .mr_work_title{margin:0 6px;}\n.mr_wu_show{margin-bottom:20px;}\n.mr_wu_show .mr_c_r_t{padding-top:4px;}\n.mr_wu_con .l2 span{color:#333;}\n.mr_wu_show .mr_wu_con_m{color:#555;}\n.mr_self_l{position:relative;height:81px;}\n.mr_self_l img{position:absolute;left:4px;width:73px;height:73px;top:8px;}\n.mr_self_l i{position:absolute;z-index:2;width:81px;height:81px;background:url(http://www.lagou.com/images/myresume/mr_txs.png) no-repeat;} \n.mr_moudle_content .mr_self_l{float:left;width:100px;padding-top:5px;}\n.mr_moudle_content .mr_self_r{float:left;width:504px;color:#555;line-height:26px;}\n.mr_jobtype_li{width:128px;}\n.mr_sns .sns10 span{min-width:56px;}\n.mr_jobtype_li i{width:17px;height:17px;background-position:-93px -247px;}\n/* \n.mr_skill_con{padding-left:20px;margin-bottom:18px;}\n.mr_skill_con span{vertical-align:middle;display:inline-block;}\n.mr_skill_con .mr_skill_name{width:90px;height:22px;text-align:right;margin-right:13px;word-wrap:break-word;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;}\n.mr_skill_con .mr_skill_name:after{\ncontent:\"...\";\n}\n.mr_skill_con .mr_skill_plan{position:relative;width:420px;height:8px;border-radius:4px;background-color:#eee;margin-right:21px;overflow:hidden;}\n.mr_skill_plan em{position:absolute;left:0;top:0;display:inline-block;height:8px;width:370px;background-color:#00b88d;border-radius:4px;overflow:hidden;} */\n.mr_skill_con{padding-left:16px;margin-bottom:14px;position:relative;}\n.mr_skill_con span{vertical-align:middle;display:inline-block;}\n.mr_skill_con .mr_skill_name{width:90px;height:22px;text-align:right;margin-right:13px;word-wrap:break-word;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;}\n/* .mr_skill_con .mr_skill_name:after{\ncontent:\"...\";\n} */\n.mr_skill_con .mr_skill_plan{position:relative;width:410px;height:8px;border-radius:4px;background-color:#eee;margin-right:21px;overflow:hidden;}\n.mr_skill_plan em{position:absolute;left:0;top:0;display:inline-block;height:8px;background-color:#00b88d;border-radius:4px;overflow:hidden;}\n.mr_skill_con .mr_skill_delete{width:13px;height:13px;background:url(http://www.lagou.com/images/myresume/skill_delete.png) center top no-repeat;cursor:pointer;}\n.mr_moudle_content .mr_skill_add{padding-left:125px;*padding-left:104px;color:#999999;font-size:16px;}\n.mr_skill_add span{display:inline-block;width:88px;text-indent:22px;background:url(http://www.lagou.com/images/myresume/skill_add.png) left 3px no-repeat;cursor:pointer;}\n\n.mr_title .cust_title{position:absolute;top:-4px;left: 50%;padding:0 13px;background-color:#FAFAFA;}\n\n.cust_title span{padding:6px 24px;text-align: center;font-size: 18px;background-color: #eee;-moz-border-radius: 26px;-webkit-border-radius: 26px;border-radius: 26px;}\n.mr_skill_con .mr_skill_circle{display:inline-block;width:20px;height:19px;position:absolute;left:122px;top:3px;background:url(http://www.lagou.com/images/myresume/skill_circle.png) no-repeat center top;}\n.mr_skill_circle em{display:inline-block;width:29px;height:23px;position:absolute;right: -4px;top: -22px;text-align: center;line-height:18px;padding: 0px;color: #ffffff;background:url(http://www.lagou.com/images/myresume/skill_img.png) center top no-repeat;font-size:10px;}\n\n\n/****一句话介绍****/\n.mrcenter{margin:0 auto 20px auto; float:none;}\n\n\n\n/*底部求职者职场状态*/\n.mr_self_state{position:relative;height:94px;background-color:#f6f6f6;color:#555;font-size:14px;text-align: center;}\n.mr_self_state *{list-style:none;}\n.mr_self_state .form_wrap{position:absolute;top:50%;left:50%;margin:-24px 0 0 -135px;border:1px solid #eaeced;width:270px;}\n.mr_self_state .mr_button{width:240px;}\n.mr_self_state .select_color{border-color:#32dbb3;}\n.mr_self_state .xl_list{width:270px;}\n\n\n\n.m_portrait{width:100%;height:135px;position:relative;z-index:2;background:url(http://www.lagou.com/images/myresume/head_bg.jpg) no-repeat;}\n.m_portrait .opa{position:absolute;}\n.mr_wo_preview ol,.mr_wu_con_m ol,.mr_self_r ol,.mr_expjob_content ol,.mr_wo_preview ul,.mr_wu_con_m ul,.mr_self_r ul,.mr_expjob_content ul{padding-left:19px;}\n.olpf ol,.olpf ul{padding-left:19px;}\n.mr_wo_preview {color:#fff;}\n.mr_preview .mr_title .mr_title_r{width:228px;}\n.resume_status {background: #f6f6f6;border: none!important;text-align: center;margin: -12px 0 0 -135px!important;cursor: default;}\n.m_portrait div {\n\t/* background: url(http://www.lagou.com/images/profile_cover.png) no-repeat;\n\twidth: 120px;\n\theight: 120px;\n\tposition: absolute;\n\tz-index: 5; */\n\twidth:200px;\n\theight:132px;\n\tposition:absolute;\n\tleft:41%;\n\ttop:39px;\n\tz-index:100;\n}\n</style>\n\t<div class=\"clearfixs mr_created mr_preview\">\n\t\t<div class=\"mr_myresume_l mrcenter\">\n\t\t\n\t\t\t<!--                  工作经历                                                 -->\n\t\t\t<div class=\"mr_content\">\n\t\t\t\t<div class=\"mr_w604\">\n\t\t\t\t\t<div id=\"workExperience\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\"> 工作经历  </span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t<div class=\"list_show\">\n\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>广州**信息技术有限公司</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>java工程师</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.03 -- 至今</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>广州美络信息科技有限公司</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>java工程师</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2015.03 -- 2016.03</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>广州阳光耐特电子有限公司</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>java工程师</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2014.10 -- 2015.03</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"educationalBackground\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">教育经历</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<!-- <div class=\"mr_head_r\">\n\t\t\t\t\t\t\t\t\t<i></i><em>添加</em>\n\t\t\t\t\t\t\t\t</div> -->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t<div class=\"list_show\">\t\n\t\t\t\t\t\t\t\t<div class=\"clearfixs mb46 mr_jobe_list\" style=\"padding-bottom:0px;\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l1\">\n\t\t\t\t\t\t\t\t\t\t\t<!-- 学校图片后台还没有给（待确认是否没有图片就不展示），参照工作经历 -->\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"http://www.lagou.com/images/schoolBadge/875fc22f853842579608bff745cf3f1f.jpeg\">\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>五邑大学</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>本科 · 电子信息工程</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"projectExperience\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">项目经验</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\" id=\"projectList\">\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle\" target=\"_blank\" href=\"http://www.goaleasy.cn/\"><span></span>目标易</a>\n\t\t\t\t\t\t\t\t\t\t\t<p>java工程师</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2015.07 -- 2016.03</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>1.项目描述：&quot;目标易&quot;是基于移动即时通讯并且适用于IOS、Android、PC等终端的系统，旨在满足集团型企业内部员工之间的移动化沟通需求，实现更便捷、顺畅的办公交流；另外，“目标易”支持现有业务系统功能的整合，构建基于移动互联网的企业“微应用”中心，扩大电子政务的实际利用范围。</p>\n<p>2.使用技术： Spring SpringMVC Mybatis</p>\n<p>3.责任描述：1）负责服务器端的用户、企业、部门等组织模块的API接口的开发</p>\n<p>2）负责“外勤管理”、“企业日程”、“通知公告”、“企业黄页”、“电子便签”、“任务协作”等微应用的系统设计、后台代码编写、测试。</p>\n<p>3）与前端人员协作完成部分前端模块功能。</p>\n<p>4）参与系统需求分析、系统设计、文档编写。</p>\n<p><br></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">基于大集中的企业级非结构数据管理平台</a>\n\t\t\t\t\t\t\t\t\t\t\t<p>java工程师</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2015.03 -- 2015.10</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>1.项目描述：面对电力企业非结构化数据分散存储在各个业务系统和大量的个人桌面，从而造成难以管理、利用乏力的现状，项目提出在业务系统省级大集中部署模式下构建分布式非结构数据管理平台的思路，将业务系统中的非结构文档剥离和个人桌面的非结构文档自动归集,采用省地两级存储和集中统一管理的方式，结合数据采集获取、数据二维管理及数据分布式传输等技术手段，为企业非结构化数据统一管理、快速访问、减轻骨干网传输压力、大数据分析利用应用提供解决方案。</p>\n<p>2.使用技术： J2EE Mybatis EXT JS Jquery Lucene Groovy FreeMaker MYSQL</p>\n<p>3.责任描述：1）负责“业务模拟系统”中“客户附件”、“服务发票”、“服务合同”三个模拟场景的模块开发、维护。</p>\n<p>2）在管理平台上负责“非结构借阅”、“非结构收藏夹”、“非结构邮件同步”、“元数据管理”、“全文检索”等模块的主要代码编写。</p>\n<p>3）对系统进行测试，负责对整个系统中出现的bug进行修复。</p>\n<p>3）参与系统需求分析、系统设计、文档编写、系统维护。</p>\n<p>4）去跟客户联系交流，讲解项目功能，部署软件环境。</p>\n<p><br></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">微信开发</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.03 -- 至今</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>负责公司微信服务号的开发与后台维护以及微信平台运营活动开发</p>\n\t\t\t\t\t\t\t\t\t<p style=\"color:#00b88d\">Coding</p>\n\t\t\t\t\t\t\t\t\t<p><br></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">运营平台</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.04-- 2016.06</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>一个医生与专家沟通的病例管理平台，负责大部分模块的开发</p>\n\t\t\t\t\t\t\t\t\t<p><br></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">官网首页</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.05-- 2016.06</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>都成前端大神了-_-</p>\n\t\t\t\t\t\t\t\t\t<p><br></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\"> \n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">挂号网公众号开发</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.06-- 2016.07</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>公众号项目整体开发</p>\n\t\t\t\t\t\t\t\t\t<p><br></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--                 作品展示                                                -->\n\t\t\t\t\t<div id=\"worksShow\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">作品展示</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t\t<div class=\"mr_work_online\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_show\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_c_r_t\">\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_self_site\">\n                                            <a class=\"mr_self_sitelink\" href=\"http://t.cn/RGIuWYq\" target=\"_blank\">http://t.cn/RGIuWYq</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_preview olpf\"><p>一个基于Spring Security 的权限管理系统雏形！</p></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_work_online\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_show\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_c_r_t\">\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_self_site\">\n                                            <a class=\"mr_self_sitelink\" href=\"http://t.cn/RGI34vz\" target=\"_blank\">http://t.cn/RGI34vz</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_preview olpf\"><p>一个基于Lucene 的全文检索系统！</p></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_work_online\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_show\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_c_r_t\">\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_self_site\">\n                                            <a class=\"mr_self_sitelink\" href=\"http://t.cn/RGMMe5C\" target=\"_blank\">http://t.cn/RGMMe5C</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_preview olpf\"><p>目标易</p></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"mr_work_upload\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_show\"> \n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_t\">\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"http://www.lagou.com/image2/M00/2A/69/CgqLKVbBgWSAYYSrAAFi9GJHjIk377.png\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\t<img class=\"wh43\" src=\"http://www.lagou.com/image2/M00/2A/69/CgqLKVbBgXGAA_QyAAEPYecTtcY416.png\">\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_con\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>[</span><span class=\"mr_work_title\">基于大集中的企业级非结构数据管理平台</span><span>]</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_con_m olpf\">\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t\t<!--               自我描述                                             -->\n\t\t\t\t\t<div id=\"selfDescription\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">自我描述</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_self_l\">\n\t\t\t\t\t\t\t\t\t<!-- 自我描述头像为基本信息页面上传的头像，稍后和后台确认这个 -->\n\t\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t\t\t<img src=\"http://www.lagou.com/i/image/M00/03/54/Cgp3O1a192CADfftAADkLf41PVk149.jpg\" alt=\"陈文东\">\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_self_r\">\n\t\t\t\t\t\t\t\t\t<p>一.我认为值得称道的工作细节是脚踏实地。细节决定成败，脚踏实地学好每个步骤、领会涵义，才能减少出错、拥有全盘考虑的能力。</p>\n<p>二.我曾经克服过的最大挑战是一个人在没有同事的教导，没有公司预先带领，出差到另外一个城市去客户现场跟客户对接。去跟客户联系交流，部署软件环境，讲解项目功能，完成出差任务。这考验了我的能力，平时学到的沟通技巧、对项目的整体认识以及临场反应等。</p>\n<p>三.对于一个热爱编程的家伙，利用工作外的业余时间，曾在Github上连击了47天的记录。</p>\n<p>四.我找工作时最看重技术氛围这方面，作为一名热爱编程的程序员，我对于各种技术非常感兴趣，希望能在一个充满技术氛围的地方学习到更多的技术，认识更多的大牛前辈。</p> \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"skillsAssess\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">技能评价</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"java\">java</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skilllevel=\"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"spring\">spring</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skilllevel=\"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"web\">web</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skilllevel=\"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"mysql、oracle\">mysql、oracle</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skilllevel=\"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"mybatis\">mybatis</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skilllevel=\"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t</div><!-- end  mr_w604 -->\n\t\t\t\t\n\t\t\t\t<div class=\"mr_self_state\">\n   \t \t\t\t\t<div class=\"form_wrap mr_self_s resume_status\">\n\t\t\t\t\t\t·&nbsp;简历就放着吧，万一哪个Boss看中呢&nbsp;·\t\t\t\t   \t \t\t\t\t\n\t   \t \t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t  </div>\n\t    </div> \n\t  </div><!-- end #container -->\n\t</div><!-- end #body -->\n\t<script>\n\t(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p=\"1.9.1\",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,w=/\\S+/g,T=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,N=/^(?:(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,C=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,k=/^[\\],:{}\\s]*$/,E=/(?:^|:|,)(?:\\s*\\[)+/g,S=/\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,A=/\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)/g,j=/^-ms-/,D=/-([\\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||\"load\"===e.type||\"complete\"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener(\"DOMContentLoaded\",H,!1),e.removeEventListener(\"load\",H,!1)):(o.detachEvent(\"onreadystatechange\",H),e.detachEvent(\"onload\",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if(\"string\"==typeof e){if(i=\"<\"===e.charAt(0)&&\">\"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:\"\",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for(\"boolean\"==typeof s&&(c=s,s=arguments[1]||{},u=2),\"object\"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger(\"ready\").off(\"ready\"))}},isFunction:function(e){return\"function\"===b.type(e)},isArray:Array.isArray||function(e){return\"array\"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?l[m.call(e)]||\"object\":typeof e},isPlainObject:function(e){if(!e||\"object\"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,\"constructor\")&&!y.call(e.constructor.prototype,\"isPrototypeOf\"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||\"string\"!=typeof e)return null;\"boolean\"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:\"string\"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,\"@\").replace(A,\"]\").replace(E,\"\")))?Function(\"return \"+n)():(b.error(\"Invalid JSON: \"+n),t)},parseXML:function(n){var r,i;if(!n||\"string\"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,\"text/xml\")):(r=new ActiveXObject(\"Microsoft.XMLDOM\"),r.async=\"false\",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName(\"parsererror\").length||b.error(\"Invalid XML: \"+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,\"ms-\").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call(\"\\ufeff\\u00a0\")?function(e){return null==e?\"\":v.call(e)}:function(e){return null==e?\"\":(e+\"\").replace(T,\"\")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,\"string\"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if(\"number\"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return\"string\"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if(\"object\"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),\"complete\"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener(\"DOMContentLoaded\",H,!1),e.addEventListener(\"load\",H,!1);else{o.attachEvent(\"onreadystatechange\",H),e.attachEvent(\"onload\",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll(\"left\")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(e,t){l[\"[object \"+t+\"]\"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:\"array\"===n||\"function\"!==n&&(0===t||\"number\"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e=\"string\"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);\"function\"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&\"string\"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[[\"resolve\",\"done\",b.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",b.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",b.Callbacks(\"memory\")]],n=\"pending\",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+\"With\"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+\"With\"](this===i?r:this,arguments),this},i[o[0]+\"With\"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement(\"div\");if(d.setAttribute(\"className\",\"t\"),d.innerHTML=\"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\",n=d.getElementsByTagName(\"*\"),r=d.getElementsByTagName(\"a\")[0],!n||!r||!n.length)return{};s=o.createElement(\"select\"),l=s.appendChild(o.createElement(\"option\")),a=d.getElementsByTagName(\"input\")[0],r.style.cssText=\"top:1px;float:left;opacity:.5\",t={getSetAttribute:\"t\"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName(\"tbody\").length,htmlSerialize:!!d.getElementsByTagName(\"link\").length,style:/top/.test(r.getAttribute(\"style\")),hrefNormalized:\"/a\"===r.getAttribute(\"href\"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement(\"form\").enctype,html5Clone:\"<:nav></:nav>\"!==o.createElement(\"nav\").cloneNode(!0).outerHTML,boxModel:\"CSS1Compat\"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement(\"input\"),a.setAttribute(\"value\",\"\"),t.input=\"\"===a.getAttribute(\"value\"),a.value=\"t\",a.setAttribute(\"type\",\"radio\"),t.radioValue=\"t\"===a.value,a.setAttribute(\"checked\",\"t\"),a.setAttribute(\"name\",\"t\"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent(\"onclick\",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c=\"on\"+f,\"t\"),t[f+\"Bubbles\"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip=\"content-box\",d.cloneNode(!0).style.backgroundClip=\"\",t.clearCloneStyle=\"content-box\"===d.style.backgroundClip,b(function(){var n,r,a,s=\"padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;\",u=o.getElementsByTagName(\"body\")[0];u&&(n=o.createElement(\"div\"),n.style.cssText=\"border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px\",u.appendChild(n).appendChild(d),d.innerHTML=\"<table><tr><td></td><td>t</td></tr></table>\",a=d.getElementsByTagName(\"td\"),a[0].style.cssText=\"padding:0;margin:0;border:0;display:none\",p=0===a[0].offsetHeight,a[0].style.display=\"\",a[1].style.display=\"none\",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML=\"\",d.style.cssText=\"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition=\"1%\"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable=\"4px\"===(e.getComputedStyle(d,null)||{width:\"4px\"}).width,r=d.appendChild(o.createElement(\"div\")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width=\"0\",d.style.width=\"1px\",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML=\"\",d.style.cssText=s+\"width:1px;padding:1px;display:inline;zoom:1\",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display=\"block\",d.innerHTML=\"<div></div>\",d.firstChild.style.width=\"5px\",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u=\"string\"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),(\"object\"==typeof n||\"function\"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(\" \"));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:\"jQuery\"+(p+Math.random()).replace(/\\D/g,\"\"),noData:{embed:!0,object:\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute(\"classid\")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,\"parsedAttrs\"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf(\"data-\")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,\"parsedAttrs\",!0)}return s}return\"object\"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i=\"data-\"+n.replace(B,\"-$1\").toLowerCase();if(r=e.getAttribute(i),\"string\"==typeof r){try{r=\"true\"===r?!0:\"false\"===r?!1:\"null\"===r?null:+r+\"\"===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if((\"data\"!==t||!b.isEmptyObject(e[t]))&&\"toJSON\"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||\"fx\")+\"queue\",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||\"fx\";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};\"inprogress\"===i&&(i=n.shift(),r--),o.cur=i,i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks(\"once memory\").add(function(){b._removeData(e,t+\"queue\"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return\"string\"!=typeof e&&(n=e,e=\"fx\",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),\"fx\"===e&&\"inprogress\"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||\"fx\",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};\"string\"!=typeof e&&(n=e,e=t),e=e||\"fx\";while(s--)r=b._data(a[s],e+\"queueHooks\"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\\t\\r\\n]/g,U=/\\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=\"string\"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||\"\").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(X,\" \"):\" \")){o=0;while(i=t[o++])0>r.indexOf(\" \"+i+\" \")&&(r+=i+\" \");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||\"string\"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||\"\").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(X,\" \"):\"\")){o=0;while(i=t[o++])while(r.indexOf(\" \"+i+\" \")>=0)r=r.replace(\" \"+i+\" \",\" \");n.className=e?b.trim(r):\"\"}return this},toggleClass:function(e,t){var n=typeof e,r=\"boolean\"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(\"string\"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?\"addClass\":\"removeClass\"](o)}else(n===i||\"boolean\"===n)&&(this.className&&b._data(this,\"__className__\",this.className),this.className=this.className||e===!1?\"\":b._data(this,\"__className__\")||\"\")})},hasClass:function(e){var t=\" \"+e+\" \",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(\" \"+this[n].className+\" \").replace(X,\" \").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o=\"\":\"number\"==typeof o?o+=\"\":b.isArray(o)&&(o=b.map(o,function(e){return null==e?\"\":e+\"\"})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&\"set\"in r&&r.set(this,o,\"value\")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&\"get\"in r&&(n=r.get(o,\"value\"))!==t?n:(n=o.value,\"string\"==typeof n?n.replace(U,\"\"):null==n?\"\":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o=\"select-one\"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute(\"disabled\"))||n.parentNode.disabled&&b.nodeName(n.parentNode,\"optgroup\"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find(\"option\").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&\"get\"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&\"set\"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+\"\"),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase(\"default-\"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,\"\"),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&\"radio\"===t&&b.nodeName(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},propFix:{tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&\"set\"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&\"get\"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode(\"tabindex\");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i=\"boolean\"==typeof r&&e.getAttribute(n),o=\"boolean\"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase(\"default-\"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase(\"default-\"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,\"input\")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,\"input\")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(\"id\"===n||\"name\"===n||\"coords\"===n?\"\"!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+=\"\",\"value\"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,\"\"===t?!1:t,n)}},b.each([\"width\",\"height\"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return\"\"===r?(e.setAttribute(n,\"auto\"),r):t}})})),b.support.hrefNormalized||(b.each([\"href\",\"src\",\"width\",\"height\"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each([\"href\",\"src\"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+\"\"}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype=\"encoding\"),b.support.checkOn||b.each([\"radio\",\"checkbox\"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute(\"value\")?\"on\":e.value}}}),b.each([\"radio\",\"checkbox\"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||\"\").match(w)||[\"\"],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||\"\").split(\".\").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(\".\")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent(\"on\"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||\"\").match(w)||[\"\"],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||\"\").split(\".\").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&(\"**\"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,\"events\"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,\"type\")?n.type:n,m=y.call(n,\"namespace\")?n.namespace.split(\".\"):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(\".\")>=0&&(m=g.split(\".\"),g=m.shift(),m.sort()),u=0>g.indexOf(\":\")&&\"on\"+g,n=n[b.expando]?n:new b.Event(g,\"object\"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join(\".\"),n.namespace_re=n.namespace?RegExp(\"(^|\\\\.)\"+m.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,\"events\")||{})[n.type]&&b._data(l,\"handle\"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||\"click\"===g&&b.nodeName(i,\"a\")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,\"events\")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||\"click\"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||\"click\"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+\" \",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:\"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:\"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,\"input\")&&\"checkbox\"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:\"focusin\"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:\"focusout\"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r=\"on\"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;\n\treturn(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,\"form\")?!1:(b.event.add(this,\"click._submit keypress._submit\",function(e){var n=e.target,r=b.nodeName(n,\"input\")||b.nodeName(n,\"button\")?n.form:t;r&&!b._data(r,\"submitBubbles\")&&(b.event.add(r,\"submit._submit\",function(e){e._submit_bubble=!0}),b._data(r,\"submitBubbles\",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate(\"submit\",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,\"form\")?!1:(b.event.remove(this,\"._submit\"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?((\"checkbox\"===this.type||\"radio\"===this.type)&&(b.event.add(this,\"propertychange._change\",function(e){\"checked\"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,\"click._change\",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate(\"change\",this,e,!0)})),!1):(b.event.add(this,\"beforeactivate._change\",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,\"changeBubbles\")&&(b.event.add(t,\"change._change\",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate(\"change\",this.parentNode,e,!0)}),b._data(t,\"changeBubbles\",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||\"radio\"!==n.type&&\"checkbox\"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,\"._change\"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if(\"object\"==typeof e){\"string\"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&(\"string\"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+\".\"+i.namespace:i.origType,i.selector,i.handler),this;if(\"object\"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||\"function\"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x=\"sizzle\"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",F=\"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",O=F.replace(\"w\",\"w#\"),B=\"([*^$|!~]?=)\",P=\"\\\\[\"+_+\"*(\"+F+\")\"+_+\"*(?:\"+B+_+\"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\"+O+\")|)|)\"+_+\"*\\\\]\",R=\":(\"+F+\")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+P.replace(3,8)+\")*)|.*)\\\\)|)\",W=RegExp(\"^\"+_+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+_+\"+$\",\"g\"),$=RegExp(\"^\"+_+\"*,\"+_+\"*\"),I=RegExp(\"^\"+_+\"*([\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])\"+_+\"*\"),z=RegExp(R),X=RegExp(\"^\"+O+\"$\"),U={ID:RegExp(\"^#(\"+F+\")\"),CLASS:RegExp(\"^\\\\.(\"+F+\")\"),NAME:RegExp(\"^\\\\[name=['\\\"]?(\"+F+\")['\\\"]?\\\\]\"),TAG:RegExp(\"^(\"+F.replace(\"w\",\"w*\")+\")\"),ATTR:RegExp(\"^\"+P),PSEUDO:RegExp(\"^\"+R),CHILD:RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+_+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+_+\"*(?:([+-]|)\"+_+\"*(\\\\d+)|))\"+_+\"*\\\\)|)\",\"i\"),needsContext:RegExp(\"^\"+_+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+_+\"*((?:-\\\\d)?\\\\d*)\"+_+\"*\\\\)|)(?=[^-]|$)\",\"i\")},V=/[\\x20\\t\\r\\n\\f]*[+~]/,Y=/^[^{]+\\{\\s*\\[native code/,J=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\\d$/i,K=/'|\\\\/g,Z=/\\=[\\x20\\t\\r\\n\\f]*([^'\"\\]]*)[\\x20\\t\\r\\n\\f]*\\]/g,et=/\\\\([\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|.)/g,tt=function(e,t){var n=\"0x\"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+\"\")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=\" \")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement(\"div\");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||\"string\"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&\"object\"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute(\"id\"))?g=f.replace(K,\"\\\\$&\"):t.setAttribute(\"id\",g),g=\"[id='\"+g+\"'] \",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(\",\")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute(\"id\")}}}return wt(e.replace(W,\"$1\"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?\"HTML\"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),T.attributes=at(function(e){e.innerHTML=\"<select></select>\";var t=typeof e.lastChild.getAttribute(\"multiple\");return\"boolean\"!==t&&\"string\"!==t}),T.getByClassName=at(function(e){return e.innerHTML=\"<div class='hidden e'></div><div class='hidden'></div>\",e.getElementsByClassName&&e.getElementsByClassName(\"e\").length?(e.lastChild.className=\"e\",2===e.getElementsByClassName(\"e\").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML=\"<a name='\"+x+\"'></a><div name='\"+x+\"'></div>\",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML=\"<a href='#'></a>\",e.firstChild&&typeof e.firstChild.getAttribute!==A&&\"#\"===e.firstChild.getAttribute(\"href\")})?{}:{href:function(e){return e.getAttribute(\"href\",2)},type:function(e){return e.getAttribute(\"type\")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute(\"id\")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode(\"id\").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode(\"id\");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[\":focus\"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML=\"<select><option selected=''></option></select>\",e.querySelectorAll(\"[selected]\").length||h.push(\"\\\\[\"+_+\"*(?:checked|disabled|ismap|multiple|readonly|selected|value)\"),e.querySelectorAll(\":checked\").length||h.push(\":checked\")}),at(function(e){e.innerHTML=\"<input type='hidden' i=''/>\",e.querySelectorAll(\"[i^='']\").length&&h.push(\"[*^$]=\"+_+\"*(?:\\\"\\\"|'')\"),e.querySelectorAll(\":enabled\").length||h.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),h.push(\",.*:\")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,\"div\"),m.call(e,\"[s!='']:x\"),g.push(\"!=\",R)}),h=RegExp(h.join(\"|\")),g=RegExp(g.join(\"|\")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,\"='$1']\"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error(\"Syntax error, unrecognized expression: \"+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return\"input\"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return(\"input\"===n||\"button\"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||\"\").replace(et,tt),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return\"*\"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+\" \"];return t||(t=RegExp(\"(^|\"+_+\")\"+e+\"(\"+_+\"|$)\"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute(\"class\")||\"\")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?\"!=\"===t:t?(i+=\"\",\"=\"===t?i===n:\"!=\"===t?i!==n:\"^=\"===t?n&&0===i.indexOf(n):\"*=\"===t?n&&i.indexOf(n)>-1:\"$=\"===t?n&&i.slice(-n.length)===n:\"~=\"===t?(\" \"+i+\" \").indexOf(n)>-1:\"|=\"===t?i===n||i.slice(0,n.length+1)===n+\"-\":!1):!0}},CHILD:function(e,t,n,r,i){var o=\"nth\"!==e.slice(0,3),a=\"last\"!==e.slice(-4),s=\"of-type\"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?\"nextSibling\":\"previousSibling\",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g=\"only\"===e&&!h&&\"nextSibling\"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error(\"unsupported pseudo: \"+e);return r[x]?r(t):r.length>1?(n=[e,e,\"\",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,\"$1\"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||\"\")||st.error(\"unsupported lang: \"+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute(\"xml:lang\")||t.getAttribute(\"lang\"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+\"-\");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>\"@\"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+\" \"];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W,\" \")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r=\"\";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&\"parentNode\"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+\" \"+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||\"*\",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[\" \"],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,\"$1\"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b=\"0\",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG(\"*\",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+\" \"];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&\"ID\"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[\":\"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\\[\\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if(\"string\"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+\" \":\"\")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&(\"string\"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||\"string\"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?\"string\"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=\"string\"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,\"parentNode\")},parentsUntil:function(e,t,n){return b.dir(e,\"parentNode\",n)},next:function(e){return pt(e,\"nextSibling\")},prev:function(e){return pt(e,\"previousSibling\")},nextAll:function(e){return b.dir(e,\"nextSibling\")},prevAll:function(e){return b.dir(e,\"previousSibling\")},nextUntil:function(e,t,n){return b.dir(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return b.dir(e,\"previousSibling\",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,\"iframe\")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&\"string\"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=\":not(\"+e+\")\"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if(\"string\"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split(\"|\"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",gt=/ jQuery\\d+=\"(?:null|\\d+)\"/g,mt=RegExp(\"<(?:\"+ht+\")[\\\\s/>]\",\"i\"),yt=/^\\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,bt=/<([\\w:]+)/,xt=/<tbody/i,wt=/<|&#?\\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\\s*(?:[^=]|=\\s*.checked.)/i,kt=/^$|\\/(?:java|ecma)script/i,Et=/^true\\/(.*)/,St=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,At={option:[1,\"<select multiple='multiple'>\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],area:[1,\"<map>\",\"</map>\"],param:[1,\"<object>\",\"</object>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:b.support.htmlSerialize?[0,\"\",\"\"]:[1,\"X<div>\",\"</div>\"]},jt=dt(o),Dt=jt.appendChild(o.createElement(\"div\"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,\"body\")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,\"script\")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,\"select\")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,\"\"):t;if(!(\"string\"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||[\"\",\"\"])[1].toLowerCase()])){e=e.replace(vt,\"<$1></$2>\");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||\"string\"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||\"string\"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,\"tr\"),s=b.map(Ot(l,\"script\"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,\"script\"))),r.call(n&&b.nodeName(this[c],\"table\")?Lt(this[c],\"tbody\"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||\"\")&&!b._data(o,\"globalEval\")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:\"GET\",dataType:\"script\",async:!1,global:!1,\"throws\":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||\"\").replace(St,\"\")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode(\"type\");return e.type=(t&&t.specified)+\"/\"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute(\"type\"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,\"globalEval\",!t||b._data(t[r],\"globalEval\"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}\"script\"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):\"object\"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):\"input\"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):\"option\"===n?t.defaultSelected=t.selected=e.defaultSelected:(\"input\"===n||\"textarea\"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||\"*\"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||\"*\"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test(\"<\"+e.nodeName+\">\")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,\"script\"),r.length>0&&Mt(r,!u&&Ot(e,\"script\")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if(\"object\"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement(\"div\")),u=(bt.exec(o)||[\"\",\"\"])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,\"<$1></$2>\")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o=\"table\"!==u||xt.test(o)?\"<table>\"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],\"tbody\")&&!l.childNodes.length&&o.removeChild(l)\n\t}b.merge(d,s.childNodes),s.textContent=\"\";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,\"input\"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),\"script\"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||\"\")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\\([^)]*\\)/i,It=/opacity\\s*=\\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp(\"^(\"+x+\")(.*)$\",\"i\"),Yt=RegExp(\"^(\"+x+\")(?!px)[a-z%]+$\",\"i\"),Jt=RegExp(\"^([+-])=(\"+x+\")\",\"i\"),Gt={BODY:\"block\"},Qt={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Kt={letterSpacing:0,fontWeight:400},Zt=[\"Top\",\"Right\",\"Bottom\",\"Left\"],en=[\"Webkit\",\"O\",\"Moz\",\"ms\"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,\"none\"===b.css(e,\"display\")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,\"olddisplay\"),n=r.style.display,t?(o[a]||\"none\"!==n||(r.style.display=\"\"),\"\"===r.style.display&&nn(r)&&(o[a]=b._data(r,\"olddisplay\",un(r.nodeName)))):o[a]||(i=nn(r),(n&&\"none\"!==n||!i)&&b._data(r,\"olddisplay\",i?n:b.css(r,\"display\"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&\"none\"!==r.style.display&&\"\"!==r.style.display||(r.style.display=t?o[a]||\"\":\"none\"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t=\"boolean\"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":b.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&\"get\"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,\"string\"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a=\"number\"),!(null==r||\"number\"===a&&isNaN(r)||(\"number\"!==a||b.cssNumber[u]||(r+=\"px\"),b.support.clearCloneStyle||\"\"!==r||0!==n.indexOf(\"background\")||(l[n]=\"inherit\"),s&&\"set\"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&\"get\"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),\"normal\"===a&&n in Kt&&(a=Kt[n]),\"\"===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(\"\"!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left=\"fontSize\"===n?\"1em\":u,u=l.pixelLeft+\"px\",l.left=i,a&&(o.left=a)),\"\"===u?\"auto\":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||\"px\"):t}function an(e,t,n,r,i){var o=n===(r?\"border\":\"content\")?4:\"width\"===t?1:0,a=0;for(;4>o;o+=2)\"margin\"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?(\"content\"===n&&(a-=b.css(e,\"padding\"+Zt[o],!0,i)),\"margin\"!==n&&(a-=b.css(e,\"border\"+Zt[o]+\"Width\",!0,i))):(a+=b.css(e,\"padding\"+Zt[o],!0,i),\"padding\"!==n&&(a+=b.css(e,\"border\"+Zt[o]+\"Width\",!0,i)));return a}function sn(e,t,n){var r=!0,i=\"width\"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&\"border-box\"===b.css(e,\"boxSizing\",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?\"border\":\"content\"),r,o)+\"px\"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),\"none\"!==n&&n||(Pt=(Pt||b(\"<iframe frameborder='0' width='0' height='0'/>\").css(\"cssText\",\"display:block !important\")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write(\"<!doctype html><html><body>\"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],\"display\");return n.remove(),r}b.each([\"height\",\"width\"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,\"display\"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&\"border-box\"===b.css(e,\"boxSizing\",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||\"\")?.01*parseFloat(RegExp.$1)+\"\":t?\"1\":\"\"},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?\"alpha(opacity=\"+100*t+\")\":\"\",o=r&&r.filter||n.filter||\"\";n.zoom=1,(t>=1||\"\"===t)&&\"\"===b.trim(o.replace($t,\"\"))&&n.removeAttribute&&(n.removeAttribute(\"filter\"),\"\"===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+\" \"+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:\"inline-block\"},Wt,[e,\"marginRight\"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each([\"top\",\"left\"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+\"px\":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&\"none\"===(e.style&&e.style.display||b.css(e,\"display\"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:\"\",padding:\"\",border:\"Width\"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o=\"string\"==typeof n?n.split(\" \"):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\\[\\]$/,fn=/\\r?\\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,\"elements\");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(\":disabled\")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,\"\\r\\n\")}}):{name:t.name,value:n.replace(fn,\"\\r\\n\")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?\"\":t,i[i.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join(\"&\").replace(cn,\"+\")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+\"[\"+(\"object\"==typeof i?t:\"\")+\"]\",i,n,r)});else if(n||\"object\"!==b.type(t))r(e,t);else for(i in t)gn(e+\"[\"+i+\"]\",t[i],n,r)}b.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\\/\\//,En=/^([\\w.+-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn=\"*/\".concat(\"*\");try{yn=a.href}catch(Ln){yn=o.createElement(\"a\"),yn.href=\"\",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){\"string\"!=typeof t&&(n=t,t=\"*\");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])\"+\"===r[0]?(r=r.slice(1)||\"*\",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return\"string\"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o[\"*\"]&&s(\"*\")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if(\"string\"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(\" \");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&\"object\"==typeof n&&(a=\"POST\"),s.length>0&&b.ajax({url:e,type:a,dataType:\"html\",data:n}).done(function(e){o=arguments,s.html(i?b(\"<div>\").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each([\"get\",\"post\"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:\"GET\",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":Dn,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\"},converters:{\"* text\":e.String,\"text html\":!0,\"text json\":b.parseJSON,\"text xml\":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){\"object\"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks(\"once memory\"),m=p.statusCode||{},y={},v={},x=0,T=\"canceled\",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+\"\").replace(xn,\"\").replace(kn,mn[1]+\"//\"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||\"*\").toLowerCase().match(w)||[\"\"],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(\"http:\"===r[1]?80:443))==(mn[3]||(\"http:\"===mn[1]?80:443)))),p.data&&p.processData&&\"string\"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger(\"ajaxStart\"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?\"&\":\"?\")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,\"$1_=\"+vn++):o+(bn.test(o)?\"&\":\"?\")+\"_=\"+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader(\"If-Modified-Since\",b.lastModified[o]),b.etag[o]&&N.setRequestHeader(\"If-None-Match\",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader(\"Content-Type\",p.contentType),N.setRequestHeader(\"Accept\",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(\"*\"!==p.dataTypes[0]?\", \"+Dn+\"; q=0.01\":\"\"):p.accepts[\"*\"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T=\"abort\";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger(\"ajaxSend\",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort(\"timeout\")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,\"No Transport\");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||\"\",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader(\"Last-Modified\"),T&&(b.lastModified[o]=T),T=N.getResponseHeader(\"etag\"),T&&(b.etag[o]=T)),204===e?(c=!0,C=\"nocontent\"):304===e?(c=!0,C=\"notmodified\"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C=\"error\",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+\"\",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?\"ajaxSuccess\":\"ajaxError\",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger(\"ajaxComplete\",[N,p]),--b.active||b.event.trigger(\"ajaxStop\")))}return N},getScript:function(e,n){return b.get(e,t,n,\"script\")},getJSON:function(e,t,n){return b.get(e,t,n,\"json\")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while(\"*\"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader(\"Content-Type\"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+\" \"+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if(\"*\"!==r){if(\"*\"!==l&&l!==r){if(i=a[l+\" \"+r]||a[\"* \"+r],!i)for(n in a)if(o=n.split(\" \"),o[1]===r&&(i=a[l+\" \"+o[0]]||a[\"* \"+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e[\"throws\"])t=i(t);else try{t=i(t)}catch(c){return{state:\"parsererror\",error:i?c:\"No conversion from \"+l+\" to \"+r}}}l=r}return{state:\"success\",data:t}}b.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/(?:java|ecma)script/},converters:{\"text script\":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter(\"script\",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\",e.global=!1)}),b.ajaxTransport(\"script\",function(e){if(e.crossDomain){var n,r=o.head||b(\"head\")[0]||o.documentElement;return{send:function(t,i){n=o.createElement(\"script\"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,\"success\"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\\?(?=&|$)|\\?\\?/;b.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=On.pop()||b.expando+\"_\"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter(\"json jsonp\",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?\"url\":\"string\"==typeof n.data&&!(n.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Bn.test(n.data)&&\"data\");return u||\"jsonp\"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,\"$1\"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?\"&\":\"?\")+n.jsonp+\"=\"+o),n.converters[\"script json\"]=function(){return s||b.error(o+\" was not called\"),s[0]},n.dataTypes[0]=\"json\",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),\"script\"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&\"withCredentials\"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i[\"X-Requested-With\"]||(i[\"X-Requested-With\"]=\"XMLHttpRequest\");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),\"string\"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=\"\"}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp(\"^(?:([+-])=|)(\"+x+\")([a-z%]*)$\",\"i\"),Jn=/queueHooks$/,Gn=[nr],Qn={\"*\":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?\"\":\"px\"),\"px\"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||\".5\",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn[\"*\"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&\"expand\"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=[\"*\"]):e=e.split(\" \");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,\"fx\"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,\"fx\").length||c.empty.fire()})})),1===e.nodeType&&(\"height\"in t||\"width\"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],\"inline\"===b.css(e,\"display\")&&\"none\"===b.css(e,\"float\")&&(b.support.inlineBlockNeedsLayout&&\"inline\"!==un(e.nodeName)?d.zoom=1:d.display=\"inline-block\")),n.overflow&&(d.overflow=\"hidden\",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||\"toggle\"===a,a===(m?\"hide\":\"show\"))continue;g.push(i)}if(o=g.length){s=b._data(e,\"fxshow\")||b._data(e,\"fxshow\",{}),\"hidden\"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,\"fxshow\");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start=\"width\"===r||\"height\"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||\"swing\",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?\"\":\"px\")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,\"\"),t&&\"auto\"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each([\"toggle\",\"show\",\"hide\"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||\"boolean\"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,\"finish\"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return\"string\"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||\"fx\",[]),this.each(function(){var t=!0,n=null!=e&&e+\"queueHooks\",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||\"fx\"),this.each(function(){var t,n=b._data(this),r=n[e+\"queue\"],i=n[e+\"queueHooks\"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r[\"margin\"+n]=r[\"padding\"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir(\"show\"),slideUp:ir(\"hide\"),slideToggle:ir(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&\"object\"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:\"number\"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,\"position\");\"static\"===r&&(e.style.position=\"relative\");var i=b(e),o=i.offset(),a=b.css(e,\"top\"),s=b.css(e,\"left\"),u=(\"absolute\"===r||\"fixed\"===r)&&b.inArray(\"auto\",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),\"using\"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return\"fixed\"===b.css(r,\"position\")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],\"html\")||(n=e.offset()),n.top+=b.css(e[0],\"borderTopWidth\",!0),n.left+=b.css(e[0],\"borderLeftWidth\",!0)),{top:t.top-n.top-b.css(r,\"marginTop\",!0),left:t.left-n.left-b.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,\"html\")&&\"static\"===b.css(e,\"position\"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:\"height\",Width:\"width\"},function(e,n){b.each({padding:\"inner\"+e,content:n,\"\":\"outer\"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||\"boolean\"!=typeof i),s=r||(i===!0||o===!0?\"margin\":\"border\");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement[\"client\"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body[\"scroll\"+e],o[\"scroll\"+e],n.body[\"offset\"+e],o[\"offset\"+e],o[\"client\"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,\"function\"==typeof define&&define.amd&&define.amd.jQuery&&define(\"jquery\",[],function(){return b})})(window);\t\t\n\t\t$(function(){\n\t\t\t//技能评价\n\t\t\t$('.mr_skill_con .mr_skill_plan').each(function(){\n\t\t\t\tvar percent = $(this).attr('data-skillLevel');\n\t\t\t\tvar width = $(this).outerWidth();\n\t\t\t\tvar pre = percent / 100 * width;\n\t\t\t\t$(this).find('em').width(pre + 10 );\n\t\t\t});\n\t\t})\n\t</script>\n</body>\n</html>","excerpt":"","more":"<!DOCTYPE HTML>\n<html>\n<head>\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=10;IE=9;IE=8;IE=7;IE=EDGE\">\n<meta http-equiv=\"Cache-Control\" content=\"no-siteapp\" />\n<link rel=\"alternate\" media=\"handheld\" href=\"#\" />\n<meta charset=\"utf-8\">\n<title>简历</title>\n</head>\n<body>\n<div id=\"body\">\n    <div id=\"container\">\n<style type=\"text/css\">\nbody{margin: 0;padding: 0;font: 14px/22px \"微软雅黑\",\"宋体\",Arial;color: #333;word-wrap: break-word;}\n.clearfixs:before,.clearfixs:after{content:\"\";display:table;}\n.clearfixs:after{display:block;clear:both;}\n.clearfixs{*zoom:1;}\ninput[type=\"text\"]:focus{border:1px solid #32dbb3;}\n.mr_created input[type=\"text\"]:focus{border-width:1px;}\n.mr_content input[type=\"text\"]:focus{border:none;}\n.mr_created input{border:none;}\na:hover{color:#00b88d;}\n.fl{float:left;}\nh1, h2, h3, h4, h5 {\nfont-weight: normal;\n}\n/* 为创建在线简历 */\n.dn{display:none;}\n.mr_created input,.mr_created textarea{font-size:14px;}\n.mr_uncreate *{list-style:none;}\n.mr_uncreate *,.mr_created *{margin:0;padding:0;}\n.mr_created .city_s .xl_list ,.mr_uncreate .city_s .xl_list{height:130px;}\n.mr_created .mr_selCity,.mr_uncreate .mr_selCity{top:0;}\n.mr_created .mr_selCity ul.mr_province ul,.mr_uncreate .mr_selCity ul.mr_province ul{width:287px;height:110px;padding:10px;}\n.mr_created #mr_mr_head *,.mr_created .mr_myresume_r *{list-style:none;}\n.mr_created #mr_mr_head{margin-bottom:0;}\n.mr_created .mr_baseinfo{border-bottom:none;border-bottom-right-radius:0px;border-bottom-left-radius:0px;}\n.mr_created .mr_infoed{margin-bottom:0px;}\n.mr_myresume_l{float:left;width:702px;margin-bottom:20px;}\n.mr_created #mr_mr_head{margin-bottom:0;}\n.mr_created #mr_mr_head *,.mr_created .mr_myresume_r *{list-style:none;}\n\n.mr_w604{width:604px;margin:0 auto;}\n.mr_p_name{height:40px;line-height:38px;margin-bottom:8px;}\n.mr_name{display:block;height:40px;width:468px;margin:0 auto;line-height:40px;font-size:30px;color:#333;text-align:center;}\n.mr_intro{display:block;color:#333;text-align:center;margin:0 auto;}\n.mr_p_introduce .mr_intro{font-size:16px;width:468px;line-height:26px;}\n.mr_p_introduce .mr_intro_grey{color:#bdbdbd;font-style: italic;}\n.mr_active{background-color: #fefef2;}\n/* 未创建在线 基本信息 */\n.mr_myresume_l input{margin:0;}\n.form_wrap{position:relative;cursor:pointer;width:396px;height:46px;border:1px solid #f1f3e9;background-color:#fff;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;margin-bottom:9px;}\n.form_wrap .mr_button{text-align:left;padding-left:17px;width:327px;height:46px;background-color:#fff;}\n.form_wrap .mr_input{width:327px;padding:0 0 0 17px;border:none;height:46px;}\n.form_wrap .mr_input:focus{border:none;}\n.form_wrap_y .mr_button{width:150px;}\n.mr_sj{position:absolute;right:18px;top:20px;border: 6px solid #fff;border-color: #d3d3d3 transparent transparent;display: block;font-size: 0px;height: 0;width: 0;}\n\n.form_wrap_y{width:188px;}\n\n/*已创建在线简历 jason 2014/9/8*/\n.mr_p_introduce{min-height:34px;line-height:32px;margin-bottom:4px;}\n/*在线简历页面主内容区域*/\n.mr_myresume_l .mr_content{padding-top:26px;background-color: #fafafa;border: 1px solid #f2f2f2;border-bottom:2px solid #f2f2f2;border-top:none;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;}\n.mr_moudle_head{margin-bottom:23px;}\n.mr_moudle_head .mr_head_l{float:left;}\n.mr_moudle_head .mr_head_r{float:right;margin-top:3px;cursor:pointer;}\n.mr_title span{vertical-align:middle;display:inline-block;}\n.mr_title .mr_title_l{width:230px;height:0;border-top:1px solid #ededed;}\n.mr_title .mr_title_c{font-size:18px;padding:6px 24px;text-align:center;background-color:#eee;-moz-border-radius:26px;-webkit-border-radius:26px;border-radius:26px;margin:0 13px;}\n.mr_title .mr_title_r{width:152px;height:0;border-top:1px solid #ededed;}\n.mr_moudle_head .mr_head_r *{vertical-align:middle;}\n.mr_moudle_head .mr_head_r em{font-size:16px;color:#00b88d;}\n.mr_moudle_head .mr_head_r i{display: inline-block;width: 15px;height: 15px;background: url(http://www.lagou.com/images/myresume/icons_mr.png) -5px -69px no-repeat;margin-right:6px;}\n.mr_moudle_content{padding-bottom:21px;color:#555;font-size:14px;} /* 块  margin-bottom 48*/\n.mr_moudle_content .mr_content_l{float:left;max-width: 445px;}\n.mr_moudle_content .mr_content_r{float:right;}\n.mr_content_l .l1{float:left;margin-right:10px;}\n.mr_content_l .l2{position: relative;float: left;padding-top: 10px;max-width: 380px;}\n.mr_content_l .l2 a.projectTitle{/* position:relative; */font-size:16px;color:#555;text-decoration:none}\n.mr_content_l .l2 a.projectTitle:hover{color:#00b88d}\n.mr_content_l .l2 a.nourl{cursor:default;}\n.mr_content_l .l2 a.nourl:hover{color:#555;}\n.mr_content_l .l2 p{color:#999;}\n.mr_content_l .l2 a.projectTitle span{position:absolute;top:14px;right:-18px;width:12px;height:12px;background:url(http://www.lagou.com/images/myresume/icons_mr.png) -95px -197px no-repeat;}\n.mr_content_l .l1 img{width:46px;height:46px;border:2px solid #eee;}\n.mr_content_l .l2 h4{font-size:16px;}\n.mr_content_l .l2 span{color:#999;display:block;}\n.mr_c_r_t{text-align:right;margin:5px 0 2px 0;*margin-top:8px;float:none;}\n.mr_content_r span{color:#999;}\n.mr_content_m{padding:14px 0 0 0px;*padding-left:1px;color:#555;}\n.mr_jobe_list{padding-bottom:10px;}\n.mr_wo_show{padding:13px 18px 46px 42px;background-color:#00b88d;margin-bottom:38px;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;}\n.mr_wo_show p{line-height:26px;color:#fff;}\n.mr_self_site{color:#fff;margin-bottom:8px;font-size:24px;}\n.mr_self_sitelink {font-weight:bold;text-decoration:none;/* display:inline-block;width:558px; */word-break:break-all;color: #fff;}\n.mr_self_sitelink:hover{color:#fff;}\n.mr_wo_show .mr_c_r_t em{color:#50f9d2;}\n.mr_wo_show .mr_c_r_t i{background:url(http://www.lagou.com/images/myresume/icons_mr.png) -131px -115px no-repeat;}\n.wh43{width:100%;}\n.mr_work_upload .l2 span{display:inline-block;}\n.mr_wu_con .mr_work_title{margin:0 6px;}\n.mr_wu_show{margin-bottom:20px;}\n.mr_wu_show .mr_c_r_t{padding-top:4px;}\n.mr_wu_con .l2 span{color:#333;}\n.mr_wu_show .mr_wu_con_m{color:#555;}\n.mr_self_l{position:relative;height:81px;}\n.mr_self_l img{position:absolute;left:4px;width:73px;height:73px;top:8px;}\n.mr_self_l i{position:absolute;z-index:2;width:81px;height:81px;background:url(http://www.lagou.com/images/myresume/mr_txs.png) no-repeat;} \n.mr_moudle_content .mr_self_l{float:left;width:100px;padding-top:5px;}\n.mr_moudle_content .mr_self_r{float:left;width:504px;color:#555;line-height:26px;}\n.mr_jobtype_li{width:128px;}\n.mr_sns .sns10 span{min-width:56px;}\n.mr_jobtype_li i{width:17px;height:17px;background-position:-93px -247px;}\n/* \n.mr_skill_con{padding-left:20px;margin-bottom:18px;}\n.mr_skill_con span{vertical-align:middle;display:inline-block;}\n.mr_skill_con .mr_skill_name{width:90px;height:22px;text-align:right;margin-right:13px;word-wrap:break-word;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;}\n.mr_skill_con .mr_skill_name:after{\ncontent:\"...\";\n}\n.mr_skill_con .mr_skill_plan{position:relative;width:420px;height:8px;border-radius:4px;background-color:#eee;margin-right:21px;overflow:hidden;}\n.mr_skill_plan em{position:absolute;left:0;top:0;display:inline-block;height:8px;width:370px;background-color:#00b88d;border-radius:4px;overflow:hidden;} */\n.mr_skill_con{padding-left:16px;margin-bottom:14px;position:relative;}\n.mr_skill_con span{vertical-align:middle;display:inline-block;}\n.mr_skill_con .mr_skill_name{width:90px;height:22px;text-align:right;margin-right:13px;word-wrap:break-word;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;}\n/* .mr_skill_con .mr_skill_name:after{\ncontent:\"...\";\n} */\n.mr_skill_con .mr_skill_plan{position:relative;width:410px;height:8px;border-radius:4px;background-color:#eee;margin-right:21px;overflow:hidden;}\n.mr_skill_plan em{position:absolute;left:0;top:0;display:inline-block;height:8px;background-color:#00b88d;border-radius:4px;overflow:hidden;}\n.mr_skill_con .mr_skill_delete{width:13px;height:13px;background:url(http://www.lagou.com/images/myresume/skill_delete.png) center top no-repeat;cursor:pointer;}\n.mr_moudle_content .mr_skill_add{padding-left:125px;*padding-left:104px;color:#999999;font-size:16px;}\n.mr_skill_add span{display:inline-block;width:88px;text-indent:22px;background:url(http://www.lagou.com/images/myresume/skill_add.png) left 3px no-repeat;cursor:pointer;}\n\n.mr_title .cust_title{position:absolute;top:-4px;left: 50%;padding:0 13px;background-color:#FAFAFA;}\n\n.cust_title span{padding:6px 24px;text-align: center;font-size: 18px;background-color: #eee;-moz-border-radius: 26px;-webkit-border-radius: 26px;border-radius: 26px;}\n.mr_skill_con .mr_skill_circle{display:inline-block;width:20px;height:19px;position:absolute;left:122px;top:3px;background:url(http://www.lagou.com/images/myresume/skill_circle.png) no-repeat center top;}\n.mr_skill_circle em{display:inline-block;width:29px;height:23px;position:absolute;right: -4px;top: -22px;text-align: center;line-height:18px;padding: 0px;color: #ffffff;background:url(http://www.lagou.com/images/myresume/skill_img.png) center top no-repeat;font-size:10px;}\n\n\n/****一句话介绍****/\n.mrcenter{margin:0 auto 20px auto; float:none;}\n\n\n\n/*底部求职者职场状态*/\n.mr_self_state{position:relative;height:94px;background-color:#f6f6f6;color:#555;font-size:14px;text-align: center;}\n.mr_self_state *{list-style:none;}\n.mr_self_state .form_wrap{position:absolute;top:50%;left:50%;margin:-24px 0 0 -135px;border:1px solid #eaeced;width:270px;}\n.mr_self_state .mr_button{width:240px;}\n.mr_self_state .select_color{border-color:#32dbb3;}\n.mr_self_state .xl_list{width:270px;}\n\n\n\n.m_portrait{width:100%;height:135px;position:relative;z-index:2;background:url(http://www.lagou.com/images/myresume/head_bg.jpg) no-repeat;}\n.m_portrait .opa{position:absolute;}\n.mr_wo_preview ol,.mr_wu_con_m ol,.mr_self_r ol,.mr_expjob_content ol,.mr_wo_preview ul,.mr_wu_con_m ul,.mr_self_r ul,.mr_expjob_content ul{padding-left:19px;}\n.olpf ol,.olpf ul{padding-left:19px;}\n.mr_wo_preview {color:#fff;}\n.mr_preview .mr_title .mr_title_r{width:228px;}\n.resume_status {background: #f6f6f6;border: none!important;text-align: center;margin: -12px 0 0 -135px!important;cursor: default;}\n.m_portrait div {\n\t/* background: url(http://www.lagou.com/images/profile_cover.png) no-repeat;\n\twidth: 120px;\n\theight: 120px;\n\tposition: absolute;\n\tz-index: 5; */\n\twidth:200px;\n\theight:132px;\n\tposition:absolute;\n\tleft:41%;\n\ttop:39px;\n\tz-index:100;\n}\n</style>\n\t<div class=\"clearfixs mr_created mr_preview\">\n\t\t<div class=\"mr_myresume_l mrcenter\">\n\t\t\n\t\t\t<!--                  工作经历                                                 -->\n\t\t\t<div class=\"mr_content\">\n\t\t\t\t<div class=\"mr_w604\">\n\t\t\t\t\t<div id=\"workExperience\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\"> 工作经历  </span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t<div class=\"list_show\">\n\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>广州**信息技术有限公司</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>java工程师</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.03 -- 至今</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>广州美络信息科技有限公司</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>java工程师</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2015.03 -- 2016.03</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>广州阳光耐特电子有限公司</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>java工程师</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2014.10 -- 2015.03</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"educationalBackground\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">教育经历</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<!-- <div class=\"mr_head_r\">\n\t\t\t\t\t\t\t\t\t<i></i><em>添加</em>\n\t\t\t\t\t\t\t\t</div> -->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t<div class=\"list_show\">\t\n\t\t\t\t\t\t\t\t<div class=\"clearfixs mb46 mr_jobe_list\" style=\"padding-bottom:0px;\" >\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l1\">\n\t\t\t\t\t\t\t\t\t\t\t<!-- 学校图片后台还没有给（待确认是否没有图片就不展示），参照工作经历 -->\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"http://www.lagou.com/images/schoolBadge/875fc22f853842579608bff745cf3f1f.jpeg\"/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>五邑大学</h4>\n\t\t\t\t\t\t\t\t\t\t\t<span>本科 · 电子信息工程</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"projectExperience\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">项目经验</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\" id=\"projectList\">\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle\"  target=\"_blank\" href=\"http://www.goaleasy.cn/\"><span></span>目标易</a>\n\t\t\t\t\t\t\t\t\t\t\t<p>java工程师</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2015.07 -- 2016.03</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>1.项目描述：&quot;目标易&quot;是基于移动即时通讯并且适用于IOS、Android、PC等终端的系统，旨在满足集团型企业内部员工之间的移动化沟通需求，实现更便捷、顺畅的办公交流；另外，“目标易”支持现有业务系统功能的整合，构建基于移动互联网的企业“微应用”中心，扩大电子政务的实际利用范围。</p>\n<p>2.使用技术： Spring SpringMVC Mybatis</p>\n<p>3.责任描述：1）负责服务器端的用户、企业、部门等组织模块的API接口的开发</p>\n<p>2）负责“外勤管理”、“企业日程”、“通知公告”、“企业黄页”、“电子便签”、“任务协作”等微应用的系统设计、后台代码编写、测试。</p>\n<p>3）与前端人员协作完成部分前端模块功能。</p>\n<p>4）参与系统需求分析、系统设计、文档编写。</p>\n<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">基于大集中的企业级非结构数据管理平台</a>\n\t\t\t\t\t\t\t\t\t\t\t<p>java工程师</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2015.03 -- 2015.10</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>1.项目描述：面对电力企业非结构化数据分散存储在各个业务系统和大量的个人桌面，从而造成难以管理、利用乏力的现状，项目提出在业务系统省级大集中部署模式下构建分布式非结构数据管理平台的思路，将业务系统中的非结构文档剥离和个人桌面的非结构文档自动归集,采用省地两级存储和集中统一管理的方式，结合数据采集获取、数据二维管理及数据分布式传输等技术手段，为企业非结构化数据统一管理、快速访问、减轻骨干网传输压力、大数据分析利用应用提供解决方案。</p>\n<p>2.使用技术： J2EE Mybatis EXT JS Jquery Lucene Groovy FreeMaker MYSQL</p>\n<p>3.责任描述：1）负责“业务模拟系统”中“客户附件”、“服务发票”、“服务合同”三个模拟场景的模块开发、维护。</p>\n<p>2）在管理平台上负责“非结构借阅”、“非结构收藏夹”、“非结构邮件同步”、“元数据管理”、“全文检索”等模块的主要代码编写。</p>\n<p>3）对系统进行测试，负责对整个系统中出现的bug进行修复。</p>\n<p>3）参与系统需求分析、系统设计、文档编写、系统维护。</p>\n<p>4）去跟客户联系交流，讲解项目功能，部署软件环境。</p>\n<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">微信开发</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.03 -- 至今</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>负责公司微信服务号的开发与后台维护以及微信平台运营活动开发</p>\n\t\t\t\t\t\t\t\t\t<p style=\"color:#00b88d\">Coding</p>\n\t\t\t\t\t\t\t\t\t<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">运营平台</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.04-- 2016.06</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>一个医生与专家沟通的病例管理平台，负责大部分模块的开发</p>\n\t\t\t\t\t\t\t\t\t<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">官网首页</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.05-- 2016.06</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>都成前端大神了-_-</p>\n\t\t\t\t\t\t\t\t\t<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_jobe_list\">\n\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"l2\"> \n\t\t\t\t\t\t\t\t\t\t\t<a class=\"projectTitle nourl\">挂号网公众号开发</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"mr_content_r\">\n\t\t\t\t\t\t\t\t\t\t<span>2016.06-- 2016.07</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_content_m olpf\">\n\t\t\t\t\t\t\t\t\t<p>公众号项目整体开发</p>\n\t\t\t\t\t\t\t\t\t<p><br /></p>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--                 作品展示                                                -->\n\t\t\t\t\t<div id=\"worksShow\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">作品展示</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t\t<div class=\"mr_work_online\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_show\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_c_r_t\">\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_self_site\">\n                                            <a class=\"mr_self_sitelink\" href=\"http://t.cn/RGIuWYq\" target=\"_blank\">http://t.cn/RGIuWYq</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_preview olpf\"><p>一个基于Spring Security 的权限管理系统雏形！</p></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_work_online\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_show\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_c_r_t\">\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_self_site\">\n                                            <a class=\"mr_self_sitelink\" href=\"http://t.cn/RGI34vz\" target=\"_blank\">http://t.cn/RGI34vz</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_preview olpf\"><p>一个基于Lucene 的全文检索系统！</p></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"mr_work_online\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_show\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_c_r_t\">\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_self_site\">\n                                            <a class=\"mr_self_sitelink\" href=\"http://t.cn/RGMMe5C\" target=\"_blank\">http://t.cn/RGMMe5C</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wo_preview olpf\"><p>目标易</p></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"mr_work_upload\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_show\"> \n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_t\">\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"http://www.lagou.com/image2/M00/2A/69/CgqLKVbBgWSAYYSrAAFi9GJHjIk377.png\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\t<img class=\"wh43\" src=\"http://www.lagou.com/image2/M00/2A/69/CgqLKVbBgXGAA_QyAAEPYecTtcY416.png\" />\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_con\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"clearfixs\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_content_l\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"l2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>[</span><span class=\"mr_work_title\">基于大集中的企业级非结构数据管理平台</span><span>]</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mr_wu_con_m olpf\">\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t\t<!--               自我描述                                             -->\n\t\t\t\t\t<div id=\"selfDescription\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">自我描述</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_self_l\">\n\t\t\t\t\t\t\t\t\t<!-- 自我描述头像为基本信息页面上传的头像，稍后和后台确认这个 -->\n\t\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t\t\t<img src=\"http://www.lagou.com/i/image/M00/03/54/Cgp3O1a192CADfftAADkLf41PVk149.jpg\" alt=\"陈文东\"/>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_self_r\">\n\t\t\t\t\t\t\t\t\t<p>一.我认为值得称道的工作细节是脚踏实地。细节决定成败，脚踏实地学好每个步骤、领会涵义，才能减少出错、拥有全盘考虑的能力。</p>\n<p>二.我曾经克服过的最大挑战是一个人在没有同事的教导，没有公司预先带领，出差到另外一个城市去客户现场跟客户对接。去跟客户联系交流，部署软件环境，讲解项目功能，完成出差任务。这考验了我的能力，平时学到的沟通技巧、对项目的整体认识以及临场反应等。</p>\n<p>三.对于一个热爱编程的家伙，利用工作外的业余时间，曾在Github上连击了47天的记录。</p>\n<p>四.我找工作时最看重技术氛围这方面，作为一名热爱编程的程序员，我对于各种技术非常感兴趣，希望能在一个充满技术氛围的地方学习到更多的技术，认识更多的大牛前辈。</p> \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"skillsAssess\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_head clearfixs\">\n\t\t\t\t\t\t\t\t<div class=\"mr_head_l\">\n\t\t\t\t\t\t\t\t\t<div class=\"mr_title\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"mr_title_l\"></span><span class=\"mr_title_c\">技能评价</span><span class=\"mr_title_r\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mr_moudle_content\">\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"java\">java</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"spring\">spring</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"web\">web</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"mysql、oracle\">mysql、oracle</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t<div class=\"mr_skill_con\">\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_name\" title=\"mybatis\">mybatis</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_plan\" data-skillLevel = \"50\">\n\t\t\t\t\t\t\t\t\t <em style=\"width: 50%\"></em>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"mr_skill_level\">掌握</span>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t</div><!-- end  mr_w604 -->\n\t\t\t\t\n\t\t\t\t<div class=\"mr_self_state\">\n   \t \t\t\t\t<div class=\"form_wrap mr_self_s resume_status\">\n\t\t\t\t\t\t·&nbsp;简历就放着吧，万一哪个Boss看中呢&nbsp;·\t\t\t\t   \t \t\t\t\t\n\t   \t \t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t  </div>\n\t    </div> \n\t  </div><!-- end #container -->\n\t</div><!-- end #body -->\n\t<script>\n\t(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p=\"1.9.1\",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,w=/\\S+/g,T=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,N=/^(?:(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,C=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,k=/^[\\],:{}\\s]*$/,E=/(?:^|:|,)(?:\\s*\\[)+/g,S=/\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,A=/\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)/g,j=/^-ms-/,D=/-([\\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||\"load\"===e.type||\"complete\"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener(\"DOMContentLoaded\",H,!1),e.removeEventListener(\"load\",H,!1)):(o.detachEvent(\"onreadystatechange\",H),e.detachEvent(\"onload\",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if(\"string\"==typeof e){if(i=\"<\"===e.charAt(0)&&\">\"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:\"\",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for(\"boolean\"==typeof s&&(c=s,s=arguments[1]||{},u=2),\"object\"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger(\"ready\").off(\"ready\"))}},isFunction:function(e){return\"function\"===b.type(e)},isArray:Array.isArray||function(e){return\"array\"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?l[m.call(e)]||\"object\":typeof e},isPlainObject:function(e){if(!e||\"object\"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,\"constructor\")&&!y.call(e.constructor.prototype,\"isPrototypeOf\"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||\"string\"!=typeof e)return null;\"boolean\"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:\"string\"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,\"@\").replace(A,\"]\").replace(E,\"\")))?Function(\"return \"+n)():(b.error(\"Invalid JSON: \"+n),t)},parseXML:function(n){var r,i;if(!n||\"string\"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,\"text/xml\")):(r=new ActiveXObject(\"Microsoft.XMLDOM\"),r.async=\"false\",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName(\"parsererror\").length||b.error(\"Invalid XML: \"+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,\"ms-\").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call(\"\\ufeff\\u00a0\")?function(e){return null==e?\"\":v.call(e)}:function(e){return null==e?\"\":(e+\"\").replace(T,\"\")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,\"string\"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if(\"number\"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return\"string\"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if(\"object\"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),\"complete\"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener(\"DOMContentLoaded\",H,!1),e.addEventListener(\"load\",H,!1);else{o.attachEvent(\"onreadystatechange\",H),e.attachEvent(\"onload\",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll(\"left\")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(e,t){l[\"[object \"+t+\"]\"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:\"array\"===n||\"function\"!==n&&(0===t||\"number\"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e=\"string\"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);\"function\"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&\"string\"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[[\"resolve\",\"done\",b.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",b.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",b.Callbacks(\"memory\")]],n=\"pending\",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+\"With\"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+\"With\"](this===i?r:this,arguments),this},i[o[0]+\"With\"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement(\"div\");if(d.setAttribute(\"className\",\"t\"),d.innerHTML=\"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\",n=d.getElementsByTagName(\"*\"),r=d.getElementsByTagName(\"a\")[0],!n||!r||!n.length)return{};s=o.createElement(\"select\"),l=s.appendChild(o.createElement(\"option\")),a=d.getElementsByTagName(\"input\")[0],r.style.cssText=\"top:1px;float:left;opacity:.5\",t={getSetAttribute:\"t\"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName(\"tbody\").length,htmlSerialize:!!d.getElementsByTagName(\"link\").length,style:/top/.test(r.getAttribute(\"style\")),hrefNormalized:\"/a\"===r.getAttribute(\"href\"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement(\"form\").enctype,html5Clone:\"<:nav></:nav>\"!==o.createElement(\"nav\").cloneNode(!0).outerHTML,boxModel:\"CSS1Compat\"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement(\"input\"),a.setAttribute(\"value\",\"\"),t.input=\"\"===a.getAttribute(\"value\"),a.value=\"t\",a.setAttribute(\"type\",\"radio\"),t.radioValue=\"t\"===a.value,a.setAttribute(\"checked\",\"t\"),a.setAttribute(\"name\",\"t\"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent(\"onclick\",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c=\"on\"+f,\"t\"),t[f+\"Bubbles\"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip=\"content-box\",d.cloneNode(!0).style.backgroundClip=\"\",t.clearCloneStyle=\"content-box\"===d.style.backgroundClip,b(function(){var n,r,a,s=\"padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;\",u=o.getElementsByTagName(\"body\")[0];u&&(n=o.createElement(\"div\"),n.style.cssText=\"border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px\",u.appendChild(n).appendChild(d),d.innerHTML=\"<table><tr><td></td><td>t</td></tr></table>\",a=d.getElementsByTagName(\"td\"),a[0].style.cssText=\"padding:0;margin:0;border:0;display:none\",p=0===a[0].offsetHeight,a[0].style.display=\"\",a[1].style.display=\"none\",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML=\"\",d.style.cssText=\"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition=\"1%\"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable=\"4px\"===(e.getComputedStyle(d,null)||{width:\"4px\"}).width,r=d.appendChild(o.createElement(\"div\")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width=\"0\",d.style.width=\"1px\",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML=\"\",d.style.cssText=s+\"width:1px;padding:1px;display:inline;zoom:1\",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display=\"block\",d.innerHTML=\"<div></div>\",d.firstChild.style.width=\"5px\",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u=\"string\"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),(\"object\"==typeof n||\"function\"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(\" \"));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:\"jQuery\"+(p+Math.random()).replace(/\\D/g,\"\"),noData:{embed:!0,object:\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute(\"classid\")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,\"parsedAttrs\"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf(\"data-\")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,\"parsedAttrs\",!0)}return s}return\"object\"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i=\"data-\"+n.replace(B,\"-$1\").toLowerCase();if(r=e.getAttribute(i),\"string\"==typeof r){try{r=\"true\"===r?!0:\"false\"===r?!1:\"null\"===r?null:+r+\"\"===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if((\"data\"!==t||!b.isEmptyObject(e[t]))&&\"toJSON\"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||\"fx\")+\"queue\",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||\"fx\";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};\"inprogress\"===i&&(i=n.shift(),r--),o.cur=i,i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks(\"once memory\").add(function(){b._removeData(e,t+\"queue\"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return\"string\"!=typeof e&&(n=e,e=\"fx\",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),\"fx\"===e&&\"inprogress\"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||\"fx\",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};\"string\"!=typeof e&&(n=e,e=t),e=e||\"fx\";while(s--)r=b._data(a[s],e+\"queueHooks\"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\\t\\r\\n]/g,U=/\\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=\"string\"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||\"\").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(X,\" \"):\" \")){o=0;while(i=t[o++])0>r.indexOf(\" \"+i+\" \")&&(r+=i+\" \");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||\"string\"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||\"\").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(X,\" \"):\"\")){o=0;while(i=t[o++])while(r.indexOf(\" \"+i+\" \")>=0)r=r.replace(\" \"+i+\" \",\" \");n.className=e?b.trim(r):\"\"}return this},toggleClass:function(e,t){var n=typeof e,r=\"boolean\"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(\"string\"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?\"addClass\":\"removeClass\"](o)}else(n===i||\"boolean\"===n)&&(this.className&&b._data(this,\"__className__\",this.className),this.className=this.className||e===!1?\"\":b._data(this,\"__className__\")||\"\")})},hasClass:function(e){var t=\" \"+e+\" \",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(\" \"+this[n].className+\" \").replace(X,\" \").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o=\"\":\"number\"==typeof o?o+=\"\":b.isArray(o)&&(o=b.map(o,function(e){return null==e?\"\":e+\"\"})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&\"set\"in r&&r.set(this,o,\"value\")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&\"get\"in r&&(n=r.get(o,\"value\"))!==t?n:(n=o.value,\"string\"==typeof n?n.replace(U,\"\"):null==n?\"\":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o=\"select-one\"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute(\"disabled\"))||n.parentNode.disabled&&b.nodeName(n.parentNode,\"optgroup\"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find(\"option\").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&\"get\"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&\"set\"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+\"\"),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase(\"default-\"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,\"\"),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&\"radio\"===t&&b.nodeName(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},propFix:{tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&\"set\"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&\"get\"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode(\"tabindex\");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i=\"boolean\"==typeof r&&e.getAttribute(n),o=\"boolean\"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase(\"default-\"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase(\"default-\"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,\"input\")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,\"input\")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(\"id\"===n||\"name\"===n||\"coords\"===n?\"\"!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+=\"\",\"value\"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,\"\"===t?!1:t,n)}},b.each([\"width\",\"height\"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return\"\"===r?(e.setAttribute(n,\"auto\"),r):t}})})),b.support.hrefNormalized||(b.each([\"href\",\"src\",\"width\",\"height\"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each([\"href\",\"src\"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+\"\"}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype=\"encoding\"),b.support.checkOn||b.each([\"radio\",\"checkbox\"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute(\"value\")?\"on\":e.value}}}),b.each([\"radio\",\"checkbox\"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||\"\").match(w)||[\"\"],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||\"\").split(\".\").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(\".\")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent(\"on\"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||\"\").match(w)||[\"\"],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||\"\").split(\".\").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&(\"**\"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,\"events\"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,\"type\")?n.type:n,m=y.call(n,\"namespace\")?n.namespace.split(\".\"):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(\".\")>=0&&(m=g.split(\".\"),g=m.shift(),m.sort()),u=0>g.indexOf(\":\")&&\"on\"+g,n=n[b.expando]?n:new b.Event(g,\"object\"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join(\".\"),n.namespace_re=n.namespace?RegExp(\"(^|\\\\.)\"+m.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,\"events\")||{})[n.type]&&b._data(l,\"handle\"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||\"click\"===g&&b.nodeName(i,\"a\")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,\"events\")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||\"click\"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||\"click\"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+\" \",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:\"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:\"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,\"input\")&&\"checkbox\"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:\"focusin\"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:\"focusout\"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r=\"on\"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;\n\treturn(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,\"form\")?!1:(b.event.add(this,\"click._submit keypress._submit\",function(e){var n=e.target,r=b.nodeName(n,\"input\")||b.nodeName(n,\"button\")?n.form:t;r&&!b._data(r,\"submitBubbles\")&&(b.event.add(r,\"submit._submit\",function(e){e._submit_bubble=!0}),b._data(r,\"submitBubbles\",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate(\"submit\",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,\"form\")?!1:(b.event.remove(this,\"._submit\"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?((\"checkbox\"===this.type||\"radio\"===this.type)&&(b.event.add(this,\"propertychange._change\",function(e){\"checked\"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,\"click._change\",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate(\"change\",this,e,!0)})),!1):(b.event.add(this,\"beforeactivate._change\",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,\"changeBubbles\")&&(b.event.add(t,\"change._change\",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate(\"change\",this.parentNode,e,!0)}),b._data(t,\"changeBubbles\",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||\"radio\"!==n.type&&\"checkbox\"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,\"._change\"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if(\"object\"==typeof e){\"string\"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&(\"string\"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+\".\"+i.namespace:i.origType,i.selector,i.handler),this;if(\"object\"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||\"function\"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x=\"sizzle\"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",F=\"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",O=F.replace(\"w\",\"w#\"),B=\"([*^$|!~]?=)\",P=\"\\\\[\"+_+\"*(\"+F+\")\"+_+\"*(?:\"+B+_+\"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\"+O+\")|)|)\"+_+\"*\\\\]\",R=\":(\"+F+\")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+P.replace(3,8)+\")*)|.*)\\\\)|)\",W=RegExp(\"^\"+_+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+_+\"+$\",\"g\"),$=RegExp(\"^\"+_+\"*,\"+_+\"*\"),I=RegExp(\"^\"+_+\"*([\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])\"+_+\"*\"),z=RegExp(R),X=RegExp(\"^\"+O+\"$\"),U={ID:RegExp(\"^#(\"+F+\")\"),CLASS:RegExp(\"^\\\\.(\"+F+\")\"),NAME:RegExp(\"^\\\\[name=['\\\"]?(\"+F+\")['\\\"]?\\\\]\"),TAG:RegExp(\"^(\"+F.replace(\"w\",\"w*\")+\")\"),ATTR:RegExp(\"^\"+P),PSEUDO:RegExp(\"^\"+R),CHILD:RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+_+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+_+\"*(?:([+-]|)\"+_+\"*(\\\\d+)|))\"+_+\"*\\\\)|)\",\"i\"),needsContext:RegExp(\"^\"+_+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+_+\"*((?:-\\\\d)?\\\\d*)\"+_+\"*\\\\)|)(?=[^-]|$)\",\"i\")},V=/[\\x20\\t\\r\\n\\f]*[+~]/,Y=/^[^{]+\\{\\s*\\[native code/,J=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\\d$/i,K=/'|\\\\/g,Z=/\\=[\\x20\\t\\r\\n\\f]*([^'\"\\]]*)[\\x20\\t\\r\\n\\f]*\\]/g,et=/\\\\([\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|.)/g,tt=function(e,t){var n=\"0x\"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+\"\")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=\" \")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement(\"div\");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||\"string\"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&\"object\"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute(\"id\"))?g=f.replace(K,\"\\\\$&\"):t.setAttribute(\"id\",g),g=\"[id='\"+g+\"'] \",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(\",\")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute(\"id\")}}}return wt(e.replace(W,\"$1\"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?\"HTML\"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),T.attributes=at(function(e){e.innerHTML=\"<select></select>\";var t=typeof e.lastChild.getAttribute(\"multiple\");return\"boolean\"!==t&&\"string\"!==t}),T.getByClassName=at(function(e){return e.innerHTML=\"<div class='hidden e'></div><div class='hidden'></div>\",e.getElementsByClassName&&e.getElementsByClassName(\"e\").length?(e.lastChild.className=\"e\",2===e.getElementsByClassName(\"e\").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML=\"<a name='\"+x+\"'></a><div name='\"+x+\"'></div>\",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML=\"<a href='#'></a>\",e.firstChild&&typeof e.firstChild.getAttribute!==A&&\"#\"===e.firstChild.getAttribute(\"href\")})?{}:{href:function(e){return e.getAttribute(\"href\",2)},type:function(e){return e.getAttribute(\"type\")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute(\"id\")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode(\"id\").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode(\"id\");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[\":focus\"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML=\"<select><option selected=''></option></select>\",e.querySelectorAll(\"[selected]\").length||h.push(\"\\\\[\"+_+\"*(?:checked|disabled|ismap|multiple|readonly|selected|value)\"),e.querySelectorAll(\":checked\").length||h.push(\":checked\")}),at(function(e){e.innerHTML=\"<input type='hidden' i=''/>\",e.querySelectorAll(\"[i^='']\").length&&h.push(\"[*^$]=\"+_+\"*(?:\\\"\\\"|'')\"),e.querySelectorAll(\":enabled\").length||h.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),h.push(\",.*:\")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,\"div\"),m.call(e,\"[s!='']:x\"),g.push(\"!=\",R)}),h=RegExp(h.join(\"|\")),g=RegExp(g.join(\"|\")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,\"='$1']\"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error(\"Syntax error, unrecognized expression: \"+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return\"input\"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return(\"input\"===n||\"button\"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||\"\").replace(et,tt),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return\"*\"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+\" \"];return t||(t=RegExp(\"(^|\"+_+\")\"+e+\"(\"+_+\"|$)\"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute(\"class\")||\"\")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?\"!=\"===t:t?(i+=\"\",\"=\"===t?i===n:\"!=\"===t?i!==n:\"^=\"===t?n&&0===i.indexOf(n):\"*=\"===t?n&&i.indexOf(n)>-1:\"$=\"===t?n&&i.slice(-n.length)===n:\"~=\"===t?(\" \"+i+\" \").indexOf(n)>-1:\"|=\"===t?i===n||i.slice(0,n.length+1)===n+\"-\":!1):!0}},CHILD:function(e,t,n,r,i){var o=\"nth\"!==e.slice(0,3),a=\"last\"!==e.slice(-4),s=\"of-type\"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?\"nextSibling\":\"previousSibling\",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g=\"only\"===e&&!h&&\"nextSibling\"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error(\"unsupported pseudo: \"+e);return r[x]?r(t):r.length>1?(n=[e,e,\"\",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,\"$1\"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||\"\")||st.error(\"unsupported lang: \"+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute(\"xml:lang\")||t.getAttribute(\"lang\"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+\"-\");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>\"@\"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+\" \"];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W,\" \")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r=\"\";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&\"parentNode\"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+\" \"+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||\"*\",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[\" \"],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,\"$1\"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b=\"0\",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG(\"*\",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+\" \"];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&\"ID\"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[\":\"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\\[\\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if(\"string\"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+\" \":\"\")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&(\"string\"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||\"string\"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?\"string\"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=\"string\"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,\"parentNode\")},parentsUntil:function(e,t,n){return b.dir(e,\"parentNode\",n)},next:function(e){return pt(e,\"nextSibling\")},prev:function(e){return pt(e,\"previousSibling\")},nextAll:function(e){return b.dir(e,\"nextSibling\")},prevAll:function(e){return b.dir(e,\"previousSibling\")},nextUntil:function(e,t,n){return b.dir(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return b.dir(e,\"previousSibling\",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,\"iframe\")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&\"string\"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=\":not(\"+e+\")\"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if(\"string\"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split(\"|\"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",gt=/ jQuery\\d+=\"(?:null|\\d+)\"/g,mt=RegExp(\"<(?:\"+ht+\")[\\\\s/>]\",\"i\"),yt=/^\\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,bt=/<([\\w:]+)/,xt=/<tbody/i,wt=/<|&#?\\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\\s*(?:[^=]|=\\s*.checked.)/i,kt=/^$|\\/(?:java|ecma)script/i,Et=/^true\\/(.*)/,St=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,At={option:[1,\"<select multiple='multiple'>\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],area:[1,\"<map>\",\"</map>\"],param:[1,\"<object>\",\"</object>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:b.support.htmlSerialize?[0,\"\",\"\"]:[1,\"X<div>\",\"</div>\"]},jt=dt(o),Dt=jt.appendChild(o.createElement(\"div\"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,\"body\")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,\"script\")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,\"select\")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,\"\"):t;if(!(\"string\"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||[\"\",\"\"])[1].toLowerCase()])){e=e.replace(vt,\"<$1></$2>\");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||\"string\"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||\"string\"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,\"tr\"),s=b.map(Ot(l,\"script\"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,\"script\"))),r.call(n&&b.nodeName(this[c],\"table\")?Lt(this[c],\"tbody\"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||\"\")&&!b._data(o,\"globalEval\")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:\"GET\",dataType:\"script\",async:!1,global:!1,\"throws\":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||\"\").replace(St,\"\")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode(\"type\");return e.type=(t&&t.specified)+\"/\"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute(\"type\"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,\"globalEval\",!t||b._data(t[r],\"globalEval\"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}\"script\"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):\"object\"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):\"input\"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):\"option\"===n?t.defaultSelected=t.selected=e.defaultSelected:(\"input\"===n||\"textarea\"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||\"*\"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||\"*\"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test(\"<\"+e.nodeName+\">\")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,\"script\"),r.length>0&&Mt(r,!u&&Ot(e,\"script\")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if(\"object\"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement(\"div\")),u=(bt.exec(o)||[\"\",\"\"])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,\"<$1></$2>\")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o=\"table\"!==u||xt.test(o)?\"<table>\"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],\"tbody\")&&!l.childNodes.length&&o.removeChild(l)\n\t}b.merge(d,s.childNodes),s.textContent=\"\";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,\"input\"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),\"script\"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||\"\")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\\([^)]*\\)/i,It=/opacity\\s*=\\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp(\"^(\"+x+\")(.*)$\",\"i\"),Yt=RegExp(\"^(\"+x+\")(?!px)[a-z%]+$\",\"i\"),Jt=RegExp(\"^([+-])=(\"+x+\")\",\"i\"),Gt={BODY:\"block\"},Qt={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Kt={letterSpacing:0,fontWeight:400},Zt=[\"Top\",\"Right\",\"Bottom\",\"Left\"],en=[\"Webkit\",\"O\",\"Moz\",\"ms\"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,\"none\"===b.css(e,\"display\")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,\"olddisplay\"),n=r.style.display,t?(o[a]||\"none\"!==n||(r.style.display=\"\"),\"\"===r.style.display&&nn(r)&&(o[a]=b._data(r,\"olddisplay\",un(r.nodeName)))):o[a]||(i=nn(r),(n&&\"none\"!==n||!i)&&b._data(r,\"olddisplay\",i?n:b.css(r,\"display\"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&\"none\"!==r.style.display&&\"\"!==r.style.display||(r.style.display=t?o[a]||\"\":\"none\"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t=\"boolean\"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":b.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&\"get\"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,\"string\"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a=\"number\"),!(null==r||\"number\"===a&&isNaN(r)||(\"number\"!==a||b.cssNumber[u]||(r+=\"px\"),b.support.clearCloneStyle||\"\"!==r||0!==n.indexOf(\"background\")||(l[n]=\"inherit\"),s&&\"set\"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&\"get\"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),\"normal\"===a&&n in Kt&&(a=Kt[n]),\"\"===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(\"\"!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left=\"fontSize\"===n?\"1em\":u,u=l.pixelLeft+\"px\",l.left=i,a&&(o.left=a)),\"\"===u?\"auto\":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||\"px\"):t}function an(e,t,n,r,i){var o=n===(r?\"border\":\"content\")?4:\"width\"===t?1:0,a=0;for(;4>o;o+=2)\"margin\"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?(\"content\"===n&&(a-=b.css(e,\"padding\"+Zt[o],!0,i)),\"margin\"!==n&&(a-=b.css(e,\"border\"+Zt[o]+\"Width\",!0,i))):(a+=b.css(e,\"padding\"+Zt[o],!0,i),\"padding\"!==n&&(a+=b.css(e,\"border\"+Zt[o]+\"Width\",!0,i)));return a}function sn(e,t,n){var r=!0,i=\"width\"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&\"border-box\"===b.css(e,\"boxSizing\",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?\"border\":\"content\"),r,o)+\"px\"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),\"none\"!==n&&n||(Pt=(Pt||b(\"<iframe frameborder='0' width='0' height='0'/>\").css(\"cssText\",\"display:block !important\")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write(\"<!doctype html><html><body>\"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],\"display\");return n.remove(),r}b.each([\"height\",\"width\"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,\"display\"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&\"border-box\"===b.css(e,\"boxSizing\",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||\"\")?.01*parseFloat(RegExp.$1)+\"\":t?\"1\":\"\"},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?\"alpha(opacity=\"+100*t+\")\":\"\",o=r&&r.filter||n.filter||\"\";n.zoom=1,(t>=1||\"\"===t)&&\"\"===b.trim(o.replace($t,\"\"))&&n.removeAttribute&&(n.removeAttribute(\"filter\"),\"\"===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+\" \"+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:\"inline-block\"},Wt,[e,\"marginRight\"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each([\"top\",\"left\"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+\"px\":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&\"none\"===(e.style&&e.style.display||b.css(e,\"display\"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:\"\",padding:\"\",border:\"Width\"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o=\"string\"==typeof n?n.split(\" \"):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\\[\\]$/,fn=/\\r?\\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,\"elements\");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(\":disabled\")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,\"\\r\\n\")}}):{name:t.name,value:n.replace(fn,\"\\r\\n\")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?\"\":t,i[i.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join(\"&\").replace(cn,\"+\")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+\"[\"+(\"object\"==typeof i?t:\"\")+\"]\",i,n,r)});else if(n||\"object\"!==b.type(t))r(e,t);else for(i in t)gn(e+\"[\"+i+\"]\",t[i],n,r)}b.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\\/\\//,En=/^([\\w.+-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn=\"*/\".concat(\"*\");try{yn=a.href}catch(Ln){yn=o.createElement(\"a\"),yn.href=\"\",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){\"string\"!=typeof t&&(n=t,t=\"*\");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])\"+\"===r[0]?(r=r.slice(1)||\"*\",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return\"string\"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o[\"*\"]&&s(\"*\")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if(\"string\"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(\" \");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&\"object\"==typeof n&&(a=\"POST\"),s.length>0&&b.ajax({url:e,type:a,dataType:\"html\",data:n}).done(function(e){o=arguments,s.html(i?b(\"<div>\").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each([\"get\",\"post\"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:\"GET\",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":Dn,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\"},converters:{\"* text\":e.String,\"text html\":!0,\"text json\":b.parseJSON,\"text xml\":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){\"object\"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks(\"once memory\"),m=p.statusCode||{},y={},v={},x=0,T=\"canceled\",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+\"\").replace(xn,\"\").replace(kn,mn[1]+\"//\"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||\"*\").toLowerCase().match(w)||[\"\"],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(\"http:\"===r[1]?80:443))==(mn[3]||(\"http:\"===mn[1]?80:443)))),p.data&&p.processData&&\"string\"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger(\"ajaxStart\"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?\"&\":\"?\")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,\"$1_=\"+vn++):o+(bn.test(o)?\"&\":\"?\")+\"_=\"+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader(\"If-Modified-Since\",b.lastModified[o]),b.etag[o]&&N.setRequestHeader(\"If-None-Match\",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader(\"Content-Type\",p.contentType),N.setRequestHeader(\"Accept\",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(\"*\"!==p.dataTypes[0]?\", \"+Dn+\"; q=0.01\":\"\"):p.accepts[\"*\"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T=\"abort\";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger(\"ajaxSend\",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort(\"timeout\")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,\"No Transport\");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||\"\",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader(\"Last-Modified\"),T&&(b.lastModified[o]=T),T=N.getResponseHeader(\"etag\"),T&&(b.etag[o]=T)),204===e?(c=!0,C=\"nocontent\"):304===e?(c=!0,C=\"notmodified\"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C=\"error\",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+\"\",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?\"ajaxSuccess\":\"ajaxError\",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger(\"ajaxComplete\",[N,p]),--b.active||b.event.trigger(\"ajaxStop\")))}return N},getScript:function(e,n){return b.get(e,t,n,\"script\")},getJSON:function(e,t,n){return b.get(e,t,n,\"json\")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while(\"*\"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader(\"Content-Type\"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+\" \"+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if(\"*\"!==r){if(\"*\"!==l&&l!==r){if(i=a[l+\" \"+r]||a[\"* \"+r],!i)for(n in a)if(o=n.split(\" \"),o[1]===r&&(i=a[l+\" \"+o[0]]||a[\"* \"+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e[\"throws\"])t=i(t);else try{t=i(t)}catch(c){return{state:\"parsererror\",error:i?c:\"No conversion from \"+l+\" to \"+r}}}l=r}return{state:\"success\",data:t}}b.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/(?:java|ecma)script/},converters:{\"text script\":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter(\"script\",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\",e.global=!1)}),b.ajaxTransport(\"script\",function(e){if(e.crossDomain){var n,r=o.head||b(\"head\")[0]||o.documentElement;return{send:function(t,i){n=o.createElement(\"script\"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,\"success\"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\\?(?=&|$)|\\?\\?/;b.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=On.pop()||b.expando+\"_\"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter(\"json jsonp\",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?\"url\":\"string\"==typeof n.data&&!(n.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Bn.test(n.data)&&\"data\");return u||\"jsonp\"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,\"$1\"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?\"&\":\"?\")+n.jsonp+\"=\"+o),n.converters[\"script json\"]=function(){return s||b.error(o+\" was not called\"),s[0]},n.dataTypes[0]=\"json\",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),\"script\"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&\"withCredentials\"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i[\"X-Requested-With\"]||(i[\"X-Requested-With\"]=\"XMLHttpRequest\");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),\"string\"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=\"\"}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp(\"^(?:([+-])=|)(\"+x+\")([a-z%]*)$\",\"i\"),Jn=/queueHooks$/,Gn=[nr],Qn={\"*\":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?\"\":\"px\"),\"px\"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||\".5\",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn[\"*\"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&\"expand\"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=[\"*\"]):e=e.split(\" \");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,\"fx\"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,\"fx\").length||c.empty.fire()})})),1===e.nodeType&&(\"height\"in t||\"width\"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],\"inline\"===b.css(e,\"display\")&&\"none\"===b.css(e,\"float\")&&(b.support.inlineBlockNeedsLayout&&\"inline\"!==un(e.nodeName)?d.zoom=1:d.display=\"inline-block\")),n.overflow&&(d.overflow=\"hidden\",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||\"toggle\"===a,a===(m?\"hide\":\"show\"))continue;g.push(i)}if(o=g.length){s=b._data(e,\"fxshow\")||b._data(e,\"fxshow\",{}),\"hidden\"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,\"fxshow\");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start=\"width\"===r||\"height\"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||\"swing\",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?\"\":\"px\")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,\"\"),t&&\"auto\"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each([\"toggle\",\"show\",\"hide\"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||\"boolean\"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,\"finish\"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return\"string\"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||\"fx\",[]),this.each(function(){var t=!0,n=null!=e&&e+\"queueHooks\",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||\"fx\"),this.each(function(){var t,n=b._data(this),r=n[e+\"queue\"],i=n[e+\"queueHooks\"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r[\"margin\"+n]=r[\"padding\"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir(\"show\"),slideUp:ir(\"hide\"),slideToggle:ir(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&\"object\"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:\"number\"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,\"position\");\"static\"===r&&(e.style.position=\"relative\");var i=b(e),o=i.offset(),a=b.css(e,\"top\"),s=b.css(e,\"left\"),u=(\"absolute\"===r||\"fixed\"===r)&&b.inArray(\"auto\",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),\"using\"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return\"fixed\"===b.css(r,\"position\")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],\"html\")||(n=e.offset()),n.top+=b.css(e[0],\"borderTopWidth\",!0),n.left+=b.css(e[0],\"borderLeftWidth\",!0)),{top:t.top-n.top-b.css(r,\"marginTop\",!0),left:t.left-n.left-b.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,\"html\")&&\"static\"===b.css(e,\"position\"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:\"height\",Width:\"width\"},function(e,n){b.each({padding:\"inner\"+e,content:n,\"\":\"outer\"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||\"boolean\"!=typeof i),s=r||(i===!0||o===!0?\"margin\":\"border\");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement[\"client\"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body[\"scroll\"+e],o[\"scroll\"+e],n.body[\"offset\"+e],o[\"offset\"+e],o[\"client\"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,\"function\"==typeof define&&define.amd&&define.amd.jQuery&&define(\"jquery\",[],function(){return b})})(window);\t\t\n\t\t$(function(){\n\t\t\t//技能评价\n\t\t\t$('.mr_skill_con .mr_skill_plan').each(function(){\n\t\t\t\tvar percent = $(this).attr('data-skillLevel');\n\t\t\t\tvar width = $(this).outerWidth();\n\t\t\t\tvar pre = percent / 100 * width;\n\t\t\t\t$(this).find('em').width(pre + 10 );\n\t\t\t});\n\t\t})\n\t</script>\n</body>\n</html>"}],"Post":[{"title":"演示：HTML5应用之文件拖拽上传","date":"2015-08-18T15:22:44.000Z","_content":"一个HTML5拖拽上传的小例子。\nHTML5可以实现文件的拖拽上传与下载。但是目前技术有限，只能操作单个文件或拖拽多个文件通过循环遍历实现多个文件上传下载，至于文件夹的操作，由于技术水平有限，暂时还没有找到资料。\n\n需要注意的知识点有三个\n1. 拖拽事件的监听。取消浏览器默认的监听行为，重新添加拖拽监听事件。\n\n2. `formdata`的操作。通过`e.dataTransfer.files`获取文件对象，通过`formdata`实现表单的数据处理。\n\n3. `XMLHttpRequest`的操作。主要通过send方法发送到服务器。\n\n\n```html\n<!DOCTYPE HTML>\n<html>\n<head>\n<meta charset=\"gbk\">\n<title>演示：HTML5应用之文件拖拽上传</title>\n<script type=\"text/javascript\" src=\"http://www.helloweba.com/demo/js/jquery-1.7.2.min.js\"></script>\n<style type=\"text/css\">\n.demo{width:500px; margin:50px auto}\n#drop_area{width:100%; height:100px; border:3px dashed silver; line-height:100px; text-align:center; font-size:36px; color:#d3d3d3}\n#preview{width:500px; overflow:hidden}\n</style>\n</head>\n\n<body>\n\n\n<div id=\"main\">\n<div class=\"demo\">\n<div id=\"drop_area\">将图片拖拽到此区域</div>\n<div id=\"preview\"></div>\n</div>\n</div>\n\n<script type=\"text/javascript\">\n$(function(){\n//阻止浏览器默认行。\n$(document).on({\ndragleave:function(e){ //拖离\ne.preventDefault();\n},\ndrop:function(e){ //拖后放\ne.preventDefault();\n},\ndragenter:function(e){ //拖进\ne.preventDefault();\n},\ndragover:function(e){ //拖来拖去\ne.preventDefault();\n}\n});\n\n//================上传的实现\nvar box = document.getElementById('drop_area'); //拖拽区域\ndebugger\nbox.addEventListener(\"drop\",function(e){\ne.preventDefault(); //取消默认浏览器拖拽效果\nvar fileList = e.dataTransfer.files; //获取文件对象\n//检测是否是拖拽文件到页面的操作\nif(fileList.length == 0){\nreturn false;\n}\n//检测文件是不是图片\nif(fileList[0].type.indexOf('image') === -1){\nalert(\"您拖的不是图片！\");\nreturn false;\n}\n\n//拖拉图片到浏览器，可以实现预览功能\nvar img = window.webkitURL.createObjectURL(fileList[0]);\nvar filename = fileList[0].name; //图片名称\nvar filesize = Math.floor((fileList[0].size)/1024); \nif(filesize>500){\nalert(\"上传大小不能超过500K.\");\nreturn false;\n}\n//alert(filesize);\nvar str = \"<img src='\"+img+\"'><p>图片名称：\"+filename+\"</p><p>大小：\"+filesize+\"KB</p>\";\n$(\"#preview\").html(str);\n\n//上传\nxhr = new XMLHttpRequest();\nxhr.open(\"post\", \"upload.php\", true);\nxhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n\nvar fd = new FormData();\nfd.append('mypic', fileList[0]);\n\nxhr.send(fd);\n\n\n},false);\n});\n</script>\n\n</body>\n</html>\n```","source":"_posts/HTML5应用之文件拖拽上传.md","raw":"title: 演示：HTML5应用之文件拖拽上传\ndate: 2015-08-018 23:22:44\npermalink: dropPic\ntags:\n- java\n- html5\ncategories:\n- java\n\n---\n一个HTML5拖拽上传的小例子。\nHTML5可以实现文件的拖拽上传与下载。但是目前技术有限，只能操作单个文件或拖拽多个文件通过循环遍历实现多个文件上传下载，至于文件夹的操作，由于技术水平有限，暂时还没有找到资料。\n\n需要注意的知识点有三个\n1. 拖拽事件的监听。取消浏览器默认的监听行为，重新添加拖拽监听事件。\n\n2. `formdata`的操作。通过`e.dataTransfer.files`获取文件对象，通过`formdata`实现表单的数据处理。\n\n3. `XMLHttpRequest`的操作。主要通过send方法发送到服务器。\n\n\n```html\n<!DOCTYPE HTML>\n<html>\n<head>\n<meta charset=\"gbk\">\n<title>演示：HTML5应用之文件拖拽上传</title>\n<script type=\"text/javascript\" src=\"http://www.helloweba.com/demo/js/jquery-1.7.2.min.js\"></script>\n<style type=\"text/css\">\n.demo{width:500px; margin:50px auto}\n#drop_area{width:100%; height:100px; border:3px dashed silver; line-height:100px; text-align:center; font-size:36px; color:#d3d3d3}\n#preview{width:500px; overflow:hidden}\n</style>\n</head>\n\n<body>\n\n\n<div id=\"main\">\n<div class=\"demo\">\n<div id=\"drop_area\">将图片拖拽到此区域</div>\n<div id=\"preview\"></div>\n</div>\n</div>\n\n<script type=\"text/javascript\">\n$(function(){\n//阻止浏览器默认行。\n$(document).on({\ndragleave:function(e){ //拖离\ne.preventDefault();\n},\ndrop:function(e){ //拖后放\ne.preventDefault();\n},\ndragenter:function(e){ //拖进\ne.preventDefault();\n},\ndragover:function(e){ //拖来拖去\ne.preventDefault();\n}\n});\n\n//================上传的实现\nvar box = document.getElementById('drop_area'); //拖拽区域\ndebugger\nbox.addEventListener(\"drop\",function(e){\ne.preventDefault(); //取消默认浏览器拖拽效果\nvar fileList = e.dataTransfer.files; //获取文件对象\n//检测是否是拖拽文件到页面的操作\nif(fileList.length == 0){\nreturn false;\n}\n//检测文件是不是图片\nif(fileList[0].type.indexOf('image') === -1){\nalert(\"您拖的不是图片！\");\nreturn false;\n}\n\n//拖拉图片到浏览器，可以实现预览功能\nvar img = window.webkitURL.createObjectURL(fileList[0]);\nvar filename = fileList[0].name; //图片名称\nvar filesize = Math.floor((fileList[0].size)/1024); \nif(filesize>500){\nalert(\"上传大小不能超过500K.\");\nreturn false;\n}\n//alert(filesize);\nvar str = \"<img src='\"+img+\"'><p>图片名称：\"+filename+\"</p><p>大小：\"+filesize+\"KB</p>\";\n$(\"#preview\").html(str);\n\n//上传\nxhr = new XMLHttpRequest();\nxhr.open(\"post\", \"upload.php\", true);\nxhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n\nvar fd = new FormData();\nfd.append('mypic', fileList[0]);\n\nxhr.send(fd);\n\n\n},false);\n});\n</script>\n\n</body>\n</html>\n```","slug":"dropPic","published":1,"updated":"2016-05-10T04:46:54.261Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431oks0003uco00e0l4zkd","content":"<p>一个HTML5拖拽上传的小例子。<br>HTML5可以实现文件的拖拽上传与下载。但是目前技术有限，只能操作单个文件或拖拽多个文件通过循环遍历实现多个文件上传下载，至于文件夹的操作，由于技术水平有限，暂时还没有找到资料。</p>\n<p>需要注意的知识点有三个</p>\n<ol>\n<li><p>拖拽事件的监听。取消浏览器默认的监听行为，重新添加拖拽监听事件。</p>\n</li>\n<li><p><code>formdata</code>的操作。通过<code>e.dataTransfer.files</code>获取文件对象，通过<code>formdata</code>实现表单的数据处理。</p>\n</li>\n<li><p><code>XMLHttpRequest</code>的操作。主要通过send方法发送到服务器。</p>\n</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE HTML&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"gbk\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>演示：HTML5应用之文件拖拽上传<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://www.helloweba.com/demo/js/jquery-1.7.2.min.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span><span class=\"undefined\"></span><br><span class=\"line\">.demo&#123;width:500px; margin:50px auto&#125;</span><br><span class=\"line\">#drop_area&#123;width:100%; height:100px; border:3px dashed silver; line-height:100px; text-align:center; font-size:36px; color:#d3d3d3&#125;</span><br><span class=\"line\">#preview&#123;width:500px; overflow:hidden&#125;</span><br><span class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"main\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demo\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"drop_area\"</span>&gt;</span>将图片拖拽到此区域<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"preview\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"xml\"></span><br><span class=\"line\">$(function()&#123;</span><br><span class=\"line\">//阻止浏览器默认行。</span><br><span class=\"line\">$(document).on(&#123;</span><br><span class=\"line\">dragleave:function(e)&#123; //拖离</span><br><span class=\"line\">e.preventDefault();</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">drop:function(e)&#123; //拖后放</span><br><span class=\"line\">e.preventDefault();</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">dragenter:function(e)&#123; //拖进</span><br><span class=\"line\">e.preventDefault();</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">dragover:function(e)&#123; //拖来拖去</span><br><span class=\"line\">e.preventDefault();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//================上传的实现</span><br><span class=\"line\">var box = document.getElementById('drop_area'); //拖拽区域</span><br><span class=\"line\">debugger</span><br><span class=\"line\">box.addEventListener(\"drop\",function(e)&#123;</span><br><span class=\"line\">e.preventDefault(); //取消默认浏览器拖拽效果</span><br><span class=\"line\">var fileList = e.dataTransfer.files; //获取文件对象</span><br><span class=\"line\">//检测是否是拖拽文件到页面的操作</span><br><span class=\"line\">if(fileList.length == 0)&#123;</span><br><span class=\"line\">return false;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//检测文件是不是图片</span><br><span class=\"line\">if(fileList[0].type.indexOf('image') === -1)&#123;</span><br><span class=\"line\">alert(\"您拖的不是图片！\");</span><br><span class=\"line\">return false;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//拖拉图片到浏览器，可以实现预览功能</span><br><span class=\"line\">var img = window.webkitURL.createObjectURL(fileList[0]);</span><br><span class=\"line\">var filename = fileList[0].name; //图片名称</span><br><span class=\"line\">var filesize = Math.floor((fileList[0].size)/1024); </span><br><span class=\"line\">if(filesize&gt;500)&#123;</span><br><span class=\"line\">alert(\"上传大小不能超过500K.\");</span><br><span class=\"line\">return false;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//alert(filesize);</span><br><span class=\"line\">var str = \"<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">'\"+img+\"'</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>图片名称：\"+filename+\"<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>大小：\"+filesize+\"KB<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span>\";</span><br><span class=\"line\">$(\"#preview\").html(str);</span><br><span class=\"line\"></span><br><span class=\"line\">//上传</span><br><span class=\"line\">xhr = new XMLHttpRequest();</span><br><span class=\"line\">xhr.open(\"post\", \"upload.php\", true);</span><br><span class=\"line\">xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");</span><br><span class=\"line\"></span><br><span class=\"line\">var fd = new FormData();</span><br><span class=\"line\">fd.append('mypic', fileList[0]);</span><br><span class=\"line\"></span><br><span class=\"line\">xhr.send(fd);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;,false);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>","excerpt":"","more":"<p>一个HTML5拖拽上传的小例子。<br>HTML5可以实现文件的拖拽上传与下载。但是目前技术有限，只能操作单个文件或拖拽多个文件通过循环遍历实现多个文件上传下载，至于文件夹的操作，由于技术水平有限，暂时还没有找到资料。</p>\n<p>需要注意的知识点有三个</p>\n<ol>\n<li><p>拖拽事件的监听。取消浏览器默认的监听行为，重新添加拖拽监听事件。</p>\n</li>\n<li><p><code>formdata</code>的操作。通过<code>e.dataTransfer.files</code>获取文件对象，通过<code>formdata</code>实现表单的数据处理。</p>\n</li>\n<li><p><code>XMLHttpRequest</code>的操作。主要通过send方法发送到服务器。</p>\n</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE HTML&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"gbk\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>演示：HTML5应用之文件拖拽上传<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://www.helloweba.com/demo/js/jquery-1.7.2.min.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span><span class=\"undefined\"></span><br><span class=\"line\">.demo&#123;width:500px; margin:50px auto&#125;</span><br><span class=\"line\">#drop_area&#123;width:100%; height:100px; border:3px dashed silver; line-height:100px; text-align:center; font-size:36px; color:#d3d3d3&#125;</span><br><span class=\"line\">#preview&#123;width:500px; overflow:hidden&#125;</span><br><span class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"main\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demo\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"drop_area\"</span>&gt;</span>将图片拖拽到此区域<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"preview\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"xml\"></span><br><span class=\"line\">$(function()&#123;</span><br><span class=\"line\">//阻止浏览器默认行。</span><br><span class=\"line\">$(document).on(&#123;</span><br><span class=\"line\">dragleave:function(e)&#123; //拖离</span><br><span class=\"line\">e.preventDefault();</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">drop:function(e)&#123; //拖后放</span><br><span class=\"line\">e.preventDefault();</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">dragenter:function(e)&#123; //拖进</span><br><span class=\"line\">e.preventDefault();</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">dragover:function(e)&#123; //拖来拖去</span><br><span class=\"line\">e.preventDefault();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//================上传的实现</span><br><span class=\"line\">var box = document.getElementById('drop_area'); //拖拽区域</span><br><span class=\"line\">debugger</span><br><span class=\"line\">box.addEventListener(\"drop\",function(e)&#123;</span><br><span class=\"line\">e.preventDefault(); //取消默认浏览器拖拽效果</span><br><span class=\"line\">var fileList = e.dataTransfer.files; //获取文件对象</span><br><span class=\"line\">//检测是否是拖拽文件到页面的操作</span><br><span class=\"line\">if(fileList.length == 0)&#123;</span><br><span class=\"line\">return false;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//检测文件是不是图片</span><br><span class=\"line\">if(fileList[0].type.indexOf('image') === -1)&#123;</span><br><span class=\"line\">alert(\"您拖的不是图片！\");</span><br><span class=\"line\">return false;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//拖拉图片到浏览器，可以实现预览功能</span><br><span class=\"line\">var img = window.webkitURL.createObjectURL(fileList[0]);</span><br><span class=\"line\">var filename = fileList[0].name; //图片名称</span><br><span class=\"line\">var filesize = Math.floor((fileList[0].size)/1024); </span><br><span class=\"line\">if(filesize&gt;500)&#123;</span><br><span class=\"line\">alert(\"上传大小不能超过500K.\");</span><br><span class=\"line\">return false;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//alert(filesize);</span><br><span class=\"line\">var str = \"<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">'\"+img+\"'</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>图片名称：\"+filename+\"<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>大小：\"+filesize+\"KB<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span>\";</span><br><span class=\"line\">$(\"#preview\").html(str);</span><br><span class=\"line\"></span><br><span class=\"line\">//上传</span><br><span class=\"line\">xhr = new XMLHttpRequest();</span><br><span class=\"line\">xhr.open(\"post\", \"upload.php\", true);</span><br><span class=\"line\">xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");</span><br><span class=\"line\"></span><br><span class=\"line\">var fd = new FormData();</span><br><span class=\"line\">fd.append('mypic', fileList[0]);</span><br><span class=\"line\"></span><br><span class=\"line\">xhr.send(fd);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;,false);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"title":"Java程序员的就业指导","date":"2015-12-24T14:03:44.000Z","_content":">来自 CDSN博客 java那些事\n\n  想要成为合格的Java程序员或工程师到底需要具备哪些专业技能，面试者在面试之前到底需要准备哪些东西呢？本文陈列的这些内容既可以作为个人简历中的内容，也可以作为面试的时候跟面试官聊的东西，你可以把这些内容写到你的简历中，当然更需要的是你在面试的时候向面试官展示这些专业技能。相信此文对正在寻觅Java程序员（Java工程师）职位的freshman以及希望成为中高级Java开发者的junior都会有所帮助。\n\n#### 专业技能\n\n>熟练的使用Java语言进行面向对象程序设计，有良好的编程习惯，熟悉常用的Java API，包括集合框架、多线程（并发编程）、I/O（NIO）、Socket、JDBC、XML、反射等。\n\n>熟悉基于JSP和Servlet的Java Web开发，对Servlet和JSP的工作原理和生命周期有深入了解，熟练的使用JSTL和EL编写无脚本动态页面，有使用监听器、过滤器等Web组件以及MVC架构模式进行Java Web项目开发的经验。\n\n>对Spring的IoC容器和AOP原理有深入了解，熟练的运用Spring框架管理各种Web组件及其依赖关系，熟练的使用Spring进行事务、日志、安全性等的管理，有使用Spring MVC作为表示层技术以及使用Spring提供的持久化支持进行Web项目开发的经验，熟悉Spring对其他框架的整合。\n\n>熟练的使用Hibernate、MyBatis等ORM框架，熟悉Hibernate和MyBatis的核心API，对Hibernate的关联映射、继承映射、组件映射、缓存机制、事务管理以及性能调优等有深入的理解。\n\n>熟练的使用HTML、CSS和JavaScript进行Web前端开发，熟悉jQuery和Bootstrap，对Ajax技术在Web项目中的应用有深入理解，有使用前端MVC框架（AngularJS）和JavaScript模板引擎（HandleBars）进行项目开发的经验。\n\n>熟悉常用的关系型数据库产品（MySQL、Oracle），熟练的使用SQL和PL/SQL进行数据库编程。\n\n>熟悉面向对象的设计原则，对GoF设计模式和企业应用架构模式有深入的了解和实际开发的相关经验，熟练的使用UML进行面向对象的分析和设计，有TDD（测试驱动开发）和DDD（领域驱动设计）的经验。\n\n>熟悉Apache、NginX、Tomcat、WildFly、Weblogic等Web服务器和应用服务器的使用，熟悉多种服务器整合、集群和负载均衡的配置。\n\n>熟练的使用产品原型工具Axure，熟练的使用设计建模工具PowerDesigner和Enterprise Architect，熟练的使用Java开发环境Eclipse和IntelliJ，熟练的使用前端开发环境WebStorm，熟练的使用软件版本控制工具SVN和Git，熟练的使用项目构建和管理工具Maven和Gradle。\n\n>`说明：`上面罗列的这些东西并不是每一项你都要烂熟于心，根据企业招聘的具体要求可以做相应的有针对性的准备。我个人觉得前6项应该是最低要求，是作为一个Java开发者必须要具备的专业技能。\n项目经验\n\n#### 项目介绍\n\n>  本系统是X委托Y开发的用于Z的系统，系统包括A、B、C、D等模块。系统使用了Java企业级开发的开源框架E以及前端技术F。表示层运用了G架构，使用H作为视图I作为控制器并实现了REST风格的请求；业务逻辑层运用了J模式，并通过K实现事务、日志和安全性等功能，通过L实现缓存服务；持久层使用了M封装CRUD操作，底层使用N实现数据存取。整个项目采用了P开发模型。\n\n>`说明：`上面的描述中，E通常指Spring（Java企业级开发的一站式选择）；F最有可能是jQuery库及其插件或者是Bootstrap框架，当然如果要构建单页应用（SPA）最佳的方案是前端MVC框架（如AngularJS）和JavaScript模板引擎（如HandleBars）；G显然是MVC（模型-视图-控制），最有可能的实现框架是Spring MVC，除此之外还有Struts 2、JSF以及Apache为JSF提供的MyFaces实现，可以使用JSP作为MVC中的V，也可使用模板引擎（如Freemarker和Velocity）来生成视图，还可以是各种文档或报表（如Excel和PDF等），而Servlet和自定义的控制器是MVC中的C，当然Spring MVC中提供了作为前端控制器的DispatcherServlet；J通常是事务脚本，K应该是AOP（面向切面编程）技术，L目前广泛使用的有memcached和Redis；M的选择方案很多，最有可能的是Hibernate和MyBatis，也可以两种技术同时运用，但通常是将增删改交给Hibernate来处理，而复杂的查询则由MyBatis完成，此外TopLink、jOOQ也是优秀的持久层解决方案；底层的数据存取传统上是使用关系型数据库，可以是MySQL、Oracle、SQLServer、DB2等，随着大数据时代的来临，也可以采用NoSQL（如MongoDB、MemBase、BigTable等）和其他大数据存取方案（如GFS、HDFS等）；项目的开发模型P可以是瀑布模型、快速原型模型、增量模型、螺旋模型、喷泉模型、RAD模型等。\n\n#### 项目开发流程\n\n>可行性分析 >>> 可行性分析报告 / 项目开发计划书\n\n>需求分析 >>> 需求规格说明书 \n\n>OOAD（用例图、时序图、活动图）\n\n>界面原型：帮助理解需求、业务层设计时推导事务脚本\n\n>设计 >>> 概要设计说明书/详细设计说明书 \n\n>抽取业务实体（领域对象）：类图、E-R图（概念设计阶段）\n\n>分层架构：确定各层的技术实现方案（具体到使用的框架、数据库服务器、应用服务器等）。业务层设计：事务脚本模式（事务：用户发送一次请求就是一个事务；脚本：一个方法或一个函数；事务脚本：把一次请求封装为一个方法或一个函数；事务脚本模式：一个事务开始于脚本的打开，终止于脚本的关闭）。业务层涉及的对象有三种类型：事务脚本类（封装了业务的流程）、数据访问对象（DAO，封装了持久化操作）、数据传输对象（DTO，封装了失血/贫血领域对象），三者之间的关系是事务脚本类组合（聚合）数据访问对象，这二者都依赖了数据传输对象\n\n>正向工程（UML类图生成Java代码）和逆向工程（Java代码生成UML类图）\n\n>数据库物理设计（ER图转换成表间关系图、建库和建表、使用工具插入测试数据）\n\n>编码\n\n#### 测试 >>> 测试报告 / 缺陷报告 \n\n>单元测试：对软件中的最小可测试单元进行检查和验证，在Java中是对类中的方法进行测试，可以使用JUnit工具来实施。\n\n>集成测试：集成测试也叫组装测试或联合测试。在单元测试的基础上，将所有模块按照设计要求组装成为子系统进行测试。\n\n>系统测试：将已经确认的软件、硬件、外设、网络等元素结合在一起，进行信息系统的各种组装测试和确认测试，系统测试是针对整个产品系统进行的测试，目的是验证系统是否满足了需求规格的定义，找出与需求规格不符或与之矛盾的地方，从而提出更加完善的方案。\n\n>验收测试：在软件产品完成了单元测试、集成测试和系统测试之后，产品发布之前所进行的软件测试活动。它是技术测试的最后一个阶段，也称为交付测试。验收测试的目的是确保软件准备就绪，并且可以让最终用户将其用于执行软件的既定功能和任务。\n\n#### 交付和维护 >>> 用户手册 / 操作手册\n\n#### 项目管理\n\n>版本控制：CVS/SVN/Git\n\n>自动构建：Ant/Maven/Ivy/Gradle\n\n>持续集成：Hudson/Jenkins\n\n>系统架构\n\n>负载均衡服务器：F5、A10\n\n#### 应用服务器： \n\n>HTTP服务器：Apache、NginX（HTTP、反向代理、邮件代理服务器）\n\n>Servlet容器：Tomcat、Resin\n\n>EJB容器：WildFly（JBoss Application Server）、GlassFish、Weblogic、Websphere\n\n>数据库服务器：MySQL、Oracle\n\n#### 第三方工具（插件）应用\n\n>图表工具：基于jQuery的图表插件（如jQchart、Flot、Charted等）、Chart.js、Highcharts等。\n\n>报表工具：Pentaho Reporting、iReport、DynamicReports等。\n\n>文档处理：POI、iText等。\n\n>工作流引擎：jBPM、OpenWFE、Snaker、SWAMP等。\n\n>作业调度：Quartz、JobServer、Oddjob等。\n\n>缓存服务：EhCache、memcached、SwarmCache等。\n\n>消息队列：Open-MQ、ZeroMQ等。\n\n>安全框架：Shiro、PicketBox等。\n\n>搜索引擎：IndexTank、Lucene、ElasticSearch等。\n\n>Ajax框架：jQuery、ExtJS、DWR等。\n\n>UI插件：EasyUI、MiniUI等。\n\n>富文本框：UEditor、CKEditor等。\n\n#### 面试提问\n\n>项目是为哪个公司开发的？项目的投入是多少？\n\n>有多少人参与了项目开发？整个团队中，测试人员、开发人员、项目经理比例是多少？\n\n>项目开发了多长时间？项目总的代码量有多少？你的代码量有多少？\n\n>项目采用了怎样的开发模型或开发流程？项目的架构是怎样的？项目的技术选型是怎样的？\n\n>你在项目中承担了怎样的职责？是否经常开会或加班？项目完成后有哪些收获或是经验教训？\n\n>项目中最困难的部分是什么？如何解决团队开发时遇到的各种冲突？\n\n>说明：对于没有实际项目经验的，可以在前程无忧、智联招聘、拉勾网等网站上搜索招聘Java程序员的公司，找到他们的官方网站了解他们做的项目，查看项目的详细介绍，然后尝试完成其中一部分功能，最好请教一下高人看看自己的设计和代码是否恰当，这样相当于积累了一定的项目经验。\n面试题\n\n>  Java常见的面试题已经总结成《Java面试题集》、《Java面试题全集》以及《面试编程题拾遗》等文章陆续发布在我的CSDN博客，各大公司的面试题我会继续整理发布。\n\n### 其他\n\n#### 常见错误\n\n>只在计算机上练习\n不做行为面试题演练\n不做模拟面试训练\n试图死记硬背答案\n不大声说出你的解题思路\n代码不够严谨\n不写测试代码\n轻言放弃\n\n#### 面试时可以反问面试官的问题\n\n> 我注意到你们使用了X技术，请问你们是如何解决Y问题的？\n\n>为什么你们的产品使用了X技术而不是Y技术？据我所知，X技术虽然有A、B、C等好处，但也存在D和E问题，而Y技术可以解决D和E问题。\n\n>我对您说的X技术不是太熟悉，但我感觉它是一个不错的解决方案，您能多讲讲它的工作原理吗？\n\n>你们团队是如何进行项目规划的？一周会有几次例会？每周的代码量大概是多少？\n\n>就X问题我能想到的解决方案目前就只有Y了，请问您会怎么解决这个问题？\n\n#### S.A.R.法则\n\n>  S.A.R法则是指先描述问题的场景，然后解释你采取的行动，最后陈述结果。\n\n#### 算法题的五种解法\n\n>举例法：通过举例子发现其中的一般规则。\n\n>例子：圆内接三角形是锐角三角形的概率是多少？这是搜狗的一个面试题，可以在圆上随意画三个点连接成三角形就可以知道答案了。\n\n>模式匹配法\n\n>例子：一个有序数组的元素经过循环移动，元素的顺序变成\"3 4 5 6 1 2\"。怎样找到数组中最小的那个元素，假设数组中的元素各不相同。这个题目和折半查找看起来是那么相似，因此可以借鉴折半查找的算法，最小元素显然出现在\"mid > right\"的转折点。\n\n>简化推广法\n\n>说明：简化问题规模和数据类型，然后再发现通用的解法。\n\n>简单构造法\n\n>例子：找出\"abcde\"的所有可能的排列组合。先考虑只有\"a\"的情况，再考虑\"ab\"的情况，以此类推。最终你可能会得到一个递归公式。这种方法往往会演变成递归法。\n\n>数据结构头脑风暴法\n\n>例子：随机生成一些数字，并找出其中位数。这种问题可以在头脑中将你了解的数据结构过一遍，看看哪种是最合适的数据结构。上面的题目可以建立两个堆，一个大根堆和一个小根堆，较小的元素放在大根堆，较大的元素放在小根堆，如果两个堆不平衡，可以从其中一个堆取出元素放入另一个堆即可。最后中位数应该是两个堆的根之一。\n\n#### 录用谈判\n\n>要理直气壮的提出具体的待遇要求\n\n>开出比预期稍高的价码\n\n>不要只盯着薪水（很多公司更愿意就薪水之外的条件做出让步）\n\n>使用最合适的方法（可以尝试在电话或E-mail中谈判待遇）\n\n#### 自我评价\n\n>学习能力（搞IT行业的人需要不断的了解新的技术、工具和方法）\n\n>团队意识（相比个人英雄主义，IT行业更倡导团队合作）\n\n>抗压能力（很多IT企业的工作强度相对来说还是比较大的）\n\n\n","source":"_posts/Java程序员的就业指导.md","raw":"title: Java程序员的就业指导\ndate: 2015-12-24 22:03:44\npermalink: java00002\ntags:\n- Hexo\ncategories:\n- Hexo\n\n---\n>来自 CDSN博客 java那些事\n\n  想要成为合格的Java程序员或工程师到底需要具备哪些专业技能，面试者在面试之前到底需要准备哪些东西呢？本文陈列的这些内容既可以作为个人简历中的内容，也可以作为面试的时候跟面试官聊的东西，你可以把这些内容写到你的简历中，当然更需要的是你在面试的时候向面试官展示这些专业技能。相信此文对正在寻觅Java程序员（Java工程师）职位的freshman以及希望成为中高级Java开发者的junior都会有所帮助。\n\n#### 专业技能\n\n>熟练的使用Java语言进行面向对象程序设计，有良好的编程习惯，熟悉常用的Java API，包括集合框架、多线程（并发编程）、I/O（NIO）、Socket、JDBC、XML、反射等。\n\n>熟悉基于JSP和Servlet的Java Web开发，对Servlet和JSP的工作原理和生命周期有深入了解，熟练的使用JSTL和EL编写无脚本动态页面，有使用监听器、过滤器等Web组件以及MVC架构模式进行Java Web项目开发的经验。\n\n>对Spring的IoC容器和AOP原理有深入了解，熟练的运用Spring框架管理各种Web组件及其依赖关系，熟练的使用Spring进行事务、日志、安全性等的管理，有使用Spring MVC作为表示层技术以及使用Spring提供的持久化支持进行Web项目开发的经验，熟悉Spring对其他框架的整合。\n\n>熟练的使用Hibernate、MyBatis等ORM框架，熟悉Hibernate和MyBatis的核心API，对Hibernate的关联映射、继承映射、组件映射、缓存机制、事务管理以及性能调优等有深入的理解。\n\n>熟练的使用HTML、CSS和JavaScript进行Web前端开发，熟悉jQuery和Bootstrap，对Ajax技术在Web项目中的应用有深入理解，有使用前端MVC框架（AngularJS）和JavaScript模板引擎（HandleBars）进行项目开发的经验。\n\n>熟悉常用的关系型数据库产品（MySQL、Oracle），熟练的使用SQL和PL/SQL进行数据库编程。\n\n>熟悉面向对象的设计原则，对GoF设计模式和企业应用架构模式有深入的了解和实际开发的相关经验，熟练的使用UML进行面向对象的分析和设计，有TDD（测试驱动开发）和DDD（领域驱动设计）的经验。\n\n>熟悉Apache、NginX、Tomcat、WildFly、Weblogic等Web服务器和应用服务器的使用，熟悉多种服务器整合、集群和负载均衡的配置。\n\n>熟练的使用产品原型工具Axure，熟练的使用设计建模工具PowerDesigner和Enterprise Architect，熟练的使用Java开发环境Eclipse和IntelliJ，熟练的使用前端开发环境WebStorm，熟练的使用软件版本控制工具SVN和Git，熟练的使用项目构建和管理工具Maven和Gradle。\n\n>`说明：`上面罗列的这些东西并不是每一项你都要烂熟于心，根据企业招聘的具体要求可以做相应的有针对性的准备。我个人觉得前6项应该是最低要求，是作为一个Java开发者必须要具备的专业技能。\n项目经验\n\n#### 项目介绍\n\n>  本系统是X委托Y开发的用于Z的系统，系统包括A、B、C、D等模块。系统使用了Java企业级开发的开源框架E以及前端技术F。表示层运用了G架构，使用H作为视图I作为控制器并实现了REST风格的请求；业务逻辑层运用了J模式，并通过K实现事务、日志和安全性等功能，通过L实现缓存服务；持久层使用了M封装CRUD操作，底层使用N实现数据存取。整个项目采用了P开发模型。\n\n>`说明：`上面的描述中，E通常指Spring（Java企业级开发的一站式选择）；F最有可能是jQuery库及其插件或者是Bootstrap框架，当然如果要构建单页应用（SPA）最佳的方案是前端MVC框架（如AngularJS）和JavaScript模板引擎（如HandleBars）；G显然是MVC（模型-视图-控制），最有可能的实现框架是Spring MVC，除此之外还有Struts 2、JSF以及Apache为JSF提供的MyFaces实现，可以使用JSP作为MVC中的V，也可使用模板引擎（如Freemarker和Velocity）来生成视图，还可以是各种文档或报表（如Excel和PDF等），而Servlet和自定义的控制器是MVC中的C，当然Spring MVC中提供了作为前端控制器的DispatcherServlet；J通常是事务脚本，K应该是AOP（面向切面编程）技术，L目前广泛使用的有memcached和Redis；M的选择方案很多，最有可能的是Hibernate和MyBatis，也可以两种技术同时运用，但通常是将增删改交给Hibernate来处理，而复杂的查询则由MyBatis完成，此外TopLink、jOOQ也是优秀的持久层解决方案；底层的数据存取传统上是使用关系型数据库，可以是MySQL、Oracle、SQLServer、DB2等，随着大数据时代的来临，也可以采用NoSQL（如MongoDB、MemBase、BigTable等）和其他大数据存取方案（如GFS、HDFS等）；项目的开发模型P可以是瀑布模型、快速原型模型、增量模型、螺旋模型、喷泉模型、RAD模型等。\n\n#### 项目开发流程\n\n>可行性分析 >>> 可行性分析报告 / 项目开发计划书\n\n>需求分析 >>> 需求规格说明书 \n\n>OOAD（用例图、时序图、活动图）\n\n>界面原型：帮助理解需求、业务层设计时推导事务脚本\n\n>设计 >>> 概要设计说明书/详细设计说明书 \n\n>抽取业务实体（领域对象）：类图、E-R图（概念设计阶段）\n\n>分层架构：确定各层的技术实现方案（具体到使用的框架、数据库服务器、应用服务器等）。业务层设计：事务脚本模式（事务：用户发送一次请求就是一个事务；脚本：一个方法或一个函数；事务脚本：把一次请求封装为一个方法或一个函数；事务脚本模式：一个事务开始于脚本的打开，终止于脚本的关闭）。业务层涉及的对象有三种类型：事务脚本类（封装了业务的流程）、数据访问对象（DAO，封装了持久化操作）、数据传输对象（DTO，封装了失血/贫血领域对象），三者之间的关系是事务脚本类组合（聚合）数据访问对象，这二者都依赖了数据传输对象\n\n>正向工程（UML类图生成Java代码）和逆向工程（Java代码生成UML类图）\n\n>数据库物理设计（ER图转换成表间关系图、建库和建表、使用工具插入测试数据）\n\n>编码\n\n#### 测试 >>> 测试报告 / 缺陷报告 \n\n>单元测试：对软件中的最小可测试单元进行检查和验证，在Java中是对类中的方法进行测试，可以使用JUnit工具来实施。\n\n>集成测试：集成测试也叫组装测试或联合测试。在单元测试的基础上，将所有模块按照设计要求组装成为子系统进行测试。\n\n>系统测试：将已经确认的软件、硬件、外设、网络等元素结合在一起，进行信息系统的各种组装测试和确认测试，系统测试是针对整个产品系统进行的测试，目的是验证系统是否满足了需求规格的定义，找出与需求规格不符或与之矛盾的地方，从而提出更加完善的方案。\n\n>验收测试：在软件产品完成了单元测试、集成测试和系统测试之后，产品发布之前所进行的软件测试活动。它是技术测试的最后一个阶段，也称为交付测试。验收测试的目的是确保软件准备就绪，并且可以让最终用户将其用于执行软件的既定功能和任务。\n\n#### 交付和维护 >>> 用户手册 / 操作手册\n\n#### 项目管理\n\n>版本控制：CVS/SVN/Git\n\n>自动构建：Ant/Maven/Ivy/Gradle\n\n>持续集成：Hudson/Jenkins\n\n>系统架构\n\n>负载均衡服务器：F5、A10\n\n#### 应用服务器： \n\n>HTTP服务器：Apache、NginX（HTTP、反向代理、邮件代理服务器）\n\n>Servlet容器：Tomcat、Resin\n\n>EJB容器：WildFly（JBoss Application Server）、GlassFish、Weblogic、Websphere\n\n>数据库服务器：MySQL、Oracle\n\n#### 第三方工具（插件）应用\n\n>图表工具：基于jQuery的图表插件（如jQchart、Flot、Charted等）、Chart.js、Highcharts等。\n\n>报表工具：Pentaho Reporting、iReport、DynamicReports等。\n\n>文档处理：POI、iText等。\n\n>工作流引擎：jBPM、OpenWFE、Snaker、SWAMP等。\n\n>作业调度：Quartz、JobServer、Oddjob等。\n\n>缓存服务：EhCache、memcached、SwarmCache等。\n\n>消息队列：Open-MQ、ZeroMQ等。\n\n>安全框架：Shiro、PicketBox等。\n\n>搜索引擎：IndexTank、Lucene、ElasticSearch等。\n\n>Ajax框架：jQuery、ExtJS、DWR等。\n\n>UI插件：EasyUI、MiniUI等。\n\n>富文本框：UEditor、CKEditor等。\n\n#### 面试提问\n\n>项目是为哪个公司开发的？项目的投入是多少？\n\n>有多少人参与了项目开发？整个团队中，测试人员、开发人员、项目经理比例是多少？\n\n>项目开发了多长时间？项目总的代码量有多少？你的代码量有多少？\n\n>项目采用了怎样的开发模型或开发流程？项目的架构是怎样的？项目的技术选型是怎样的？\n\n>你在项目中承担了怎样的职责？是否经常开会或加班？项目完成后有哪些收获或是经验教训？\n\n>项目中最困难的部分是什么？如何解决团队开发时遇到的各种冲突？\n\n>说明：对于没有实际项目经验的，可以在前程无忧、智联招聘、拉勾网等网站上搜索招聘Java程序员的公司，找到他们的官方网站了解他们做的项目，查看项目的详细介绍，然后尝试完成其中一部分功能，最好请教一下高人看看自己的设计和代码是否恰当，这样相当于积累了一定的项目经验。\n面试题\n\n>  Java常见的面试题已经总结成《Java面试题集》、《Java面试题全集》以及《面试编程题拾遗》等文章陆续发布在我的CSDN博客，各大公司的面试题我会继续整理发布。\n\n### 其他\n\n#### 常见错误\n\n>只在计算机上练习\n不做行为面试题演练\n不做模拟面试训练\n试图死记硬背答案\n不大声说出你的解题思路\n代码不够严谨\n不写测试代码\n轻言放弃\n\n#### 面试时可以反问面试官的问题\n\n> 我注意到你们使用了X技术，请问你们是如何解决Y问题的？\n\n>为什么你们的产品使用了X技术而不是Y技术？据我所知，X技术虽然有A、B、C等好处，但也存在D和E问题，而Y技术可以解决D和E问题。\n\n>我对您说的X技术不是太熟悉，但我感觉它是一个不错的解决方案，您能多讲讲它的工作原理吗？\n\n>你们团队是如何进行项目规划的？一周会有几次例会？每周的代码量大概是多少？\n\n>就X问题我能想到的解决方案目前就只有Y了，请问您会怎么解决这个问题？\n\n#### S.A.R.法则\n\n>  S.A.R法则是指先描述问题的场景，然后解释你采取的行动，最后陈述结果。\n\n#### 算法题的五种解法\n\n>举例法：通过举例子发现其中的一般规则。\n\n>例子：圆内接三角形是锐角三角形的概率是多少？这是搜狗的一个面试题，可以在圆上随意画三个点连接成三角形就可以知道答案了。\n\n>模式匹配法\n\n>例子：一个有序数组的元素经过循环移动，元素的顺序变成\"3 4 5 6 1 2\"。怎样找到数组中最小的那个元素，假设数组中的元素各不相同。这个题目和折半查找看起来是那么相似，因此可以借鉴折半查找的算法，最小元素显然出现在\"mid > right\"的转折点。\n\n>简化推广法\n\n>说明：简化问题规模和数据类型，然后再发现通用的解法。\n\n>简单构造法\n\n>例子：找出\"abcde\"的所有可能的排列组合。先考虑只有\"a\"的情况，再考虑\"ab\"的情况，以此类推。最终你可能会得到一个递归公式。这种方法往往会演变成递归法。\n\n>数据结构头脑风暴法\n\n>例子：随机生成一些数字，并找出其中位数。这种问题可以在头脑中将你了解的数据结构过一遍，看看哪种是最合适的数据结构。上面的题目可以建立两个堆，一个大根堆和一个小根堆，较小的元素放在大根堆，较大的元素放在小根堆，如果两个堆不平衡，可以从其中一个堆取出元素放入另一个堆即可。最后中位数应该是两个堆的根之一。\n\n#### 录用谈判\n\n>要理直气壮的提出具体的待遇要求\n\n>开出比预期稍高的价码\n\n>不要只盯着薪水（很多公司更愿意就薪水之外的条件做出让步）\n\n>使用最合适的方法（可以尝试在电话或E-mail中谈判待遇）\n\n#### 自我评价\n\n>学习能力（搞IT行业的人需要不断的了解新的技术、工具和方法）\n\n>团队意识（相比个人英雄主义，IT行业更倡导团队合作）\n\n>抗压能力（很多IT企业的工作强度相对来说还是比较大的）\n\n\n","slug":"java00002","published":1,"updated":"2016-05-10T04:46:54.261Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431oky0005uco03wrxvh3a","content":"<blockquote>\n<p>来自 CDSN博客 java那些事</p>\n</blockquote>\n<p>  想要成为合格的Java程序员或工程师到底需要具备哪些专业技能，面试者在面试之前到底需要准备哪些东西呢？本文陈列的这些内容既可以作为个人简历中的内容，也可以作为面试的时候跟面试官聊的东西，你可以把这些内容写到你的简历中，当然更需要的是你在面试的时候向面试官展示这些专业技能。相信此文对正在寻觅Java程序员（Java工程师）职位的freshman以及希望成为中高级Java开发者的junior都会有所帮助。</p>\n<h4 id=\"专业技能\">专业技能</h4><blockquote>\n<p>熟练的使用Java语言进行面向对象程序设计，有良好的编程习惯，熟悉常用的Java API，包括集合框架、多线程（并发编程）、I/O（NIO）、Socket、JDBC、XML、反射等。</p>\n<p>熟悉基于JSP和Servlet的Java Web开发，对Servlet和JSP的工作原理和生命周期有深入了解，熟练的使用JSTL和EL编写无脚本动态页面，有使用监听器、过滤器等Web组件以及MVC架构模式进行Java Web项目开发的经验。</p>\n<p>对Spring的IoC容器和AOP原理有深入了解，熟练的运用Spring框架管理各种Web组件及其依赖关系，熟练的使用Spring进行事务、日志、安全性等的管理，有使用Spring MVC作为表示层技术以及使用Spring提供的持久化支持进行Web项目开发的经验，熟悉Spring对其他框架的整合。</p>\n<p>熟练的使用Hibernate、MyBatis等ORM框架，熟悉Hibernate和MyBatis的核心API，对Hibernate的关联映射、继承映射、组件映射、缓存机制、事务管理以及性能调优等有深入的理解。</p>\n<p>熟练的使用HTML、CSS和JavaScript进行Web前端开发，熟悉jQuery和Bootstrap，对Ajax技术在Web项目中的应用有深入理解，有使用前端MVC框架（AngularJS）和JavaScript模板引擎（HandleBars）进行项目开发的经验。</p>\n<p>熟悉常用的关系型数据库产品（MySQL、Oracle），熟练的使用SQL和PL/SQL进行数据库编程。</p>\n<p>熟悉面向对象的设计原则，对GoF设计模式和企业应用架构模式有深入的了解和实际开发的相关经验，熟练的使用UML进行面向对象的分析和设计，有TDD（测试驱动开发）和DDD（领域驱动设计）的经验。</p>\n<p>熟悉Apache、NginX、Tomcat、WildFly、Weblogic等Web服务器和应用服务器的使用，熟悉多种服务器整合、集群和负载均衡的配置。</p>\n<p>熟练的使用产品原型工具Axure，熟练的使用设计建模工具PowerDesigner和Enterprise Architect，熟练的使用Java开发环境Eclipse和IntelliJ，熟练的使用前端开发环境WebStorm，熟练的使用软件版本控制工具SVN和Git，熟练的使用项目构建和管理工具Maven和Gradle。</p>\n<p><code>说明：</code>上面罗列的这些东西并不是每一项你都要烂熟于心，根据企业招聘的具体要求可以做相应的有针对性的准备。我个人觉得前6项应该是最低要求，是作为一个Java开发者必须要具备的专业技能。<br>项目经验</p>\n</blockquote>\n<h4 id=\"项目介绍\">项目介绍</h4><blockquote>\n<p>  本系统是X委托Y开发的用于Z的系统，系统包括A、B、C、D等模块。系统使用了Java企业级开发的开源框架E以及前端技术F。表示层运用了G架构，使用H作为视图I作为控制器并实现了REST风格的请求；业务逻辑层运用了J模式，并通过K实现事务、日志和安全性等功能，通过L实现缓存服务；持久层使用了M封装CRUD操作，底层使用N实现数据存取。整个项目采用了P开发模型。</p>\n<p><code>说明：</code>上面的描述中，E通常指Spring（Java企业级开发的一站式选择）；F最有可能是jQuery库及其插件或者是Bootstrap框架，当然如果要构建单页应用（SPA）最佳的方案是前端MVC框架（如AngularJS）和JavaScript模板引擎（如HandleBars）；G显然是MVC（模型-视图-控制），最有可能的实现框架是Spring MVC，除此之外还有Struts 2、JSF以及Apache为JSF提供的MyFaces实现，可以使用JSP作为MVC中的V，也可使用模板引擎（如Freemarker和Velocity）来生成视图，还可以是各种文档或报表（如Excel和PDF等），而Servlet和自定义的控制器是MVC中的C，当然Spring MVC中提供了作为前端控制器的DispatcherServlet；J通常是事务脚本，K应该是AOP（面向切面编程）技术，L目前广泛使用的有memcached和Redis；M的选择方案很多，最有可能的是Hibernate和MyBatis，也可以两种技术同时运用，但通常是将增删改交给Hibernate来处理，而复杂的查询则由MyBatis完成，此外TopLink、jOOQ也是优秀的持久层解决方案；底层的数据存取传统上是使用关系型数据库，可以是MySQL、Oracle、SQLServer、DB2等，随着大数据时代的来临，也可以采用NoSQL（如MongoDB、MemBase、BigTable等）和其他大数据存取方案（如GFS、HDFS等）；项目的开发模型P可以是瀑布模型、快速原型模型、增量模型、螺旋模型、喷泉模型、RAD模型等。</p>\n</blockquote>\n<h4 id=\"项目开发流程\">项目开发流程</h4><blockquote>\n<p>可行性分析 &gt;&gt;&gt; 可行性分析报告 / 项目开发计划书</p>\n<p>需求分析 &gt;&gt;&gt; 需求规格说明书 </p>\n<p>OOAD（用例图、时序图、活动图）</p>\n<p>界面原型：帮助理解需求、业务层设计时推导事务脚本</p>\n<p>设计 &gt;&gt;&gt; 概要设计说明书/详细设计说明书 </p>\n<p>抽取业务实体（领域对象）：类图、E-R图（概念设计阶段）</p>\n<p>分层架构：确定各层的技术实现方案（具体到使用的框架、数据库服务器、应用服务器等）。业务层设计：事务脚本模式（事务：用户发送一次请求就是一个事务；脚本：一个方法或一个函数；事务脚本：把一次请求封装为一个方法或一个函数；事务脚本模式：一个事务开始于脚本的打开，终止于脚本的关闭）。业务层涉及的对象有三种类型：事务脚本类（封装了业务的流程）、数据访问对象（DAO，封装了持久化操作）、数据传输对象（DTO，封装了失血/贫血领域对象），三者之间的关系是事务脚本类组合（聚合）数据访问对象，这二者都依赖了数据传输对象</p>\n<p>正向工程（UML类图生成Java代码）和逆向工程（Java代码生成UML类图）</p>\n<p>数据库物理设计（ER图转换成表间关系图、建库和建表、使用工具插入测试数据）</p>\n<p>编码</p>\n</blockquote>\n<h4 id=\"测试_&gt;&gt;&gt;_测试报告_/_缺陷报告\">测试 &gt;&gt;&gt; 测试报告 / 缺陷报告</h4><blockquote>\n<p>单元测试：对软件中的最小可测试单元进行检查和验证，在Java中是对类中的方法进行测试，可以使用JUnit工具来实施。</p>\n<p>集成测试：集成测试也叫组装测试或联合测试。在单元测试的基础上，将所有模块按照设计要求组装成为子系统进行测试。</p>\n<p>系统测试：将已经确认的软件、硬件、外设、网络等元素结合在一起，进行信息系统的各种组装测试和确认测试，系统测试是针对整个产品系统进行的测试，目的是验证系统是否满足了需求规格的定义，找出与需求规格不符或与之矛盾的地方，从而提出更加完善的方案。</p>\n<p>验收测试：在软件产品完成了单元测试、集成测试和系统测试之后，产品发布之前所进行的软件测试活动。它是技术测试的最后一个阶段，也称为交付测试。验收测试的目的是确保软件准备就绪，并且可以让最终用户将其用于执行软件的既定功能和任务。</p>\n</blockquote>\n<h4 id=\"交付和维护_&gt;&gt;&gt;_用户手册_/_操作手册\">交付和维护 &gt;&gt;&gt; 用户手册 / 操作手册</h4><h4 id=\"项目管理\">项目管理</h4><blockquote>\n<p>版本控制：CVS/SVN/Git</p>\n<p>自动构建：Ant/Maven/Ivy/Gradle</p>\n<p>持续集成：Hudson/Jenkins</p>\n<p>系统架构</p>\n<p>负载均衡服务器：F5、A10</p>\n</blockquote>\n<h4 id=\"应用服务器：\">应用服务器：</h4><blockquote>\n<p>HTTP服务器：Apache、NginX（HTTP、反向代理、邮件代理服务器）</p>\n<p>Servlet容器：Tomcat、Resin</p>\n<p>EJB容器：WildFly（JBoss Application Server）、GlassFish、Weblogic、Websphere</p>\n<p>数据库服务器：MySQL、Oracle</p>\n</blockquote>\n<h4 id=\"第三方工具（插件）应用\">第三方工具（插件）应用</h4><blockquote>\n<p>图表工具：基于jQuery的图表插件（如jQchart、Flot、Charted等）、Chart.js、Highcharts等。</p>\n<p>报表工具：Pentaho Reporting、iReport、DynamicReports等。</p>\n<p>文档处理：POI、iText等。</p>\n<p>工作流引擎：jBPM、OpenWFE、Snaker、SWAMP等。</p>\n<p>作业调度：Quartz、JobServer、Oddjob等。</p>\n<p>缓存服务：EhCache、memcached、SwarmCache等。</p>\n<p>消息队列：Open-MQ、ZeroMQ等。</p>\n<p>安全框架：Shiro、PicketBox等。</p>\n<p>搜索引擎：IndexTank、Lucene、ElasticSearch等。</p>\n<p>Ajax框架：jQuery、ExtJS、DWR等。</p>\n<p>UI插件：EasyUI、MiniUI等。</p>\n<p>富文本框：UEditor、CKEditor等。</p>\n</blockquote>\n<h4 id=\"面试提问\">面试提问</h4><blockquote>\n<p>项目是为哪个公司开发的？项目的投入是多少？</p>\n<p>有多少人参与了项目开发？整个团队中，测试人员、开发人员、项目经理比例是多少？</p>\n<p>项目开发了多长时间？项目总的代码量有多少？你的代码量有多少？</p>\n<p>项目采用了怎样的开发模型或开发流程？项目的架构是怎样的？项目的技术选型是怎样的？</p>\n<p>你在项目中承担了怎样的职责？是否经常开会或加班？项目完成后有哪些收获或是经验教训？</p>\n<p>项目中最困难的部分是什么？如何解决团队开发时遇到的各种冲突？</p>\n<p>说明：对于没有实际项目经验的，可以在前程无忧、智联招聘、拉勾网等网站上搜索招聘Java程序员的公司，找到他们的官方网站了解他们做的项目，查看项目的详细介绍，然后尝试完成其中一部分功能，最好请教一下高人看看自己的设计和代码是否恰当，这样相当于积累了一定的项目经验。<br>面试题</p>\n<p>  Java常见的面试题已经总结成《Java面试题集》、《Java面试题全集》以及《面试编程题拾遗》等文章陆续发布在我的CSDN博客，各大公司的面试题我会继续整理发布。</p>\n</blockquote>\n<h3 id=\"其他\">其他</h3><h4 id=\"常见错误\">常见错误</h4><blockquote>\n<p>只在计算机上练习<br>不做行为面试题演练<br>不做模拟面试训练<br>试图死记硬背答案<br>不大声说出你的解题思路<br>代码不够严谨<br>不写测试代码<br>轻言放弃</p>\n</blockquote>\n<h4 id=\"面试时可以反问面试官的问题\">面试时可以反问面试官的问题</h4><blockquote>\n<p>我注意到你们使用了X技术，请问你们是如何解决Y问题的？</p>\n<p>为什么你们的产品使用了X技术而不是Y技术？据我所知，X技术虽然有A、B、C等好处，但也存在D和E问题，而Y技术可以解决D和E问题。</p>\n<p>我对您说的X技术不是太熟悉，但我感觉它是一个不错的解决方案，您能多讲讲它的工作原理吗？</p>\n<p>你们团队是如何进行项目规划的？一周会有几次例会？每周的代码量大概是多少？</p>\n<p>就X问题我能想到的解决方案目前就只有Y了，请问您会怎么解决这个问题？</p>\n</blockquote>\n<h4 id=\"S-A-R-法则\">S.A.R.法则</h4><blockquote>\n<p>  S.A.R法则是指先描述问题的场景，然后解释你采取的行动，最后陈述结果。</p>\n</blockquote>\n<h4 id=\"算法题的五种解法\">算法题的五种解法</h4><blockquote>\n<p>举例法：通过举例子发现其中的一般规则。</p>\n<p>例子：圆内接三角形是锐角三角形的概率是多少？这是搜狗的一个面试题，可以在圆上随意画三个点连接成三角形就可以知道答案了。</p>\n<p>模式匹配法</p>\n<p>例子：一个有序数组的元素经过循环移动，元素的顺序变成”3 4 5 6 1 2”。怎样找到数组中最小的那个元素，假设数组中的元素各不相同。这个题目和折半查找看起来是那么相似，因此可以借鉴折半查找的算法，最小元素显然出现在”mid &gt; right”的转折点。</p>\n<p>简化推广法</p>\n<p>说明：简化问题规模和数据类型，然后再发现通用的解法。</p>\n<p>简单构造法</p>\n<p>例子：找出”abcde”的所有可能的排列组合。先考虑只有”a”的情况，再考虑”ab”的情况，以此类推。最终你可能会得到一个递归公式。这种方法往往会演变成递归法。</p>\n<p>数据结构头脑风暴法</p>\n<p>例子：随机生成一些数字，并找出其中位数。这种问题可以在头脑中将你了解的数据结构过一遍，看看哪种是最合适的数据结构。上面的题目可以建立两个堆，一个大根堆和一个小根堆，较小的元素放在大根堆，较大的元素放在小根堆，如果两个堆不平衡，可以从其中一个堆取出元素放入另一个堆即可。最后中位数应该是两个堆的根之一。</p>\n</blockquote>\n<h4 id=\"录用谈判\">录用谈判</h4><blockquote>\n<p>要理直气壮的提出具体的待遇要求</p>\n<p>开出比预期稍高的价码</p>\n<p>不要只盯着薪水（很多公司更愿意就薪水之外的条件做出让步）</p>\n<p>使用最合适的方法（可以尝试在电话或E-mail中谈判待遇）</p>\n</blockquote>\n<h4 id=\"自我评价\">自我评价</h4><blockquote>\n<p>学习能力（搞IT行业的人需要不断的了解新的技术、工具和方法）</p>\n<p>团队意识（相比个人英雄主义，IT行业更倡导团队合作）</p>\n<p>抗压能力（很多IT企业的工作强度相对来说还是比较大的）</p>\n</blockquote>\n","excerpt":"","more":"<blockquote>\n<p>来自 CDSN博客 java那些事</p>\n</blockquote>\n<p>  想要成为合格的Java程序员或工程师到底需要具备哪些专业技能，面试者在面试之前到底需要准备哪些东西呢？本文陈列的这些内容既可以作为个人简历中的内容，也可以作为面试的时候跟面试官聊的东西，你可以把这些内容写到你的简历中，当然更需要的是你在面试的时候向面试官展示这些专业技能。相信此文对正在寻觅Java程序员（Java工程师）职位的freshman以及希望成为中高级Java开发者的junior都会有所帮助。</p>\n<h4 id=\"专业技能\">专业技能</h4><blockquote>\n<p>熟练的使用Java语言进行面向对象程序设计，有良好的编程习惯，熟悉常用的Java API，包括集合框架、多线程（并发编程）、I/O（NIO）、Socket、JDBC、XML、反射等。</p>\n<p>熟悉基于JSP和Servlet的Java Web开发，对Servlet和JSP的工作原理和生命周期有深入了解，熟练的使用JSTL和EL编写无脚本动态页面，有使用监听器、过滤器等Web组件以及MVC架构模式进行Java Web项目开发的经验。</p>\n<p>对Spring的IoC容器和AOP原理有深入了解，熟练的运用Spring框架管理各种Web组件及其依赖关系，熟练的使用Spring进行事务、日志、安全性等的管理，有使用Spring MVC作为表示层技术以及使用Spring提供的持久化支持进行Web项目开发的经验，熟悉Spring对其他框架的整合。</p>\n<p>熟练的使用Hibernate、MyBatis等ORM框架，熟悉Hibernate和MyBatis的核心API，对Hibernate的关联映射、继承映射、组件映射、缓存机制、事务管理以及性能调优等有深入的理解。</p>\n<p>熟练的使用HTML、CSS和JavaScript进行Web前端开发，熟悉jQuery和Bootstrap，对Ajax技术在Web项目中的应用有深入理解，有使用前端MVC框架（AngularJS）和JavaScript模板引擎（HandleBars）进行项目开发的经验。</p>\n<p>熟悉常用的关系型数据库产品（MySQL、Oracle），熟练的使用SQL和PL/SQL进行数据库编程。</p>\n<p>熟悉面向对象的设计原则，对GoF设计模式和企业应用架构模式有深入的了解和实际开发的相关经验，熟练的使用UML进行面向对象的分析和设计，有TDD（测试驱动开发）和DDD（领域驱动设计）的经验。</p>\n<p>熟悉Apache、NginX、Tomcat、WildFly、Weblogic等Web服务器和应用服务器的使用，熟悉多种服务器整合、集群和负载均衡的配置。</p>\n<p>熟练的使用产品原型工具Axure，熟练的使用设计建模工具PowerDesigner和Enterprise Architect，熟练的使用Java开发环境Eclipse和IntelliJ，熟练的使用前端开发环境WebStorm，熟练的使用软件版本控制工具SVN和Git，熟练的使用项目构建和管理工具Maven和Gradle。</p>\n<p><code>说明：</code>上面罗列的这些东西并不是每一项你都要烂熟于心，根据企业招聘的具体要求可以做相应的有针对性的准备。我个人觉得前6项应该是最低要求，是作为一个Java开发者必须要具备的专业技能。<br>项目经验</p>\n</blockquote>\n<h4 id=\"项目介绍\">项目介绍</h4><blockquote>\n<p>  本系统是X委托Y开发的用于Z的系统，系统包括A、B、C、D等模块。系统使用了Java企业级开发的开源框架E以及前端技术F。表示层运用了G架构，使用H作为视图I作为控制器并实现了REST风格的请求；业务逻辑层运用了J模式，并通过K实现事务、日志和安全性等功能，通过L实现缓存服务；持久层使用了M封装CRUD操作，底层使用N实现数据存取。整个项目采用了P开发模型。</p>\n<p><code>说明：</code>上面的描述中，E通常指Spring（Java企业级开发的一站式选择）；F最有可能是jQuery库及其插件或者是Bootstrap框架，当然如果要构建单页应用（SPA）最佳的方案是前端MVC框架（如AngularJS）和JavaScript模板引擎（如HandleBars）；G显然是MVC（模型-视图-控制），最有可能的实现框架是Spring MVC，除此之外还有Struts 2、JSF以及Apache为JSF提供的MyFaces实现，可以使用JSP作为MVC中的V，也可使用模板引擎（如Freemarker和Velocity）来生成视图，还可以是各种文档或报表（如Excel和PDF等），而Servlet和自定义的控制器是MVC中的C，当然Spring MVC中提供了作为前端控制器的DispatcherServlet；J通常是事务脚本，K应该是AOP（面向切面编程）技术，L目前广泛使用的有memcached和Redis；M的选择方案很多，最有可能的是Hibernate和MyBatis，也可以两种技术同时运用，但通常是将增删改交给Hibernate来处理，而复杂的查询则由MyBatis完成，此外TopLink、jOOQ也是优秀的持久层解决方案；底层的数据存取传统上是使用关系型数据库，可以是MySQL、Oracle、SQLServer、DB2等，随着大数据时代的来临，也可以采用NoSQL（如MongoDB、MemBase、BigTable等）和其他大数据存取方案（如GFS、HDFS等）；项目的开发模型P可以是瀑布模型、快速原型模型、增量模型、螺旋模型、喷泉模型、RAD模型等。</p>\n</blockquote>\n<h4 id=\"项目开发流程\">项目开发流程</h4><blockquote>\n<p>可行性分析 &gt;&gt;&gt; 可行性分析报告 / 项目开发计划书</p>\n<p>需求分析 &gt;&gt;&gt; 需求规格说明书 </p>\n<p>OOAD（用例图、时序图、活动图）</p>\n<p>界面原型：帮助理解需求、业务层设计时推导事务脚本</p>\n<p>设计 &gt;&gt;&gt; 概要设计说明书/详细设计说明书 </p>\n<p>抽取业务实体（领域对象）：类图、E-R图（概念设计阶段）</p>\n<p>分层架构：确定各层的技术实现方案（具体到使用的框架、数据库服务器、应用服务器等）。业务层设计：事务脚本模式（事务：用户发送一次请求就是一个事务；脚本：一个方法或一个函数；事务脚本：把一次请求封装为一个方法或一个函数；事务脚本模式：一个事务开始于脚本的打开，终止于脚本的关闭）。业务层涉及的对象有三种类型：事务脚本类（封装了业务的流程）、数据访问对象（DAO，封装了持久化操作）、数据传输对象（DTO，封装了失血/贫血领域对象），三者之间的关系是事务脚本类组合（聚合）数据访问对象，这二者都依赖了数据传输对象</p>\n<p>正向工程（UML类图生成Java代码）和逆向工程（Java代码生成UML类图）</p>\n<p>数据库物理设计（ER图转换成表间关系图、建库和建表、使用工具插入测试数据）</p>\n<p>编码</p>\n</blockquote>\n<h4 id=\"测试_&gt;&gt;&gt;_测试报告_/_缺陷报告\">测试 &gt;&gt;&gt; 测试报告 / 缺陷报告</h4><blockquote>\n<p>单元测试：对软件中的最小可测试单元进行检查和验证，在Java中是对类中的方法进行测试，可以使用JUnit工具来实施。</p>\n<p>集成测试：集成测试也叫组装测试或联合测试。在单元测试的基础上，将所有模块按照设计要求组装成为子系统进行测试。</p>\n<p>系统测试：将已经确认的软件、硬件、外设、网络等元素结合在一起，进行信息系统的各种组装测试和确认测试，系统测试是针对整个产品系统进行的测试，目的是验证系统是否满足了需求规格的定义，找出与需求规格不符或与之矛盾的地方，从而提出更加完善的方案。</p>\n<p>验收测试：在软件产品完成了单元测试、集成测试和系统测试之后，产品发布之前所进行的软件测试活动。它是技术测试的最后一个阶段，也称为交付测试。验收测试的目的是确保软件准备就绪，并且可以让最终用户将其用于执行软件的既定功能和任务。</p>\n</blockquote>\n<h4 id=\"交付和维护_&gt;&gt;&gt;_用户手册_/_操作手册\">交付和维护 &gt;&gt;&gt; 用户手册 / 操作手册</h4><h4 id=\"项目管理\">项目管理</h4><blockquote>\n<p>版本控制：CVS/SVN/Git</p>\n<p>自动构建：Ant/Maven/Ivy/Gradle</p>\n<p>持续集成：Hudson/Jenkins</p>\n<p>系统架构</p>\n<p>负载均衡服务器：F5、A10</p>\n</blockquote>\n<h4 id=\"应用服务器：\">应用服务器：</h4><blockquote>\n<p>HTTP服务器：Apache、NginX（HTTP、反向代理、邮件代理服务器）</p>\n<p>Servlet容器：Tomcat、Resin</p>\n<p>EJB容器：WildFly（JBoss Application Server）、GlassFish、Weblogic、Websphere</p>\n<p>数据库服务器：MySQL、Oracle</p>\n</blockquote>\n<h4 id=\"第三方工具（插件）应用\">第三方工具（插件）应用</h4><blockquote>\n<p>图表工具：基于jQuery的图表插件（如jQchart、Flot、Charted等）、Chart.js、Highcharts等。</p>\n<p>报表工具：Pentaho Reporting、iReport、DynamicReports等。</p>\n<p>文档处理：POI、iText等。</p>\n<p>工作流引擎：jBPM、OpenWFE、Snaker、SWAMP等。</p>\n<p>作业调度：Quartz、JobServer、Oddjob等。</p>\n<p>缓存服务：EhCache、memcached、SwarmCache等。</p>\n<p>消息队列：Open-MQ、ZeroMQ等。</p>\n<p>安全框架：Shiro、PicketBox等。</p>\n<p>搜索引擎：IndexTank、Lucene、ElasticSearch等。</p>\n<p>Ajax框架：jQuery、ExtJS、DWR等。</p>\n<p>UI插件：EasyUI、MiniUI等。</p>\n<p>富文本框：UEditor、CKEditor等。</p>\n</blockquote>\n<h4 id=\"面试提问\">面试提问</h4><blockquote>\n<p>项目是为哪个公司开发的？项目的投入是多少？</p>\n<p>有多少人参与了项目开发？整个团队中，测试人员、开发人员、项目经理比例是多少？</p>\n<p>项目开发了多长时间？项目总的代码量有多少？你的代码量有多少？</p>\n<p>项目采用了怎样的开发模型或开发流程？项目的架构是怎样的？项目的技术选型是怎样的？</p>\n<p>你在项目中承担了怎样的职责？是否经常开会或加班？项目完成后有哪些收获或是经验教训？</p>\n<p>项目中最困难的部分是什么？如何解决团队开发时遇到的各种冲突？</p>\n<p>说明：对于没有实际项目经验的，可以在前程无忧、智联招聘、拉勾网等网站上搜索招聘Java程序员的公司，找到他们的官方网站了解他们做的项目，查看项目的详细介绍，然后尝试完成其中一部分功能，最好请教一下高人看看自己的设计和代码是否恰当，这样相当于积累了一定的项目经验。<br>面试题</p>\n<p>  Java常见的面试题已经总结成《Java面试题集》、《Java面试题全集》以及《面试编程题拾遗》等文章陆续发布在我的CSDN博客，各大公司的面试题我会继续整理发布。</p>\n</blockquote>\n<h3 id=\"其他\">其他</h3><h4 id=\"常见错误\">常见错误</h4><blockquote>\n<p>只在计算机上练习<br>不做行为面试题演练<br>不做模拟面试训练<br>试图死记硬背答案<br>不大声说出你的解题思路<br>代码不够严谨<br>不写测试代码<br>轻言放弃</p>\n</blockquote>\n<h4 id=\"面试时可以反问面试官的问题\">面试时可以反问面试官的问题</h4><blockquote>\n<p>我注意到你们使用了X技术，请问你们是如何解决Y问题的？</p>\n<p>为什么你们的产品使用了X技术而不是Y技术？据我所知，X技术虽然有A、B、C等好处，但也存在D和E问题，而Y技术可以解决D和E问题。</p>\n<p>我对您说的X技术不是太熟悉，但我感觉它是一个不错的解决方案，您能多讲讲它的工作原理吗？</p>\n<p>你们团队是如何进行项目规划的？一周会有几次例会？每周的代码量大概是多少？</p>\n<p>就X问题我能想到的解决方案目前就只有Y了，请问您会怎么解决这个问题？</p>\n</blockquote>\n<h4 id=\"S-A-R-法则\">S.A.R.法则</h4><blockquote>\n<p>  S.A.R法则是指先描述问题的场景，然后解释你采取的行动，最后陈述结果。</p>\n</blockquote>\n<h4 id=\"算法题的五种解法\">算法题的五种解法</h4><blockquote>\n<p>举例法：通过举例子发现其中的一般规则。</p>\n<p>例子：圆内接三角形是锐角三角形的概率是多少？这是搜狗的一个面试题，可以在圆上随意画三个点连接成三角形就可以知道答案了。</p>\n<p>模式匹配法</p>\n<p>例子：一个有序数组的元素经过循环移动，元素的顺序变成”3 4 5 6 1 2”。怎样找到数组中最小的那个元素，假设数组中的元素各不相同。这个题目和折半查找看起来是那么相似，因此可以借鉴折半查找的算法，最小元素显然出现在”mid &gt; right”的转折点。</p>\n<p>简化推广法</p>\n<p>说明：简化问题规模和数据类型，然后再发现通用的解法。</p>\n<p>简单构造法</p>\n<p>例子：找出”abcde”的所有可能的排列组合。先考虑只有”a”的情况，再考虑”ab”的情况，以此类推。最终你可能会得到一个递归公式。这种方法往往会演变成递归法。</p>\n<p>数据结构头脑风暴法</p>\n<p>例子：随机生成一些数字，并找出其中位数。这种问题可以在头脑中将你了解的数据结构过一遍，看看哪种是最合适的数据结构。上面的题目可以建立两个堆，一个大根堆和一个小根堆，较小的元素放在大根堆，较大的元素放在小根堆，如果两个堆不平衡，可以从其中一个堆取出元素放入另一个堆即可。最后中位数应该是两个堆的根之一。</p>\n</blockquote>\n<h4 id=\"录用谈判\">录用谈判</h4><blockquote>\n<p>要理直气壮的提出具体的待遇要求</p>\n<p>开出比预期稍高的价码</p>\n<p>不要只盯着薪水（很多公司更愿意就薪水之外的条件做出让步）</p>\n<p>使用最合适的方法（可以尝试在电话或E-mail中谈判待遇）</p>\n</blockquote>\n<h4 id=\"自我评价\">自我评价</h4><blockquote>\n<p>学习能力（搞IT行业的人需要不断的了解新的技术、工具和方法）</p>\n<p>团队意识（相比个人英雄主义，IT行业更倡导团队合作）</p>\n<p>抗压能力（很多IT企业的工作强度相对来说还是比较大的）</p>\n</blockquote>\n"},{"title":"Properties配置文件读取相关java知识","date":"2016-10-14T05:58:44.000Z","_content":"## 一.`getResourceAsStream`方法使用\n  **这里的`getResourceAsStream`主要是针对`Class`与`ClassLoader`而言的 **\n1. `Class.getResourceAsStream(String path) `： path 不以’/'开头时默认是从此类所在的包下取资源，以’/'开头则是从ClassPath根下获取。其只是通过path构造一个绝对路径，最终还是由ClassLoader获取资源。 \n2. `Class.getClassLoader.getResourceAsStream(String path) `：默认则是从ClassPath根下获取，path不能以’/'开头，最终是由ClassLoader获取资源。 \n3. `ServletContext. getResourceAsStream(String path)`：默认从WebAPP根目录下取资源，Tomcat下path是否以’/'开头无所谓，当然这和具体的容器实现有关。 \n\n> **获取`Class`方法**：\n> 1.`XX.class    `   \n>  2.`this.getClass()`\n>**获取`ClassLoader`方法**：\n>1.`Thread.currentThread().getContextClassLoader() `\n>2.`Class.getClassLoader`\n\n\n**`getResourceAsStream` 用法大致有以下几种： **\n\n第一： 要加载的文件和.class文件在同一目录下，例如：com.x.y 下有类me.class ,同时有资源文件myfile.xml \n那么，应该有如下代码： \nme.class.getResourceAsStream(\"myfile.xml\");\n第二：在me.class目录的子目录下，例如：com.x.y 下有类me.class ,同时在 com.x.y.file 目录下有资源文件myfile.xml \n那么，应该有如下代码： \nme.class.getResourceAsStream(\"file/myfile.xml\"); \n第三：不在me.class目录下，也不在子目录下，例如：com.x.y 下有类me.class ,同时在 com.x.file 目录下有资源文件myfile.xml \n那么，应该有如下代码： \nme.class.getResourceAsStream(\"/com/x/file/myfile.xml\"); \n总结一下，可能只是两种写法 \n第一：前面有 “   / ” \n“ / ”代表了工程的根目录，例如工程名叫做myproject，“ / ”代表了myproject \nme.class.getResourceAsStream(\"/com/x/file/myfile.xml\"); \n第二：前面没有 “   / ” \n代表当前类的目录 \nme.class.getResourceAsStream(\"myfile.xml\"); \nme.class.getResourceAsStream(\"file/myfile.xml\"); \n缺点： \ngetResourceAsStream读取的文件路径只局限与工程的源文件夹中，包括在工程src根目录下，以及类包里面任何位置，但是如果配置文件路径是在除了源文件夹之外的其他文件夹中时，该方法是用不了的。\n## 二.`Properties`配置文件的读取\n### 1.使用`Apache Commons Configuration`读取配置信息\n第三方标准jar包，容易使用，拥有众多功能，不用重复造轮子,但是为了读取一个配置文件就要引入一个jar包时就要考虑一下了。\n### 2.`Spring ResourceLoader `\nSpring 能支持入参路径的很多方式，包括已 \" /\"、\"classpath\" 开头。 \n   如果你想在项目中使用 Spring 提供的默认配置文件载入实现，可以这样书写你的代码。\n```java\nResourceLoader resourceLoader = new DefaultResourceLoader();\nResource resource = resourceLoader.getResource(\"log4j.properties\");\nProperties props = new Properties();\n props.load(resource.getInputStream());\n```\n **缺点**：依赖于Spring框架，难以通用， 如果用Spring框架应该用Spring统一管理配置文件，而不是当作一个工具类使用。\n\n### 3.通过 `java.util.ResourceBundle` 对象 操作　\n  通过该方式仅能读取配置文件而已，不能进行写操作。示例：\n```java\n// ResourceBundle rb = ResourceBundle.getBundle(\"配置文件相对工程根目录的相对路径（不含扩展名）\");\nResourceBundle rb = ResourceBundle.getBundle(\"config\");\nString name = rb.getString(\"name\");\n```\njava自带的类，使用非常简单，代码量还少。但是功能略微简单。\n\n### 4.通过`Properties`对象手动写个工具类\n通过Properties对象自定义封装，更能满足自己需要的要求。\n```java\n /**\n     * 根据Properties配置文件名称获取配置文件对象\n     *\n     * @param propsFileName Properties配置文件名称（从ClassPath根下获取）\n     * @return Properties对象\n     */\n    private Properties getProperties(String propsFileName) {\n        if (propsFileName == null || propsFileName.equals(\"\")) throw new IllegalArgumentException();\n        Properties properties = new Properties();\n        InputStream inputStream = null;\n        try {\n            try {\n                if (propsFileName.lastIndexOf(PROPERTY_FILE_SUFFIX) == -1) {//加入文件名后缀\n                    propsFileName += PROPERTY_FILE_SUFFIX;\n                }\n                //写法1：\n//                inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream(propsFileName);\n                //写法2：\n//                URL url = Thread.currentThread().getContextClassLoader().getResource(propsFileName);\n//                inputStream = url.openStream();\n                //写法3：\n//                inputStream = PropertiesLoader.class.getClassLoader().getResourceAsStream(propsFileName);\n                //写法4：\n//                URL url = PropertyUtil.class.getClassLoader().getResource(propsFileName);\n//                inputStream = url.openStream();\n                //写法5：\n                inputStream = PropertiesLoader.class.getResourceAsStream(\"/\" + propsFileName);\n                if (null != inputStream) properties.load(inputStream);\n            } finally {\n                if (null != inputStream) {\n                    inputStream.close();\n                }\n            }\n        } catch (IOException e) {\n//            LOGGER.error(\"加载属性文件出错!\", e);\n            e.printStackTrace();\n            throw new RuntimeException(e.getMessage(), e);\n        }\n        return properties;\n    }\n```\n## 三.jar包读取外部和内部配置文件\n### 1.获取文件的方式\n把项目打成jar包发布后jar中的文件就不能通过File file=new File(\"文件路径\")的方式来读取文件了。\n错误方式：\n```java\nURL url = DBHelper.class.getClassLoader().getResource(configName);\nURL url = DBHelper.class.getResource(\"/db.properties\");\n```\n 从依赖的Jar包中读取文件, Jar包内的文件是无法用File读取的，只能用Stream的方式读取。 \n正确方式：\n```java\nInputStream inputStraean = DBHelper.class.getClassLoader().getResourceAsStream(\"db.properties\")\n```\n结论：**不能传文件路径，只能传输入流**\n### 2.测试获取文件的各种情况\n待测试jar包目录：\n![Alt text](/images/java-properties/1.png)\n测试目录引用进来的maven目录\n![Alt text](/images/java-properties/2.png)\n测试项目目录\n![Alt text](/images/java-properties/3.png)\n待测试jar包运行结果：\n![Alt text](/images/java-properties/4.png)\n测试项目运行结果\n![Alt text](/images/java-properties/5.png)\n\n根据测试得到的结果：\n1. 项目与项目引入jar包的文件都是在classpath下面的，也就是可以通过getResourceAsStream获取，jar包与项目的获取方法没有分别，也就是说，获取jar内部与外部文件的方式是一样的。\n2. 如果项目与jar包在相对于classpath下有同样的文件，则以项目的文件覆盖jar包里面的文件。\n3. jar包里面没有d.properties，所有jar包里面测试运行没有找到，但是到了项目里面，在项目下创建d.properties,可是可以发现该文件的。\n4. 项目可以获取项目的文件\n项目可以获取jar包里面的文件\njar包可以获取项目的文件\njar包可以获取jar包里面的文件\n项目与jar包同时存在该文件，则以项目的文件优先\n\n因此，如果开发一个库或jar包，可以保留一份默认配置在jar包里面，也可以把配置文件放到客户端配置，检测时做处理，如果客户端配置该文件，则以客户端的配置为先，没有找到就用默认配置文件，或者别的处理（抛异常等。。。），slf4j配置我猜也是这样子吧=_=。\n\n## 四.Properties配置文件读取工具类\n```java\npackage xyz.dongxiaoxia.commons.utils;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.*;\nimport java.util.logging.Logger;\n\n/**\n * Properties文件载入工具，可载入多个Properties文件，相同属性在最后载入的文件中的值将会覆盖之前的值，但以System的Property优先。\n *\n * @author dongxiaoxia\n * @create 2016-07-01 23:03\n */\npublic class PropertiesLoader {\n\n    private static Logger logger = Logger.getLogger(PropertiesLoader.class.getName());\n\n    /**\n     * .properties属性文件名后缀\n     */\n    public static final String PROPERTY_FILE_SUFFIX = \".properties\";\n\n    private final Properties properties;\n\n    public PropertiesLoader(String... propsFileNames) {\n        properties = loadProperties(propsFileNames);\n    }\n\n    public PropertiesLoader(String propsFileName) {\n        properties = getProperties(propsFileName);\n    }\n\n    public PropertiesLoader(InputStream inputStream) {\n        properties = loadProperties(inputStream);\n    }\n\n    public Properties getProperties() {\n        return properties;\n    }\n\n    /**\n     * 取出Property，但与System的Property优先，取不到返回空字符串。\n     *\n     * @param key\n     * @return\n     */\n    private String getValue(String key) {\n        String systemProperty = System.getProperty(key);\n        if (systemProperty != null) {\n            return systemProperty;\n        }\n        if (properties.containsKey(key)) {\n            return properties.getProperty(key);\n        }\n        return \"\";\n    }\n\n    /**\n     * 取出String类型的Property，但与System的Property优先，如果都为NUll则抛出异常。\n     *\n     * @param key\n     * @return\n     */\n    public String getProperty(String key) {\n        String value = getValue(key);\n        if (value == null) {\n            throw new NoSuchElementException();\n        }\n        return value;\n    }\n\n    /**\n     * 取出String类型的Property，但以System的Property优先，如果都为Null则返回Default值。\n     *\n     * @param key\n     * @param defaultValue\n     * @return\n     */\n    public String getProperty(String key, String defaultValue) {\n        String value = getValue(key);\n        return value != null ? value : defaultValue;\n    }\n\n    /**\n     * 取出Integer类型的Property。但以System的Property优先，如果都为null或内容错误则抛异常。\n     *\n     * @param key\n     * @return\n     */\n    public Integer getInteger(String key) {\n        String value = getValue(key);\n        if (value == null) {\n            throw new NoSuchElementException();\n        }\n        return Integer.valueOf(value);\n    }\n\n    /**\n     * 取出Integer类型的Property，但以System的Property优先。如果都为null则返回默认值，如果内容错误则抛异常。\n     *\n     * @param key\n     * @param defaultValue\n     * @return\n     */\n    public Integer getInteger(String key, Integer defaultValue) {\n        String value = getValue(key);\n        return value != null ? Integer.valueOf(value) : defaultValue;\n    }\n\n    /**\n     * 取出Double类型的Property，但以System的Property优先，如果都为null或内容错误则抛异常。\n     *\n     * @param key\n     * @return\n     */\n    public Double getDouble(String key) {\n        String value = getValue(key);\n        if (value == null) {\n            throw new NoSuchElementException();\n        }\n        return Double.valueOf(value);\n    }\n\n    /**\n     * 取出Double类型的Property，但以System的Property优先，如果都为null则返回默认值，如果内容错误则抛异常。\n     *\n     * @param key\n     * @param defaultValue\n     * @return\n     */\n    public Double getDouble(String key, Double defaultValue) {\n        String value = getValue(key);\n        return value != null ? Double.valueOf(value) : defaultValue;\n    }\n\n    /**\n     * 取出Boolean类型的Property，但以System的Property优先，如果都为null则抛出异常，如果内容不是true/false则返回false。\n     *\n     * @param key\n     * @return\n     */\n    public Boolean getBoolean(String key) {\n        String value = getValue(key);\n        if (value == null) {\n            throw new NoSuchElementException();\n        }\n        return Boolean.valueOf(value);\n    }\n\n    /**\n     * 取出Boolean类型的Property，但以System的Property优先，如果都为null则返回默认值，如果内容不为true/false则返回false。\n     *\n     * @param key\n     * @param defaultValue\n     * @return\n     */\n    public Boolean getBoolean(String key, boolean defaultValue) {\n        String value = getValue(key);\n        return value != null ? Boolean.valueOf(value) : defaultValue;\n    }\n\n    public Set<Object> getAllKey() {\n        return properties.keySet();\n    }\n\n    public Collection<Object> getAllValues() {\n        return properties.values();\n    }\n\n    public Map<String, Object> getAllKeyValue() {\n        Map<String, Object> mapAll = new HashMap<>();\n        Set<Object> keys = getAllKey();\n        for (Object key1 : keys) {\n            String key = key1.toString();\n            mapAll.put(key, properties.get(key));\n        }\n        return mapAll;\n    }\n\n    /**\n     * 根据Properties配置文件名称获取配置文件对象\n     *\n     * @param propsFileName Properties配置文件名称（从ClassPath根下获取） 可以不带扩展名\n     *                      eg.根目录下有个common.properties,那么可以传“common”或者“common.properties”\n     *                      根目录下有个config文件夹，里面存在common.properties,那么可以传“config/common”或者“config/common.properties”\n     * @return Properties对象\n     */\n    private Properties getProperties(String propsFileName) {\n        if (propsFileName == null || propsFileName.equals(\"\")) throw new IllegalArgumentException();\n        Properties properties = new Properties();\n        InputStream inputStream = null;\n        try {\n            try {\n                if (propsFileName.lastIndexOf(PROPERTY_FILE_SUFFIX) == -1) {//加入文件名后缀\n                    propsFileName += PROPERTY_FILE_SUFFIX;\n                }\n                //写法1：\n//                inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream(propsFileName);\n                //写法2：\n//                URL url = Thread.currentThread().getContextClassLoader().getResource(propsFileName);\n//                inputStream = url.openStream();\n                //写法3：\n                inputStream = PropertiesLoader.class.getClassLoader().getResourceAsStream(propsFileName);\n                //写法4：\n//                URL url = PropertyUtil.class.getClassLoader().getResource(propsFileName);\n//                inputStream = url.openStream();\n                //写法5：\n//                inputStream = PropertiesLoader.class.getResourceAsStream(\"/\" + propsFileName);\n                if (null != inputStream) properties.load(inputStream);\n            } finally {\n                if (null != inputStream) {\n                    inputStream.close();\n                }\n            }\n        } catch (IOException e) {\n//            LOGGER.error(\"加载属性文件出错!\", e);\n            e.printStackTrace();\n            throw new RuntimeException(e.getMessage(), e);\n        }\n        return properties;\n    }\n\n    /**\n     * 载入多个文件\n     *\n     * @param propsFileNames\n     * @return\n     */\n    private Properties loadProperties(String... propsFileNames) {\n        Properties pros = new Properties();\n        for (String propsFileName : propsFileNames) {\n            InputStream inputStream = null;\n            try {\n                inputStream = PropertiesLoader.class.getClassLoader().getResourceAsStream(propsFileName);\n                pros.load(inputStream);\n            } catch (Exception e) {\n                logger.info(\"Could not load properties from path:\" + propsFileName + \",\" + e.getMessage());\n            } finally {\n                try {\n                    if (inputStream != null) {\n                        inputStream.close();\n                    }\n                } catch (IOException e) {\n                    logger.info(e.getMessage());\n                }\n            }\n        }\n        return pros;\n    }\n\n    /**\n     * 根据输入流载入Properties对象\n     *\n     * @param inputStream\n     * @return\n     */\n    private Properties loadProperties(InputStream inputStream) {\n        Properties pros = new Properties();\n//        pros.load(inputStream);\n        try (InputStreamReader inputStreamReader = new InputStreamReader(inputStream, \"UTF-8\")) {\n            pros.load(inputStreamReader);\n        } catch (Exception e) {\n            logger.info(e.getMessage());\n        }\n        return pros;\n    }\n}\n\n\n```\n\n更多请查看GItHub [PropertiesLoader](https://github.com/dongxiaoxia/commons/blob/master/utils/src/main/java/xyz/dongxiaoxia/commons/utils/PropertiesLoader.java)类\n\n","source":"_posts/Properties配置文件读取相关java知识.md","raw":"title: Properties配置文件读取相关java知识\ndate: 2016-10-14 13:58:44\npermalink: java-properties\ntags:\n- java\ncategories:\n- java\n\n---\n## 一.`getResourceAsStream`方法使用\n  **这里的`getResourceAsStream`主要是针对`Class`与`ClassLoader`而言的 **\n1. `Class.getResourceAsStream(String path) `： path 不以’/'开头时默认是从此类所在的包下取资源，以’/'开头则是从ClassPath根下获取。其只是通过path构造一个绝对路径，最终还是由ClassLoader获取资源。 \n2. `Class.getClassLoader.getResourceAsStream(String path) `：默认则是从ClassPath根下获取，path不能以’/'开头，最终是由ClassLoader获取资源。 \n3. `ServletContext. getResourceAsStream(String path)`：默认从WebAPP根目录下取资源，Tomcat下path是否以’/'开头无所谓，当然这和具体的容器实现有关。 \n\n> **获取`Class`方法**：\n> 1.`XX.class    `   \n>  2.`this.getClass()`\n>**获取`ClassLoader`方法**：\n>1.`Thread.currentThread().getContextClassLoader() `\n>2.`Class.getClassLoader`\n\n\n**`getResourceAsStream` 用法大致有以下几种： **\n\n第一： 要加载的文件和.class文件在同一目录下，例如：com.x.y 下有类me.class ,同时有资源文件myfile.xml \n那么，应该有如下代码： \nme.class.getResourceAsStream(\"myfile.xml\");\n第二：在me.class目录的子目录下，例如：com.x.y 下有类me.class ,同时在 com.x.y.file 目录下有资源文件myfile.xml \n那么，应该有如下代码： \nme.class.getResourceAsStream(\"file/myfile.xml\"); \n第三：不在me.class目录下，也不在子目录下，例如：com.x.y 下有类me.class ,同时在 com.x.file 目录下有资源文件myfile.xml \n那么，应该有如下代码： \nme.class.getResourceAsStream(\"/com/x/file/myfile.xml\"); \n总结一下，可能只是两种写法 \n第一：前面有 “   / ” \n“ / ”代表了工程的根目录，例如工程名叫做myproject，“ / ”代表了myproject \nme.class.getResourceAsStream(\"/com/x/file/myfile.xml\"); \n第二：前面没有 “   / ” \n代表当前类的目录 \nme.class.getResourceAsStream(\"myfile.xml\"); \nme.class.getResourceAsStream(\"file/myfile.xml\"); \n缺点： \ngetResourceAsStream读取的文件路径只局限与工程的源文件夹中，包括在工程src根目录下，以及类包里面任何位置，但是如果配置文件路径是在除了源文件夹之外的其他文件夹中时，该方法是用不了的。\n## 二.`Properties`配置文件的读取\n### 1.使用`Apache Commons Configuration`读取配置信息\n第三方标准jar包，容易使用，拥有众多功能，不用重复造轮子,但是为了读取一个配置文件就要引入一个jar包时就要考虑一下了。\n### 2.`Spring ResourceLoader `\nSpring 能支持入参路径的很多方式，包括已 \" /\"、\"classpath\" 开头。 \n   如果你想在项目中使用 Spring 提供的默认配置文件载入实现，可以这样书写你的代码。\n```java\nResourceLoader resourceLoader = new DefaultResourceLoader();\nResource resource = resourceLoader.getResource(\"log4j.properties\");\nProperties props = new Properties();\n props.load(resource.getInputStream());\n```\n **缺点**：依赖于Spring框架，难以通用， 如果用Spring框架应该用Spring统一管理配置文件，而不是当作一个工具类使用。\n\n### 3.通过 `java.util.ResourceBundle` 对象 操作　\n  通过该方式仅能读取配置文件而已，不能进行写操作。示例：\n```java\n// ResourceBundle rb = ResourceBundle.getBundle(\"配置文件相对工程根目录的相对路径（不含扩展名）\");\nResourceBundle rb = ResourceBundle.getBundle(\"config\");\nString name = rb.getString(\"name\");\n```\njava自带的类，使用非常简单，代码量还少。但是功能略微简单。\n\n### 4.通过`Properties`对象手动写个工具类\n通过Properties对象自定义封装，更能满足自己需要的要求。\n```java\n /**\n     * 根据Properties配置文件名称获取配置文件对象\n     *\n     * @param propsFileName Properties配置文件名称（从ClassPath根下获取）\n     * @return Properties对象\n     */\n    private Properties getProperties(String propsFileName) {\n        if (propsFileName == null || propsFileName.equals(\"\")) throw new IllegalArgumentException();\n        Properties properties = new Properties();\n        InputStream inputStream = null;\n        try {\n            try {\n                if (propsFileName.lastIndexOf(PROPERTY_FILE_SUFFIX) == -1) {//加入文件名后缀\n                    propsFileName += PROPERTY_FILE_SUFFIX;\n                }\n                //写法1：\n//                inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream(propsFileName);\n                //写法2：\n//                URL url = Thread.currentThread().getContextClassLoader().getResource(propsFileName);\n//                inputStream = url.openStream();\n                //写法3：\n//                inputStream = PropertiesLoader.class.getClassLoader().getResourceAsStream(propsFileName);\n                //写法4：\n//                URL url = PropertyUtil.class.getClassLoader().getResource(propsFileName);\n//                inputStream = url.openStream();\n                //写法5：\n                inputStream = PropertiesLoader.class.getResourceAsStream(\"/\" + propsFileName);\n                if (null != inputStream) properties.load(inputStream);\n            } finally {\n                if (null != inputStream) {\n                    inputStream.close();\n                }\n            }\n        } catch (IOException e) {\n//            LOGGER.error(\"加载属性文件出错!\", e);\n            e.printStackTrace();\n            throw new RuntimeException(e.getMessage(), e);\n        }\n        return properties;\n    }\n```\n## 三.jar包读取外部和内部配置文件\n### 1.获取文件的方式\n把项目打成jar包发布后jar中的文件就不能通过File file=new File(\"文件路径\")的方式来读取文件了。\n错误方式：\n```java\nURL url = DBHelper.class.getClassLoader().getResource(configName);\nURL url = DBHelper.class.getResource(\"/db.properties\");\n```\n 从依赖的Jar包中读取文件, Jar包内的文件是无法用File读取的，只能用Stream的方式读取。 \n正确方式：\n```java\nInputStream inputStraean = DBHelper.class.getClassLoader().getResourceAsStream(\"db.properties\")\n```\n结论：**不能传文件路径，只能传输入流**\n### 2.测试获取文件的各种情况\n待测试jar包目录：\n![Alt text](/images/java-properties/1.png)\n测试目录引用进来的maven目录\n![Alt text](/images/java-properties/2.png)\n测试项目目录\n![Alt text](/images/java-properties/3.png)\n待测试jar包运行结果：\n![Alt text](/images/java-properties/4.png)\n测试项目运行结果\n![Alt text](/images/java-properties/5.png)\n\n根据测试得到的结果：\n1. 项目与项目引入jar包的文件都是在classpath下面的，也就是可以通过getResourceAsStream获取，jar包与项目的获取方法没有分别，也就是说，获取jar内部与外部文件的方式是一样的。\n2. 如果项目与jar包在相对于classpath下有同样的文件，则以项目的文件覆盖jar包里面的文件。\n3. jar包里面没有d.properties，所有jar包里面测试运行没有找到，但是到了项目里面，在项目下创建d.properties,可是可以发现该文件的。\n4. 项目可以获取项目的文件\n项目可以获取jar包里面的文件\njar包可以获取项目的文件\njar包可以获取jar包里面的文件\n项目与jar包同时存在该文件，则以项目的文件优先\n\n因此，如果开发一个库或jar包，可以保留一份默认配置在jar包里面，也可以把配置文件放到客户端配置，检测时做处理，如果客户端配置该文件，则以客户端的配置为先，没有找到就用默认配置文件，或者别的处理（抛异常等。。。），slf4j配置我猜也是这样子吧=_=。\n\n## 四.Properties配置文件读取工具类\n```java\npackage xyz.dongxiaoxia.commons.utils;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.*;\nimport java.util.logging.Logger;\n\n/**\n * Properties文件载入工具，可载入多个Properties文件，相同属性在最后载入的文件中的值将会覆盖之前的值，但以System的Property优先。\n *\n * @author dongxiaoxia\n * @create 2016-07-01 23:03\n */\npublic class PropertiesLoader {\n\n    private static Logger logger = Logger.getLogger(PropertiesLoader.class.getName());\n\n    /**\n     * .properties属性文件名后缀\n     */\n    public static final String PROPERTY_FILE_SUFFIX = \".properties\";\n\n    private final Properties properties;\n\n    public PropertiesLoader(String... propsFileNames) {\n        properties = loadProperties(propsFileNames);\n    }\n\n    public PropertiesLoader(String propsFileName) {\n        properties = getProperties(propsFileName);\n    }\n\n    public PropertiesLoader(InputStream inputStream) {\n        properties = loadProperties(inputStream);\n    }\n\n    public Properties getProperties() {\n        return properties;\n    }\n\n    /**\n     * 取出Property，但与System的Property优先，取不到返回空字符串。\n     *\n     * @param key\n     * @return\n     */\n    private String getValue(String key) {\n        String systemProperty = System.getProperty(key);\n        if (systemProperty != null) {\n            return systemProperty;\n        }\n        if (properties.containsKey(key)) {\n            return properties.getProperty(key);\n        }\n        return \"\";\n    }\n\n    /**\n     * 取出String类型的Property，但与System的Property优先，如果都为NUll则抛出异常。\n     *\n     * @param key\n     * @return\n     */\n    public String getProperty(String key) {\n        String value = getValue(key);\n        if (value == null) {\n            throw new NoSuchElementException();\n        }\n        return value;\n    }\n\n    /**\n     * 取出String类型的Property，但以System的Property优先，如果都为Null则返回Default值。\n     *\n     * @param key\n     * @param defaultValue\n     * @return\n     */\n    public String getProperty(String key, String defaultValue) {\n        String value = getValue(key);\n        return value != null ? value : defaultValue;\n    }\n\n    /**\n     * 取出Integer类型的Property。但以System的Property优先，如果都为null或内容错误则抛异常。\n     *\n     * @param key\n     * @return\n     */\n    public Integer getInteger(String key) {\n        String value = getValue(key);\n        if (value == null) {\n            throw new NoSuchElementException();\n        }\n        return Integer.valueOf(value);\n    }\n\n    /**\n     * 取出Integer类型的Property，但以System的Property优先。如果都为null则返回默认值，如果内容错误则抛异常。\n     *\n     * @param key\n     * @param defaultValue\n     * @return\n     */\n    public Integer getInteger(String key, Integer defaultValue) {\n        String value = getValue(key);\n        return value != null ? Integer.valueOf(value) : defaultValue;\n    }\n\n    /**\n     * 取出Double类型的Property，但以System的Property优先，如果都为null或内容错误则抛异常。\n     *\n     * @param key\n     * @return\n     */\n    public Double getDouble(String key) {\n        String value = getValue(key);\n        if (value == null) {\n            throw new NoSuchElementException();\n        }\n        return Double.valueOf(value);\n    }\n\n    /**\n     * 取出Double类型的Property，但以System的Property优先，如果都为null则返回默认值，如果内容错误则抛异常。\n     *\n     * @param key\n     * @param defaultValue\n     * @return\n     */\n    public Double getDouble(String key, Double defaultValue) {\n        String value = getValue(key);\n        return value != null ? Double.valueOf(value) : defaultValue;\n    }\n\n    /**\n     * 取出Boolean类型的Property，但以System的Property优先，如果都为null则抛出异常，如果内容不是true/false则返回false。\n     *\n     * @param key\n     * @return\n     */\n    public Boolean getBoolean(String key) {\n        String value = getValue(key);\n        if (value == null) {\n            throw new NoSuchElementException();\n        }\n        return Boolean.valueOf(value);\n    }\n\n    /**\n     * 取出Boolean类型的Property，但以System的Property优先，如果都为null则返回默认值，如果内容不为true/false则返回false。\n     *\n     * @param key\n     * @param defaultValue\n     * @return\n     */\n    public Boolean getBoolean(String key, boolean defaultValue) {\n        String value = getValue(key);\n        return value != null ? Boolean.valueOf(value) : defaultValue;\n    }\n\n    public Set<Object> getAllKey() {\n        return properties.keySet();\n    }\n\n    public Collection<Object> getAllValues() {\n        return properties.values();\n    }\n\n    public Map<String, Object> getAllKeyValue() {\n        Map<String, Object> mapAll = new HashMap<>();\n        Set<Object> keys = getAllKey();\n        for (Object key1 : keys) {\n            String key = key1.toString();\n            mapAll.put(key, properties.get(key));\n        }\n        return mapAll;\n    }\n\n    /**\n     * 根据Properties配置文件名称获取配置文件对象\n     *\n     * @param propsFileName Properties配置文件名称（从ClassPath根下获取） 可以不带扩展名\n     *                      eg.根目录下有个common.properties,那么可以传“common”或者“common.properties”\n     *                      根目录下有个config文件夹，里面存在common.properties,那么可以传“config/common”或者“config/common.properties”\n     * @return Properties对象\n     */\n    private Properties getProperties(String propsFileName) {\n        if (propsFileName == null || propsFileName.equals(\"\")) throw new IllegalArgumentException();\n        Properties properties = new Properties();\n        InputStream inputStream = null;\n        try {\n            try {\n                if (propsFileName.lastIndexOf(PROPERTY_FILE_SUFFIX) == -1) {//加入文件名后缀\n                    propsFileName += PROPERTY_FILE_SUFFIX;\n                }\n                //写法1：\n//                inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream(propsFileName);\n                //写法2：\n//                URL url = Thread.currentThread().getContextClassLoader().getResource(propsFileName);\n//                inputStream = url.openStream();\n                //写法3：\n                inputStream = PropertiesLoader.class.getClassLoader().getResourceAsStream(propsFileName);\n                //写法4：\n//                URL url = PropertyUtil.class.getClassLoader().getResource(propsFileName);\n//                inputStream = url.openStream();\n                //写法5：\n//                inputStream = PropertiesLoader.class.getResourceAsStream(\"/\" + propsFileName);\n                if (null != inputStream) properties.load(inputStream);\n            } finally {\n                if (null != inputStream) {\n                    inputStream.close();\n                }\n            }\n        } catch (IOException e) {\n//            LOGGER.error(\"加载属性文件出错!\", e);\n            e.printStackTrace();\n            throw new RuntimeException(e.getMessage(), e);\n        }\n        return properties;\n    }\n\n    /**\n     * 载入多个文件\n     *\n     * @param propsFileNames\n     * @return\n     */\n    private Properties loadProperties(String... propsFileNames) {\n        Properties pros = new Properties();\n        for (String propsFileName : propsFileNames) {\n            InputStream inputStream = null;\n            try {\n                inputStream = PropertiesLoader.class.getClassLoader().getResourceAsStream(propsFileName);\n                pros.load(inputStream);\n            } catch (Exception e) {\n                logger.info(\"Could not load properties from path:\" + propsFileName + \",\" + e.getMessage());\n            } finally {\n                try {\n                    if (inputStream != null) {\n                        inputStream.close();\n                    }\n                } catch (IOException e) {\n                    logger.info(e.getMessage());\n                }\n            }\n        }\n        return pros;\n    }\n\n    /**\n     * 根据输入流载入Properties对象\n     *\n     * @param inputStream\n     * @return\n     */\n    private Properties loadProperties(InputStream inputStream) {\n        Properties pros = new Properties();\n//        pros.load(inputStream);\n        try (InputStreamReader inputStreamReader = new InputStreamReader(inputStream, \"UTF-8\")) {\n            pros.load(inputStreamReader);\n        } catch (Exception e) {\n            logger.info(e.getMessage());\n        }\n        return pros;\n    }\n}\n\n\n```\n\n更多请查看GItHub [PropertiesLoader](https://github.com/dongxiaoxia/commons/blob/master/utils/src/main/java/xyz/dongxiaoxia/commons/utils/PropertiesLoader.java)类\n\n","slug":"java-properties","published":1,"updated":"2016-10-14T08:04:22.992Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431ol40009uco0aykdrsqo","content":"<h2 id=\"一-getResourceAsStream方法使用\">一.<code>getResourceAsStream</code>方法使用</h2><p>  <strong>这里的<code>getResourceAsStream</code>主要是针对<code>Class</code>与<code>ClassLoader</code>而言的 </strong></p>\n<ol>\n<li><code>Class.getResourceAsStream(String path)</code>： path 不以’/‘开头时默认是从此类所在的包下取资源，以’/‘开头则是从ClassPath根下获取。其只是通过path构造一个绝对路径，最终还是由ClassLoader获取资源。 </li>\n<li><code>Class.getClassLoader.getResourceAsStream(String path)</code>：默认则是从ClassPath根下获取，path不能以’/‘开头，最终是由ClassLoader获取资源。 </li>\n<li><code>ServletContext. getResourceAsStream(String path)</code>：默认从WebAPP根目录下取资源，Tomcat下path是否以’/‘开头无所谓，当然这和具体的容器实现有关。 </li>\n</ol>\n<blockquote>\n<p><strong>获取<code>Class</code>方法</strong>：<br>1.<code>XX.class</code><br> 2.<code>this.getClass()</code><br><strong>获取<code>ClassLoader</code>方法</strong>：<br>1.<code>Thread.currentThread().getContextClassLoader()</code><br>2.<code>Class.getClassLoader</code></p>\n</blockquote>\n<p><strong><code>getResourceAsStream</code> 用法大致有以下几种： </strong></p>\n<p>第一： 要加载的文件和.class文件在同一目录下，例如：com.x.y 下有类me.class ,同时有资源文件myfile.xml<br>那么，应该有如下代码：<br>me.class.getResourceAsStream(“myfile.xml”);<br>第二：在me.class目录的子目录下，例如：com.x.y 下有类me.class ,同时在 com.x.y.file 目录下有资源文件myfile.xml<br>那么，应该有如下代码：<br>me.class.getResourceAsStream(“file/myfile.xml”);<br>第三：不在me.class目录下，也不在子目录下，例如：com.x.y 下有类me.class ,同时在 com.x.file 目录下有资源文件myfile.xml<br>那么，应该有如下代码：<br>me.class.getResourceAsStream(“/com/x/file/myfile.xml”);<br>总结一下，可能只是两种写法<br>第一：前面有 “   / ”<br>“ / ”代表了工程的根目录，例如工程名叫做myproject，“ / ”代表了myproject<br>me.class.getResourceAsStream(“/com/x/file/myfile.xml”);<br>第二：前面没有 “   / ”<br>代表当前类的目录<br>me.class.getResourceAsStream(“myfile.xml”);<br>me.class.getResourceAsStream(“file/myfile.xml”);<br>缺点：<br>getResourceAsStream读取的文件路径只局限与工程的源文件夹中，包括在工程src根目录下，以及类包里面任何位置，但是如果配置文件路径是在除了源文件夹之外的其他文件夹中时，该方法是用不了的。</p>\n<h2 id=\"二-Properties配置文件的读取\">二.<code>Properties</code>配置文件的读取</h2><h3 id=\"1-使用Apache_Commons_Configuration读取配置信息\">1.使用<code>Apache Commons Configuration</code>读取配置信息</h3><p>第三方标准jar包，容易使用，拥有众多功能，不用重复造轮子,但是为了读取一个配置文件就要引入一个jar包时就要考虑一下了。</p>\n<h3 id=\"2-Spring_ResourceLoader\">2.<code>Spring ResourceLoader</code></h3><p>Spring 能支持入参路径的很多方式，包括已 “ /“、”classpath” 开头。<br>   如果你想在项目中使用 Spring 提供的默认配置文件载入实现，可以这样书写你的代码。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ResourceLoader resourceLoader = <span class=\"keyword\">new</span> DefaultResourceLoader();</span><br><span class=\"line\">Resource resource = resourceLoader.getResource(<span class=\"string\">\"log4j.properties\"</span>);</span><br><span class=\"line\">Properties props = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\"> props.load(resource.getInputStream());</span><br></pre></td></tr></table></figure></p>\n<p> <strong>缺点</strong>：依赖于Spring框架，难以通用， 如果用Spring框架应该用Spring统一管理配置文件，而不是当作一个工具类使用。</p>\n<h3 id=\"3-通过_java-util-ResourceBundle_对象_操作\">3.通过 <code>java.util.ResourceBundle</code> 对象 操作　</h3><p>  通过该方式仅能读取配置文件而已，不能进行写操作。示例：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ResourceBundle rb = ResourceBundle.getBundle(\"配置文件相对工程根目录的相对路径（不含扩展名）\");</span></span><br><span class=\"line\">ResourceBundle rb = ResourceBundle.getBundle(<span class=\"string\">\"config\"</span>);</span><br><span class=\"line\">String name = rb.getString(<span class=\"string\">\"name\"</span>);</span><br></pre></td></tr></table></figure></p>\n<p>java自带的类，使用非常简单，代码量还少。但是功能略微简单。</p>\n<h3 id=\"4-通过Properties对象手动写个工具类\">4.通过<code>Properties</code>对象手动写个工具类</h3><p>通过Properties对象自定义封装，更能满足自己需要的要求。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">/**</span><br><span class=\"line\">     * 根据Properties配置文件名称获取配置文件对象</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> propsFileName Properties配置文件名称（从ClassPath根下获取）</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> Properties对象</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Properties <span class=\"title\">getProperties</span><span class=\"params\">(String propsFileName)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (propsFileName == <span class=\"keyword\">null</span> || propsFileName.equals(<span class=\"string\">\"\"</span>)) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException();</span><br><span class=\"line\">        Properties properties = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">        InputStream inputStream = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (propsFileName.lastIndexOf(PROPERTY_FILE_SUFFIX) == -<span class=\"number\">1</span>) &#123;<span class=\"comment\">//加入文件名后缀</span></span><br><span class=\"line\">                    propsFileName += PROPERTY_FILE_SUFFIX;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">//写法1：</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream(propsFileName);</span></span><br><span class=\"line\">                <span class=\"comment\">//写法2：</span></span><br><span class=\"line\"><span class=\"comment\">//                URL url = Thread.currentThread().getContextClassLoader().getResource(propsFileName);</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = url.openStream();</span></span><br><span class=\"line\">                <span class=\"comment\">//写法3：</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = PropertiesLoader.class.getClassLoader().getResourceAsStream(propsFileName);</span></span><br><span class=\"line\">                <span class=\"comment\">//写法4：</span></span><br><span class=\"line\"><span class=\"comment\">//                URL url = PropertyUtil.class.getClassLoader().getResource(propsFileName);</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = url.openStream();</span></span><br><span class=\"line\">                <span class=\"comment\">//写法5：</span></span><br><span class=\"line\">                inputStream = PropertiesLoader.class.getResourceAsStream(<span class=\"string\">\"/\"</span> + propsFileName);</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != inputStream) properties.load(inputStream);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != inputStream) &#123;</span><br><span class=\"line\">                    inputStream.close();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\"><span class=\"comment\">//            LOGGER.error(\"加载属性文件出错!\", e);</span></span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(e.getMessage(), e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> properties;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"三-jar包读取外部和内部配置文件\">三.jar包读取外部和内部配置文件</h2><h3 id=\"1-获取文件的方式\">1.获取文件的方式</h3><p>把项目打成jar包发布后jar中的文件就不能通过File file=new File(“文件路径”)的方式来读取文件了。<br>错误方式：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">URL url = DBHelper.class.getClassLoader().getResource(configName);</span><br><span class=\"line\">URL url = DBHelper.class.getResource(<span class=\"string\">\"/db.properties\"</span>);</span><br></pre></td></tr></table></figure></p>\n<p> 从依赖的Jar包中读取文件, Jar包内的文件是无法用File读取的，只能用Stream的方式读取。<br>正确方式：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">InputStream inputStraean = DBHelper.class.getClassLoader().getResourceAsStream(<span class=\"string\">\"db.properties\"</span>)</span><br></pre></td></tr></table></figure></p>\n<p>结论：<strong>不能传文件路径，只能传输入流</strong></p>\n<h3 id=\"2-测试获取文件的各种情况\">2.测试获取文件的各种情况</h3><p>待测试jar包目录：<br><img src=\"/images/java-properties/1.png\" alt=\"Alt text\"><br>测试目录引用进来的maven目录<br><img src=\"/images/java-properties/2.png\" alt=\"Alt text\"><br>测试项目目录<br><img src=\"/images/java-properties/3.png\" alt=\"Alt text\"><br>待测试jar包运行结果：<br><img src=\"/images/java-properties/4.png\" alt=\"Alt text\"><br>测试项目运行结果<br><img src=\"/images/java-properties/5.png\" alt=\"Alt text\"></p>\n<p>根据测试得到的结果：</p>\n<ol>\n<li>项目与项目引入jar包的文件都是在classpath下面的，也就是可以通过getResourceAsStream获取，jar包与项目的获取方法没有分别，也就是说，获取jar内部与外部文件的方式是一样的。</li>\n<li>如果项目与jar包在相对于classpath下有同样的文件，则以项目的文件覆盖jar包里面的文件。</li>\n<li>jar包里面没有d.properties，所有jar包里面测试运行没有找到，但是到了项目里面，在项目下创建d.properties,可是可以发现该文件的。</li>\n<li>项目可以获取项目的文件<br>项目可以获取jar包里面的文件<br>jar包可以获取项目的文件<br>jar包可以获取jar包里面的文件<br>项目与jar包同时存在该文件，则以项目的文件优先</li>\n</ol>\n<p>因此，如果开发一个库或jar包，可以保留一份默认配置在jar包里面，也可以把配置文件放到客户端配置，检测时做处理，如果客户端配置该文件，则以客户端的配置为先，没有找到就用默认配置文件，或者别的处理（抛异常等。。。），slf4j配置我猜也是这样子吧=_=。</p>\n<h2 id=\"四-Properties配置文件读取工具类\">四.Properties配置文件读取工具类</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.commons.utils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStreamReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.logging.Logger;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Properties文件载入工具，可载入多个Properties文件，相同属性在最后载入的文件中的值将会覆盖之前的值，但以System的Property优先。</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2016-07-01 23:03</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PropertiesLoader</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Logger logger = Logger.getLogger(PropertiesLoader.class.getName());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * .properties属性文件名后缀</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String PROPERTY_FILE_SUFFIX = <span class=\"string\">\".properties\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Properties properties;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PropertiesLoader</span><span class=\"params\">(String... propsFileNames)</span> </span>&#123;</span><br><span class=\"line\">        properties = loadProperties(propsFileNames);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PropertiesLoader</span><span class=\"params\">(String propsFileName)</span> </span>&#123;</span><br><span class=\"line\">        properties = getProperties(propsFileName);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PropertiesLoader</span><span class=\"params\">(InputStream inputStream)</span> </span>&#123;</span><br><span class=\"line\">        properties = loadProperties(inputStream);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Properties <span class=\"title\">getProperties</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> properties;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Property，但与System的Property优先，取不到返回空字符串。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> String <span class=\"title\">getValue</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        String systemProperty = System.getProperty(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (systemProperty != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> systemProperty;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (properties.containsKey(key)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> properties.getProperty(key);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出String类型的Property，但与System的Property优先，如果都为NUll则抛出异常。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getProperty</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NoSuchElementException();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出String类型的Property，但以System的Property优先，如果都为Null则返回Default值。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> defaultValue</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getProperty</span><span class=\"params\">(String key, String defaultValue)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value != <span class=\"keyword\">null</span> ? value : defaultValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Integer类型的Property。但以System的Property优先，如果都为null或内容错误则抛异常。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getInteger</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NoSuchElementException();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Integer.valueOf(value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Integer类型的Property，但以System的Property优先。如果都为null则返回默认值，如果内容错误则抛异常。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> defaultValue</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getInteger</span><span class=\"params\">(String key, Integer defaultValue)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value != <span class=\"keyword\">null</span> ? Integer.valueOf(value) : defaultValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Double类型的Property，但以System的Property优先，如果都为null或内容错误则抛异常。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Double <span class=\"title\">getDouble</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NoSuchElementException();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Double.valueOf(value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Double类型的Property，但以System的Property优先，如果都为null则返回默认值，如果内容错误则抛异常。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> defaultValue</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Double <span class=\"title\">getDouble</span><span class=\"params\">(String key, Double defaultValue)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value != <span class=\"keyword\">null</span> ? Double.valueOf(value) : defaultValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Boolean类型的Property，但以System的Property优先，如果都为null则抛出异常，如果内容不是true/false则返回false。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">getBoolean</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NoSuchElementException();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Boolean.valueOf(value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Boolean类型的Property，但以System的Property优先，如果都为null则返回默认值，如果内容不为true/false则返回false。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> defaultValue</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">getBoolean</span><span class=\"params\">(String key, <span class=\"keyword\">boolean</span> defaultValue)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value != <span class=\"keyword\">null</span> ? Boolean.valueOf(value) : defaultValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Set&lt;Object&gt; <span class=\"title\">getAllKey</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> properties.keySet();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection&lt;Object&gt; <span class=\"title\">getAllValues</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> properties.values();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Map&lt;String, Object&gt; <span class=\"title\">getAllKeyValue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Map&lt;String, Object&gt; mapAll = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        Set&lt;Object&gt; keys = getAllKey();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Object key1 : keys) &#123;</span><br><span class=\"line\">            String key = key1.toString();</span><br><span class=\"line\">            mapAll.put(key, properties.get(key));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mapAll;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 根据Properties配置文件名称获取配置文件对象</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> propsFileName Properties配置文件名称（从ClassPath根下获取） 可以不带扩展名</span><br><span class=\"line\">     *                      eg.根目录下有个common.properties,那么可以传“common”或者“common.properties”</span><br><span class=\"line\">     *                      根目录下有个config文件夹，里面存在common.properties,那么可以传“config/common”或者“config/common.properties”</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> Properties对象</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Properties <span class=\"title\">getProperties</span><span class=\"params\">(String propsFileName)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (propsFileName == <span class=\"keyword\">null</span> || propsFileName.equals(<span class=\"string\">\"\"</span>)) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException();</span><br><span class=\"line\">        Properties properties = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">        InputStream inputStream = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (propsFileName.lastIndexOf(PROPERTY_FILE_SUFFIX) == -<span class=\"number\">1</span>) &#123;<span class=\"comment\">//加入文件名后缀</span></span><br><span class=\"line\">                    propsFileName += PROPERTY_FILE_SUFFIX;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">//写法1：</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream(propsFileName);</span></span><br><span class=\"line\">                <span class=\"comment\">//写法2：</span></span><br><span class=\"line\"><span class=\"comment\">//                URL url = Thread.currentThread().getContextClassLoader().getResource(propsFileName);</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = url.openStream();</span></span><br><span class=\"line\">                <span class=\"comment\">//写法3：</span></span><br><span class=\"line\">                inputStream = PropertiesLoader.class.getClassLoader().getResourceAsStream(propsFileName);</span><br><span class=\"line\">                <span class=\"comment\">//写法4：</span></span><br><span class=\"line\"><span class=\"comment\">//                URL url = PropertyUtil.class.getClassLoader().getResource(propsFileName);</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = url.openStream();</span></span><br><span class=\"line\">                <span class=\"comment\">//写法5：</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = PropertiesLoader.class.getResourceAsStream(\"/\" + propsFileName);</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != inputStream) properties.load(inputStream);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != inputStream) &#123;</span><br><span class=\"line\">                    inputStream.close();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\"><span class=\"comment\">//            LOGGER.error(\"加载属性文件出错!\", e);</span></span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(e.getMessage(), e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> properties;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 载入多个文件</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> propsFileNames</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Properties <span class=\"title\">loadProperties</span><span class=\"params\">(String... propsFileNames)</span> </span>&#123;</span><br><span class=\"line\">        Properties pros = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String propsFileName : propsFileNames) &#123;</span><br><span class=\"line\">            InputStream inputStream = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                inputStream = PropertiesLoader.class.getClassLoader().getResourceAsStream(propsFileName);</span><br><span class=\"line\">                pros.load(inputStream);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">                logger.info(<span class=\"string\">\"Could not load properties from path:\"</span> + propsFileName + <span class=\"string\">\",\"</span> + e.getMessage());</span><br><span class=\"line\">            &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (inputStream != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                        inputStream.close();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">                    logger.info(e.getMessage());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pros;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 根据输入流载入Properties对象</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> inputStream</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Properties <span class=\"title\">loadProperties</span><span class=\"params\">(InputStream inputStream)</span> </span>&#123;</span><br><span class=\"line\">        Properties pros = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\"><span class=\"comment\">//        pros.load(inputStream);</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> (InputStreamReader inputStreamReader = <span class=\"keyword\">new</span> InputStreamReader(inputStream, <span class=\"string\">\"UTF-8\"</span>)) &#123;</span><br><span class=\"line\">            pros.load(inputStreamReader);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            logger.info(e.getMessage());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pros;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>更多请查看GItHub <a href=\"https://github.com/dongxiaoxia/commons/blob/master/utils/src/main/java/xyz/dongxiaoxia/commons/utils/PropertiesLoader.java\" target=\"_blank\" rel=\"external\">PropertiesLoader</a>类</p>\n","excerpt":"","more":"<h2 id=\"一-getResourceAsStream方法使用\">一.<code>getResourceAsStream</code>方法使用</h2><p>  <strong>这里的<code>getResourceAsStream</code>主要是针对<code>Class</code>与<code>ClassLoader</code>而言的 </strong></p>\n<ol>\n<li><code>Class.getResourceAsStream(String path)</code>： path 不以’/‘开头时默认是从此类所在的包下取资源，以’/‘开头则是从ClassPath根下获取。其只是通过path构造一个绝对路径，最终还是由ClassLoader获取资源。 </li>\n<li><code>Class.getClassLoader.getResourceAsStream(String path)</code>：默认则是从ClassPath根下获取，path不能以’/‘开头，最终是由ClassLoader获取资源。 </li>\n<li><code>ServletContext. getResourceAsStream(String path)</code>：默认从WebAPP根目录下取资源，Tomcat下path是否以’/‘开头无所谓，当然这和具体的容器实现有关。 </li>\n</ol>\n<blockquote>\n<p><strong>获取<code>Class</code>方法</strong>：<br>1.<code>XX.class</code><br> 2.<code>this.getClass()</code><br><strong>获取<code>ClassLoader</code>方法</strong>：<br>1.<code>Thread.currentThread().getContextClassLoader()</code><br>2.<code>Class.getClassLoader</code></p>\n</blockquote>\n<p><strong><code>getResourceAsStream</code> 用法大致有以下几种： </strong></p>\n<p>第一： 要加载的文件和.class文件在同一目录下，例如：com.x.y 下有类me.class ,同时有资源文件myfile.xml<br>那么，应该有如下代码：<br>me.class.getResourceAsStream(“myfile.xml”);<br>第二：在me.class目录的子目录下，例如：com.x.y 下有类me.class ,同时在 com.x.y.file 目录下有资源文件myfile.xml<br>那么，应该有如下代码：<br>me.class.getResourceAsStream(“file/myfile.xml”);<br>第三：不在me.class目录下，也不在子目录下，例如：com.x.y 下有类me.class ,同时在 com.x.file 目录下有资源文件myfile.xml<br>那么，应该有如下代码：<br>me.class.getResourceAsStream(“/com/x/file/myfile.xml”);<br>总结一下，可能只是两种写法<br>第一：前面有 “   / ”<br>“ / ”代表了工程的根目录，例如工程名叫做myproject，“ / ”代表了myproject<br>me.class.getResourceAsStream(“/com/x/file/myfile.xml”);<br>第二：前面没有 “   / ”<br>代表当前类的目录<br>me.class.getResourceAsStream(“myfile.xml”);<br>me.class.getResourceAsStream(“file/myfile.xml”);<br>缺点：<br>getResourceAsStream读取的文件路径只局限与工程的源文件夹中，包括在工程src根目录下，以及类包里面任何位置，但是如果配置文件路径是在除了源文件夹之外的其他文件夹中时，该方法是用不了的。</p>\n<h2 id=\"二-Properties配置文件的读取\">二.<code>Properties</code>配置文件的读取</h2><h3 id=\"1-使用Apache_Commons_Configuration读取配置信息\">1.使用<code>Apache Commons Configuration</code>读取配置信息</h3><p>第三方标准jar包，容易使用，拥有众多功能，不用重复造轮子,但是为了读取一个配置文件就要引入一个jar包时就要考虑一下了。</p>\n<h3 id=\"2-Spring_ResourceLoader\">2.<code>Spring ResourceLoader</code></h3><p>Spring 能支持入参路径的很多方式，包括已 “ /“、”classpath” 开头。<br>   如果你想在项目中使用 Spring 提供的默认配置文件载入实现，可以这样书写你的代码。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ResourceLoader resourceLoader = <span class=\"keyword\">new</span> DefaultResourceLoader();</span><br><span class=\"line\">Resource resource = resourceLoader.getResource(<span class=\"string\">\"log4j.properties\"</span>);</span><br><span class=\"line\">Properties props = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\"> props.load(resource.getInputStream());</span><br></pre></td></tr></table></figure></p>\n<p> <strong>缺点</strong>：依赖于Spring框架，难以通用， 如果用Spring框架应该用Spring统一管理配置文件，而不是当作一个工具类使用。</p>\n<h3 id=\"3-通过_java-util-ResourceBundle_对象_操作\">3.通过 <code>java.util.ResourceBundle</code> 对象 操作　</h3><p>  通过该方式仅能读取配置文件而已，不能进行写操作。示例：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ResourceBundle rb = ResourceBundle.getBundle(\"配置文件相对工程根目录的相对路径（不含扩展名）\");</span></span><br><span class=\"line\">ResourceBundle rb = ResourceBundle.getBundle(<span class=\"string\">\"config\"</span>);</span><br><span class=\"line\">String name = rb.getString(<span class=\"string\">\"name\"</span>);</span><br></pre></td></tr></table></figure></p>\n<p>java自带的类，使用非常简单，代码量还少。但是功能略微简单。</p>\n<h3 id=\"4-通过Properties对象手动写个工具类\">4.通过<code>Properties</code>对象手动写个工具类</h3><p>通过Properties对象自定义封装，更能满足自己需要的要求。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">/**</span><br><span class=\"line\">     * 根据Properties配置文件名称获取配置文件对象</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> propsFileName Properties配置文件名称（从ClassPath根下获取）</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> Properties对象</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Properties <span class=\"title\">getProperties</span><span class=\"params\">(String propsFileName)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (propsFileName == <span class=\"keyword\">null</span> || propsFileName.equals(<span class=\"string\">\"\"</span>)) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException();</span><br><span class=\"line\">        Properties properties = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">        InputStream inputStream = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (propsFileName.lastIndexOf(PROPERTY_FILE_SUFFIX) == -<span class=\"number\">1</span>) &#123;<span class=\"comment\">//加入文件名后缀</span></span><br><span class=\"line\">                    propsFileName += PROPERTY_FILE_SUFFIX;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">//写法1：</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream(propsFileName);</span></span><br><span class=\"line\">                <span class=\"comment\">//写法2：</span></span><br><span class=\"line\"><span class=\"comment\">//                URL url = Thread.currentThread().getContextClassLoader().getResource(propsFileName);</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = url.openStream();</span></span><br><span class=\"line\">                <span class=\"comment\">//写法3：</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = PropertiesLoader.class.getClassLoader().getResourceAsStream(propsFileName);</span></span><br><span class=\"line\">                <span class=\"comment\">//写法4：</span></span><br><span class=\"line\"><span class=\"comment\">//                URL url = PropertyUtil.class.getClassLoader().getResource(propsFileName);</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = url.openStream();</span></span><br><span class=\"line\">                <span class=\"comment\">//写法5：</span></span><br><span class=\"line\">                inputStream = PropertiesLoader.class.getResourceAsStream(<span class=\"string\">\"/\"</span> + propsFileName);</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != inputStream) properties.load(inputStream);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != inputStream) &#123;</span><br><span class=\"line\">                    inputStream.close();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\"><span class=\"comment\">//            LOGGER.error(\"加载属性文件出错!\", e);</span></span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(e.getMessage(), e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> properties;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"三-jar包读取外部和内部配置文件\">三.jar包读取外部和内部配置文件</h2><h3 id=\"1-获取文件的方式\">1.获取文件的方式</h3><p>把项目打成jar包发布后jar中的文件就不能通过File file=new File(“文件路径”)的方式来读取文件了。<br>错误方式：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">URL url = DBHelper.class.getClassLoader().getResource(configName);</span><br><span class=\"line\">URL url = DBHelper.class.getResource(<span class=\"string\">\"/db.properties\"</span>);</span><br></pre></td></tr></table></figure></p>\n<p> 从依赖的Jar包中读取文件, Jar包内的文件是无法用File读取的，只能用Stream的方式读取。<br>正确方式：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">InputStream inputStraean = DBHelper.class.getClassLoader().getResourceAsStream(<span class=\"string\">\"db.properties\"</span>)</span><br></pre></td></tr></table></figure></p>\n<p>结论：<strong>不能传文件路径，只能传输入流</strong></p>\n<h3 id=\"2-测试获取文件的各种情况\">2.测试获取文件的各种情况</h3><p>待测试jar包目录：<br><img src=\"/images/java-properties/1.png\" alt=\"Alt text\"><br>测试目录引用进来的maven目录<br><img src=\"/images/java-properties/2.png\" alt=\"Alt text\"><br>测试项目目录<br><img src=\"/images/java-properties/3.png\" alt=\"Alt text\"><br>待测试jar包运行结果：<br><img src=\"/images/java-properties/4.png\" alt=\"Alt text\"><br>测试项目运行结果<br><img src=\"/images/java-properties/5.png\" alt=\"Alt text\"></p>\n<p>根据测试得到的结果：</p>\n<ol>\n<li>项目与项目引入jar包的文件都是在classpath下面的，也就是可以通过getResourceAsStream获取，jar包与项目的获取方法没有分别，也就是说，获取jar内部与外部文件的方式是一样的。</li>\n<li>如果项目与jar包在相对于classpath下有同样的文件，则以项目的文件覆盖jar包里面的文件。</li>\n<li>jar包里面没有d.properties，所有jar包里面测试运行没有找到，但是到了项目里面，在项目下创建d.properties,可是可以发现该文件的。</li>\n<li>项目可以获取项目的文件<br>项目可以获取jar包里面的文件<br>jar包可以获取项目的文件<br>jar包可以获取jar包里面的文件<br>项目与jar包同时存在该文件，则以项目的文件优先</li>\n</ol>\n<p>因此，如果开发一个库或jar包，可以保留一份默认配置在jar包里面，也可以把配置文件放到客户端配置，检测时做处理，如果客户端配置该文件，则以客户端的配置为先，没有找到就用默认配置文件，或者别的处理（抛异常等。。。），slf4j配置我猜也是这样子吧=_=。</p>\n<h2 id=\"四-Properties配置文件读取工具类\">四.Properties配置文件读取工具类</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.commons.utils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStreamReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.logging.Logger;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Properties文件载入工具，可载入多个Properties文件，相同属性在最后载入的文件中的值将会覆盖之前的值，但以System的Property优先。</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2016-07-01 23:03</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PropertiesLoader</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Logger logger = Logger.getLogger(PropertiesLoader.class.getName());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * .properties属性文件名后缀</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String PROPERTY_FILE_SUFFIX = <span class=\"string\">\".properties\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Properties properties;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PropertiesLoader</span><span class=\"params\">(String... propsFileNames)</span> </span>&#123;</span><br><span class=\"line\">        properties = loadProperties(propsFileNames);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PropertiesLoader</span><span class=\"params\">(String propsFileName)</span> </span>&#123;</span><br><span class=\"line\">        properties = getProperties(propsFileName);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PropertiesLoader</span><span class=\"params\">(InputStream inputStream)</span> </span>&#123;</span><br><span class=\"line\">        properties = loadProperties(inputStream);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Properties <span class=\"title\">getProperties</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> properties;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Property，但与System的Property优先，取不到返回空字符串。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> String <span class=\"title\">getValue</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        String systemProperty = System.getProperty(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (systemProperty != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> systemProperty;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (properties.containsKey(key)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> properties.getProperty(key);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出String类型的Property，但与System的Property优先，如果都为NUll则抛出异常。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getProperty</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NoSuchElementException();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出String类型的Property，但以System的Property优先，如果都为Null则返回Default值。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> defaultValue</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getProperty</span><span class=\"params\">(String key, String defaultValue)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value != <span class=\"keyword\">null</span> ? value : defaultValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Integer类型的Property。但以System的Property优先，如果都为null或内容错误则抛异常。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getInteger</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NoSuchElementException();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Integer.valueOf(value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Integer类型的Property，但以System的Property优先。如果都为null则返回默认值，如果内容错误则抛异常。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> defaultValue</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getInteger</span><span class=\"params\">(String key, Integer defaultValue)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value != <span class=\"keyword\">null</span> ? Integer.valueOf(value) : defaultValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Double类型的Property，但以System的Property优先，如果都为null或内容错误则抛异常。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Double <span class=\"title\">getDouble</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NoSuchElementException();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Double.valueOf(value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Double类型的Property，但以System的Property优先，如果都为null则返回默认值，如果内容错误则抛异常。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> defaultValue</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Double <span class=\"title\">getDouble</span><span class=\"params\">(String key, Double defaultValue)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value != <span class=\"keyword\">null</span> ? Double.valueOf(value) : defaultValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Boolean类型的Property，但以System的Property优先，如果都为null则抛出异常，如果内容不是true/false则返回false。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">getBoolean</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NoSuchElementException();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Boolean.valueOf(value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 取出Boolean类型的Property，但以System的Property优先，如果都为null则返回默认值，如果内容不为true/false则返回false。</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> key</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> defaultValue</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">getBoolean</span><span class=\"params\">(String key, <span class=\"keyword\">boolean</span> defaultValue)</span> </span>&#123;</span><br><span class=\"line\">        String value = getValue(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value != <span class=\"keyword\">null</span> ? Boolean.valueOf(value) : defaultValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Set&lt;Object&gt; <span class=\"title\">getAllKey</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> properties.keySet();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection&lt;Object&gt; <span class=\"title\">getAllValues</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> properties.values();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Map&lt;String, Object&gt; <span class=\"title\">getAllKeyValue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Map&lt;String, Object&gt; mapAll = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        Set&lt;Object&gt; keys = getAllKey();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Object key1 : keys) &#123;</span><br><span class=\"line\">            String key = key1.toString();</span><br><span class=\"line\">            mapAll.put(key, properties.get(key));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mapAll;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 根据Properties配置文件名称获取配置文件对象</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> propsFileName Properties配置文件名称（从ClassPath根下获取） 可以不带扩展名</span><br><span class=\"line\">     *                      eg.根目录下有个common.properties,那么可以传“common”或者“common.properties”</span><br><span class=\"line\">     *                      根目录下有个config文件夹，里面存在common.properties,那么可以传“config/common”或者“config/common.properties”</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> Properties对象</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Properties <span class=\"title\">getProperties</span><span class=\"params\">(String propsFileName)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (propsFileName == <span class=\"keyword\">null</span> || propsFileName.equals(<span class=\"string\">\"\"</span>)) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException();</span><br><span class=\"line\">        Properties properties = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">        InputStream inputStream = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (propsFileName.lastIndexOf(PROPERTY_FILE_SUFFIX) == -<span class=\"number\">1</span>) &#123;<span class=\"comment\">//加入文件名后缀</span></span><br><span class=\"line\">                    propsFileName += PROPERTY_FILE_SUFFIX;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">//写法1：</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream(propsFileName);</span></span><br><span class=\"line\">                <span class=\"comment\">//写法2：</span></span><br><span class=\"line\"><span class=\"comment\">//                URL url = Thread.currentThread().getContextClassLoader().getResource(propsFileName);</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = url.openStream();</span></span><br><span class=\"line\">                <span class=\"comment\">//写法3：</span></span><br><span class=\"line\">                inputStream = PropertiesLoader.class.getClassLoader().getResourceAsStream(propsFileName);</span><br><span class=\"line\">                <span class=\"comment\">//写法4：</span></span><br><span class=\"line\"><span class=\"comment\">//                URL url = PropertyUtil.class.getClassLoader().getResource(propsFileName);</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = url.openStream();</span></span><br><span class=\"line\">                <span class=\"comment\">//写法5：</span></span><br><span class=\"line\"><span class=\"comment\">//                inputStream = PropertiesLoader.class.getResourceAsStream(\"/\" + propsFileName);</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != inputStream) properties.load(inputStream);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != inputStream) &#123;</span><br><span class=\"line\">                    inputStream.close();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\"><span class=\"comment\">//            LOGGER.error(\"加载属性文件出错!\", e);</span></span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(e.getMessage(), e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> properties;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 载入多个文件</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> propsFileNames</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Properties <span class=\"title\">loadProperties</span><span class=\"params\">(String... propsFileNames)</span> </span>&#123;</span><br><span class=\"line\">        Properties pros = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String propsFileName : propsFileNames) &#123;</span><br><span class=\"line\">            InputStream inputStream = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                inputStream = PropertiesLoader.class.getClassLoader().getResourceAsStream(propsFileName);</span><br><span class=\"line\">                pros.load(inputStream);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">                logger.info(<span class=\"string\">\"Could not load properties from path:\"</span> + propsFileName + <span class=\"string\">\",\"</span> + e.getMessage());</span><br><span class=\"line\">            &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (inputStream != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                        inputStream.close();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">                    logger.info(e.getMessage());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pros;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 根据输入流载入Properties对象</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> inputStream</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Properties <span class=\"title\">loadProperties</span><span class=\"params\">(InputStream inputStream)</span> </span>&#123;</span><br><span class=\"line\">        Properties pros = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\"><span class=\"comment\">//        pros.load(inputStream);</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> (InputStreamReader inputStreamReader = <span class=\"keyword\">new</span> InputStreamReader(inputStream, <span class=\"string\">\"UTF-8\"</span>)) &#123;</span><br><span class=\"line\">            pros.load(inputStreamReader);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            logger.info(e.getMessage());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pros;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>更多请查看GItHub <a href=\"https://github.com/dongxiaoxia/commons/blob/master/utils/src/main/java/xyz/dongxiaoxia/commons/utils/PropertiesLoader.java\">PropertiesLoader</a>类</p>\n"},{"title":"Hello World","_content":"Welcome to [Hexo](http://hexo.io/)! This is your very first post. Check [documentation](http://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](http://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](http://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](http://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](http://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](http://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"title: Hello World\n---\nWelcome to [Hexo](http://hexo.io/)! This is your very first post. Check [documentation](http://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](http://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](http://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](http://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](http://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](http://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2016-05-10T04:46:54.277Z","updated":"2016-05-10T04:46:54.280Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431ola000buco0fp7n7bdp","content":"<p>Welcome to <a href=\"http://hexo.io/\" target=\"_blank\" rel=\"external\">Hexo</a>! This is your very first post. Check <a href=\"http://hexo.io/docs/\" target=\"_blank\" rel=\"external\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"http://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"external\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"external\">GitHub</a>.</p>\n<h2 id=\"Quick_Start\">Quick Start</h2><h3 id=\"Create_a_new_post\">Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"http://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"external\">Writing</a></p>\n<h3 id=\"Run_server\">Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"http://hexo.io/docs/server.html\" target=\"_blank\" rel=\"external\">Server</a></p>\n<h3 id=\"Generate_static_files\">Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"http://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"external\">Generating</a></p>\n<h3 id=\"Deploy_to_remote_sites\">Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"http://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"external\">Deployment</a></p>\n","excerpt":"","more":"<p>Welcome to <a href=\"http://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"http://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"http://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick_Start\">Quick Start</h2><h3 id=\"Create_a_new_post\">Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"http://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run_server\">Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"http://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate_static_files\">Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"http://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy_to_remote_sites\">Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"http://hexo.io/docs/deployment.html\">Deployment</a></p>\n"},{"title":"Spring Boot特点之SpringApplication","date":"2016-08-09T09:20:44.000Z","_content":"\n\n在上一篇文章[开发第一个Spring Boot项目](http://www.dongxiaoxia.xyz/2016/08/04/Spring-Boot-1/ \"开发第一个Spring Boot项目\")我们创建了第一个Spring Boot 项目，主要的代码为：\n```java\n@SpringBootApplication\npublic class DemoApplication {\n   public static void main(String[] args) {\n      SpringApplication.run(DemoApplication.class, args);\n   }\n}\n```\n在`main`方法中引用了`SpringApplication`这个类，`SpringApplication`类通过运行`main`方法提供了一个方便的方法来启动Spring Boot 应用。在许多情况下直接在`main`方法里面调用`SpringApplication`的静态方法`SpringApplication.run`即可。\n\n### 自定义Banner\n\n项目启动后可以看到一个奇葩的玩意：\n```\n.   ____          _            __ _ _\n  /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n  ( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n  \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n  =========|_|==============|___/=/_/_/_/\n  :: Spring Boot ::        (v1.4.0.RELEASE)\n```\n\n这是什么鬼=_=!!  表示看不懂。\n这个是Spring Boot 项目启动时默认的Banner，既然看不懂，那我们来自定义一个自己的Banner吧。\n先上效果图：\n![](/images/spring-boot-two/1.png)\n嗯，感觉不怎么样好像=_= ，怎么做到的呢，很简单，只要在类路径下添加  `banner.txt `文件即可。\nBanner文件不但可以是 `banner.txt`   ，还可以是` banner.gif`, `banner.jpg` 或者`banner.png`  等图片，同样只要放在类路径下即可，效果如下面图片所示。\n![](/images/spring-boot-two/2.png)\n![](/images/spring-boot-two/3.png)\n本项目直接放在`src\\main\\resources`下。\n![](/images/spring-boot-two/4.png)\n可以通过在配置文件`application.yml`下 修改`spring.main.banner-mode`属性决定 是否要在控制台输出(`console`)Banner或记录在log日志下(`log`)，或者不显示Banner图案(`off`)。\n```\nspring:\n  main:\n    banner-mode: \"off\"\n```\n\n### 自定义SpringApplication\n如果SpringApplication默认的配置不满足要求，我们可以创建一个本地的SpringApplication实例在定制自己想要的配置。举个栗子，想要关闭banner我们可以向下面那样，不过先要注释掉application配置文件中相关配置信息。\n```java\nSpringApplication app = new SpringApplication(DemoApplication.class);\napp.setBannerMode(Banner.Mode.OFF);\napp.run(args);\n```\n可以使用编码的方式配置SpringApplication,当然我们也可以用`application.properties`或`application.yml`配置文件来配置。有关SpringApplication的配置选项可以查看SpringApplication [Javadoc](http://docs.spring.io/spring-boot/docs/1.4.0.RELEASE/api/org/springframework/boot/SpringApplication.html) 。\n\n### 流畅的SpringApplication 构建API\n除了使用上面的方式构建SpringApplication，还可以使用`SpringApplicationBuilder`来构建。举个栗子：\n```java\nnew SpringApplicationBuilder()\n      .bannerMode(Banner.Mode.OFF)\n      .sources(Parent.class)\n      .child(DemoApplication.class)\n      .run(args);\n```\n### Application事件与监听器\n除了使用Spring框架的事件之外，SpringApplication也会发送一些额外的事件。\n有些事件是在`ApplicationContext`生成之前就自动触发了，对于这些事件，不能作为`@Bean`注册监听器，可以通过 `SpringApplication.addListeners(…​)` or `SpringApplicationBuilder.listeners(…​) `方法。\n如果不管应用是否已经创建都想要那些监听器被自动注册，可以在项目下添加一个`META-INF / spring.factories`文件，使用 `org.springframework.context.ApplicationListener`关键字配置。如：\n```\norg.springframework.context.ApplicationListener=com.example.project.MyListener\n```\nApplication事件按下列顺序发送，你的应用程序运行：\n\t1.  `ApplicationStartedEvent `：在运行开始前发出，除了监听器和初始化的注册之外的任何处理之前。\n\t2.  `ApplicationEnvironmentPreparedEvent` ： 当在上下文中使用的 Environment 是已知的，但是在创建上下文之前\n\t3. `ApplicationPreparedEvent` : 启动刷新之前，bean定义已经加载之后。\n\t4.  `ApplicationReadyEvent` ： 刷新之后，表明该应用程序已准备好服务请求的任何相关的回调已被处理 之后。\n\t5.  `ApplicationFailedEvent `：如果启动时有异常。\n\n在Spring Boot内部是使用事件来处理各种任务，但通常通常我们不需要使用这些事件。\n\n### Web环境\n一个SpringApplication将尝试创建正确类型的`ApplicationContext`。默认会根据是否在开发一个web 应用使用` AnnotationConfigApplicationContext `或`AnnotationConfigEmbeddedWebApplicationContext `。决定使用web环境的算法其实是十分简单的（基于几个类的存在），想要覆盖这个默认机制可以使用 `setWebEnvironment(boolean webEnvironment)`。\n另外，也可以采取通过调用` setApplicationContextClass(…​)`所使用的`ApplicationContext`的类型来完全控制。通常在JUnit测试中使用` SpringApplication`时会调用 `setWebEnvironment(false)`。\n\n### 访问应用参数\n如果你想要访问通过 `  SpringApplication.run(…​)`得到的应用参数，可以注入一个 `org.springframework.boot.ApplicationArguments` bean。 `ApplicationArguments`接口提供了访问未加工的 String[]参数以及解析后的选项和非选项参数。\n```java\npackage com.example;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.ApplicationArguments;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\n\n/**\n * Created by dongxiaoxia on 2016/8/9.\n */\n@Component\npublic class MyBean {\n\n    @Autowired\n    public MyBean(ApplicationArguments args){\n        boolean debug = args.containsOption(\"debug\");\n        List<String> files = args.getNonOptionArgs();\n        // if run with \"--debug logfile.txt\" debug=true, files=[\"logfile.txt\"]\n    }\n}\n```\n测试一下：\n\n![](/images/spring-boot-two/5.png)\n![](/images/spring-boot-two/6.png)\n![](/images/spring-boot-two/7.png)\n\n\n### 使用ApplicationRunner或CommandLineRunner\n如果需要在springapplication启动之后运行一些特定的代码，可以实现 `ApplicationRunner`或 ` CommandLineRunner `接口。 两个接口以相同的方式工作，并提供了一​​个单一的 `run `方法，该方法将被调用 `SpringApplication.run(…​)`完成之前。\nCommandLineRunner接口提供访问用应用程序参数作为的一个简单的字符串数组，而ApplicationRunner使用上面所讨论的ApplicationArguments接口。\n```java\npackage com.example;\n\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.stereotype.Component;\n\n/**\n * Created by dongxiaoxia on 2016/8/9.\n */\n@Component\npublic class ApplicationRunnerTest implements CommandLineRunner {\n    @Override\n    public void run(String... agrs) throws Exception {\n        //DO something\n        System.out.println(\"+++++++++++++++++++++++++++++++++++++++++++++++++\");\n        for (String arg:agrs){\n            System.out.println(arg);\n        }\n        System.out.println(\"+++++++++++++++++++++++++++++++++++++++++++++++++\");\n    }\n}\n```\n\n如果定义了几个必须在一个特定的顺序调用 的`CommandLineRunner `或 `ApplicationRunner `bean ,你还可以实现` org.springframework.core.Ordered`接口或使用 `org.springframework.core.annotation.Order`注释。\n\n### Application退出\n每一个 `SpringApplication`   都会在JVM注册一个关机钩子以确保 `ApplicationContext   `在退出时优雅的关闭。所有标准的Spring生命周期回调（ 如 `DisposableBean `接口，或 `DisposableBean `注释）都能被使用。\n此外，如果想要在应用结束时返回一个具体的退出代码，可以实现 `org.springframework.boot.ExitCodeGenerator`接口。\n\n### 管理功能\n通过指定` spring.application.admin.enabled`属性，可以使行政相关的特点 。这暴露了在` MBeanServer`平台上的 [SpringApplicationAdminMXBean](https://github.com/spring-projects/spring-boot/tree/v1.4.0.RELEASE/spring-boot/src/main/java/org/springframework/boot/admin/SpringApplicationAdminMXBean.java)。可以使用此功能来远程管理Spring Boot程序。这对任何服务包装器实现也是有用的 。\n\n+ <small>如果你想知道，应用程序正在运行在哪个HTTP端口 ，可以通过local.server.port获取。<small>\n+ <small>启用此功能时，作为MBean暴露的关机方法应用要注意。<small>\n\n\n> 本章完结撒花 V_V\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/Spring Boot特点之SpringApplication.md","raw":"title: Spring Boot特点之SpringApplication\ndate: 2016-08-09 17:20:44\npermalink: Spring-Boot-2\ntags:\n- Spring Boot\ncategories:\n- Spring Boot\n\n---\n\n\n在上一篇文章[开发第一个Spring Boot项目](http://www.dongxiaoxia.xyz/2016/08/04/Spring-Boot-1/ \"开发第一个Spring Boot项目\")我们创建了第一个Spring Boot 项目，主要的代码为：\n```java\n@SpringBootApplication\npublic class DemoApplication {\n   public static void main(String[] args) {\n      SpringApplication.run(DemoApplication.class, args);\n   }\n}\n```\n在`main`方法中引用了`SpringApplication`这个类，`SpringApplication`类通过运行`main`方法提供了一个方便的方法来启动Spring Boot 应用。在许多情况下直接在`main`方法里面调用`SpringApplication`的静态方法`SpringApplication.run`即可。\n\n### 自定义Banner\n\n项目启动后可以看到一个奇葩的玩意：\n```\n.   ____          _            __ _ _\n  /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n  ( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n  \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n  =========|_|==============|___/=/_/_/_/\n  :: Spring Boot ::        (v1.4.0.RELEASE)\n```\n\n这是什么鬼=_=!!  表示看不懂。\n这个是Spring Boot 项目启动时默认的Banner，既然看不懂，那我们来自定义一个自己的Banner吧。\n先上效果图：\n![](/images/spring-boot-two/1.png)\n嗯，感觉不怎么样好像=_= ，怎么做到的呢，很简单，只要在类路径下添加  `banner.txt `文件即可。\nBanner文件不但可以是 `banner.txt`   ，还可以是` banner.gif`, `banner.jpg` 或者`banner.png`  等图片，同样只要放在类路径下即可，效果如下面图片所示。\n![](/images/spring-boot-two/2.png)\n![](/images/spring-boot-two/3.png)\n本项目直接放在`src\\main\\resources`下。\n![](/images/spring-boot-two/4.png)\n可以通过在配置文件`application.yml`下 修改`spring.main.banner-mode`属性决定 是否要在控制台输出(`console`)Banner或记录在log日志下(`log`)，或者不显示Banner图案(`off`)。\n```\nspring:\n  main:\n    banner-mode: \"off\"\n```\n\n### 自定义SpringApplication\n如果SpringApplication默认的配置不满足要求，我们可以创建一个本地的SpringApplication实例在定制自己想要的配置。举个栗子，想要关闭banner我们可以向下面那样，不过先要注释掉application配置文件中相关配置信息。\n```java\nSpringApplication app = new SpringApplication(DemoApplication.class);\napp.setBannerMode(Banner.Mode.OFF);\napp.run(args);\n```\n可以使用编码的方式配置SpringApplication,当然我们也可以用`application.properties`或`application.yml`配置文件来配置。有关SpringApplication的配置选项可以查看SpringApplication [Javadoc](http://docs.spring.io/spring-boot/docs/1.4.0.RELEASE/api/org/springframework/boot/SpringApplication.html) 。\n\n### 流畅的SpringApplication 构建API\n除了使用上面的方式构建SpringApplication，还可以使用`SpringApplicationBuilder`来构建。举个栗子：\n```java\nnew SpringApplicationBuilder()\n      .bannerMode(Banner.Mode.OFF)\n      .sources(Parent.class)\n      .child(DemoApplication.class)\n      .run(args);\n```\n### Application事件与监听器\n除了使用Spring框架的事件之外，SpringApplication也会发送一些额外的事件。\n有些事件是在`ApplicationContext`生成之前就自动触发了，对于这些事件，不能作为`@Bean`注册监听器，可以通过 `SpringApplication.addListeners(…​)` or `SpringApplicationBuilder.listeners(…​) `方法。\n如果不管应用是否已经创建都想要那些监听器被自动注册，可以在项目下添加一个`META-INF / spring.factories`文件，使用 `org.springframework.context.ApplicationListener`关键字配置。如：\n```\norg.springframework.context.ApplicationListener=com.example.project.MyListener\n```\nApplication事件按下列顺序发送，你的应用程序运行：\n\t1.  `ApplicationStartedEvent `：在运行开始前发出，除了监听器和初始化的注册之外的任何处理之前。\n\t2.  `ApplicationEnvironmentPreparedEvent` ： 当在上下文中使用的 Environment 是已知的，但是在创建上下文之前\n\t3. `ApplicationPreparedEvent` : 启动刷新之前，bean定义已经加载之后。\n\t4.  `ApplicationReadyEvent` ： 刷新之后，表明该应用程序已准备好服务请求的任何相关的回调已被处理 之后。\n\t5.  `ApplicationFailedEvent `：如果启动时有异常。\n\n在Spring Boot内部是使用事件来处理各种任务，但通常通常我们不需要使用这些事件。\n\n### Web环境\n一个SpringApplication将尝试创建正确类型的`ApplicationContext`。默认会根据是否在开发一个web 应用使用` AnnotationConfigApplicationContext `或`AnnotationConfigEmbeddedWebApplicationContext `。决定使用web环境的算法其实是十分简单的（基于几个类的存在），想要覆盖这个默认机制可以使用 `setWebEnvironment(boolean webEnvironment)`。\n另外，也可以采取通过调用` setApplicationContextClass(…​)`所使用的`ApplicationContext`的类型来完全控制。通常在JUnit测试中使用` SpringApplication`时会调用 `setWebEnvironment(false)`。\n\n### 访问应用参数\n如果你想要访问通过 `  SpringApplication.run(…​)`得到的应用参数，可以注入一个 `org.springframework.boot.ApplicationArguments` bean。 `ApplicationArguments`接口提供了访问未加工的 String[]参数以及解析后的选项和非选项参数。\n```java\npackage com.example;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.ApplicationArguments;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\n\n/**\n * Created by dongxiaoxia on 2016/8/9.\n */\n@Component\npublic class MyBean {\n\n    @Autowired\n    public MyBean(ApplicationArguments args){\n        boolean debug = args.containsOption(\"debug\");\n        List<String> files = args.getNonOptionArgs();\n        // if run with \"--debug logfile.txt\" debug=true, files=[\"logfile.txt\"]\n    }\n}\n```\n测试一下：\n\n![](/images/spring-boot-two/5.png)\n![](/images/spring-boot-two/6.png)\n![](/images/spring-boot-two/7.png)\n\n\n### 使用ApplicationRunner或CommandLineRunner\n如果需要在springapplication启动之后运行一些特定的代码，可以实现 `ApplicationRunner`或 ` CommandLineRunner `接口。 两个接口以相同的方式工作，并提供了一​​个单一的 `run `方法，该方法将被调用 `SpringApplication.run(…​)`完成之前。\nCommandLineRunner接口提供访问用应用程序参数作为的一个简单的字符串数组，而ApplicationRunner使用上面所讨论的ApplicationArguments接口。\n```java\npackage com.example;\n\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.stereotype.Component;\n\n/**\n * Created by dongxiaoxia on 2016/8/9.\n */\n@Component\npublic class ApplicationRunnerTest implements CommandLineRunner {\n    @Override\n    public void run(String... agrs) throws Exception {\n        //DO something\n        System.out.println(\"+++++++++++++++++++++++++++++++++++++++++++++++++\");\n        for (String arg:agrs){\n            System.out.println(arg);\n        }\n        System.out.println(\"+++++++++++++++++++++++++++++++++++++++++++++++++\");\n    }\n}\n```\n\n如果定义了几个必须在一个特定的顺序调用 的`CommandLineRunner `或 `ApplicationRunner `bean ,你还可以实现` org.springframework.core.Ordered`接口或使用 `org.springframework.core.annotation.Order`注释。\n\n### Application退出\n每一个 `SpringApplication`   都会在JVM注册一个关机钩子以确保 `ApplicationContext   `在退出时优雅的关闭。所有标准的Spring生命周期回调（ 如 `DisposableBean `接口，或 `DisposableBean `注释）都能被使用。\n此外，如果想要在应用结束时返回一个具体的退出代码，可以实现 `org.springframework.boot.ExitCodeGenerator`接口。\n\n### 管理功能\n通过指定` spring.application.admin.enabled`属性，可以使行政相关的特点 。这暴露了在` MBeanServer`平台上的 [SpringApplicationAdminMXBean](https://github.com/spring-projects/spring-boot/tree/v1.4.0.RELEASE/spring-boot/src/main/java/org/springframework/boot/admin/SpringApplicationAdminMXBean.java)。可以使用此功能来远程管理Spring Boot程序。这对任何服务包装器实现也是有用的 。\n\n+ <small>如果你想知道，应用程序正在运行在哪个HTTP端口 ，可以通过local.server.port获取。<small>\n+ <small>启用此功能时，作为MBean暴露的关机方法应用要注意。<small>\n\n\n> 本章完结撒花 V_V\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"Spring-Boot-2","published":1,"updated":"2016-08-09T09:55:22.432Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431ole000euco0e0bcs3sa","content":"<p>在上一篇文章<a href=\"http://www.dongxiaoxia.xyz/2016/08/04/Spring-Boot-1/\" title=\"开发第一个Spring Boot项目\">开发第一个Spring Boot项目</a>我们创建了第一个Spring Boot 项目，主要的代码为：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoApplication</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">      SpringApplication.run(DemoApplication.class, args);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>在<code>main</code>方法中引用了<code>SpringApplication</code>这个类，<code>SpringApplication</code>类通过运行<code>main</code>方法提供了一个方便的方法来启动Spring Boot 应用。在许多情况下直接在<code>main</code>方法里面调用<code>SpringApplication</code>的静态方法<code>SpringApplication.run</code>即可。</p>\n<h3 id=\"自定义Banner\">自定义Banner</h3><p>项目启动后可以看到一个奇葩的玩意：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.   ____          _            __ _ _</span><br><span class=\"line\">  /\\\\ / ___&apos;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\</span><br><span class=\"line\">  ( ( )\\___ | &apos;_ | &apos;_| | &apos;_ \\/ _` | \\ \\ \\ \\</span><br><span class=\"line\">  \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class=\"line\">  &apos;  |____| .__|_| |_|_| |_\\__, | / / / /</span><br><span class=\"line\">  =========|_|==============|___/=/_/_/_/</span><br><span class=\"line\">  :: Spring Boot ::        (v1.4.0.RELEASE)</span><br></pre></td></tr></table></figure></p>\n<p>这是什么鬼=<em>=!!  表示看不懂。<br>这个是Spring Boot 项目启动时默认的Banner，既然看不懂，那我们来自定义一个自己的Banner吧。<br>先上效果图：<br><img src=\"/images/spring-boot-two/1.png\" alt=\"\"><br>嗯，感觉不怎么样好像=</em>= ，怎么做到的呢，很简单，只要在类路径下添加  <code>banner.txt</code>文件即可。<br>Banner文件不但可以是 <code>banner.txt</code>   ，还可以是<code>banner.gif</code>, <code>banner.jpg</code> 或者<code>banner.png</code>  等图片，同样只要放在类路径下即可，效果如下面图片所示。<br><img src=\"/images/spring-boot-two/2.png\" alt=\"\"><br><img src=\"/images/spring-boot-two/3.png\" alt=\"\"><br>本项目直接放在<code>src\\main\\resources</code>下。<br><img src=\"/images/spring-boot-two/4.png\" alt=\"\"><br>可以通过在配置文件<code>application.yml</code>下 修改<code>spring.main.banner-mode</code>属性决定 是否要在控制台输出(<code>console</code>)Banner或记录在log日志下(<code>log</code>)，或者不显示Banner图案(<code>off</code>)。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\">  main:</span><br><span class=\"line\">    banner-mode: &quot;off&quot;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"自定义SpringApplication\">自定义SpringApplication</h3><p>如果SpringApplication默认的配置不满足要求，我们可以创建一个本地的SpringApplication实例在定制自己想要的配置。举个栗子，想要关闭banner我们可以向下面那样，不过先要注释掉application配置文件中相关配置信息。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SpringApplication app = <span class=\"keyword\">new</span> SpringApplication(DemoApplication.class);</span><br><span class=\"line\">app.setBannerMode(Banner.Mode.OFF);</span><br><span class=\"line\">app.run(args);</span><br></pre></td></tr></table></figure></p>\n<p>可以使用编码的方式配置SpringApplication,当然我们也可以用<code>application.properties</code>或<code>application.yml</code>配置文件来配置。有关SpringApplication的配置选项可以查看SpringApplication <a href=\"http://docs.spring.io/spring-boot/docs/1.4.0.RELEASE/api/org/springframework/boot/SpringApplication.html\" target=\"_blank\" rel=\"external\">Javadoc</a> 。</p>\n<h3 id=\"流畅的SpringApplication_构建API\">流畅的SpringApplication 构建API</h3><p>除了使用上面的方式构建SpringApplication，还可以使用<code>SpringApplicationBuilder</code>来构建。举个栗子：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> SpringApplicationBuilder()</span><br><span class=\"line\">      .bannerMode(Banner.Mode.OFF)</span><br><span class=\"line\">      .sources(Parent.class)</span><br><span class=\"line\">      .child(DemoApplication.class)</span><br><span class=\"line\">      .run(args);</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Application事件与监听器\">Application事件与监听器</h3><p>除了使用Spring框架的事件之外，SpringApplication也会发送一些额外的事件。<br>有些事件是在<code>ApplicationContext</code>生成之前就自动触发了，对于这些事件，不能作为<code>@Bean</code>注册监听器，可以通过 <code>SpringApplication.addListeners(…​)</code> or <code>SpringApplicationBuilder.listeners(…​)</code>方法。<br>如果不管应用是否已经创建都想要那些监听器被自动注册，可以在项目下添加一个<code>META-INF / spring.factories</code>文件，使用 <code>org.springframework.context.ApplicationListener</code>关键字配置。如：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">org.springframework.context.ApplicationListener=com.example.project.MyListener</span><br></pre></td></tr></table></figure></p>\n<p>Application事件按下列顺序发送，你的应用程序运行：</p>\n<pre><code><span class=\"number\">1</span>.  <span class=\"escape\">`A</span>pplicationStartedEvent <span class=\"escape\">`：</span>在运行开始前发出，除了监听器和初始化的注册之外的任何处理之前。\n<span class=\"number\">2</span>.  <span class=\"escape\">`A</span>pplicationEnvironmentPreparedEvent<span class=\"escape\">` </span>： 当在上下文中使用的 Environment 是已知的，但是在创建上下文之前\n<span class=\"number\">3</span>. <span class=\"escape\">`A</span>pplicationPreparedEvent<span class=\"escape\">` </span>: 启动刷新之前，bean定义已经加载之后。\n<span class=\"number\">4</span>.  <span class=\"escape\">`A</span>pplicationReadyEvent<span class=\"escape\">` </span>： 刷新之后，表明该应用程序已准备好服务请求的任何相关的回调已被处理 之后。\n<span class=\"number\">5</span>.  <span class=\"escape\">`A</span>pplicationFailedEvent <span class=\"escape\">`：</span>如果启动时有异常。\n</code></pre><p>在Spring Boot内部是使用事件来处理各种任务，但通常通常我们不需要使用这些事件。</p>\n<h3 id=\"Web环境\">Web环境</h3><p>一个SpringApplication将尝试创建正确类型的<code>ApplicationContext</code>。默认会根据是否在开发一个web 应用使用<code>AnnotationConfigApplicationContext</code>或<code>AnnotationConfigEmbeddedWebApplicationContext</code>。决定使用web环境的算法其实是十分简单的（基于几个类的存在），想要覆盖这个默认机制可以使用 <code>setWebEnvironment(boolean webEnvironment)</code>。<br>另外，也可以采取通过调用<code>setApplicationContextClass(…​)</code>所使用的<code>ApplicationContext</code>的类型来完全控制。通常在JUnit测试中使用<code>SpringApplication</code>时会调用 <code>setWebEnvironment(false)</code>。</p>\n<h3 id=\"访问应用参数\">访问应用参数</h3><p>如果你想要访问通过 <code>SpringApplication.run(…​)</code>得到的应用参数，可以注入一个 <code>org.springframework.boot.ApplicationArguments</code> bean。 <code>ApplicationArguments</code>接口提供了访问未加工的 String[]参数以及解析后的选项和非选项参数。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.ApplicationArguments;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Created by dongxiaoxia on 2016/8/9.</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBean</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyBean</span><span class=\"params\">(ApplicationArguments args)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> debug = args.containsOption(<span class=\"string\">\"debug\"</span>);</span><br><span class=\"line\">        List&lt;String&gt; files = args.getNonOptionArgs();</span><br><span class=\"line\">        <span class=\"comment\">// if run with \"--debug logfile.txt\" debug=true, files=[\"logfile.txt\"]</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>测试一下：</p>\n<p><img src=\"/images/spring-boot-two/5.png\" alt=\"\"><br><img src=\"/images/spring-boot-two/6.png\" alt=\"\"><br><img src=\"/images/spring-boot-two/7.png\" alt=\"\"></p>\n<h3 id=\"使用ApplicationRunner或CommandLineRunner\">使用ApplicationRunner或CommandLineRunner</h3><p>如果需要在springapplication启动之后运行一些特定的代码，可以实现 <code>ApplicationRunner</code>或 <code>CommandLineRunner</code>接口。 两个接口以相同的方式工作，并提供了一​​个单一的 <code>run</code>方法，该方法将被调用 <code>SpringApplication.run(…​)</code>完成之前。<br>CommandLineRunner接口提供访问用应用程序参数作为的一个简单的字符串数组，而ApplicationRunner使用上面所讨论的ApplicationArguments接口。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Created by dongxiaoxia on 2016/8/9.</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationRunnerTest</span> <span class=\"keyword\">implements</span> <span class=\"title\">CommandLineRunner</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">(String... agrs)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//DO something</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"+++++++++++++++++++++++++++++++++++++++++++++++++\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String arg:agrs)&#123;</span><br><span class=\"line\">            System.out.println(arg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"+++++++++++++++++++++++++++++++++++++++++++++++++\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>如果定义了几个必须在一个特定的顺序调用 的<code>CommandLineRunner</code>或 <code>ApplicationRunner</code>bean ,你还可以实现<code>org.springframework.core.Ordered</code>接口或使用 <code>org.springframework.core.annotation.Order</code>注释。</p>\n<h3 id=\"Application退出\">Application退出</h3><p>每一个 <code>SpringApplication</code>   都会在JVM注册一个关机钩子以确保 <code>ApplicationContext</code>在退出时优雅的关闭。所有标准的Spring生命周期回调（ 如 <code>DisposableBean</code>接口，或 <code>DisposableBean</code>注释）都能被使用。<br>此外，如果想要在应用结束时返回一个具体的退出代码，可以实现 <code>org.springframework.boot.ExitCodeGenerator</code>接口。</p>\n<h3 id=\"管理功能\">管理功能</h3><p>通过指定<code>spring.application.admin.enabled</code>属性，可以使行政相关的特点 。这暴露了在<code>MBeanServer</code>平台上的 <a href=\"https://github.com/spring-projects/spring-boot/tree/v1.4.0.RELEASE/spring-boot/src/main/java/org/springframework/boot/admin/SpringApplicationAdminMXBean.java\" target=\"_blank\" rel=\"external\">SpringApplicationAdminMXBean</a>。可以使用此功能来远程管理Spring Boot程序。这对任何服务包装器实现也是有用的 。</p>\n<ul>\n<li><small>如果你想知道，应用程序正在运行在哪个HTTP端口 ，可以通过local.server.port获取。<small></small></small></li>\n<li><small>启用此功能时，作为MBean暴露的关机方法应用要注意。<small></small></small></li>\n</ul>\n<blockquote>\n<p>本章完结撒花 V_V</p>\n</blockquote>\n","excerpt":"","more":"<p>在上一篇文章<a href=\"http://www.dongxiaoxia.xyz/2016/08/04/Spring-Boot-1/\" title=\"开发第一个Spring Boot项目\">开发第一个Spring Boot项目</a>我们创建了第一个Spring Boot 项目，主要的代码为：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoApplication</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">      SpringApplication.run(DemoApplication.class, args);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>在<code>main</code>方法中引用了<code>SpringApplication</code>这个类，<code>SpringApplication</code>类通过运行<code>main</code>方法提供了一个方便的方法来启动Spring Boot 应用。在许多情况下直接在<code>main</code>方法里面调用<code>SpringApplication</code>的静态方法<code>SpringApplication.run</code>即可。</p>\n<h3 id=\"自定义Banner\">自定义Banner</h3><p>项目启动后可以看到一个奇葩的玩意：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.   ____          _            __ _ _</span><br><span class=\"line\">  /\\\\ / ___&apos;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\</span><br><span class=\"line\">  ( ( )\\___ | &apos;_ | &apos;_| | &apos;_ \\/ _` | \\ \\ \\ \\</span><br><span class=\"line\">  \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class=\"line\">  &apos;  |____| .__|_| |_|_| |_\\__, | / / / /</span><br><span class=\"line\">  =========|_|==============|___/=/_/_/_/</span><br><span class=\"line\">  :: Spring Boot ::        (v1.4.0.RELEASE)</span><br></pre></td></tr></table></figure></p>\n<p>这是什么鬼=<em>=!!  表示看不懂。<br>这个是Spring Boot 项目启动时默认的Banner，既然看不懂，那我们来自定义一个自己的Banner吧。<br>先上效果图：<br><img src=\"/images/spring-boot-two/1.png\" alt=\"\"><br>嗯，感觉不怎么样好像=</em>= ，怎么做到的呢，很简单，只要在类路径下添加  <code>banner.txt</code>文件即可。<br>Banner文件不但可以是 <code>banner.txt</code>   ，还可以是<code>banner.gif</code>, <code>banner.jpg</code> 或者<code>banner.png</code>  等图片，同样只要放在类路径下即可，效果如下面图片所示。<br><img src=\"/images/spring-boot-two/2.png\" alt=\"\"><br><img src=\"/images/spring-boot-two/3.png\" alt=\"\"><br>本项目直接放在<code>src\\main\\resources</code>下。<br><img src=\"/images/spring-boot-two/4.png\" alt=\"\"><br>可以通过在配置文件<code>application.yml</code>下 修改<code>spring.main.banner-mode</code>属性决定 是否要在控制台输出(<code>console</code>)Banner或记录在log日志下(<code>log</code>)，或者不显示Banner图案(<code>off</code>)。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\">  main:</span><br><span class=\"line\">    banner-mode: &quot;off&quot;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"自定义SpringApplication\">自定义SpringApplication</h3><p>如果SpringApplication默认的配置不满足要求，我们可以创建一个本地的SpringApplication实例在定制自己想要的配置。举个栗子，想要关闭banner我们可以向下面那样，不过先要注释掉application配置文件中相关配置信息。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SpringApplication app = <span class=\"keyword\">new</span> SpringApplication(DemoApplication.class);</span><br><span class=\"line\">app.setBannerMode(Banner.Mode.OFF);</span><br><span class=\"line\">app.run(args);</span><br></pre></td></tr></table></figure></p>\n<p>可以使用编码的方式配置SpringApplication,当然我们也可以用<code>application.properties</code>或<code>application.yml</code>配置文件来配置。有关SpringApplication的配置选项可以查看SpringApplication <a href=\"http://docs.spring.io/spring-boot/docs/1.4.0.RELEASE/api/org/springframework/boot/SpringApplication.html\">Javadoc</a> 。</p>\n<h3 id=\"流畅的SpringApplication_构建API\">流畅的SpringApplication 构建API</h3><p>除了使用上面的方式构建SpringApplication，还可以使用<code>SpringApplicationBuilder</code>来构建。举个栗子：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> SpringApplicationBuilder()</span><br><span class=\"line\">      .bannerMode(Banner.Mode.OFF)</span><br><span class=\"line\">      .sources(Parent.class)</span><br><span class=\"line\">      .child(DemoApplication.class)</span><br><span class=\"line\">      .run(args);</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Application事件与监听器\">Application事件与监听器</h3><p>除了使用Spring框架的事件之外，SpringApplication也会发送一些额外的事件。<br>有些事件是在<code>ApplicationContext</code>生成之前就自动触发了，对于这些事件，不能作为<code>@Bean</code>注册监听器，可以通过 <code>SpringApplication.addListeners(…​)</code> or <code>SpringApplicationBuilder.listeners(…​)</code>方法。<br>如果不管应用是否已经创建都想要那些监听器被自动注册，可以在项目下添加一个<code>META-INF / spring.factories</code>文件，使用 <code>org.springframework.context.ApplicationListener</code>关键字配置。如：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">org.springframework.context.ApplicationListener=com.example.project.MyListener</span><br></pre></td></tr></table></figure></p>\n<p>Application事件按下列顺序发送，你的应用程序运行：</p>\n<pre><code><span class=\"number\">1</span>.  <span class=\"escape\">`A</span>pplicationStartedEvent <span class=\"escape\">`：</span>在运行开始前发出，除了监听器和初始化的注册之外的任何处理之前。\n<span class=\"number\">2</span>.  <span class=\"escape\">`A</span>pplicationEnvironmentPreparedEvent<span class=\"escape\">` </span>： 当在上下文中使用的 Environment 是已知的，但是在创建上下文之前\n<span class=\"number\">3</span>. <span class=\"escape\">`A</span>pplicationPreparedEvent<span class=\"escape\">` </span>: 启动刷新之前，bean定义已经加载之后。\n<span class=\"number\">4</span>.  <span class=\"escape\">`A</span>pplicationReadyEvent<span class=\"escape\">` </span>： 刷新之后，表明该应用程序已准备好服务请求的任何相关的回调已被处理 之后。\n<span class=\"number\">5</span>.  <span class=\"escape\">`A</span>pplicationFailedEvent <span class=\"escape\">`：</span>如果启动时有异常。\n</code></pre><p>在Spring Boot内部是使用事件来处理各种任务，但通常通常我们不需要使用这些事件。</p>\n<h3 id=\"Web环境\">Web环境</h3><p>一个SpringApplication将尝试创建正确类型的<code>ApplicationContext</code>。默认会根据是否在开发一个web 应用使用<code>AnnotationConfigApplicationContext</code>或<code>AnnotationConfigEmbeddedWebApplicationContext</code>。决定使用web环境的算法其实是十分简单的（基于几个类的存在），想要覆盖这个默认机制可以使用 <code>setWebEnvironment(boolean webEnvironment)</code>。<br>另外，也可以采取通过调用<code>setApplicationContextClass(…​)</code>所使用的<code>ApplicationContext</code>的类型来完全控制。通常在JUnit测试中使用<code>SpringApplication</code>时会调用 <code>setWebEnvironment(false)</code>。</p>\n<h3 id=\"访问应用参数\">访问应用参数</h3><p>如果你想要访问通过 <code>SpringApplication.run(…​)</code>得到的应用参数，可以注入一个 <code>org.springframework.boot.ApplicationArguments</code> bean。 <code>ApplicationArguments</code>接口提供了访问未加工的 String[]参数以及解析后的选项和非选项参数。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.ApplicationArguments;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Created by dongxiaoxia on 2016/8/9.</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBean</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyBean</span><span class=\"params\">(ApplicationArguments args)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> debug = args.containsOption(<span class=\"string\">\"debug\"</span>);</span><br><span class=\"line\">        List&lt;String&gt; files = args.getNonOptionArgs();</span><br><span class=\"line\">        <span class=\"comment\">// if run with \"--debug logfile.txt\" debug=true, files=[\"logfile.txt\"]</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>测试一下：</p>\n<p><img src=\"/images/spring-boot-two/5.png\" alt=\"\"><br><img src=\"/images/spring-boot-two/6.png\" alt=\"\"><br><img src=\"/images/spring-boot-two/7.png\" alt=\"\"></p>\n<h3 id=\"使用ApplicationRunner或CommandLineRunner\">使用ApplicationRunner或CommandLineRunner</h3><p>如果需要在springapplication启动之后运行一些特定的代码，可以实现 <code>ApplicationRunner</code>或 <code>CommandLineRunner</code>接口。 两个接口以相同的方式工作，并提供了一​​个单一的 <code>run</code>方法，该方法将被调用 <code>SpringApplication.run(…​)</code>完成之前。<br>CommandLineRunner接口提供访问用应用程序参数作为的一个简单的字符串数组，而ApplicationRunner使用上面所讨论的ApplicationArguments接口。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Created by dongxiaoxia on 2016/8/9.</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationRunnerTest</span> <span class=\"keyword\">implements</span> <span class=\"title\">CommandLineRunner</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">(String... agrs)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//DO something</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"+++++++++++++++++++++++++++++++++++++++++++++++++\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String arg:agrs)&#123;</span><br><span class=\"line\">            System.out.println(arg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"+++++++++++++++++++++++++++++++++++++++++++++++++\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>如果定义了几个必须在一个特定的顺序调用 的<code>CommandLineRunner</code>或 <code>ApplicationRunner</code>bean ,你还可以实现<code>org.springframework.core.Ordered</code>接口或使用 <code>org.springframework.core.annotation.Order</code>注释。</p>\n<h3 id=\"Application退出\">Application退出</h3><p>每一个 <code>SpringApplication</code>   都会在JVM注册一个关机钩子以确保 <code>ApplicationContext</code>在退出时优雅的关闭。所有标准的Spring生命周期回调（ 如 <code>DisposableBean</code>接口，或 <code>DisposableBean</code>注释）都能被使用。<br>此外，如果想要在应用结束时返回一个具体的退出代码，可以实现 <code>org.springframework.boot.ExitCodeGenerator</code>接口。</p>\n<h3 id=\"管理功能\">管理功能</h3><p>通过指定<code>spring.application.admin.enabled</code>属性，可以使行政相关的特点 。这暴露了在<code>MBeanServer</code>平台上的 <a href=\"https://github.com/spring-projects/spring-boot/tree/v1.4.0.RELEASE/spring-boot/src/main/java/org/springframework/boot/admin/SpringApplicationAdminMXBean.java\">SpringApplicationAdminMXBean</a>。可以使用此功能来远程管理Spring Boot程序。这对任何服务包装器实现也是有用的 。</p>\n<ul>\n<li><small>如果你想知道，应用程序正在运行在哪个HTTP端口 ，可以通过local.server.port获取。<small></li>\n<li><small>启用此功能时，作为MBean暴露的关机方法应用要注意。<small></li>\n</ul>\n<blockquote>\n<p>本章完结撒花 V_V</p>\n</blockquote>\n"},{"title":"Date、String、Calendar三种时间类型的转换","date":"2015-12-23T15:22:44.000Z","_content":"常见的三种java时间类型的转换，好记性不如烂笔头！\n```java\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Date;\n\n/**\n * Created by dongxiaoxia on 2015/7/31.\n * 三种常见时间类型转换\n */\npublic class Test {\n    public static void main(String arg0[]){\n        System.out.println(getLastDayOfMonth());\n        System.out.println(CalendarToString(Calendar.getInstance(), \"yyyy-MM-dd HH:mm:ss\"));\n\n    }\n\n    public static Date getLastDayOfMonth(){\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.DAY_OF_MONTH, calendar\n                .getActualMaximum(Calendar.DAY_OF_MONTH));\n        calendar.set(Calendar.HOUR,23);\n        calendar.set(Calendar.MINUTE, 59);\n        calendar.set(Calendar.SECOND, 59);\n        return calendar.getTime();\n    }\n\n\t//String 转换为 Date\n    public static Date StringToDate(String strDate,String pattern) {\n        java.text.SimpleDateFormat sdf = new  java.text.SimpleDateFormat(pattern);//yyyy-mm-dd\n        Date date = null;\n        try {\n            date = sdf.parse(strDate);\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        return date;\n    }\n    \n\t//Date 转换为String\n    public static String DateToString(Date date,String pattern){\n        SimpleDateFormat sdf= new SimpleDateFormat(pattern);\n        String dateStr=sdf.format(date);\n        return dateStr;\n    }\n\n\t//Date 转换为 Calendar\n    public static Calendar DateToCalendar(Date date){\n        Calendar calendar = Calendar.getInstance();\n        calendar.setTime(date);\n        return  calendar;\n    }\n\n\t//Calendar 转换为 Date\n    public static Date CalendarToDate(Calendar calendar){\n       Date date =calendar.getTime();\n        return  date;\n    }\n\n\t//Calendar 转换为 String\n    public static String CalendarToString(Calendar calendar,String pattern){\n        //获取当前时间的具体情况,如年,月,日,week,date,分,秒等\n        Calendar calendat = Calendar.getInstance();\n        SimpleDateFormat sdf = new SimpleDateFormat(pattern);\n        String dateStr = sdf.format(calendar.getTime());\n        return dateStr;\n    }\n\n\t//String 转换为 Calendar\n    public static Calendar StringToCalendar(String strDate,String pattern){\n        SimpleDateFormat sdf= new SimpleDateFormat(pattern);\n        Date date = null;\n        try {\n            date = sdf.parse(strDate);\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        Calendar calendar = Calendar.getInstance();\n        calendar.setTime(date);\n        return calendar;\n    }\n\n}\n```\n\n\n\n\n","source":"_posts/Date、String、Calendar三种时间类型的转换.md","raw":"title: Date、String、Calendar三种时间类型的转换\ndate: 2015-12-23 23:22:44\npermalink: java00001\ntags:\n- Java\ncategories:\n- Java\n\n---\n常见的三种java时间类型的转换，好记性不如烂笔头！\n```java\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Date;\n\n/**\n * Created by dongxiaoxia on 2015/7/31.\n * 三种常见时间类型转换\n */\npublic class Test {\n    public static void main(String arg0[]){\n        System.out.println(getLastDayOfMonth());\n        System.out.println(CalendarToString(Calendar.getInstance(), \"yyyy-MM-dd HH:mm:ss\"));\n\n    }\n\n    public static Date getLastDayOfMonth(){\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.DAY_OF_MONTH, calendar\n                .getActualMaximum(Calendar.DAY_OF_MONTH));\n        calendar.set(Calendar.HOUR,23);\n        calendar.set(Calendar.MINUTE, 59);\n        calendar.set(Calendar.SECOND, 59);\n        return calendar.getTime();\n    }\n\n\t//String 转换为 Date\n    public static Date StringToDate(String strDate,String pattern) {\n        java.text.SimpleDateFormat sdf = new  java.text.SimpleDateFormat(pattern);//yyyy-mm-dd\n        Date date = null;\n        try {\n            date = sdf.parse(strDate);\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        return date;\n    }\n    \n\t//Date 转换为String\n    public static String DateToString(Date date,String pattern){\n        SimpleDateFormat sdf= new SimpleDateFormat(pattern);\n        String dateStr=sdf.format(date);\n        return dateStr;\n    }\n\n\t//Date 转换为 Calendar\n    public static Calendar DateToCalendar(Date date){\n        Calendar calendar = Calendar.getInstance();\n        calendar.setTime(date);\n        return  calendar;\n    }\n\n\t//Calendar 转换为 Date\n    public static Date CalendarToDate(Calendar calendar){\n       Date date =calendar.getTime();\n        return  date;\n    }\n\n\t//Calendar 转换为 String\n    public static String CalendarToString(Calendar calendar,String pattern){\n        //获取当前时间的具体情况,如年,月,日,week,date,分,秒等\n        Calendar calendat = Calendar.getInstance();\n        SimpleDateFormat sdf = new SimpleDateFormat(pattern);\n        String dateStr = sdf.format(calendar.getTime());\n        return dateStr;\n    }\n\n\t//String 转换为 Calendar\n    public static Calendar StringToCalendar(String strDate,String pattern){\n        SimpleDateFormat sdf= new SimpleDateFormat(pattern);\n        Date date = null;\n        try {\n            date = sdf.parse(strDate);\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        Calendar calendar = Calendar.getInstance();\n        calendar.setTime(date);\n        return calendar;\n    }\n\n}\n```\n\n\n\n\n","slug":"java00001","published":1,"updated":"2016-05-10T04:46:54.261Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431oli000guco00ebgy3ju","content":"<p>常见的三种java时间类型的转换，好记性不如烂笔头！<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.text.ParseException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.text.SimpleDateFormat;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Calendar;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Created by dongxiaoxia on 2015/7/31.</span><br><span class=\"line\"> * 三种常见时间类型转换</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String arg0[])</span></span>&#123;</span><br><span class=\"line\">        System.out.println(getLastDayOfMonth());</span><br><span class=\"line\">        System.out.println(CalendarToString(Calendar.getInstance(), <span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Date <span class=\"title\">getLastDayOfMonth</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        SimpleDateFormat simpleDateFormat = <span class=\"keyword\">new</span> SimpleDateFormat(<span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>);</span><br><span class=\"line\">        Calendar calendar = Calendar.getInstance();</span><br><span class=\"line\">        calendar.set(Calendar.DAY_OF_MONTH, calendar</span><br><span class=\"line\">                .getActualMaximum(Calendar.DAY_OF_MONTH));</span><br><span class=\"line\">        calendar.set(Calendar.HOUR,<span class=\"number\">23</span>);</span><br><span class=\"line\">        calendar.set(Calendar.MINUTE, <span class=\"number\">59</span>);</span><br><span class=\"line\">        calendar.set(Calendar.SECOND, <span class=\"number\">59</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> calendar.getTime();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//String 转换为 Date</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Date <span class=\"title\">StringToDate</span><span class=\"params\">(String strDate,String pattern)</span> </span>&#123;</span><br><span class=\"line\">        java.text.SimpleDateFormat sdf = <span class=\"keyword\">new</span>  java.text.SimpleDateFormat(pattern);<span class=\"comment\">//yyyy-mm-dd</span></span><br><span class=\"line\">        Date date = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            date = sdf.parse(strDate);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ParseException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> date;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">\t<span class=\"comment\">//Date 转换为String</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">DateToString</span><span class=\"params\">(Date date,String pattern)</span></span>&#123;</span><br><span class=\"line\">        SimpleDateFormat sdf= <span class=\"keyword\">new</span> SimpleDateFormat(pattern);</span><br><span class=\"line\">        String dateStr=sdf.format(date);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dateStr;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//Date 转换为 Calendar</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Calendar <span class=\"title\">DateToCalendar</span><span class=\"params\">(Date date)</span></span>&#123;</span><br><span class=\"line\">        Calendar calendar = Calendar.getInstance();</span><br><span class=\"line\">        calendar.setTime(date);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>  calendar;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//Calendar 转换为 Date</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Date <span class=\"title\">CalendarToDate</span><span class=\"params\">(Calendar calendar)</span></span>&#123;</span><br><span class=\"line\">       Date date =calendar.getTime();</span><br><span class=\"line\">        <span class=\"keyword\">return</span>  date;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//Calendar 转换为 String</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">CalendarToString</span><span class=\"params\">(Calendar calendar,String pattern)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//获取当前时间的具体情况,如年,月,日,week,date,分,秒等</span></span><br><span class=\"line\">        Calendar calendat = Calendar.getInstance();</span><br><span class=\"line\">        SimpleDateFormat sdf = <span class=\"keyword\">new</span> SimpleDateFormat(pattern);</span><br><span class=\"line\">        String dateStr = sdf.format(calendar.getTime());</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dateStr;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//String 转换为 Calendar</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Calendar <span class=\"title\">StringToCalendar</span><span class=\"params\">(String strDate,String pattern)</span></span>&#123;</span><br><span class=\"line\">        SimpleDateFormat sdf= <span class=\"keyword\">new</span> SimpleDateFormat(pattern);</span><br><span class=\"line\">        Date date = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            date = sdf.parse(strDate);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ParseException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Calendar calendar = Calendar.getInstance();</span><br><span class=\"line\">        calendar.setTime(date);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> calendar;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","excerpt":"","more":"<p>常见的三种java时间类型的转换，好记性不如烂笔头！<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.text.ParseException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.text.SimpleDateFormat;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Calendar;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Created by dongxiaoxia on 2015/7/31.</span><br><span class=\"line\"> * 三种常见时间类型转换</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String arg0[])</span></span>&#123;</span><br><span class=\"line\">        System.out.println(getLastDayOfMonth());</span><br><span class=\"line\">        System.out.println(CalendarToString(Calendar.getInstance(), <span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Date <span class=\"title\">getLastDayOfMonth</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        SimpleDateFormat simpleDateFormat = <span class=\"keyword\">new</span> SimpleDateFormat(<span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>);</span><br><span class=\"line\">        Calendar calendar = Calendar.getInstance();</span><br><span class=\"line\">        calendar.set(Calendar.DAY_OF_MONTH, calendar</span><br><span class=\"line\">                .getActualMaximum(Calendar.DAY_OF_MONTH));</span><br><span class=\"line\">        calendar.set(Calendar.HOUR,<span class=\"number\">23</span>);</span><br><span class=\"line\">        calendar.set(Calendar.MINUTE, <span class=\"number\">59</span>);</span><br><span class=\"line\">        calendar.set(Calendar.SECOND, <span class=\"number\">59</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> calendar.getTime();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//String 转换为 Date</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Date <span class=\"title\">StringToDate</span><span class=\"params\">(String strDate,String pattern)</span> </span>&#123;</span><br><span class=\"line\">        java.text.SimpleDateFormat sdf = <span class=\"keyword\">new</span>  java.text.SimpleDateFormat(pattern);<span class=\"comment\">//yyyy-mm-dd</span></span><br><span class=\"line\">        Date date = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            date = sdf.parse(strDate);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ParseException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> date;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">\t<span class=\"comment\">//Date 转换为String</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">DateToString</span><span class=\"params\">(Date date,String pattern)</span></span>&#123;</span><br><span class=\"line\">        SimpleDateFormat sdf= <span class=\"keyword\">new</span> SimpleDateFormat(pattern);</span><br><span class=\"line\">        String dateStr=sdf.format(date);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dateStr;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//Date 转换为 Calendar</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Calendar <span class=\"title\">DateToCalendar</span><span class=\"params\">(Date date)</span></span>&#123;</span><br><span class=\"line\">        Calendar calendar = Calendar.getInstance();</span><br><span class=\"line\">        calendar.setTime(date);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>  calendar;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//Calendar 转换为 Date</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Date <span class=\"title\">CalendarToDate</span><span class=\"params\">(Calendar calendar)</span></span>&#123;</span><br><span class=\"line\">       Date date =calendar.getTime();</span><br><span class=\"line\">        <span class=\"keyword\">return</span>  date;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//Calendar 转换为 String</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">CalendarToString</span><span class=\"params\">(Calendar calendar,String pattern)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//获取当前时间的具体情况,如年,月,日,week,date,分,秒等</span></span><br><span class=\"line\">        Calendar calendat = Calendar.getInstance();</span><br><span class=\"line\">        SimpleDateFormat sdf = <span class=\"keyword\">new</span> SimpleDateFormat(pattern);</span><br><span class=\"line\">        String dateStr = sdf.format(calendar.getTime());</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dateStr;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//String 转换为 Calendar</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Calendar <span class=\"title\">StringToCalendar</span><span class=\"params\">(String strDate,String pattern)</span></span>&#123;</span><br><span class=\"line\">        SimpleDateFormat sdf= <span class=\"keyword\">new</span> SimpleDateFormat(pattern);</span><br><span class=\"line\">        Date date = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            date = sdf.parse(strDate);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ParseException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Calendar calendar = Calendar.getInstance();</span><br><span class=\"line\">        calendar.setTime(date);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> calendar;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"test.md","date":"2016-04-22T17:19:03.000Z","_content":"","source":"_posts/test-md.md","raw":"title: test.md\ndate: 2016-04-23 01:19:03\ntags: \n- test\n---\n","slug":"test-md","published":1,"updated":"2016-05-10T04:46:54.283Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431oll000iuco0loxo8fg2","content":"","excerpt":"","more":""},{"title":"微信公众号支付","date":"2017-01-19T07:27:44.000Z","_content":"\n微信支付功能模块是一个可以抽离的模块，因此controller、service等集中放在一个包下管理。\n由于业务需求，现在与OrderController、OrderService集成耦合。\n本文档是根据实际项目抽取总结出来的，很多代码可以根据实际开发进一步更改完善。\n\n# 最终实现目标\n1. 实现微信公众号支付功能\n2. 实现微信公众号退款功能\n3. 本文档附加了大部分的支付模块源码，通过本文档就能抽取出一个独立的支付模块，方便快速开发。\n\n# 准备条件\n1. [微信支付|商户平台](https://pay.weixin.qq.com/index.php)的账号\n    - 这个不归程序员准备，略过\n    - 商户平台的账号必须与公众号的配置对应，在公众号的微信支付模块设置\n    \n2. 一个可以在公网访问的公众号\n   - 微信支付不能在localhost测试\n   - 微信支付不能在微信web开发者工具上测试，只能在手机真实试验\n   - 公众号相关配置的要配置设置好\n   \n# 微信支付思路\n1. 应该存在一个支付页面，假设页面很简单，上面就一个支付按钮，用户点击按钮就能够完成支付。\n2. 用户点击的时候，Ajax 调用后台创建接口接口。\n3. 创建订单接口首先会创建一个未付款的订单，订单的参数如价格、数量、订单号、等可以根据业务自定义。\n4. 创建订单后，会调用微信提供的统一下单接口，微信会根据我们传递的参数，生成一个预支付交易会话标识（prepay_id，就是通过这个来识别该订单的），返回给后台。\n5. 后台接收到prepay_id后，构造微信支付所需要的参数，把参数返回给客户端。\n6. 客户端之前发起的 Ajax 请求，接收到成功的响应后，拿接收到的参数调用JSAPI支付接口，向微信发起支付。\n7. 如果之前的步骤都成功，微信会弹出支付页面，让用户输入密码支付。\n8. 支付成功后微信会跳转H5页面，并且异步通知后台支付结果，后台进一步处理订单，如标记订单付款成功，更新订单日志。\n\n简而言之，服务器创建订单，触发微信支付，支付后微信异步回调，服务器修改订单状态。\n\n# 简单实现微信支付的两个功能\n## 公众号支付\n### 1.下单\n第一步，根据业务生成未支付的订单，调用微信支付统一下单接口，获取微信支付统一订单号 prepay_id ，有了这个才能进一步支付；调起微信支付，获取微信支付下单结果信息集合，集合信息为供页面调用微信JS_API的一些字段信息。\n\n#### 下单（未付款）方法\n\n````java\n\n    private static final String NOTIFY_URL = Global.getConfig(\"domainName\") + \"/pay/notify\";//微信支付回调接口\n    private static final String PAY_RESULT_URL = Global.getConfig(\"domainName\") + \"/pay/result\";//微信支付结果页面接口\n    private static final String PAY_BODY = \"牙齐齐服务\";\n    \n    /**\n     * 下单（但付款）\n     *\n     * @param items           订单对应项目\n     * @param owner           订单拥有者\n     * @return 微信支付下单结果信息集合\n     */\n    public Map add(Items items, User owner) {\n        Order order = new Order();\n        order.setItems(items);\n        order.setPayMoney(items.getPrice());\n        order.setStatus(OrderStatus.NEED_PAY.getCode());\n        order.setPayResult(PayResult.NEED_PAY.getCode());\n        this.save(order);\n        //支付倒计时，定时删除未支付的订单\n        TIMER.schedule(new TimeoutTask(order.getId()), DEFAULT_VALIDITY_TIME);\n        //调用微信支付统一下单接口，获取微信支付统一订单号\n        String res = payService.unifiedorder(NOTIFY_URL, owner.getOpenId(), PAY_BODY, String.valueOf(order.getPayMoney()), order.getId());\n        //调起微信支付，获取微信支付下单结果信息集合\n        return payService.wechatPay(res, PAY_RESULT_URL);\n    }\n   \n````    \n\n#### 微信支付统一下单接口\n\n````java\n    /**\n     * 微信支付统一下单接口\n     *\n     * @param notifyUrl    支付成功后回调路径\n     * @param openId       用户的 openId\n     * @param body         商品描述\n     * @param total        支付金额（单位分）\n     * @param out_trade_no 订单唯一订单号\n     * @return\n     */\n    public String unifiedorder(String notifyUrl, String openId, String body, String total, String out_trade_no) {\n        WechatPayModel xml = new WechatPayModel();\n        xml.setAppid(Global.getConfig(\"appid\"));\n        xml.setMch_id(Global.getConfig(\"mchid\"));\n        xml.setNonce_str(encoder.createNonceStr());\n        xml.setBody(body);\n        xml.setOut_trade_no(out_trade_no);\n        xml.setTotal_fee(total);\n        xml.setSpbill_create_ip(\"127.0.0.1\");//// TODO: 2016/6/28\n        xml.setNotify_url(notifyUrl);\n        xml.setTrade_type(\"JSAPI\");\n        xml.setOpenid(openId);\n        xml.sign(encoder);\n\n        String result = restTemplate.postForObject(\"https://api.mch.weixin.qq.com/pay/unifiedorder\", xml, String.class);\n        return result;\n    }\n    \n````\n\n#### 获取页面调用所需参数\n\n需要注意的是支付不能在微信开发者接口测试，只能在手机上测试哦！\n\n````java\n     /**\n     * 调起微信支付\n     *\n     * @param model\n     * @param res   预支付订单 字符串\n     * @param url   微信支付 url\n     */\n    public void wechatPay(Model model, String res, String url) {\n        try {\n            Map<String, String> start = new HashMap<>();\n            StringBuilder startSign = new StringBuilder();\n            Map<String, String> pay = new HashMap<>();\n            StringBuilder paySign = new StringBuilder();\n            Map map = XmlHelper.of(res).toMap();\n            if (StringUtils.equals((String) map.get(\"return_code\"), \"SUCCESS\")) {\n                // 得到的预支付订单，重新生成微信支付参数\n                String prepay_id = (String) map.get(\"prepay_id\");\n                String jsapi_ticket = TicketManager.getDefaultTicket();\n                // 生成 微信支付 config 参数\n                start.put(\"appId\", Global.getConfig(\"appid\"));\n                start.put(\"nonceStr\", encoder.createNonceStr());\n                start.put(\"timestamp\", encoder.createTimeStamp());\n                // 生成 config 签名\n                startSign.append(\"jsapi_ticket=\").append(jsapi_ticket);\n                startSign.append(\"&noncestr=\").append(start.get(\"nonceStr\"));\n                startSign.append(\"&timestamp=\").append(start.get(\"timestamp\"));\n                startSign.append(\"&url=\").append(url);\n                start.put(\"signature\", encoder.encode(startSign.toString()));\n\n                // config信息验证后会执行ready方法的参数\n                pay.put(\"signType\", \"MD5\");\n                pay.put(\"packageStr\", \"prepay_id=\" + prepay_id);\n                // 生成支付签名\n                paySign.append(\"appId=\").append(start.get(\"appId\"));\n                paySign.append(\"&nonceStr=\").append(start.get(\"nonceStr\"));\n                paySign.append(\"&package=\").append(pay.get(\"packageStr\"));\n                paySign.append(\"&signType=\").append(pay.get(\"signType\"));\n                paySign.append(\"&timeStamp=\").append(start.get(\"timestamp\"));\n                paySign.append(\"&key=\").append(Global.getConfig(\"payKey\"));\n                pay.put(\"paySign\", encoder.encode(paySign.toString()));\n                // 将微信支参数放入 model 对象中以便前端使用\n                model.addAttribute(\"start\", start);\n                model.addAttribute(\"pay\", pay);\n            } else {\n                LOGGER.error(new String(PaymentKit.xmlToMap(res).get(\"return_msg\").getBytes(\"iso8859-1\")));\n            }\n        } catch (Exception e) {\n            model.addAttribute(\"wechatMessage\", \"微信授权失败!\");\n            LOGGER.error(e.getMessage(), e);\n        }\n    }\n````\n\n\n### 2.支付\n支付页面源码：\n````html\n\n<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\n<%@ include file=\"/WEB-INF/views/include/taglib.jsp\" %>\n<html lang=\"en\">\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\"/>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=${ctxStatic}edge\">\n    <%@include file=\"/WEB-INF/views/include/css.jsp\" %>\n    <title>确认订单</title>\n</head>\n<body ontouchstart=\"\">\n<a onclick=\"addOrder()\" href=\"javascript:;\" class=\"weui_btn weui_btn_primary\" style=\"margin: 0rem 1rem\">支付</a>\n<%@include file=\"/WEB-INF/views/include/js.jsp\" %>\n\n<script type=\"text/javascript\" charset=\"UTF-8\" src=\"https://res.wx.qq.com/open/js/jweixin-1.0.0.js\"></script>\n<script type=\"text/javascript\">\n\n    function addOrder() {\n        var itemsId = '${items.id}';\n        $.showLoading(\"正在处理...\");\n        $.post(\"${ctx}/order\", {itemsId: itemsId}, function (result) {\n            $.hideLoading();\n            if (result && result.success) {\n                $.hideLoading();\n                pay(result.data);\n            } else {\n                $.toptip(result.message, 'error');\n            }\n        })\n    }\n\n    //微信支付\n    function pay(data) {\n\n        //config\n        var appId = data.start.appId;\n        var timeStamp = data.start.timestamp;\n        var nonceStr = data.start.nonceStr;\n        var signature = data.start.signature;\n\n        var signType = data.pay.signType;\n        var pk = data.pay.packageStr;\n        var paySign = data.pay.paySign;\n\n        wx.config({\n            debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n            appId: appId, // 必填，公众号的唯一标识\n            timestamp: timeStamp, // 必填，生成签名的时间戳\n            nonceStr: nonceStr, // 必填，生成签名的随机串\n            signature: signature,// 必填，签名，见附录1\n            jsApiList: ['chooseWXPay'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n        });\n\n        wx.ready(function (res) {\n            // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。\n            wx.chooseWXPay({\n                timestamp: timeStamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\n                nonceStr: nonceStr, // 支付签名随机串，不长于 32 位\n                package: pk, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=***）\n                signType: signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\n                paySign: paySign, // 支付签名\n                success: function (res) {\n                    location.href = 'http://' + location.host + '/order';\n                },\n                cancel: function (res) {\n                },\n                fail: function (res) {\n                    $.toptip('支付失败！', 'error');\n                }\n            });\n        });\n\n        wx.error(function (res) {\n            alert(\"error:\" + JSON.stringify(res));\n        });\n    }\n</script>\n</body>\n</html>\n\n````\n### 3.支付回调\n在第一步时我们有配置了两个参数，其中：\n PAY_RESULT_URL 为微信支付成功后跳转的页面URL\n NOTIFY_URL 为支付成功后微信回调触发的接口，通过触发，完成服务器订单付款状态的更改\n \n 可能会对这个接口感到奇怪，我们明明没有在项目中调用过这个接口啊。\n 要理解这个接口就要理解回调的概念，这里就详细解释回调的含义的，只需明白，这个是专门提供给微信调用的就行了，发起支付时，是在微信上实现的，我们并不知道支付的结果，只能等微信主动通知我们。\n \n ````java\n /**\n      * 微信支付成功后的回调函数\n      *\n      * @param request\n      * @return\n      */\n     @RequestMapping(value = \"/notify\", method = RequestMethod.POST)\n     @ResponseBody\n     public String wechatNotify(HttpServletRequest request) {\n         // 从 request 对象中获取 WechatNotify 对象\n         WechatNotify notify = getNotifyBean(request);\n         // 如果 notify 对象不为空 并且 result_code 和 return_code 都为 'SUCCESS' 则表示支付成功\n         if (StringUtils.equals(notify.getResult_code(), \"SUCCESS\") && StringUtils.equals(notify.getReturn_code(), \"SUCCESS\")) {\n             try {\n                 orderService.update(notify.getOut_trade_no(), notify.getTime_end());\n             } catch (Exception e) {\n                 logger.error(e.getMessage(), e);\n                 return \"<xml>\\n<return_code><![CDATA[FAIL]]></return_code>\\n<return_msg><![CDATA[ERROR]]></return_msg>\\n</xml>\";\n             }\n             return \"<xml>\\n<return_code><![CDATA[SUCCESS]]></return_code>\\n<return_msg><![CDATA[OK]]></return_msg>\\n</xml>\";\n         }\n         return \"<xml>\\n<return_code><![CDATA[FAIL]]></return_code>\\n<return_msg><![CDATA[ERROR]]></return_msg>\\n</xml>\";\n     }\n ````\n \n## 退款\n退款相对于付款就麻烦一点，因为给钱给微信与向微信拿钱肯定不一样。\n首先就是证书的下载与放置到项目中，略。\n剩下就是调用微信退款接口，部分代码如下：\n\n````java\n  /**\n     * 退款\n     *\n     * @param order 订单\n     */\n    public void refund(Order order) {\n        //1. 微信退款\n        boolean refundResult = payService.refund(order.getId(), order.getId(), String.valueOf(order.getPayMoney()), String.valueOf(order.getPayMoney()));\n        if (!refundResult) {\n            throw new OrderException(\"退款失败\");\n        }\n        //2.处理订单\n        try {\n            order.setStatus(OrderStatus.REFUNDED.getCode());\n            order.setRefundTime(new Date());\n            order.setRefundedTime(new Date());\n            save(order);\n        } catch (Exception e) {\n            LOGGER.error(e.getMessage(), e);\n            throw new OrderException(\"退款失败，请联系客服\");\n        }\n    }\n    \n    \n     /**\n         * 退款\n         * @return\n         */\n        public boolean refund(String out_refund_no,String out_trade_no,String refund_fee,String total_fee) {\n            WechatRefundModel xml = new WechatRefundModel();\n            xml.setAppid(Global.getConfig(\"appid\"));\n            xml.setMch_id(Global.getConfig(\"mchid\"));\n            xml.setNonce_str(encoder.createNonceStr());\n            xml.setOp_user_id(Global.getConfig(\"mchid\"));\n            xml.setOut_refund_no(out_refund_no);\n            xml.setOut_trade_no(out_trade_no);\n            xml.setRefund_fee(refund_fee);\n            xml.setTotal_fee(total_fee);\n            xml.sign(encoder);\n            try {\n                String result = doRefund(\"https://api.mch.weixin.qq.com/secapi/pay/refund\",xml.toString());\n                Map map = XmlHelper.of(result).toMap();\n                String returnCode = (String) map.get(\"return_code\");\n                if (returnCode.equals(\"SUCCESS\")){\n                    //todo\n                    LOGGER.error(\"=============================\"+map.get(\"return_msg\")+ \"====================================\");\n                    return true;\n                }else {\n                    LOGGER.error(\"=============================\"+map.get(\"return_msg\")+ \"====================================\");\n                    return false;\n                }\n            }catch (Exception e){\n                LOGGER.error(e.getMessage(), e);\n                return false;\n            }\n        }\n    \n        private  String doRefund(String url,String data) throws Exception {\n            KeyStore keyStore  = KeyStore.getInstance(\"PKCS12\");\n            InputStream instream = this.getClass().getClassLoader().getResourceAsStream(\"apiclient_cert.p12\");//P12文件目录\n            char[] password = Global.getConfig(\"mchid\").toCharArray();\n            try {\n                keyStore.load(instream, password);//这里写密码..默认是你的MCHID\n            } finally {\n                instream.close();\n            }\n            SSLContext sslcontext = SSLContexts.custom()\n                    .loadKeyMaterial(keyStore, password)//这里也是写密码的\n                    .build();\n            // Allow TLSv1 protocol only\n            SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n                    sslcontext,\n                    new String[] { \"TLSv1\" },\n                    null,\n                    SSLConnectionSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);\n            CloseableHttpClient httpclient = HttpClients.custom()\n                    .setSSLSocketFactory(sslsf)\n                    .build();\n            try {\n                HttpPost httpost = new HttpPost(url); // 设置响应头信息\n                httpost.addHeader(\"Connection\", \"keep-alive\");\n                httpost.addHeader(\"Accept\", \"*/*\");\n                httpost.addHeader(\"Content-Type\", \"application/x-www-form-urlencoded; charset=UTF-8\");\n                httpost.addHeader(\"Host\", \"api.mch.weixin.qq.com\");\n                httpost.addHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                httpost.addHeader(\"Cache-Control\", \"max-age=0\");\n                httpost.addHeader(\"User-Agent\", \"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0) \");\n                httpost.setEntity(new StringEntity(data, \"UTF-8\"));\n                CloseableHttpResponse response = httpclient.execute(httpost);\n                try {\n                    HttpEntity entity = response.getEntity();\n    \n                    String jsonStr = EntityUtils.toString(response.getEntity(), \"UTF-8\");\n                    EntityUtils.consume(entity);\n                    return jsonStr;\n                } finally {\n                    response.close();\n                }\n            } finally {\n                httpclient.close();\n            }\n        }\n````\n\n\n\n# 源码\n## PayController.java\n\n````java\n\npackage xyz.dongxiaoxia.weixin.pay;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.ResponseBody;\nimport xyz.dongxiaoxia.common.config.Global;\nimport xyz.dongxiaoxia.common.controller.BaseController;\nimport xyz.dongxiaoxia.common.utils.StringUtils;\nimport xyz.dongxiaoxia.modules.entity.Order;\nimport xyz.dongxiaoxia.modules.entity.User;\nimport xyz.dongxiaoxia.modules.service.OrderService;\nimport xyz.dongxiaoxia.modules.service.UserService;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.xml.bind.JAXBContext;\nimport javax.xml.bind.JAXBException;\nimport javax.xml.bind.Unmarshaller;\nimport java.io.DataInputStream;\nimport java.io.IOException;\nimport java.io.StringReader;\n\n/**\n * Created by dongxiaoxia on 2016/12/29.\n */\n@Controller\n@RequestMapping(value = \"pay\")\npublic class PayController extends BaseController {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(PayController.class);\n\n    @Autowired\n    private PayService payService;\n\n    @Autowired\n    private OrderService orderService;\n\n    @Autowired\n    private UserService userService;\n\n    /**\n     * 支付完成页面\n     *\n     * @return 跳转支付完成页面，由微信端支付完成后自动跳转\n     */\n    @RequestMapping(\"result\")\n    public String result() {\n        return \"pay/result\";\n    }\n\n    /**\n     * 微信支付成功后的回调函数\n     *\n     * @param request\n     * @return\n     */\n    @RequestMapping(value = \"/notify\", method = RequestMethod.POST)\n    @ResponseBody\n    public String wechatNotify(HttpServletRequest request) {\n        // 从 request 对象中获取 WechatNotify 对象\n        WechatNotify notify = getNotifyBean(request);\n        // 如果 notify 对象不为空 并且 result_code 和 return_code 都为 'SUCCESS' 则表示支付成功\n        if (StringUtils.equals(notify.getResult_code(), \"SUCCESS\") && StringUtils.equals(notify.getReturn_code(), \"SUCCESS\")) {\n            try {\n                orderService.update(notify.getOut_trade_no(), notify.getTime_end());\n            } catch (Exception e) {\n                logger.error(e.getMessage(), e);\n                return \"<xml>\\n<return_code><![CDATA[FAIL]]></return_code>\\n<return_msg><![CDATA[ERROR]]></return_msg>\\n</xml>\";\n            }\n            return \"<xml>\\n<return_code><![CDATA[SUCCESS]]></return_code>\\n<return_msg><![CDATA[OK]]></return_msg>\\n</xml>\";\n        }\n        return \"<xml>\\n<return_code><![CDATA[FAIL]]></return_code>\\n<return_msg><![CDATA[ERROR]]></return_msg>\\n</xml>\";\n    }\n\n    /**\n     * 微信回调成功后 将 xml 转换为  WechatNotify 对象\n     *\n     * @param request\n     * @return WechatNotify 对象\n     */\n    public static WechatNotify getNotifyBean(HttpServletRequest request) {\n        try {\n            DataInputStream in = new DataInputStream(request.getInputStream());\n            byte[] dataOrigin = new byte[request.getContentLength()];\n            // 根据长度，将消息实体的内容读入字节数组dataOrigin中\n            in.readFully(dataOrigin);\n            // 关闭数据流\n            in.close();\n            // 从字节数组中得到表示实体的字符串\n            String xml = new String(dataOrigin);\n            // 将 xml 转换为  WechatNotify 对象\n            Object object;\n            try {\n                JAXBContext jc = JAXBContext.newInstance(WechatNotify.class);\n                Unmarshaller us = jc.createUnmarshaller();\n                object = us.unmarshal(new StringReader(xml));\n            } catch (JAXBException e) {\n                e.printStackTrace();\n                object = null;\n            }\n            if (object != null && object instanceof WechatNotify) {\n                WechatNotify notify = (WechatNotify) object;\n                return notify;\n            } else {\n                return null;\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n            return null;\n        }\n    }\n}\n\n\n````\n\n## PayService.java 支付回调控制器\n   \n````java\npackage xyz.dongxiaoxia.weixin.pay;\n\n\nimport com.jfinal.weixin.sdk.kit.PaymentKit;\nimport com.jfinal.weixin.sdk.utils.XmlHelper;\nimport org.apache.http.HttpEntity;\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.conn.ssl.SSLContexts;\nimport org.apache.http.entity.StringEntity;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.util.EntityUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Service;\nimport org.springframework.ui.Model;\nimport org.springframework.web.client.RestTemplate;\nimport xyz.dongxiaoxia.common.config.Global;\nimport xyz.dongxiaoxia.common.utils.StringUtils;\n\nimport javax.net.ssl.SSLContext;\nimport java.io.InputStream;\nimport java.security.KeyStore;\nimport java.util.HashMap;\nimport java.util.Map;\n\n/**\n * @author dongxiaoxia\n * @create 2016-06-28 11:15\n */\n\n@Service\npublic class PayService {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(PayService.class);\n\n    SignMD5 encoder = new SignMD5();\n    RestTemplate restTemplate = new RestTemplate();\n\n    /**\n     * 微信支付统一下单接口\n     *\n     * @param notifyUrl    支付成功后回调路径\n     * @param openId       用户的 openId\n     * @param body         商品描述\n     * @param total        支付金额（单位分）\n     * @param out_trade_no 订单唯一订单号\n     * @return\n     */\n    public String unifiedorder(String notifyUrl, String openId, String body, String total, String out_trade_no) {\n        WechatPayModel xml = new WechatPayModel();\n        xml.setAppid(Global.getConfig(\"appid\"));\n        xml.setMch_id(Global.getConfig(\"mchid\"));\n        xml.setNonce_str(encoder.createNonceStr());\n        xml.setBody(body);\n        xml.setOut_trade_no(out_trade_no);\n        xml.setTotal_fee(total);\n        xml.setSpbill_create_ip(\"127.0.0.1\");//// TODO: 2016/6/28\n        xml.setNotify_url(notifyUrl);\n        xml.setTrade_type(\"JSAPI\");\n        xml.setOpenid(openId);\n        xml.sign(encoder);\n\n        String result = restTemplate.postForObject(\"https://api.mch.weixin.qq.com/pay/unifiedorder\", xml, String.class);\n        return result;\n    }\n\n    /**\n     * 调起微信支付\n     *\n     * @param model\n     * @param res   预支付订单 字符串\n     * @param url   微信支付 url\n     */\n    public void wechatPay(Model model, String res, String url) {\n        try {\n            Map<String, String> start = new HashMap<>();\n            StringBuilder startSign = new StringBuilder();\n            Map<String, String> pay = new HashMap<>();\n            StringBuilder paySign = new StringBuilder();\n            Map map = XmlHelper.of(res).toMap();\n            if (StringUtils.equals((String) map.get(\"return_code\"), \"SUCCESS\")) {\n                // 得到的预支付订单，重新生成微信支付参数\n                String prepay_id = (String) map.get(\"prepay_id\");\n                String jsapi_ticket = TicketManager.getDefaultTicket();\n                // 生成 微信支付 config 参数\n                start.put(\"appId\", Global.getConfig(\"appid\"));\n                start.put(\"nonceStr\", encoder.createNonceStr());\n                start.put(\"timestamp\", encoder.createTimeStamp());\n                // 生成 config 签名\n                startSign.append(\"jsapi_ticket=\").append(jsapi_ticket);\n                startSign.append(\"&noncestr=\").append(start.get(\"nonceStr\"));\n                startSign.append(\"&timestamp=\").append(start.get(\"timestamp\"));\n                startSign.append(\"&url=\").append(url);\n                start.put(\"signature\", encoder.encode(startSign.toString()));\n\n                // config信息验证后会执行ready方法的参数\n                pay.put(\"signType\", \"MD5\");\n                pay.put(\"packageStr\", \"prepay_id=\" + prepay_id);\n                // 生成支付签名\n                paySign.append(\"appId=\").append(start.get(\"appId\"));\n                paySign.append(\"&nonceStr=\").append(start.get(\"nonceStr\"));\n                paySign.append(\"&package=\").append(pay.get(\"packageStr\"));\n                paySign.append(\"&signType=\").append(pay.get(\"signType\"));\n                paySign.append(\"&timeStamp=\").append(start.get(\"timestamp\"));\n                paySign.append(\"&key=\").append(Global.getConfig(\"payKey\"));\n                pay.put(\"paySign\", encoder.encode(paySign.toString()));\n                // 将微信支参数放入 model 对象中以便前端使用\n                model.addAttribute(\"start\", start);\n                model.addAttribute(\"pay\", pay);\n            } else {\n                LOGGER.error(new String(PaymentKit.xmlToMap(res).get(\"return_msg\").getBytes(\"iso8859-1\")));\n            }\n        } catch (Exception e) {\n            model.addAttribute(\"wechatMessage\", \"微信授权失败!\");\n            LOGGER.error(e.getMessage(), e);\n        }\n    }\n\n    /**\n     * 调起微信支付\n     *\n     * @param res 预支付订单 字符串\n     * @param url 微信支付 url\n     */\n    public Map wechatPay(String res, String url) {\n        Map<String, Object> result = new HashMap<>();\n        try {\n            Map<String, String> start = new HashMap<>();\n            StringBuilder startSign = new StringBuilder();\n            Map<String, String> pay = new HashMap<>();\n            StringBuilder paySign = new StringBuilder();\n            Map map = XmlHelper.of(res).toMap();\n            if (StringUtils.equals((String) map.get(\"return_code\"), \"SUCCESS\")) {\n                // 得到的预支付订单，重新生成微信支付参数\n                String prepay_id = (String) map.get(\"prepay_id\");\n                String jsapi_ticket = TicketManager.getDefaultTicket();\n                // 生成 微信支付 config 参数\n                start.put(\"appId\", Global.getConfig(\"appid\"));\n                start.put(\"nonceStr\", encoder.createNonceStr());\n                start.put(\"timestamp\", encoder.createTimeStamp());\n                // 生成 config 签名\n                startSign.append(\"jsapi_ticket=\").append(jsapi_ticket);\n                startSign.append(\"&noncestr=\").append(start.get(\"nonceStr\"));\n                startSign.append(\"&timestamp=\").append(start.get(\"timestamp\"));\n                startSign.append(\"&url=\").append(url);\n                start.put(\"signature\", encoder.encode(startSign.toString()));\n\n                // config信息验证后会执行ready方法的参数\n                pay.put(\"signType\", \"MD5\");\n                pay.put(\"packageStr\", \"prepay_id=\" + prepay_id);\n                // 生成支付签名\n                paySign.append(\"appId=\").append(start.get(\"appId\"));\n                paySign.append(\"&nonceStr=\").append(start.get(\"nonceStr\"));\n                paySign.append(\"&package=\").append(pay.get(\"packageStr\"));\n                paySign.append(\"&signType=\").append(pay.get(\"signType\"));\n                paySign.append(\"&timeStamp=\").append(start.get(\"timestamp\"));\n                paySign.append(\"&key=\").append(Global.getConfig(\"payKey\"));\n                pay.put(\"paySign\", encoder.encode(paySign.toString()));\n                // 将微信支参数放入 result 对象中以便前端使用\n                result.put(\"start\", start);\n                result.put(\"pay\", pay);\n            } else {\n                LOGGER.error(new String(PaymentKit.xmlToMap(res).get(\"return_msg\").getBytes(\"iso8859-1\")));\n            }\n        } catch (Exception e) {\n            result.put(\"wechatMessage\", \"微信授权失败!\");\n            LOGGER.error(e.getMessage(), e);\n        }\n        return result;\n    }\n\n    /**\n     * 退款\n     * @return\n     */\n    public boolean refund(String out_refund_no,String out_trade_no,String refund_fee,String total_fee) {\n        WechatRefundModel xml = new WechatRefundModel();\n        xml.setAppid(Global.getConfig(\"appid\"));\n        xml.setMch_id(Global.getConfig(\"mchid\"));\n        xml.setNonce_str(encoder.createNonceStr());\n        xml.setOp_user_id(Global.getConfig(\"mchid\"));\n        xml.setOut_refund_no(out_refund_no);\n        xml.setOut_trade_no(out_trade_no);\n        xml.setRefund_fee(refund_fee);\n        xml.setTotal_fee(total_fee);\n        xml.sign(encoder);\n        try {\n            String result = doRefund(\"https://api.mch.weixin.qq.com/secapi/pay/refund\",xml.toString());\n            Map map = XmlHelper.of(result).toMap();\n            String returnCode = (String) map.get(\"return_code\");\n            if (returnCode.equals(\"SUCCESS\")){\n                //todo\n                LOGGER.error(\"=============================\"+map.get(\"return_msg\")+ \"====================================\");\n                return true;\n            }else {\n                LOGGER.error(\"=============================\"+map.get(\"return_msg\")+ \"====================================\");\n                return false;\n            }\n        }catch (Exception e){\n            LOGGER.error(e.getMessage(), e);\n            return false;\n        }\n    }\n\n    private  String doRefund(String url,String data) throws Exception {\n        KeyStore keyStore  = KeyStore.getInstance(\"PKCS12\");\n        InputStream instream = this.getClass().getClassLoader().getResourceAsStream(\"apiclient_cert.p12\");//P12文件目录\n        char[] password = Global.getConfig(\"mchid\").toCharArray();\n        try {\n            keyStore.load(instream, password);//这里写密码..默认是你的MCHID\n        } finally {\n            instream.close();\n        }\n        SSLContext sslcontext = SSLContexts.custom()\n                .loadKeyMaterial(keyStore, password)//这里也是写密码的\n                .build();\n        // Allow TLSv1 protocol only\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n                sslcontext,\n                new String[] { \"TLSv1\" },\n                null,\n                SSLConnectionSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);\n        CloseableHttpClient httpclient = HttpClients.custom()\n                .setSSLSocketFactory(sslsf)\n                .build();\n        try {\n            HttpPost httpost = new HttpPost(url); // 设置响应头信息\n            httpost.addHeader(\"Connection\", \"keep-alive\");\n            httpost.addHeader(\"Accept\", \"*/*\");\n            httpost.addHeader(\"Content-Type\", \"application/x-www-form-urlencoded; charset=UTF-8\");\n            httpost.addHeader(\"Host\", \"api.mch.weixin.qq.com\");\n            httpost.addHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n            httpost.addHeader(\"Cache-Control\", \"max-age=0\");\n            httpost.addHeader(\"User-Agent\", \"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0) \");\n            httpost.setEntity(new StringEntity(data, \"UTF-8\"));\n            CloseableHttpResponse response = httpclient.execute(httpost);\n            try {\n                HttpEntity entity = response.getEntity();\n\n                String jsonStr = EntityUtils.toString(response.getEntity(), \"UTF-8\");\n                EntityUtils.consume(entity);\n                return jsonStr;\n            } finally {\n                response.close();\n            }\n        } finally {\n            httpclient.close();\n        }\n    }\n}\n````\n\n## OrderController.java 订单控制器\n\n````java\npackage xyz.dongxiaoxia.modules.controller;\n\nimport org.apache.commons.lang3.StringUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.ResponseBody;\nimport xyz.dongxiaoxia.common.controller.BaseController;\nimport xyz.dongxiaoxia.common.utils.DateUtils;\nimport xyz.dongxiaoxia.modules.entity.Clinic;\nimport xyz.dongxiaoxia.modules.entity.Items;\nimport xyz.dongxiaoxia.modules.entity.Order;\nimport xyz.dongxiaoxia.modules.entity.User;\nimport xyz.dongxiaoxia.modules.exception.OrderException;\nimport xyz.dongxiaoxia.modules.service.ItemsService;\nimport xyz.dongxiaoxia.modules.service.OrderService;\nimport xyz.dongxiaoxia.modules.vo.AjaxResult;\nimport xyz.dongxiaoxia.modules.vo.OrderStatus;\n\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\nimport java.io.IOException;\nimport java.util.Date;\nimport java.util.List;\nimport java.util.Map;\n\n/**\n * Created by dongxiaoxia on 2016/12/30.\n * <p>\n * 订单控制器\n */\n@Controller\n@RequestMapping(\"order\")\npublic class OrderController extends BaseController {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(OrderController.class);\n\n    @Autowired\n    private OrderService orderService;\n    @Autowired\n    private ItemsService itemsService;\n\n\n    /**\n     * 我的订单列表首页\n     *\n     * @return 跳转订单首页\n     */\n    @RequestMapping(value = \"\", method = RequestMethod.GET)\n    public String index(HttpSession session, Model model) {\n        User user = (User) session.getAttribute(\"user\");\n        Order order = new Order();\n        order.setCreateBy(user);\n        //查找出当前用户创建的订单列表\n        List<Order> orders = orderService.findList(order);\n        model.addAttribute(\"orders\", orders);\n        return \"order/index\";\n    }\n\n    /**\n     * 订单详情\n     *\n     * @param orderId 订单编号\n     * @return 跳转订单详情页面\n     */\n    @RequestMapping(value = \"{orderId}\", method = RequestMethod.GET)\n    public String detail(@PathVariable String orderId, Model model, HttpServletResponse response, HttpSession session) throws IOException {\n        Order order = orderService.get(orderId);\n        User user = (User) session.getAttribute(\"user\");\n        if (order == null || !order.getCreateBy().getId().equals(user.getId())) {\n            response.sendError(HttpServletResponse.SC_NOT_FOUND);\n            return null;\n        }\n//        orderService.get() 查出来的order中clinic没有关联查询area，因此重新获取\n        Clinic clinic = clinicService.get(order.getClinic().getId());\n        order.setClinic(clinic);\n        model.addAttribute(\"order\", order);\n        return \"order/detail\";\n    }\n\n    /**\n     * 退款\n     *\n     * @param orderId 订单编号\n     * @return 退款操作结果\n     */\n    @ResponseBody\n    @RequestMapping(\"refund/{orderId}\")\n    public AjaxResult refund(@PathVariable String orderId, HttpSession session) {\n        Order order = orderService.get(orderId);\n        if (order == null) {\n            return AjaxResult.fail(\"订单不存在\");\n        }\n        User user = (User) session.getAttribute(\"user\");\n        if (!order.getCreateBy().getId().equals(user.getId())) {\n            return AjaxResult.fail(\"没有权限\");\n        }\n        if (OrderStatus.PAID.getCode() != order.getStatus()) {\n            return AjaxResult.fail(\"不在退款范围\");\n        }\n        try {\n            orderService.refund(order);\n            return AjaxResult.success();\n        }catch (OrderException e){\n            LOGGER.error(e.getMessage(),e);\n            return AjaxResult.fail(e.getMessage());\n        }\n    }\n\n    /**\n     * 下订单（未付款）\n     *\n     * @param itemsId         服务项目编号\n     * @param appointmentTime 预约时间\n     * @return 下订单操作结果\n     */\n    @ResponseBody\n    @RequestMapping(method = RequestMethod.POST)\n    public AjaxResult add(HttpSession session, String itemsId, String appointmentTime) {\n        if (StringUtils.isEmpty(itemsId)) {\n            return AjaxResult.fail(\"itemsId 不能为空\");\n        }\n        if (StringUtils.isEmpty(appointmentTime)) {\n            return AjaxResult.fail(\"appointmentTime 不能为空\");\n        }\n        Items items = itemsService.get(itemsId);\n        if (items == null) {\n            return AjaxResult.fail(\"该服务项目不存在\");\n        }\n        User user = (User) session.getAttribute(\"user\");\n        try {\n            Map result = orderService.add(items, appointmentTime,user); //下订单\n            return AjaxResult.success(result);\n        }catch (Exception e){\n            LOGGER.error(e.getMessage(),e);\n            return AjaxResult.fail(\"支付失败，请稍候再试\");\n        }\n    }\n\n    /**\n     * 跳转确定订单支付页面\n     *\n     * @param itemsId 服务项目编号\n     * @return 支付页面\n     */\n    @RequestMapping(\"create/{itemsId}\")\n    public String create(@PathVariable String itemsId, Model model, HttpServletResponse response) throws IOException {\n        Items items = itemsService.get(itemsId);\n        if (items == null) {\n            response.sendError(HttpServletResponse.SC_NOT_FOUND);\n            return null;\n        }\n        model.addAttribute(\"items\", items);\n        model.addAttribute(\"dateStr\", DateUtils.getDateStr(new Date(), 31, \"yyyy-MM-dd\"));//预约日期范围（今天开始，默认一个月）\n        return \"order/create\";\n    }\n}\n````\n\n## OrderService.java 订单服务器\n\n````java\n\npackage xyz.dongxiaoxia.modules.service;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport xyz.dongxiaoxia.common.config.Global;\nimport xyz.dongxiaoxia.common.service.CrudService;\nimport xyz.dongxiaoxia.common.utils.DateUtils;\nimport xyz.dongxiaoxia.modules.dao.OrderDao;\nimport xyz.dongxiaoxia.modules.entity.Items;\nimport xyz.dongxiaoxia.modules.entity.Order;\nimport xyz.dongxiaoxia.modules.entity.User;\nimport xyz.dongxiaoxia.modules.exception.OrderException;\nimport xyz.dongxiaoxia.modules.vo.OrderStatus;\nimport xyz.dongxiaoxia.modules.vo.PayResult;\nimport xyz.dongxiaoxia.weixin.TemplateMassageUtils;\nimport xyz.dongxiaoxia.weixin.pay.PayService;\n\nimport java.text.ParseException;\nimport java.util.*;\n\n/**\n * Created by dongxiaoxia on 2016/12/30.\n * <p>\n * 订单服务类\n */\n@Service\n@RequestMapping(value = \"order\")\npublic class OrderService extends CrudService<OrderDao, Order> {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(OrderService.class);\n    private static final Timer TIMER = new Timer();\n    private static final int DEFAULT_VALIDITY_TIME = Integer.valueOf(Global.getConfig(\"payTime\"));//默认2分钟\n    private static final String NOTIFY_URL = Global.getConfig(\"domainName\") + \"/pay/notify\";//微信支付回调接口\n    private static final String PAY_RESULT_URL = Global.getConfig(\"domainName\") + \"/pay/result\";//微信支付结果页面接口\n    private static final String PAY_BODY = \"牙齐齐服务\";\n\n    @Autowired\n    private PayService payService;\n\n    /**\n     * 下单（但付款）\n     *\n     * @param items           订单对应项目\n     * @param appointmentTime 预约时间\n     * @param owner           订单拥有者\n     * @return 微信支付下单结果信息集合\n     */\n    public Map add(Items items , User owner) {\n        if (items == null) {\n            throw new IllegalArgumentException(\"items can not be null\");\n        }\n        Order order = new Order();\n        order.setItems(items);\n        order.setPayMoney(items.getPrice());\n        order.setStatus(OrderStatus.NEED_PAY.getCode());\n        order.setPayResult(PayResult.NEED_PAY.getCode());\n        this.save(order);\n        //支付倒计时，定时删除未支付的订单\n        TIMER.schedule(new TimeoutTask(order.getId()), DEFAULT_VALIDITY_TIME);\n        //调用微信支付统一下单接口，获取微信支付统一订单号\n        String res = payService.unifiedorder(NOTIFY_URL, owner.getOpenId(), PAY_BODY, String.valueOf(order.getPayMoney()), order.getId());\n        //调起微信支付，获取微信支付下单结果信息集合\n        return payService.wechatPay(res, PAY_RESULT_URL);\n    }\n\n    /**\n     * 修改订单\n     *\n     * @param orderId 订单编号\n     * @param time 微信支付时间\n     */\n    @Transactional(readOnly = false)\n    public synchronized void update(String orderId, String time) {\n        try {\n            Order order = dao.get(orderId);\n            if (order != null && PayResult.SUCCESS.getCode() != order.getPayResult()) {//订单处于未支付成功状态\n                order.setPayResult(PayResult.SUCCESS.getCode());//设置支付状态\n                order.setStatus(OrderStatus.PAID.getCode());//设置订单状态\n                order.setVoucher(String.valueOf(10000000 + new Random().nextInt(89999999)));//生成服务凭证，预测用户少，不会重复\n                try {\n                    order.setCreateDate(new Date(DateUtils.parseDate(time, \"yyyyMMddHHmmss\").getTime()));//把订单生成时间设置为微信支付成功的时间\n                } catch (ParseException e) {\n                    order.setCreateDate(new Date(System.currentTimeMillis()));\n                }\n                dao.update(order);\n            }\n        } catch (OrderException e) {\n            throw e;\n        } catch (Exception e) {\n            throw new OrderException(e);\n        }\n    }\n\n    /**\n     * 退款\n     *\n     * @param order 订单\n     */\n    public void refund(Order order) {\n        //1. 微信退款\n        boolean refundResult = payService.refund(order.getId(), order.getId(), String.valueOf(order.getPayMoney()), String.valueOf(order.getPayMoney()));\n        if (!refundResult) {\n            throw new OrderException(\"退款失败\");\n        }\n        //2.处理订单\n        try {\n            order.setStatus(OrderStatus.REFUNDED.getCode());\n            order.setRefundTime(new Date());\n            order.setRefundedTime(new Date());\n            save(order);\n        } catch (Exception e) {\n            LOGGER.error(e.getMessage(), e);\n            SmsUtils.notify(Global.getConfig(\"adminMobile\"), order.getId(), \"用户申请退款处理出现异常错误,请及时处理\");\n            throw new OrderException(\"退款失败，请联系客服\");\n        }\n        //3. 发消息模版给用户\n        TemplateMassageUtils.sendRefundOrderSuccessTemplateMessage(order.getCreateBy(), order);\n        //4. 发消息模版给管理员\n        TemplateMassageUtils.sendRefundOrderSuccessTemplateMessageToAdmin(order);\n    }\n\n    /**\n     * 删除过期任务\n     */\n    class TimeoutTask extends TimerTask {\n        private String orderId;\n\n        public TimeoutTask(String orderId) {\n            this.orderId = orderId;\n        }\n\n\n        /**\n         * The action to be performed by this timer task.\n         */\n        @Override\n        public void run() {\n            //删除未支付的订单\n            Order order = dao.get(orderId);\n            if (order == null || PayResult.SUCCESS.getCode() == order.getPayResult()) {\n                return;\n            }\n            order.setId(orderId);\n            dao.delete(order);\n            LOGGER.info(\"========================删除orderID:\" + orderId + \" 订单成功！================================\");\n        }\n    }\n}\n\n\n````\n## Order.java 订单类\n\n````java\n\n/**\n * 实体类-订单\n */\npublic class Order {\n\n    private static final long serialVersionUID = -596545820416981026L;\n\n    private Items items;            //服务项目\n    private int payResult;       //支付结果 (-1,\"待付款\"),(0, \"支付成功\"),(1,\"支付失败\")\n    private int payMoney;         //支付金额,单位（分）\n    private String voucher;         //服务凭证\n    private String appointmentTime; //预约时段\n    private int status;          //服务状态（-1预定，代付款 0已付款，1申请退款，2已退款，9已完成）\n    private Date refundTime;        //请求退款时间\n    private Date refundedTime;      //退款完成时间\n    private Date finishTime;        //服务完成时间\n    \n    //getter and setter\n   }\n\n````\n## SignMD5.java 签名工具类\n\n````java\npackage xyz.dongxiaoxia.weixin.pay;\n\nimport java.io.UnsupportedEncodingException;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.Formatter;\nimport java.util.UUID;\n\n/**\n * @author dongxiaoxia\n * @create 2016-06-28 11:08\n */\n\npublic class SignMD5 {\n    public static String byteToHex(final byte[] hash) {\n        Formatter formatter = new Formatter();\n        for (byte b : hash) {\n            formatter.format(\"%02x\", b);\n        }\n        String result = formatter.toString();\n        formatter.close();\n        return result;\n    }\n\n    public String encode(CharSequence charSequence) {\n        try {\n            MessageDigest crypt = MessageDigest.getInstance(\"MD5\");\n            crypt.reset();\n            crypt.update(charSequence.toString().getBytes(\"UTF-8\"));\n            return byteToHex(crypt.digest());\n        } catch (NoSuchAlgorithmException e) {\n            e.printStackTrace();\n        } catch (UnsupportedEncodingException e) {\n            e.printStackTrace();\n        }\n        return \"\";\n    }\n\n    public boolean matches(CharSequence charSequence, String encodedPassword) {\n        return encode(charSequence).equals(encodedPassword);\n    }\n\n    public String createNonceStr() {\n        return UUID.randomUUID().toString().replaceAll(\"-\",\"\");\n    }\n\n    public String createTimeStamp() {\n        return Long.toString(System.currentTimeMillis() / 1000);\n    }\n\n}\n\n````\n\n## WechatNotify.java 微信支付回调结果封装\n\n````java\n\npackage xyz.dongxiaoxia.weixin.pay;\n\nimport javax.xml.bind.annotation.XmlRootElement;\nimport java.io.Serializable;\n\n/**\n * @author dongxiaoxia\n * @create 2016-06-28 11:10\n */\n\n@XmlRootElement(name=\"xml\")\npublic class WechatNotify implements Serializable {\n\n    private static final long serialVersionUID = 8047707600433551023L;\n    private String appid;\n    private String attach;\n    private String bank_type;\n    private String fee_type;\n    private String is_subscribe;\n    private String mch_id;\n    private String nonce_str;\n    private String openid;\n    private String out_trade_no;\n    private String result_code;\n    private String return_code;\n    private String sign;\n    private String sub_mch_id;\n    private String time_end;\n    private String total_fee;\n    private String trade_type;\n    private String transaction_id;\n\n    public String getAppid() {\n        return appid;\n    }\n\n    public void setAppid(String appid) {\n        this.appid = appid;\n    }\n\n    public String getAttach() {\n        return attach;\n    }\n\n    public void setAttach(String attach) {\n        this.attach = attach;\n    }\n\n    public String getBank_type() {\n        return bank_type;\n    }\n\n    public void setBank_type(String bank_type) {\n        this.bank_type = bank_type;\n    }\n\n    public String getFee_type() {\n        return fee_type;\n    }\n\n    public void setFee_type(String fee_type) {\n        this.fee_type = fee_type;\n    }\n\n    public String getIs_subscribe() {\n        return is_subscribe;\n    }\n\n    public void setIs_subscribe(String is_subscribe) {\n        this.is_subscribe = is_subscribe;\n    }\n\n    public String getMch_id() {\n        return mch_id;\n    }\n\n    public void setMch_id(String mch_id) {\n        this.mch_id = mch_id;\n    }\n\n    public String getNonce_str() {\n        return nonce_str;\n    }\n\n    public void setNonce_str(String nonce_str) {\n        this.nonce_str = nonce_str;\n    }\n\n    public String getOpenid() {\n        return openid;\n    }\n\n    public void setOpenid(String openid) {\n        this.openid = openid;\n    }\n\n    public String getOut_trade_no() {\n        return out_trade_no;\n    }\n\n    public void setOut_trade_no(String out_trade_no) {\n        this.out_trade_no = out_trade_no;\n    }\n\n    public String getResult_code() {\n        return result_code;\n    }\n\n    public void setResult_code(String result_code) {\n        this.result_code = result_code;\n    }\n\n    public String getReturn_code() {\n        return return_code;\n    }\n\n    public void setReturn_code(String return_code) {\n        this.return_code = return_code;\n    }\n\n    public String getSign() {\n        return sign;\n    }\n\n    public void setSign(String sign) {\n        this.sign = sign;\n    }\n\n    public String getSub_mch_id() {\n        return sub_mch_id;\n    }\n\n    public void setSub_mch_id(String sub_mch_id) {\n        this.sub_mch_id = sub_mch_id;\n    }\n\n    public String getTime_end() {\n        return time_end;\n    }\n\n    public void setTime_end(String time_end) {\n        this.time_end = time_end;\n    }\n\n    public String getTotal_fee() {\n        return total_fee;\n    }\n\n    public void setTotal_fee(String total_fee) {\n        this.total_fee = total_fee;\n    }\n\n    public String getTrade_type() {\n        return trade_type;\n    }\n\n    public void setTrade_type(String trade_type) {\n        this.trade_type = trade_type;\n    }\n\n    public String getTransaction_id() {\n        return transaction_id;\n    }\n\n    public void setTransaction_id(String transaction_id) {\n        this.transaction_id = transaction_id;\n    }\n}\n\n\n````\n\n## WechatPayModel.java 微信支付统一订单接口参数封装模型\n\n````java\n\npackage xyz.dongxiaoxia.weixin.pay;\n\nimport xyz.dongxiaoxia.common.config.Global;\n\nimport javax.xml.bind.annotation.XmlRootElement;\n\n/**\n * @author dongxiaoxia\n * @create 2016-06-28 11:11\n */\n\n@XmlRootElement(name = \"XML\")\npublic class WechatPayModel {\n\n    private String appid;\n    private String mch_id;\n    private String nonce_str;\n    private String body;\n    private String out_trade_no;\n    private String total_fee;\n    private String spbill_create_ip;\n    private String notify_url;\n    private String trade_type;\n    private String openid;\n    private String sign;\n\n    public String getAppid() {\n        return appid;\n    }\n\n    public void setAppid(String appid) {\n        this.appid = appid;\n    }\n\n    public String getMch_id() {\n        return mch_id;\n    }\n\n    public void setMch_id(String mch_id) {\n        this.mch_id = mch_id;\n    }\n\n    public String getNonce_str() {\n        return nonce_str;\n    }\n\n    public void setNonce_str(String nonce_str) {\n        this.nonce_str = nonce_str;\n    }\n\n    public String getOut_trade_no() {\n        return out_trade_no;\n    }\n\n    public void setOut_trade_no(String out_trade_no) {\n        this.out_trade_no = out_trade_no;\n    }\n\n    public String getTotal_fee() {\n        return total_fee;\n    }\n\n    public void setTotal_fee(String total_fee) {\n        this.total_fee = total_fee;\n    }\n\n    public String getSpbill_create_ip() {\n        return spbill_create_ip;\n    }\n\n    public void setSpbill_create_ip(String spbill_create_ip) {\n        this.spbill_create_ip = spbill_create_ip;\n    }\n\n    public String getNotify_url() {\n        return notify_url;\n    }\n\n    public void setNotify_url(String notify_url) {\n        this.notify_url = notify_url;\n    }\n\n    public String getTrade_type() {\n        return trade_type;\n    }\n\n    public void setTrade_type(String trade_type) {\n        this.trade_type = trade_type;\n    }\n\n    public String getBody() {\n        return body;\n    }\n\n    public void setBody(String body) {\n        this.body = body;\n    }\n\n    public String getSign() {\n        return sign;\n    }\n\n    public void setSign(String sign) {\n        this.sign = sign;\n    }\n\n    public String getOpenid() {\n        return openid;\n    }\n\n    public void setOpenid(String openid) {\n        this.openid = openid;\n    }\n\n    public void sign(SignMD5 encoder) {\n        StringBuilder stringBuilder = new StringBuilder();\n        stringBuilder.append(\"appid=\").append(getAppid());\n        stringBuilder.append(\"&body=\").append(getBody());\n        stringBuilder.append(\"&mch_id=\").append(getMch_id());\n        stringBuilder.append(\"&nonce_str=\").append(getNonce_str());\n        stringBuilder.append(\"&notify_url=\").append(getNotify_url());\n        stringBuilder.append(\"&openid=\").append(getOpenid());\n        stringBuilder.append(\"&out_trade_no=\").append(getOut_trade_no());\n        stringBuilder.append(\"&spbill_create_ip=\").append(getSpbill_create_ip());\n        stringBuilder.append(\"&total_fee=\").append(getTotal_fee());\n        stringBuilder.append(\"&trade_type=\").append(getTrade_type());\n        stringBuilder.append(\"&key=\").append(Global.getConfig(\"payKey\"));\n        this.sign = encoder.encode(stringBuilder.toString());\n    }\n\n    @Override\n    public String toString() {\n        return \"<xml>\" +\n                \"<appid><![CDATA[\" + appid + \"]]></appid>\" +\n                \"<body><![CDATA[\" + body + \"]]></body>\" +\n                \"<mch_id><![CDATA[\" + mch_id + \"]]></mch_id>\" +\n                \"<nonce_str><![CDATA[\" + nonce_str + \"]]></nonce_str>\" +\n                \"<notify_url><![CDATA[\" + notify_url + \"]]></notify_url>\" +\n                \"<openid><![CDATA[\" + openid + \"]]></openid>\" +\n                \"<out_trade_no><![CDATA[\" + out_trade_no + \"]]></out_trade_no>\" +\n                \"<spbill_create_ip><![CDATA[\" + spbill_create_ip + \"]]></spbill_create_ip>\" +\n                \"<trade_type><![CDATA[\" + trade_type + \"]]></trade_type>\" +\n                \"<total_fee><![CDATA[\" + total_fee + \"]]></total_fee>\" +\n                \"<sign><![CDATA[\" + sign + \"]]></sign>\" +\n                \"</xml>\";\n    }\n}\n\n````\n\n## WechatRefundModel.java 微信退款接口参数封装模型\n\n````java\n\npackage xyz.dongxiaoxia.weixin.pay;\n\nimport xyz.dongxiaoxia.common.config.Global;\n\nimport javax.xml.bind.annotation.XmlRootElement;\n\n/**\n * @author dongxiaoxia\n * @create 2017-01-03 20:30\n */\n\n@XmlRootElement(name = \"XML\")\npublic class WechatRefundModel {\n\n    private String appid;\n    private String mch_id;\n    private String nonce_str;\n    private String op_user_id;\n    private String out_refund_no;\n    private String out_trade_no;\n    private String refund_fee;\n    private String sign;\n    private String total_fee;\n\n    public String getAppid() {\n        return appid;\n    }\n\n    public void setAppid(String appid) {\n        this.appid = appid;\n    }\n\n    public String getMch_id() {\n        return mch_id;\n    }\n\n    public void setMch_id(String mch_id) {\n        this.mch_id = mch_id;\n    }\n\n    public String getNonce_str() {\n        return nonce_str;\n    }\n\n    public void setNonce_str(String nonce_str) {\n        this.nonce_str = nonce_str;\n    }\n\n    public String getOp_user_id() {\n        return op_user_id;\n    }\n\n    public void setOp_user_id(String op_user_id) {\n        this.op_user_id = op_user_id;\n    }\n\n    public String getOut_refund_no() {\n        return out_refund_no;\n    }\n\n    public void setOut_refund_no(String out_refund_no) {\n        this.out_refund_no = out_refund_no;\n    }\n\n    public String getOut_trade_no() {\n        return out_trade_no;\n    }\n\n    public void setOut_trade_no(String out_trade_no) {\n        this.out_trade_no = out_trade_no;\n    }\n\n    public String getRefund_fee() {\n        return refund_fee;\n    }\n\n    public void setRefund_fee(String refund_fee) {\n        this.refund_fee = refund_fee;\n    }\n\n    public String getTotal_fee() {\n        return total_fee;\n    }\n\n    public void setTotal_fee(String total_fee) {\n        this.total_fee = total_fee;\n    }\n\n    public String getSign() {\n        return sign;\n    }\n\n    public void setSign(String sign) {\n        this.sign = sign;\n    }\n\n    public void sign(SignMD5 encoder) {\n        StringBuilder stringBuilder = new StringBuilder();\n        stringBuilder.append(\"appid=\").append(getAppid());\n        stringBuilder.append(\"&mch_id=\").append(getMch_id());\n        stringBuilder.append(\"&nonce_str=\").append(getNonce_str());\n        stringBuilder.append(\"&op_user_id=\").append(getOp_user_id());\n        stringBuilder.append(\"&out_refund_no=\").append(getOut_refund_no());\n        stringBuilder.append(\"&out_trade_no=\").append(getOut_trade_no());\n        stringBuilder.append(\"&refund_fee=\").append(getRefund_fee());\n        stringBuilder.append(\"&total_fee=\").append(getTotal_fee());\n        stringBuilder.append(\"&key=\").append(Global.getConfig(\"payKey\"));\n        this.sign = encoder.encode(stringBuilder.toString());\n    }\n\n    @Override\n    public String toString() {\n        return \"<xml>\" +\n                \"<appid><![CDATA[\" + appid + \"]]></appid>\" +\n                \"<mch_id><![CDATA[\" + mch_id + \"]]></mch_id>\" +\n                \"<nonce_str><![CDATA[\" + nonce_str + \"]]></nonce_str>\" +\n                \"<op_user_id><![CDATA[\" + op_user_id + \"]]></op_user_id>\" +\n                \"<out_refund_no><![CDATA[\" + out_refund_no + \"]]></out_refund_no>\" +\n                \"<out_trade_no><![CDATA[\" + out_trade_no + \"]]></out_trade_no>\" +\n                \"<refund_fee><![CDATA[\" + refund_fee + \"]]></refund_fee>\" +\n                \"<total_fee><![CDATA[\" + total_fee + \"]]></total_fee>\" +\n                \"<sign><![CDATA[\" + sign + \"]]></sign>\" +\n                \"</xml>\";\n    }\n}\n\n````","source":"_posts/pay.md","raw":"title: 微信公众号支付\ndate: 2017-01-19 15:27:44\npermalink: pay\ntags:\n- 支付\ncategories:\n- java\n\n---\n\n微信支付功能模块是一个可以抽离的模块，因此controller、service等集中放在一个包下管理。\n由于业务需求，现在与OrderController、OrderService集成耦合。\n本文档是根据实际项目抽取总结出来的，很多代码可以根据实际开发进一步更改完善。\n\n# 最终实现目标\n1. 实现微信公众号支付功能\n2. 实现微信公众号退款功能\n3. 本文档附加了大部分的支付模块源码，通过本文档就能抽取出一个独立的支付模块，方便快速开发。\n\n# 准备条件\n1. [微信支付|商户平台](https://pay.weixin.qq.com/index.php)的账号\n    - 这个不归程序员准备，略过\n    - 商户平台的账号必须与公众号的配置对应，在公众号的微信支付模块设置\n    \n2. 一个可以在公网访问的公众号\n   - 微信支付不能在localhost测试\n   - 微信支付不能在微信web开发者工具上测试，只能在手机真实试验\n   - 公众号相关配置的要配置设置好\n   \n# 微信支付思路\n1. 应该存在一个支付页面，假设页面很简单，上面就一个支付按钮，用户点击按钮就能够完成支付。\n2. 用户点击的时候，Ajax 调用后台创建接口接口。\n3. 创建订单接口首先会创建一个未付款的订单，订单的参数如价格、数量、订单号、等可以根据业务自定义。\n4. 创建订单后，会调用微信提供的统一下单接口，微信会根据我们传递的参数，生成一个预支付交易会话标识（prepay_id，就是通过这个来识别该订单的），返回给后台。\n5. 后台接收到prepay_id后，构造微信支付所需要的参数，把参数返回给客户端。\n6. 客户端之前发起的 Ajax 请求，接收到成功的响应后，拿接收到的参数调用JSAPI支付接口，向微信发起支付。\n7. 如果之前的步骤都成功，微信会弹出支付页面，让用户输入密码支付。\n8. 支付成功后微信会跳转H5页面，并且异步通知后台支付结果，后台进一步处理订单，如标记订单付款成功，更新订单日志。\n\n简而言之，服务器创建订单，触发微信支付，支付后微信异步回调，服务器修改订单状态。\n\n# 简单实现微信支付的两个功能\n## 公众号支付\n### 1.下单\n第一步，根据业务生成未支付的订单，调用微信支付统一下单接口，获取微信支付统一订单号 prepay_id ，有了这个才能进一步支付；调起微信支付，获取微信支付下单结果信息集合，集合信息为供页面调用微信JS_API的一些字段信息。\n\n#### 下单（未付款）方法\n\n````java\n\n    private static final String NOTIFY_URL = Global.getConfig(\"domainName\") + \"/pay/notify\";//微信支付回调接口\n    private static final String PAY_RESULT_URL = Global.getConfig(\"domainName\") + \"/pay/result\";//微信支付结果页面接口\n    private static final String PAY_BODY = \"牙齐齐服务\";\n    \n    /**\n     * 下单（但付款）\n     *\n     * @param items           订单对应项目\n     * @param owner           订单拥有者\n     * @return 微信支付下单结果信息集合\n     */\n    public Map add(Items items, User owner) {\n        Order order = new Order();\n        order.setItems(items);\n        order.setPayMoney(items.getPrice());\n        order.setStatus(OrderStatus.NEED_PAY.getCode());\n        order.setPayResult(PayResult.NEED_PAY.getCode());\n        this.save(order);\n        //支付倒计时，定时删除未支付的订单\n        TIMER.schedule(new TimeoutTask(order.getId()), DEFAULT_VALIDITY_TIME);\n        //调用微信支付统一下单接口，获取微信支付统一订单号\n        String res = payService.unifiedorder(NOTIFY_URL, owner.getOpenId(), PAY_BODY, String.valueOf(order.getPayMoney()), order.getId());\n        //调起微信支付，获取微信支付下单结果信息集合\n        return payService.wechatPay(res, PAY_RESULT_URL);\n    }\n   \n````    \n\n#### 微信支付统一下单接口\n\n````java\n    /**\n     * 微信支付统一下单接口\n     *\n     * @param notifyUrl    支付成功后回调路径\n     * @param openId       用户的 openId\n     * @param body         商品描述\n     * @param total        支付金额（单位分）\n     * @param out_trade_no 订单唯一订单号\n     * @return\n     */\n    public String unifiedorder(String notifyUrl, String openId, String body, String total, String out_trade_no) {\n        WechatPayModel xml = new WechatPayModel();\n        xml.setAppid(Global.getConfig(\"appid\"));\n        xml.setMch_id(Global.getConfig(\"mchid\"));\n        xml.setNonce_str(encoder.createNonceStr());\n        xml.setBody(body);\n        xml.setOut_trade_no(out_trade_no);\n        xml.setTotal_fee(total);\n        xml.setSpbill_create_ip(\"127.0.0.1\");//// TODO: 2016/6/28\n        xml.setNotify_url(notifyUrl);\n        xml.setTrade_type(\"JSAPI\");\n        xml.setOpenid(openId);\n        xml.sign(encoder);\n\n        String result = restTemplate.postForObject(\"https://api.mch.weixin.qq.com/pay/unifiedorder\", xml, String.class);\n        return result;\n    }\n    \n````\n\n#### 获取页面调用所需参数\n\n需要注意的是支付不能在微信开发者接口测试，只能在手机上测试哦！\n\n````java\n     /**\n     * 调起微信支付\n     *\n     * @param model\n     * @param res   预支付订单 字符串\n     * @param url   微信支付 url\n     */\n    public void wechatPay(Model model, String res, String url) {\n        try {\n            Map<String, String> start = new HashMap<>();\n            StringBuilder startSign = new StringBuilder();\n            Map<String, String> pay = new HashMap<>();\n            StringBuilder paySign = new StringBuilder();\n            Map map = XmlHelper.of(res).toMap();\n            if (StringUtils.equals((String) map.get(\"return_code\"), \"SUCCESS\")) {\n                // 得到的预支付订单，重新生成微信支付参数\n                String prepay_id = (String) map.get(\"prepay_id\");\n                String jsapi_ticket = TicketManager.getDefaultTicket();\n                // 生成 微信支付 config 参数\n                start.put(\"appId\", Global.getConfig(\"appid\"));\n                start.put(\"nonceStr\", encoder.createNonceStr());\n                start.put(\"timestamp\", encoder.createTimeStamp());\n                // 生成 config 签名\n                startSign.append(\"jsapi_ticket=\").append(jsapi_ticket);\n                startSign.append(\"&noncestr=\").append(start.get(\"nonceStr\"));\n                startSign.append(\"&timestamp=\").append(start.get(\"timestamp\"));\n                startSign.append(\"&url=\").append(url);\n                start.put(\"signature\", encoder.encode(startSign.toString()));\n\n                // config信息验证后会执行ready方法的参数\n                pay.put(\"signType\", \"MD5\");\n                pay.put(\"packageStr\", \"prepay_id=\" + prepay_id);\n                // 生成支付签名\n                paySign.append(\"appId=\").append(start.get(\"appId\"));\n                paySign.append(\"&nonceStr=\").append(start.get(\"nonceStr\"));\n                paySign.append(\"&package=\").append(pay.get(\"packageStr\"));\n                paySign.append(\"&signType=\").append(pay.get(\"signType\"));\n                paySign.append(\"&timeStamp=\").append(start.get(\"timestamp\"));\n                paySign.append(\"&key=\").append(Global.getConfig(\"payKey\"));\n                pay.put(\"paySign\", encoder.encode(paySign.toString()));\n                // 将微信支参数放入 model 对象中以便前端使用\n                model.addAttribute(\"start\", start);\n                model.addAttribute(\"pay\", pay);\n            } else {\n                LOGGER.error(new String(PaymentKit.xmlToMap(res).get(\"return_msg\").getBytes(\"iso8859-1\")));\n            }\n        } catch (Exception e) {\n            model.addAttribute(\"wechatMessage\", \"微信授权失败!\");\n            LOGGER.error(e.getMessage(), e);\n        }\n    }\n````\n\n\n### 2.支付\n支付页面源码：\n````html\n\n<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\n<%@ include file=\"/WEB-INF/views/include/taglib.jsp\" %>\n<html lang=\"en\">\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\"/>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=${ctxStatic}edge\">\n    <%@include file=\"/WEB-INF/views/include/css.jsp\" %>\n    <title>确认订单</title>\n</head>\n<body ontouchstart=\"\">\n<a onclick=\"addOrder()\" href=\"javascript:;\" class=\"weui_btn weui_btn_primary\" style=\"margin: 0rem 1rem\">支付</a>\n<%@include file=\"/WEB-INF/views/include/js.jsp\" %>\n\n<script type=\"text/javascript\" charset=\"UTF-8\" src=\"https://res.wx.qq.com/open/js/jweixin-1.0.0.js\"></script>\n<script type=\"text/javascript\">\n\n    function addOrder() {\n        var itemsId = '${items.id}';\n        $.showLoading(\"正在处理...\");\n        $.post(\"${ctx}/order\", {itemsId: itemsId}, function (result) {\n            $.hideLoading();\n            if (result && result.success) {\n                $.hideLoading();\n                pay(result.data);\n            } else {\n                $.toptip(result.message, 'error');\n            }\n        })\n    }\n\n    //微信支付\n    function pay(data) {\n\n        //config\n        var appId = data.start.appId;\n        var timeStamp = data.start.timestamp;\n        var nonceStr = data.start.nonceStr;\n        var signature = data.start.signature;\n\n        var signType = data.pay.signType;\n        var pk = data.pay.packageStr;\n        var paySign = data.pay.paySign;\n\n        wx.config({\n            debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n            appId: appId, // 必填，公众号的唯一标识\n            timestamp: timeStamp, // 必填，生成签名的时间戳\n            nonceStr: nonceStr, // 必填，生成签名的随机串\n            signature: signature,// 必填，签名，见附录1\n            jsApiList: ['chooseWXPay'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n        });\n\n        wx.ready(function (res) {\n            // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。\n            wx.chooseWXPay({\n                timestamp: timeStamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\n                nonceStr: nonceStr, // 支付签名随机串，不长于 32 位\n                package: pk, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=***）\n                signType: signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\n                paySign: paySign, // 支付签名\n                success: function (res) {\n                    location.href = 'http://' + location.host + '/order';\n                },\n                cancel: function (res) {\n                },\n                fail: function (res) {\n                    $.toptip('支付失败！', 'error');\n                }\n            });\n        });\n\n        wx.error(function (res) {\n            alert(\"error:\" + JSON.stringify(res));\n        });\n    }\n</script>\n</body>\n</html>\n\n````\n### 3.支付回调\n在第一步时我们有配置了两个参数，其中：\n PAY_RESULT_URL 为微信支付成功后跳转的页面URL\n NOTIFY_URL 为支付成功后微信回调触发的接口，通过触发，完成服务器订单付款状态的更改\n \n 可能会对这个接口感到奇怪，我们明明没有在项目中调用过这个接口啊。\n 要理解这个接口就要理解回调的概念，这里就详细解释回调的含义的，只需明白，这个是专门提供给微信调用的就行了，发起支付时，是在微信上实现的，我们并不知道支付的结果，只能等微信主动通知我们。\n \n ````java\n /**\n      * 微信支付成功后的回调函数\n      *\n      * @param request\n      * @return\n      */\n     @RequestMapping(value = \"/notify\", method = RequestMethod.POST)\n     @ResponseBody\n     public String wechatNotify(HttpServletRequest request) {\n         // 从 request 对象中获取 WechatNotify 对象\n         WechatNotify notify = getNotifyBean(request);\n         // 如果 notify 对象不为空 并且 result_code 和 return_code 都为 'SUCCESS' 则表示支付成功\n         if (StringUtils.equals(notify.getResult_code(), \"SUCCESS\") && StringUtils.equals(notify.getReturn_code(), \"SUCCESS\")) {\n             try {\n                 orderService.update(notify.getOut_trade_no(), notify.getTime_end());\n             } catch (Exception e) {\n                 logger.error(e.getMessage(), e);\n                 return \"<xml>\\n<return_code><![CDATA[FAIL]]></return_code>\\n<return_msg><![CDATA[ERROR]]></return_msg>\\n</xml>\";\n             }\n             return \"<xml>\\n<return_code><![CDATA[SUCCESS]]></return_code>\\n<return_msg><![CDATA[OK]]></return_msg>\\n</xml>\";\n         }\n         return \"<xml>\\n<return_code><![CDATA[FAIL]]></return_code>\\n<return_msg><![CDATA[ERROR]]></return_msg>\\n</xml>\";\n     }\n ````\n \n## 退款\n退款相对于付款就麻烦一点，因为给钱给微信与向微信拿钱肯定不一样。\n首先就是证书的下载与放置到项目中，略。\n剩下就是调用微信退款接口，部分代码如下：\n\n````java\n  /**\n     * 退款\n     *\n     * @param order 订单\n     */\n    public void refund(Order order) {\n        //1. 微信退款\n        boolean refundResult = payService.refund(order.getId(), order.getId(), String.valueOf(order.getPayMoney()), String.valueOf(order.getPayMoney()));\n        if (!refundResult) {\n            throw new OrderException(\"退款失败\");\n        }\n        //2.处理订单\n        try {\n            order.setStatus(OrderStatus.REFUNDED.getCode());\n            order.setRefundTime(new Date());\n            order.setRefundedTime(new Date());\n            save(order);\n        } catch (Exception e) {\n            LOGGER.error(e.getMessage(), e);\n            throw new OrderException(\"退款失败，请联系客服\");\n        }\n    }\n    \n    \n     /**\n         * 退款\n         * @return\n         */\n        public boolean refund(String out_refund_no,String out_trade_no,String refund_fee,String total_fee) {\n            WechatRefundModel xml = new WechatRefundModel();\n            xml.setAppid(Global.getConfig(\"appid\"));\n            xml.setMch_id(Global.getConfig(\"mchid\"));\n            xml.setNonce_str(encoder.createNonceStr());\n            xml.setOp_user_id(Global.getConfig(\"mchid\"));\n            xml.setOut_refund_no(out_refund_no);\n            xml.setOut_trade_no(out_trade_no);\n            xml.setRefund_fee(refund_fee);\n            xml.setTotal_fee(total_fee);\n            xml.sign(encoder);\n            try {\n                String result = doRefund(\"https://api.mch.weixin.qq.com/secapi/pay/refund\",xml.toString());\n                Map map = XmlHelper.of(result).toMap();\n                String returnCode = (String) map.get(\"return_code\");\n                if (returnCode.equals(\"SUCCESS\")){\n                    //todo\n                    LOGGER.error(\"=============================\"+map.get(\"return_msg\")+ \"====================================\");\n                    return true;\n                }else {\n                    LOGGER.error(\"=============================\"+map.get(\"return_msg\")+ \"====================================\");\n                    return false;\n                }\n            }catch (Exception e){\n                LOGGER.error(e.getMessage(), e);\n                return false;\n            }\n        }\n    \n        private  String doRefund(String url,String data) throws Exception {\n            KeyStore keyStore  = KeyStore.getInstance(\"PKCS12\");\n            InputStream instream = this.getClass().getClassLoader().getResourceAsStream(\"apiclient_cert.p12\");//P12文件目录\n            char[] password = Global.getConfig(\"mchid\").toCharArray();\n            try {\n                keyStore.load(instream, password);//这里写密码..默认是你的MCHID\n            } finally {\n                instream.close();\n            }\n            SSLContext sslcontext = SSLContexts.custom()\n                    .loadKeyMaterial(keyStore, password)//这里也是写密码的\n                    .build();\n            // Allow TLSv1 protocol only\n            SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n                    sslcontext,\n                    new String[] { \"TLSv1\" },\n                    null,\n                    SSLConnectionSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);\n            CloseableHttpClient httpclient = HttpClients.custom()\n                    .setSSLSocketFactory(sslsf)\n                    .build();\n            try {\n                HttpPost httpost = new HttpPost(url); // 设置响应头信息\n                httpost.addHeader(\"Connection\", \"keep-alive\");\n                httpost.addHeader(\"Accept\", \"*/*\");\n                httpost.addHeader(\"Content-Type\", \"application/x-www-form-urlencoded; charset=UTF-8\");\n                httpost.addHeader(\"Host\", \"api.mch.weixin.qq.com\");\n                httpost.addHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                httpost.addHeader(\"Cache-Control\", \"max-age=0\");\n                httpost.addHeader(\"User-Agent\", \"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0) \");\n                httpost.setEntity(new StringEntity(data, \"UTF-8\"));\n                CloseableHttpResponse response = httpclient.execute(httpost);\n                try {\n                    HttpEntity entity = response.getEntity();\n    \n                    String jsonStr = EntityUtils.toString(response.getEntity(), \"UTF-8\");\n                    EntityUtils.consume(entity);\n                    return jsonStr;\n                } finally {\n                    response.close();\n                }\n            } finally {\n                httpclient.close();\n            }\n        }\n````\n\n\n\n# 源码\n## PayController.java\n\n````java\n\npackage xyz.dongxiaoxia.weixin.pay;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.ResponseBody;\nimport xyz.dongxiaoxia.common.config.Global;\nimport xyz.dongxiaoxia.common.controller.BaseController;\nimport xyz.dongxiaoxia.common.utils.StringUtils;\nimport xyz.dongxiaoxia.modules.entity.Order;\nimport xyz.dongxiaoxia.modules.entity.User;\nimport xyz.dongxiaoxia.modules.service.OrderService;\nimport xyz.dongxiaoxia.modules.service.UserService;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.xml.bind.JAXBContext;\nimport javax.xml.bind.JAXBException;\nimport javax.xml.bind.Unmarshaller;\nimport java.io.DataInputStream;\nimport java.io.IOException;\nimport java.io.StringReader;\n\n/**\n * Created by dongxiaoxia on 2016/12/29.\n */\n@Controller\n@RequestMapping(value = \"pay\")\npublic class PayController extends BaseController {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(PayController.class);\n\n    @Autowired\n    private PayService payService;\n\n    @Autowired\n    private OrderService orderService;\n\n    @Autowired\n    private UserService userService;\n\n    /**\n     * 支付完成页面\n     *\n     * @return 跳转支付完成页面，由微信端支付完成后自动跳转\n     */\n    @RequestMapping(\"result\")\n    public String result() {\n        return \"pay/result\";\n    }\n\n    /**\n     * 微信支付成功后的回调函数\n     *\n     * @param request\n     * @return\n     */\n    @RequestMapping(value = \"/notify\", method = RequestMethod.POST)\n    @ResponseBody\n    public String wechatNotify(HttpServletRequest request) {\n        // 从 request 对象中获取 WechatNotify 对象\n        WechatNotify notify = getNotifyBean(request);\n        // 如果 notify 对象不为空 并且 result_code 和 return_code 都为 'SUCCESS' 则表示支付成功\n        if (StringUtils.equals(notify.getResult_code(), \"SUCCESS\") && StringUtils.equals(notify.getReturn_code(), \"SUCCESS\")) {\n            try {\n                orderService.update(notify.getOut_trade_no(), notify.getTime_end());\n            } catch (Exception e) {\n                logger.error(e.getMessage(), e);\n                return \"<xml>\\n<return_code><![CDATA[FAIL]]></return_code>\\n<return_msg><![CDATA[ERROR]]></return_msg>\\n</xml>\";\n            }\n            return \"<xml>\\n<return_code><![CDATA[SUCCESS]]></return_code>\\n<return_msg><![CDATA[OK]]></return_msg>\\n</xml>\";\n        }\n        return \"<xml>\\n<return_code><![CDATA[FAIL]]></return_code>\\n<return_msg><![CDATA[ERROR]]></return_msg>\\n</xml>\";\n    }\n\n    /**\n     * 微信回调成功后 将 xml 转换为  WechatNotify 对象\n     *\n     * @param request\n     * @return WechatNotify 对象\n     */\n    public static WechatNotify getNotifyBean(HttpServletRequest request) {\n        try {\n            DataInputStream in = new DataInputStream(request.getInputStream());\n            byte[] dataOrigin = new byte[request.getContentLength()];\n            // 根据长度，将消息实体的内容读入字节数组dataOrigin中\n            in.readFully(dataOrigin);\n            // 关闭数据流\n            in.close();\n            // 从字节数组中得到表示实体的字符串\n            String xml = new String(dataOrigin);\n            // 将 xml 转换为  WechatNotify 对象\n            Object object;\n            try {\n                JAXBContext jc = JAXBContext.newInstance(WechatNotify.class);\n                Unmarshaller us = jc.createUnmarshaller();\n                object = us.unmarshal(new StringReader(xml));\n            } catch (JAXBException e) {\n                e.printStackTrace();\n                object = null;\n            }\n            if (object != null && object instanceof WechatNotify) {\n                WechatNotify notify = (WechatNotify) object;\n                return notify;\n            } else {\n                return null;\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n            return null;\n        }\n    }\n}\n\n\n````\n\n## PayService.java 支付回调控制器\n   \n````java\npackage xyz.dongxiaoxia.weixin.pay;\n\n\nimport com.jfinal.weixin.sdk.kit.PaymentKit;\nimport com.jfinal.weixin.sdk.utils.XmlHelper;\nimport org.apache.http.HttpEntity;\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.conn.ssl.SSLContexts;\nimport org.apache.http.entity.StringEntity;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.util.EntityUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Service;\nimport org.springframework.ui.Model;\nimport org.springframework.web.client.RestTemplate;\nimport xyz.dongxiaoxia.common.config.Global;\nimport xyz.dongxiaoxia.common.utils.StringUtils;\n\nimport javax.net.ssl.SSLContext;\nimport java.io.InputStream;\nimport java.security.KeyStore;\nimport java.util.HashMap;\nimport java.util.Map;\n\n/**\n * @author dongxiaoxia\n * @create 2016-06-28 11:15\n */\n\n@Service\npublic class PayService {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(PayService.class);\n\n    SignMD5 encoder = new SignMD5();\n    RestTemplate restTemplate = new RestTemplate();\n\n    /**\n     * 微信支付统一下单接口\n     *\n     * @param notifyUrl    支付成功后回调路径\n     * @param openId       用户的 openId\n     * @param body         商品描述\n     * @param total        支付金额（单位分）\n     * @param out_trade_no 订单唯一订单号\n     * @return\n     */\n    public String unifiedorder(String notifyUrl, String openId, String body, String total, String out_trade_no) {\n        WechatPayModel xml = new WechatPayModel();\n        xml.setAppid(Global.getConfig(\"appid\"));\n        xml.setMch_id(Global.getConfig(\"mchid\"));\n        xml.setNonce_str(encoder.createNonceStr());\n        xml.setBody(body);\n        xml.setOut_trade_no(out_trade_no);\n        xml.setTotal_fee(total);\n        xml.setSpbill_create_ip(\"127.0.0.1\");//// TODO: 2016/6/28\n        xml.setNotify_url(notifyUrl);\n        xml.setTrade_type(\"JSAPI\");\n        xml.setOpenid(openId);\n        xml.sign(encoder);\n\n        String result = restTemplate.postForObject(\"https://api.mch.weixin.qq.com/pay/unifiedorder\", xml, String.class);\n        return result;\n    }\n\n    /**\n     * 调起微信支付\n     *\n     * @param model\n     * @param res   预支付订单 字符串\n     * @param url   微信支付 url\n     */\n    public void wechatPay(Model model, String res, String url) {\n        try {\n            Map<String, String> start = new HashMap<>();\n            StringBuilder startSign = new StringBuilder();\n            Map<String, String> pay = new HashMap<>();\n            StringBuilder paySign = new StringBuilder();\n            Map map = XmlHelper.of(res).toMap();\n            if (StringUtils.equals((String) map.get(\"return_code\"), \"SUCCESS\")) {\n                // 得到的预支付订单，重新生成微信支付参数\n                String prepay_id = (String) map.get(\"prepay_id\");\n                String jsapi_ticket = TicketManager.getDefaultTicket();\n                // 生成 微信支付 config 参数\n                start.put(\"appId\", Global.getConfig(\"appid\"));\n                start.put(\"nonceStr\", encoder.createNonceStr());\n                start.put(\"timestamp\", encoder.createTimeStamp());\n                // 生成 config 签名\n                startSign.append(\"jsapi_ticket=\").append(jsapi_ticket);\n                startSign.append(\"&noncestr=\").append(start.get(\"nonceStr\"));\n                startSign.append(\"&timestamp=\").append(start.get(\"timestamp\"));\n                startSign.append(\"&url=\").append(url);\n                start.put(\"signature\", encoder.encode(startSign.toString()));\n\n                // config信息验证后会执行ready方法的参数\n                pay.put(\"signType\", \"MD5\");\n                pay.put(\"packageStr\", \"prepay_id=\" + prepay_id);\n                // 生成支付签名\n                paySign.append(\"appId=\").append(start.get(\"appId\"));\n                paySign.append(\"&nonceStr=\").append(start.get(\"nonceStr\"));\n                paySign.append(\"&package=\").append(pay.get(\"packageStr\"));\n                paySign.append(\"&signType=\").append(pay.get(\"signType\"));\n                paySign.append(\"&timeStamp=\").append(start.get(\"timestamp\"));\n                paySign.append(\"&key=\").append(Global.getConfig(\"payKey\"));\n                pay.put(\"paySign\", encoder.encode(paySign.toString()));\n                // 将微信支参数放入 model 对象中以便前端使用\n                model.addAttribute(\"start\", start);\n                model.addAttribute(\"pay\", pay);\n            } else {\n                LOGGER.error(new String(PaymentKit.xmlToMap(res).get(\"return_msg\").getBytes(\"iso8859-1\")));\n            }\n        } catch (Exception e) {\n            model.addAttribute(\"wechatMessage\", \"微信授权失败!\");\n            LOGGER.error(e.getMessage(), e);\n        }\n    }\n\n    /**\n     * 调起微信支付\n     *\n     * @param res 预支付订单 字符串\n     * @param url 微信支付 url\n     */\n    public Map wechatPay(String res, String url) {\n        Map<String, Object> result = new HashMap<>();\n        try {\n            Map<String, String> start = new HashMap<>();\n            StringBuilder startSign = new StringBuilder();\n            Map<String, String> pay = new HashMap<>();\n            StringBuilder paySign = new StringBuilder();\n            Map map = XmlHelper.of(res).toMap();\n            if (StringUtils.equals((String) map.get(\"return_code\"), \"SUCCESS\")) {\n                // 得到的预支付订单，重新生成微信支付参数\n                String prepay_id = (String) map.get(\"prepay_id\");\n                String jsapi_ticket = TicketManager.getDefaultTicket();\n                // 生成 微信支付 config 参数\n                start.put(\"appId\", Global.getConfig(\"appid\"));\n                start.put(\"nonceStr\", encoder.createNonceStr());\n                start.put(\"timestamp\", encoder.createTimeStamp());\n                // 生成 config 签名\n                startSign.append(\"jsapi_ticket=\").append(jsapi_ticket);\n                startSign.append(\"&noncestr=\").append(start.get(\"nonceStr\"));\n                startSign.append(\"&timestamp=\").append(start.get(\"timestamp\"));\n                startSign.append(\"&url=\").append(url);\n                start.put(\"signature\", encoder.encode(startSign.toString()));\n\n                // config信息验证后会执行ready方法的参数\n                pay.put(\"signType\", \"MD5\");\n                pay.put(\"packageStr\", \"prepay_id=\" + prepay_id);\n                // 生成支付签名\n                paySign.append(\"appId=\").append(start.get(\"appId\"));\n                paySign.append(\"&nonceStr=\").append(start.get(\"nonceStr\"));\n                paySign.append(\"&package=\").append(pay.get(\"packageStr\"));\n                paySign.append(\"&signType=\").append(pay.get(\"signType\"));\n                paySign.append(\"&timeStamp=\").append(start.get(\"timestamp\"));\n                paySign.append(\"&key=\").append(Global.getConfig(\"payKey\"));\n                pay.put(\"paySign\", encoder.encode(paySign.toString()));\n                // 将微信支参数放入 result 对象中以便前端使用\n                result.put(\"start\", start);\n                result.put(\"pay\", pay);\n            } else {\n                LOGGER.error(new String(PaymentKit.xmlToMap(res).get(\"return_msg\").getBytes(\"iso8859-1\")));\n            }\n        } catch (Exception e) {\n            result.put(\"wechatMessage\", \"微信授权失败!\");\n            LOGGER.error(e.getMessage(), e);\n        }\n        return result;\n    }\n\n    /**\n     * 退款\n     * @return\n     */\n    public boolean refund(String out_refund_no,String out_trade_no,String refund_fee,String total_fee) {\n        WechatRefundModel xml = new WechatRefundModel();\n        xml.setAppid(Global.getConfig(\"appid\"));\n        xml.setMch_id(Global.getConfig(\"mchid\"));\n        xml.setNonce_str(encoder.createNonceStr());\n        xml.setOp_user_id(Global.getConfig(\"mchid\"));\n        xml.setOut_refund_no(out_refund_no);\n        xml.setOut_trade_no(out_trade_no);\n        xml.setRefund_fee(refund_fee);\n        xml.setTotal_fee(total_fee);\n        xml.sign(encoder);\n        try {\n            String result = doRefund(\"https://api.mch.weixin.qq.com/secapi/pay/refund\",xml.toString());\n            Map map = XmlHelper.of(result).toMap();\n            String returnCode = (String) map.get(\"return_code\");\n            if (returnCode.equals(\"SUCCESS\")){\n                //todo\n                LOGGER.error(\"=============================\"+map.get(\"return_msg\")+ \"====================================\");\n                return true;\n            }else {\n                LOGGER.error(\"=============================\"+map.get(\"return_msg\")+ \"====================================\");\n                return false;\n            }\n        }catch (Exception e){\n            LOGGER.error(e.getMessage(), e);\n            return false;\n        }\n    }\n\n    private  String doRefund(String url,String data) throws Exception {\n        KeyStore keyStore  = KeyStore.getInstance(\"PKCS12\");\n        InputStream instream = this.getClass().getClassLoader().getResourceAsStream(\"apiclient_cert.p12\");//P12文件目录\n        char[] password = Global.getConfig(\"mchid\").toCharArray();\n        try {\n            keyStore.load(instream, password);//这里写密码..默认是你的MCHID\n        } finally {\n            instream.close();\n        }\n        SSLContext sslcontext = SSLContexts.custom()\n                .loadKeyMaterial(keyStore, password)//这里也是写密码的\n                .build();\n        // Allow TLSv1 protocol only\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n                sslcontext,\n                new String[] { \"TLSv1\" },\n                null,\n                SSLConnectionSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);\n        CloseableHttpClient httpclient = HttpClients.custom()\n                .setSSLSocketFactory(sslsf)\n                .build();\n        try {\n            HttpPost httpost = new HttpPost(url); // 设置响应头信息\n            httpost.addHeader(\"Connection\", \"keep-alive\");\n            httpost.addHeader(\"Accept\", \"*/*\");\n            httpost.addHeader(\"Content-Type\", \"application/x-www-form-urlencoded; charset=UTF-8\");\n            httpost.addHeader(\"Host\", \"api.mch.weixin.qq.com\");\n            httpost.addHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n            httpost.addHeader(\"Cache-Control\", \"max-age=0\");\n            httpost.addHeader(\"User-Agent\", \"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0) \");\n            httpost.setEntity(new StringEntity(data, \"UTF-8\"));\n            CloseableHttpResponse response = httpclient.execute(httpost);\n            try {\n                HttpEntity entity = response.getEntity();\n\n                String jsonStr = EntityUtils.toString(response.getEntity(), \"UTF-8\");\n                EntityUtils.consume(entity);\n                return jsonStr;\n            } finally {\n                response.close();\n            }\n        } finally {\n            httpclient.close();\n        }\n    }\n}\n````\n\n## OrderController.java 订单控制器\n\n````java\npackage xyz.dongxiaoxia.modules.controller;\n\nimport org.apache.commons.lang3.StringUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.ResponseBody;\nimport xyz.dongxiaoxia.common.controller.BaseController;\nimport xyz.dongxiaoxia.common.utils.DateUtils;\nimport xyz.dongxiaoxia.modules.entity.Clinic;\nimport xyz.dongxiaoxia.modules.entity.Items;\nimport xyz.dongxiaoxia.modules.entity.Order;\nimport xyz.dongxiaoxia.modules.entity.User;\nimport xyz.dongxiaoxia.modules.exception.OrderException;\nimport xyz.dongxiaoxia.modules.service.ItemsService;\nimport xyz.dongxiaoxia.modules.service.OrderService;\nimport xyz.dongxiaoxia.modules.vo.AjaxResult;\nimport xyz.dongxiaoxia.modules.vo.OrderStatus;\n\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\nimport java.io.IOException;\nimport java.util.Date;\nimport java.util.List;\nimport java.util.Map;\n\n/**\n * Created by dongxiaoxia on 2016/12/30.\n * <p>\n * 订单控制器\n */\n@Controller\n@RequestMapping(\"order\")\npublic class OrderController extends BaseController {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(OrderController.class);\n\n    @Autowired\n    private OrderService orderService;\n    @Autowired\n    private ItemsService itemsService;\n\n\n    /**\n     * 我的订单列表首页\n     *\n     * @return 跳转订单首页\n     */\n    @RequestMapping(value = \"\", method = RequestMethod.GET)\n    public String index(HttpSession session, Model model) {\n        User user = (User) session.getAttribute(\"user\");\n        Order order = new Order();\n        order.setCreateBy(user);\n        //查找出当前用户创建的订单列表\n        List<Order> orders = orderService.findList(order);\n        model.addAttribute(\"orders\", orders);\n        return \"order/index\";\n    }\n\n    /**\n     * 订单详情\n     *\n     * @param orderId 订单编号\n     * @return 跳转订单详情页面\n     */\n    @RequestMapping(value = \"{orderId}\", method = RequestMethod.GET)\n    public String detail(@PathVariable String orderId, Model model, HttpServletResponse response, HttpSession session) throws IOException {\n        Order order = orderService.get(orderId);\n        User user = (User) session.getAttribute(\"user\");\n        if (order == null || !order.getCreateBy().getId().equals(user.getId())) {\n            response.sendError(HttpServletResponse.SC_NOT_FOUND);\n            return null;\n        }\n//        orderService.get() 查出来的order中clinic没有关联查询area，因此重新获取\n        Clinic clinic = clinicService.get(order.getClinic().getId());\n        order.setClinic(clinic);\n        model.addAttribute(\"order\", order);\n        return \"order/detail\";\n    }\n\n    /**\n     * 退款\n     *\n     * @param orderId 订单编号\n     * @return 退款操作结果\n     */\n    @ResponseBody\n    @RequestMapping(\"refund/{orderId}\")\n    public AjaxResult refund(@PathVariable String orderId, HttpSession session) {\n        Order order = orderService.get(orderId);\n        if (order == null) {\n            return AjaxResult.fail(\"订单不存在\");\n        }\n        User user = (User) session.getAttribute(\"user\");\n        if (!order.getCreateBy().getId().equals(user.getId())) {\n            return AjaxResult.fail(\"没有权限\");\n        }\n        if (OrderStatus.PAID.getCode() != order.getStatus()) {\n            return AjaxResult.fail(\"不在退款范围\");\n        }\n        try {\n            orderService.refund(order);\n            return AjaxResult.success();\n        }catch (OrderException e){\n            LOGGER.error(e.getMessage(),e);\n            return AjaxResult.fail(e.getMessage());\n        }\n    }\n\n    /**\n     * 下订单（未付款）\n     *\n     * @param itemsId         服务项目编号\n     * @param appointmentTime 预约时间\n     * @return 下订单操作结果\n     */\n    @ResponseBody\n    @RequestMapping(method = RequestMethod.POST)\n    public AjaxResult add(HttpSession session, String itemsId, String appointmentTime) {\n        if (StringUtils.isEmpty(itemsId)) {\n            return AjaxResult.fail(\"itemsId 不能为空\");\n        }\n        if (StringUtils.isEmpty(appointmentTime)) {\n            return AjaxResult.fail(\"appointmentTime 不能为空\");\n        }\n        Items items = itemsService.get(itemsId);\n        if (items == null) {\n            return AjaxResult.fail(\"该服务项目不存在\");\n        }\n        User user = (User) session.getAttribute(\"user\");\n        try {\n            Map result = orderService.add(items, appointmentTime,user); //下订单\n            return AjaxResult.success(result);\n        }catch (Exception e){\n            LOGGER.error(e.getMessage(),e);\n            return AjaxResult.fail(\"支付失败，请稍候再试\");\n        }\n    }\n\n    /**\n     * 跳转确定订单支付页面\n     *\n     * @param itemsId 服务项目编号\n     * @return 支付页面\n     */\n    @RequestMapping(\"create/{itemsId}\")\n    public String create(@PathVariable String itemsId, Model model, HttpServletResponse response) throws IOException {\n        Items items = itemsService.get(itemsId);\n        if (items == null) {\n            response.sendError(HttpServletResponse.SC_NOT_FOUND);\n            return null;\n        }\n        model.addAttribute(\"items\", items);\n        model.addAttribute(\"dateStr\", DateUtils.getDateStr(new Date(), 31, \"yyyy-MM-dd\"));//预约日期范围（今天开始，默认一个月）\n        return \"order/create\";\n    }\n}\n````\n\n## OrderService.java 订单服务器\n\n````java\n\npackage xyz.dongxiaoxia.modules.service;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport xyz.dongxiaoxia.common.config.Global;\nimport xyz.dongxiaoxia.common.service.CrudService;\nimport xyz.dongxiaoxia.common.utils.DateUtils;\nimport xyz.dongxiaoxia.modules.dao.OrderDao;\nimport xyz.dongxiaoxia.modules.entity.Items;\nimport xyz.dongxiaoxia.modules.entity.Order;\nimport xyz.dongxiaoxia.modules.entity.User;\nimport xyz.dongxiaoxia.modules.exception.OrderException;\nimport xyz.dongxiaoxia.modules.vo.OrderStatus;\nimport xyz.dongxiaoxia.modules.vo.PayResult;\nimport xyz.dongxiaoxia.weixin.TemplateMassageUtils;\nimport xyz.dongxiaoxia.weixin.pay.PayService;\n\nimport java.text.ParseException;\nimport java.util.*;\n\n/**\n * Created by dongxiaoxia on 2016/12/30.\n * <p>\n * 订单服务类\n */\n@Service\n@RequestMapping(value = \"order\")\npublic class OrderService extends CrudService<OrderDao, Order> {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(OrderService.class);\n    private static final Timer TIMER = new Timer();\n    private static final int DEFAULT_VALIDITY_TIME = Integer.valueOf(Global.getConfig(\"payTime\"));//默认2分钟\n    private static final String NOTIFY_URL = Global.getConfig(\"domainName\") + \"/pay/notify\";//微信支付回调接口\n    private static final String PAY_RESULT_URL = Global.getConfig(\"domainName\") + \"/pay/result\";//微信支付结果页面接口\n    private static final String PAY_BODY = \"牙齐齐服务\";\n\n    @Autowired\n    private PayService payService;\n\n    /**\n     * 下单（但付款）\n     *\n     * @param items           订单对应项目\n     * @param appointmentTime 预约时间\n     * @param owner           订单拥有者\n     * @return 微信支付下单结果信息集合\n     */\n    public Map add(Items items , User owner) {\n        if (items == null) {\n            throw new IllegalArgumentException(\"items can not be null\");\n        }\n        Order order = new Order();\n        order.setItems(items);\n        order.setPayMoney(items.getPrice());\n        order.setStatus(OrderStatus.NEED_PAY.getCode());\n        order.setPayResult(PayResult.NEED_PAY.getCode());\n        this.save(order);\n        //支付倒计时，定时删除未支付的订单\n        TIMER.schedule(new TimeoutTask(order.getId()), DEFAULT_VALIDITY_TIME);\n        //调用微信支付统一下单接口，获取微信支付统一订单号\n        String res = payService.unifiedorder(NOTIFY_URL, owner.getOpenId(), PAY_BODY, String.valueOf(order.getPayMoney()), order.getId());\n        //调起微信支付，获取微信支付下单结果信息集合\n        return payService.wechatPay(res, PAY_RESULT_URL);\n    }\n\n    /**\n     * 修改订单\n     *\n     * @param orderId 订单编号\n     * @param time 微信支付时间\n     */\n    @Transactional(readOnly = false)\n    public synchronized void update(String orderId, String time) {\n        try {\n            Order order = dao.get(orderId);\n            if (order != null && PayResult.SUCCESS.getCode() != order.getPayResult()) {//订单处于未支付成功状态\n                order.setPayResult(PayResult.SUCCESS.getCode());//设置支付状态\n                order.setStatus(OrderStatus.PAID.getCode());//设置订单状态\n                order.setVoucher(String.valueOf(10000000 + new Random().nextInt(89999999)));//生成服务凭证，预测用户少，不会重复\n                try {\n                    order.setCreateDate(new Date(DateUtils.parseDate(time, \"yyyyMMddHHmmss\").getTime()));//把订单生成时间设置为微信支付成功的时间\n                } catch (ParseException e) {\n                    order.setCreateDate(new Date(System.currentTimeMillis()));\n                }\n                dao.update(order);\n            }\n        } catch (OrderException e) {\n            throw e;\n        } catch (Exception e) {\n            throw new OrderException(e);\n        }\n    }\n\n    /**\n     * 退款\n     *\n     * @param order 订单\n     */\n    public void refund(Order order) {\n        //1. 微信退款\n        boolean refundResult = payService.refund(order.getId(), order.getId(), String.valueOf(order.getPayMoney()), String.valueOf(order.getPayMoney()));\n        if (!refundResult) {\n            throw new OrderException(\"退款失败\");\n        }\n        //2.处理订单\n        try {\n            order.setStatus(OrderStatus.REFUNDED.getCode());\n            order.setRefundTime(new Date());\n            order.setRefundedTime(new Date());\n            save(order);\n        } catch (Exception e) {\n            LOGGER.error(e.getMessage(), e);\n            SmsUtils.notify(Global.getConfig(\"adminMobile\"), order.getId(), \"用户申请退款处理出现异常错误,请及时处理\");\n            throw new OrderException(\"退款失败，请联系客服\");\n        }\n        //3. 发消息模版给用户\n        TemplateMassageUtils.sendRefundOrderSuccessTemplateMessage(order.getCreateBy(), order);\n        //4. 发消息模版给管理员\n        TemplateMassageUtils.sendRefundOrderSuccessTemplateMessageToAdmin(order);\n    }\n\n    /**\n     * 删除过期任务\n     */\n    class TimeoutTask extends TimerTask {\n        private String orderId;\n\n        public TimeoutTask(String orderId) {\n            this.orderId = orderId;\n        }\n\n\n        /**\n         * The action to be performed by this timer task.\n         */\n        @Override\n        public void run() {\n            //删除未支付的订单\n            Order order = dao.get(orderId);\n            if (order == null || PayResult.SUCCESS.getCode() == order.getPayResult()) {\n                return;\n            }\n            order.setId(orderId);\n            dao.delete(order);\n            LOGGER.info(\"========================删除orderID:\" + orderId + \" 订单成功！================================\");\n        }\n    }\n}\n\n\n````\n## Order.java 订单类\n\n````java\n\n/**\n * 实体类-订单\n */\npublic class Order {\n\n    private static final long serialVersionUID = -596545820416981026L;\n\n    private Items items;            //服务项目\n    private int payResult;       //支付结果 (-1,\"待付款\"),(0, \"支付成功\"),(1,\"支付失败\")\n    private int payMoney;         //支付金额,单位（分）\n    private String voucher;         //服务凭证\n    private String appointmentTime; //预约时段\n    private int status;          //服务状态（-1预定，代付款 0已付款，1申请退款，2已退款，9已完成）\n    private Date refundTime;        //请求退款时间\n    private Date refundedTime;      //退款完成时间\n    private Date finishTime;        //服务完成时间\n    \n    //getter and setter\n   }\n\n````\n## SignMD5.java 签名工具类\n\n````java\npackage xyz.dongxiaoxia.weixin.pay;\n\nimport java.io.UnsupportedEncodingException;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.Formatter;\nimport java.util.UUID;\n\n/**\n * @author dongxiaoxia\n * @create 2016-06-28 11:08\n */\n\npublic class SignMD5 {\n    public static String byteToHex(final byte[] hash) {\n        Formatter formatter = new Formatter();\n        for (byte b : hash) {\n            formatter.format(\"%02x\", b);\n        }\n        String result = formatter.toString();\n        formatter.close();\n        return result;\n    }\n\n    public String encode(CharSequence charSequence) {\n        try {\n            MessageDigest crypt = MessageDigest.getInstance(\"MD5\");\n            crypt.reset();\n            crypt.update(charSequence.toString().getBytes(\"UTF-8\"));\n            return byteToHex(crypt.digest());\n        } catch (NoSuchAlgorithmException e) {\n            e.printStackTrace();\n        } catch (UnsupportedEncodingException e) {\n            e.printStackTrace();\n        }\n        return \"\";\n    }\n\n    public boolean matches(CharSequence charSequence, String encodedPassword) {\n        return encode(charSequence).equals(encodedPassword);\n    }\n\n    public String createNonceStr() {\n        return UUID.randomUUID().toString().replaceAll(\"-\",\"\");\n    }\n\n    public String createTimeStamp() {\n        return Long.toString(System.currentTimeMillis() / 1000);\n    }\n\n}\n\n````\n\n## WechatNotify.java 微信支付回调结果封装\n\n````java\n\npackage xyz.dongxiaoxia.weixin.pay;\n\nimport javax.xml.bind.annotation.XmlRootElement;\nimport java.io.Serializable;\n\n/**\n * @author dongxiaoxia\n * @create 2016-06-28 11:10\n */\n\n@XmlRootElement(name=\"xml\")\npublic class WechatNotify implements Serializable {\n\n    private static final long serialVersionUID = 8047707600433551023L;\n    private String appid;\n    private String attach;\n    private String bank_type;\n    private String fee_type;\n    private String is_subscribe;\n    private String mch_id;\n    private String nonce_str;\n    private String openid;\n    private String out_trade_no;\n    private String result_code;\n    private String return_code;\n    private String sign;\n    private String sub_mch_id;\n    private String time_end;\n    private String total_fee;\n    private String trade_type;\n    private String transaction_id;\n\n    public String getAppid() {\n        return appid;\n    }\n\n    public void setAppid(String appid) {\n        this.appid = appid;\n    }\n\n    public String getAttach() {\n        return attach;\n    }\n\n    public void setAttach(String attach) {\n        this.attach = attach;\n    }\n\n    public String getBank_type() {\n        return bank_type;\n    }\n\n    public void setBank_type(String bank_type) {\n        this.bank_type = bank_type;\n    }\n\n    public String getFee_type() {\n        return fee_type;\n    }\n\n    public void setFee_type(String fee_type) {\n        this.fee_type = fee_type;\n    }\n\n    public String getIs_subscribe() {\n        return is_subscribe;\n    }\n\n    public void setIs_subscribe(String is_subscribe) {\n        this.is_subscribe = is_subscribe;\n    }\n\n    public String getMch_id() {\n        return mch_id;\n    }\n\n    public void setMch_id(String mch_id) {\n        this.mch_id = mch_id;\n    }\n\n    public String getNonce_str() {\n        return nonce_str;\n    }\n\n    public void setNonce_str(String nonce_str) {\n        this.nonce_str = nonce_str;\n    }\n\n    public String getOpenid() {\n        return openid;\n    }\n\n    public void setOpenid(String openid) {\n        this.openid = openid;\n    }\n\n    public String getOut_trade_no() {\n        return out_trade_no;\n    }\n\n    public void setOut_trade_no(String out_trade_no) {\n        this.out_trade_no = out_trade_no;\n    }\n\n    public String getResult_code() {\n        return result_code;\n    }\n\n    public void setResult_code(String result_code) {\n        this.result_code = result_code;\n    }\n\n    public String getReturn_code() {\n        return return_code;\n    }\n\n    public void setReturn_code(String return_code) {\n        this.return_code = return_code;\n    }\n\n    public String getSign() {\n        return sign;\n    }\n\n    public void setSign(String sign) {\n        this.sign = sign;\n    }\n\n    public String getSub_mch_id() {\n        return sub_mch_id;\n    }\n\n    public void setSub_mch_id(String sub_mch_id) {\n        this.sub_mch_id = sub_mch_id;\n    }\n\n    public String getTime_end() {\n        return time_end;\n    }\n\n    public void setTime_end(String time_end) {\n        this.time_end = time_end;\n    }\n\n    public String getTotal_fee() {\n        return total_fee;\n    }\n\n    public void setTotal_fee(String total_fee) {\n        this.total_fee = total_fee;\n    }\n\n    public String getTrade_type() {\n        return trade_type;\n    }\n\n    public void setTrade_type(String trade_type) {\n        this.trade_type = trade_type;\n    }\n\n    public String getTransaction_id() {\n        return transaction_id;\n    }\n\n    public void setTransaction_id(String transaction_id) {\n        this.transaction_id = transaction_id;\n    }\n}\n\n\n````\n\n## WechatPayModel.java 微信支付统一订单接口参数封装模型\n\n````java\n\npackage xyz.dongxiaoxia.weixin.pay;\n\nimport xyz.dongxiaoxia.common.config.Global;\n\nimport javax.xml.bind.annotation.XmlRootElement;\n\n/**\n * @author dongxiaoxia\n * @create 2016-06-28 11:11\n */\n\n@XmlRootElement(name = \"XML\")\npublic class WechatPayModel {\n\n    private String appid;\n    private String mch_id;\n    private String nonce_str;\n    private String body;\n    private String out_trade_no;\n    private String total_fee;\n    private String spbill_create_ip;\n    private String notify_url;\n    private String trade_type;\n    private String openid;\n    private String sign;\n\n    public String getAppid() {\n        return appid;\n    }\n\n    public void setAppid(String appid) {\n        this.appid = appid;\n    }\n\n    public String getMch_id() {\n        return mch_id;\n    }\n\n    public void setMch_id(String mch_id) {\n        this.mch_id = mch_id;\n    }\n\n    public String getNonce_str() {\n        return nonce_str;\n    }\n\n    public void setNonce_str(String nonce_str) {\n        this.nonce_str = nonce_str;\n    }\n\n    public String getOut_trade_no() {\n        return out_trade_no;\n    }\n\n    public void setOut_trade_no(String out_trade_no) {\n        this.out_trade_no = out_trade_no;\n    }\n\n    public String getTotal_fee() {\n        return total_fee;\n    }\n\n    public void setTotal_fee(String total_fee) {\n        this.total_fee = total_fee;\n    }\n\n    public String getSpbill_create_ip() {\n        return spbill_create_ip;\n    }\n\n    public void setSpbill_create_ip(String spbill_create_ip) {\n        this.spbill_create_ip = spbill_create_ip;\n    }\n\n    public String getNotify_url() {\n        return notify_url;\n    }\n\n    public void setNotify_url(String notify_url) {\n        this.notify_url = notify_url;\n    }\n\n    public String getTrade_type() {\n        return trade_type;\n    }\n\n    public void setTrade_type(String trade_type) {\n        this.trade_type = trade_type;\n    }\n\n    public String getBody() {\n        return body;\n    }\n\n    public void setBody(String body) {\n        this.body = body;\n    }\n\n    public String getSign() {\n        return sign;\n    }\n\n    public void setSign(String sign) {\n        this.sign = sign;\n    }\n\n    public String getOpenid() {\n        return openid;\n    }\n\n    public void setOpenid(String openid) {\n        this.openid = openid;\n    }\n\n    public void sign(SignMD5 encoder) {\n        StringBuilder stringBuilder = new StringBuilder();\n        stringBuilder.append(\"appid=\").append(getAppid());\n        stringBuilder.append(\"&body=\").append(getBody());\n        stringBuilder.append(\"&mch_id=\").append(getMch_id());\n        stringBuilder.append(\"&nonce_str=\").append(getNonce_str());\n        stringBuilder.append(\"&notify_url=\").append(getNotify_url());\n        stringBuilder.append(\"&openid=\").append(getOpenid());\n        stringBuilder.append(\"&out_trade_no=\").append(getOut_trade_no());\n        stringBuilder.append(\"&spbill_create_ip=\").append(getSpbill_create_ip());\n        stringBuilder.append(\"&total_fee=\").append(getTotal_fee());\n        stringBuilder.append(\"&trade_type=\").append(getTrade_type());\n        stringBuilder.append(\"&key=\").append(Global.getConfig(\"payKey\"));\n        this.sign = encoder.encode(stringBuilder.toString());\n    }\n\n    @Override\n    public String toString() {\n        return \"<xml>\" +\n                \"<appid><![CDATA[\" + appid + \"]]></appid>\" +\n                \"<body><![CDATA[\" + body + \"]]></body>\" +\n                \"<mch_id><![CDATA[\" + mch_id + \"]]></mch_id>\" +\n                \"<nonce_str><![CDATA[\" + nonce_str + \"]]></nonce_str>\" +\n                \"<notify_url><![CDATA[\" + notify_url + \"]]></notify_url>\" +\n                \"<openid><![CDATA[\" + openid + \"]]></openid>\" +\n                \"<out_trade_no><![CDATA[\" + out_trade_no + \"]]></out_trade_no>\" +\n                \"<spbill_create_ip><![CDATA[\" + spbill_create_ip + \"]]></spbill_create_ip>\" +\n                \"<trade_type><![CDATA[\" + trade_type + \"]]></trade_type>\" +\n                \"<total_fee><![CDATA[\" + total_fee + \"]]></total_fee>\" +\n                \"<sign><![CDATA[\" + sign + \"]]></sign>\" +\n                \"</xml>\";\n    }\n}\n\n````\n\n## WechatRefundModel.java 微信退款接口参数封装模型\n\n````java\n\npackage xyz.dongxiaoxia.weixin.pay;\n\nimport xyz.dongxiaoxia.common.config.Global;\n\nimport javax.xml.bind.annotation.XmlRootElement;\n\n/**\n * @author dongxiaoxia\n * @create 2017-01-03 20:30\n */\n\n@XmlRootElement(name = \"XML\")\npublic class WechatRefundModel {\n\n    private String appid;\n    private String mch_id;\n    private String nonce_str;\n    private String op_user_id;\n    private String out_refund_no;\n    private String out_trade_no;\n    private String refund_fee;\n    private String sign;\n    private String total_fee;\n\n    public String getAppid() {\n        return appid;\n    }\n\n    public void setAppid(String appid) {\n        this.appid = appid;\n    }\n\n    public String getMch_id() {\n        return mch_id;\n    }\n\n    public void setMch_id(String mch_id) {\n        this.mch_id = mch_id;\n    }\n\n    public String getNonce_str() {\n        return nonce_str;\n    }\n\n    public void setNonce_str(String nonce_str) {\n        this.nonce_str = nonce_str;\n    }\n\n    public String getOp_user_id() {\n        return op_user_id;\n    }\n\n    public void setOp_user_id(String op_user_id) {\n        this.op_user_id = op_user_id;\n    }\n\n    public String getOut_refund_no() {\n        return out_refund_no;\n    }\n\n    public void setOut_refund_no(String out_refund_no) {\n        this.out_refund_no = out_refund_no;\n    }\n\n    public String getOut_trade_no() {\n        return out_trade_no;\n    }\n\n    public void setOut_trade_no(String out_trade_no) {\n        this.out_trade_no = out_trade_no;\n    }\n\n    public String getRefund_fee() {\n        return refund_fee;\n    }\n\n    public void setRefund_fee(String refund_fee) {\n        this.refund_fee = refund_fee;\n    }\n\n    public String getTotal_fee() {\n        return total_fee;\n    }\n\n    public void setTotal_fee(String total_fee) {\n        this.total_fee = total_fee;\n    }\n\n    public String getSign() {\n        return sign;\n    }\n\n    public void setSign(String sign) {\n        this.sign = sign;\n    }\n\n    public void sign(SignMD5 encoder) {\n        StringBuilder stringBuilder = new StringBuilder();\n        stringBuilder.append(\"appid=\").append(getAppid());\n        stringBuilder.append(\"&mch_id=\").append(getMch_id());\n        stringBuilder.append(\"&nonce_str=\").append(getNonce_str());\n        stringBuilder.append(\"&op_user_id=\").append(getOp_user_id());\n        stringBuilder.append(\"&out_refund_no=\").append(getOut_refund_no());\n        stringBuilder.append(\"&out_trade_no=\").append(getOut_trade_no());\n        stringBuilder.append(\"&refund_fee=\").append(getRefund_fee());\n        stringBuilder.append(\"&total_fee=\").append(getTotal_fee());\n        stringBuilder.append(\"&key=\").append(Global.getConfig(\"payKey\"));\n        this.sign = encoder.encode(stringBuilder.toString());\n    }\n\n    @Override\n    public String toString() {\n        return \"<xml>\" +\n                \"<appid><![CDATA[\" + appid + \"]]></appid>\" +\n                \"<mch_id><![CDATA[\" + mch_id + \"]]></mch_id>\" +\n                \"<nonce_str><![CDATA[\" + nonce_str + \"]]></nonce_str>\" +\n                \"<op_user_id><![CDATA[\" + op_user_id + \"]]></op_user_id>\" +\n                \"<out_refund_no><![CDATA[\" + out_refund_no + \"]]></out_refund_no>\" +\n                \"<out_trade_no><![CDATA[\" + out_trade_no + \"]]></out_trade_no>\" +\n                \"<refund_fee><![CDATA[\" + refund_fee + \"]]></refund_fee>\" +\n                \"<total_fee><![CDATA[\" + total_fee + \"]]></total_fee>\" +\n                \"<sign><![CDATA[\" + sign + \"]]></sign>\" +\n                \"</xml>\";\n    }\n}\n\n````","slug":"pay","published":1,"updated":"2017-01-19T07:50:11.938Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431olp000muco0c4lf9gg9","content":"<p>微信支付功能模块是一个可以抽离的模块，因此controller、service等集中放在一个包下管理。<br>由于业务需求，现在与OrderController、OrderService集成耦合。<br>本文档是根据实际项目抽取总结出来的，很多代码可以根据实际开发进一步更改完善。</p>\n<h1 id=\"最终实现目标\">最终实现目标</h1><ol>\n<li>实现微信公众号支付功能</li>\n<li>实现微信公众号退款功能</li>\n<li>本文档附加了大部分的支付模块源码，通过本文档就能抽取出一个独立的支付模块，方便快速开发。</li>\n</ol>\n<h1 id=\"准备条件\">准备条件</h1><ol>\n<li><p><a href=\"https://pay.weixin.qq.com/index.php\" target=\"_blank\" rel=\"external\">微信支付|商户平台</a>的账号</p>\n<ul>\n<li>这个不归程序员准备，略过</li>\n<li>商户平台的账号必须与公众号的配置对应，在公众号的微信支付模块设置</li>\n</ul>\n</li>\n<li><p>一个可以在公网访问的公众号</p>\n<ul>\n<li>微信支付不能在localhost测试</li>\n<li>微信支付不能在微信web开发者工具上测试，只能在手机真实试验</li>\n<li>公众号相关配置的要配置设置好</li>\n</ul>\n</li>\n</ol>\n<h1 id=\"微信支付思路\">微信支付思路</h1><ol>\n<li>应该存在一个支付页面，假设页面很简单，上面就一个支付按钮，用户点击按钮就能够完成支付。</li>\n<li>用户点击的时候，Ajax 调用后台创建接口接口。</li>\n<li>创建订单接口首先会创建一个未付款的订单，订单的参数如价格、数量、订单号、等可以根据业务自定义。</li>\n<li>创建订单后，会调用微信提供的统一下单接口，微信会根据我们传递的参数，生成一个预支付交易会话标识（prepay_id，就是通过这个来识别该订单的），返回给后台。</li>\n<li>后台接收到prepay_id后，构造微信支付所需要的参数，把参数返回给客户端。</li>\n<li>客户端之前发起的 Ajax 请求，接收到成功的响应后，拿接收到的参数调用JSAPI支付接口，向微信发起支付。</li>\n<li>如果之前的步骤都成功，微信会弹出支付页面，让用户输入密码支付。</li>\n<li>支付成功后微信会跳转H5页面，并且异步通知后台支付结果，后台进一步处理订单，如标记订单付款成功，更新订单日志。</li>\n</ol>\n<p>简而言之，服务器创建订单，触发微信支付，支付后微信异步回调，服务器修改订单状态。</p>\n<h1 id=\"简单实现微信支付的两个功能\">简单实现微信支付的两个功能</h1><h2 id=\"公众号支付\">公众号支付</h2><h3 id=\"1-下单\">1.下单</h3><p>第一步，根据业务生成未支付的订单，调用微信支付统一下单接口，获取微信支付统一订单号 prepay_id ，有了这个才能进一步支付；调起微信支付，获取微信支付下单结果信息集合，集合信息为供页面调用微信JS_API的一些字段信息。</p>\n<h4 id=\"下单（未付款）方法\">下单（未付款）方法</h4><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">    private static final String NOTIFY_URL = Global.getConfig(\"domainName\") + \"/pay/notify\";//微信支付回调接口</span><br><span class=\"line\">    private static final String PAY_RESULT_URL = Global.getConfig(\"domainName\") + \"/pay/result\";//微信支付结果页面接口</span><br><span class=\"line\">    private static final String PAY_BODY = \"牙齐齐服务\";</span><br><span class=\"line\">    </span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * 下单（但付款）</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * @param items           订单对应项目</span><br><span class=\"line\">     * @param owner           订单拥有者</span><br><span class=\"line\">     * @return 微信支付下单结果信息集合</span><br><span class=\"line\">     */</span><br><span class=\"line\">    public Map add(Items items, User owner) &#123;</span><br><span class=\"line\">        Order order = new Order();</span><br><span class=\"line\">        order.setItems(items);</span><br><span class=\"line\">        order.setPayMoney(items.getPrice());</span><br><span class=\"line\">        order.setStatus(OrderStatus.NEED_PAY.getCode());</span><br><span class=\"line\">        order.setPayResult(PayResult.NEED_PAY.getCode());</span><br><span class=\"line\">        this.save(order);</span><br><span class=\"line\">        //支付倒计时，定时删除未支付的订单</span><br><span class=\"line\">        TIMER.schedule(new TimeoutTask(order.getId()), DEFAULT_VALIDITY_TIME);</span><br><span class=\"line\">        //调用微信支付统一下单接口，获取微信支付统一订单号</span><br><span class=\"line\">        String res = payService.unifiedorder(NOTIFY_URL, owner.getOpenId(), PAY_BODY, String.valueOf(order.getPayMoney()), order.getId());</span><br><span class=\"line\">        //调起微信支付，获取微信支付下单结果信息集合</span><br><span class=\"line\">        return payService.wechatPay(res, PAY_RESULT_URL);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">````    </span><br><span class=\"line\"></span><br><span class=\"line\">#### 微信支付统一下单接口</span><br><span class=\"line\"></span><br><span class=\"line\">````java</span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * 微信支付统一下单接口</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * @param notifyUrl    支付成功后回调路径</span><br><span class=\"line\">     * @param openId       用户的 openId</span><br><span class=\"line\">     * @param body         商品描述</span><br><span class=\"line\">     * @param total        支付金额（单位分）</span><br><span class=\"line\">     * @param out_trade_no 订单唯一订单号</span><br><span class=\"line\">     * @return</span><br><span class=\"line\">     */</span><br><span class=\"line\">    public String unifiedorder(String notifyUrl, String openId, String body, String total, String out_trade_no) &#123;</span><br><span class=\"line\">        WechatPayModel xml = new WechatPayModel();</span><br><span class=\"line\">        xml.setAppid(Global.getConfig(\"appid\"));</span><br><span class=\"line\">        xml.setMch_id(Global.getConfig(\"mchid\"));</span><br><span class=\"line\">        xml.setNonce_str(encoder.createNonceStr());</span><br><span class=\"line\">        xml.setBody(body);</span><br><span class=\"line\">        xml.setOut_trade_no(out_trade_no);</span><br><span class=\"line\">        xml.setTotal_fee(total);</span><br><span class=\"line\">        xml.setSpbill_create_ip(\"127.0.0.1\");//// TODO: 2016/6/28</span><br><span class=\"line\">        xml.setNotify_url(notifyUrl);</span><br><span class=\"line\">        xml.setTrade_type(\"JSAPI\");</span><br><span class=\"line\">        xml.setOpenid(openId);</span><br><span class=\"line\">        xml.sign(encoder);</span><br><span class=\"line\"></span><br><span class=\"line\">        String result = restTemplate.postForObject(\"https://api.mch.weixin.qq.com/pay/unifiedorder\", xml, String.class);</span><br><span class=\"line\">        return result;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"获取页面调用所需参数\">获取页面调用所需参数</h4><p>需要注意的是支付不能在微信开发者接口测试，只能在手机上测试哦！</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">/**</span><br><span class=\"line\"> * 调起微信支付</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * <span class=\"doctag\">@param</span> model</span><br><span class=\"line\"> * <span class=\"doctag\">@param</span> res   预支付订单 字符串</span><br><span class=\"line\"> * <span class=\"doctag\">@param</span> url   微信支付 url</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">wechatPay</span><span class=\"params\">(Model model, String res, String url)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        Map&lt;String, String&gt; start = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        StringBuilder startSign = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">        Map&lt;String, String&gt; pay = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        StringBuilder paySign = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">        Map map = XmlHelper.of(res).toMap();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (StringUtils.equals((String) map.get(<span class=\"string\">\"return_code\"</span>), <span class=\"string\">\"SUCCESS\"</span>)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 得到的预支付订单，重新生成微信支付参数</span></span><br><span class=\"line\">            String prepay_id = (String) map.get(<span class=\"string\">\"prepay_id\"</span>);</span><br><span class=\"line\">            String jsapi_ticket = TicketManager.getDefaultTicket();</span><br><span class=\"line\">            <span class=\"comment\">// 生成 微信支付 config 参数</span></span><br><span class=\"line\">            start.put(<span class=\"string\">\"appId\"</span>, Global.getConfig(<span class=\"string\">\"appid\"</span>));</span><br><span class=\"line\">            start.put(<span class=\"string\">\"nonceStr\"</span>, encoder.createNonceStr());</span><br><span class=\"line\">            start.put(<span class=\"string\">\"timestamp\"</span>, encoder.createTimeStamp());</span><br><span class=\"line\">            <span class=\"comment\">// 生成 config 签名</span></span><br><span class=\"line\">            startSign.append(<span class=\"string\">\"jsapi_ticket=\"</span>).append(jsapi_ticket);</span><br><span class=\"line\">            startSign.append(<span class=\"string\">\"&amp;noncestr=\"</span>).append(start.get(<span class=\"string\">\"nonceStr\"</span>));</span><br><span class=\"line\">            startSign.append(<span class=\"string\">\"&amp;timestamp=\"</span>).append(start.get(<span class=\"string\">\"timestamp\"</span>));</span><br><span class=\"line\">            startSign.append(<span class=\"string\">\"&amp;url=\"</span>).append(url);</span><br><span class=\"line\">            start.put(<span class=\"string\">\"signature\"</span>, encoder.encode(startSign.toString()));</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// config信息验证后会执行ready方法的参数</span></span><br><span class=\"line\">            pay.put(<span class=\"string\">\"signType\"</span>, <span class=\"string\">\"MD5\"</span>);</span><br><span class=\"line\">            pay.put(<span class=\"string\">\"packageStr\"</span>, <span class=\"string\">\"prepay_id=\"</span> + prepay_id);</span><br><span class=\"line\">            <span class=\"comment\">// 生成支付签名</span></span><br><span class=\"line\">            paySign.append(<span class=\"string\">\"appId=\"</span>).append(start.get(<span class=\"string\">\"appId\"</span>));</span><br><span class=\"line\">            paySign.append(<span class=\"string\">\"&amp;nonceStr=\"</span>).append(start.get(<span class=\"string\">\"nonceStr\"</span>));</span><br><span class=\"line\">            paySign.append(<span class=\"string\">\"&amp;package=\"</span>).append(pay.get(<span class=\"string\">\"packageStr\"</span>));</span><br><span class=\"line\">            paySign.append(<span class=\"string\">\"&amp;signType=\"</span>).append(pay.get(<span class=\"string\">\"signType\"</span>));</span><br><span class=\"line\">            paySign.append(<span class=\"string\">\"&amp;timeStamp=\"</span>).append(start.get(<span class=\"string\">\"timestamp\"</span>));</span><br><span class=\"line\">            paySign.append(<span class=\"string\">\"&amp;key=\"</span>).append(Global.getConfig(<span class=\"string\">\"payKey\"</span>));</span><br><span class=\"line\">            pay.put(<span class=\"string\">\"paySign\"</span>, encoder.encode(paySign.toString()));</span><br><span class=\"line\">            <span class=\"comment\">// 将微信支参数放入 model 对象中以便前端使用</span></span><br><span class=\"line\">            model.addAttribute(<span class=\"string\">\"start\"</span>, start);</span><br><span class=\"line\">            model.addAttribute(<span class=\"string\">\"pay\"</span>, pay);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            LOGGER.error(<span class=\"keyword\">new</span> String(PaymentKit.xmlToMap(res).get(<span class=\"string\">\"return_msg\"</span>).getBytes(<span class=\"string\">\"iso8859-1\"</span>)));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        model.addAttribute(<span class=\"string\">\"wechatMessage\"</span>, <span class=\"string\">\"微信授权失败!\"</span>);</span><br><span class=\"line\">        LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-支付\">2.支付</h3><p>支付页面源码：<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%@</span> <span class=\"attr\">page</span> <span class=\"attr\">contentType</span>=<span class=\"string\">\"text/html;charset=UTF-8\"</span> <span class=\"attr\">language</span>=<span class=\"string\">\"java\"</span> %&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%@</span> <span class=\"attr\">include</span> <span class=\"attr\">file</span>=<span class=\"string\">\"/WEB-INF/views/include/taglib.jsp\"</span> %&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"IE=$&#123;ctxStatic&#125;edge\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%@include</span> <span class=\"attr\">file</span>=<span class=\"string\">\"/WEB-INF/views/include/css.jsp\"</span> %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>确认订单<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">ontouchstart</span>=<span class=\"string\">\"\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">onclick</span>=<span class=\"string\">\"addOrder()\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"javascript:;\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"weui_btn weui_btn_primary\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin: 0rem 1rem\"</span>&gt;</span>支付<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%@include</span> <span class=\"attr\">file</span>=<span class=\"string\">\"/WEB-INF/views/include/js.jsp\"</span> %&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://res.wx.qq.com/open/js/jweixin-1.0.0.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"undefined\"></span><br><span class=\"line\"></span><br><span class=\"line\">    function addOrder() &#123;</span><br><span class=\"line\">        var itemsId = '$&#123;items.id&#125;';</span><br><span class=\"line\">        $.showLoading(\"正在处理...\");</span><br><span class=\"line\">        $.post(\"$&#123;ctx&#125;/order\", &#123;itemsId: itemsId&#125;, function (result) &#123;</span><br><span class=\"line\">            $.hideLoading();</span><br><span class=\"line\">            if (result &amp;&amp; result.success) &#123;</span><br><span class=\"line\">                $.hideLoading();</span><br><span class=\"line\">                pay(result.data);</span><br><span class=\"line\">            &#125; else &#123;</span><br><span class=\"line\">                $.toptip(result.message, 'error');</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //微信支付</span><br><span class=\"line\">    function pay(data) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        //config</span><br><span class=\"line\">        var appId = data.start.appId;</span><br><span class=\"line\">        var timeStamp = data.start.timestamp;</span><br><span class=\"line\">        var nonceStr = data.start.nonceStr;</span><br><span class=\"line\">        var signature = data.start.signature;</span><br><span class=\"line\"></span><br><span class=\"line\">        var signType = data.pay.signType;</span><br><span class=\"line\">        var pk = data.pay.packageStr;</span><br><span class=\"line\">        var paySign = data.pay.paySign;</span><br><span class=\"line\"></span><br><span class=\"line\">        wx.config(&#123;</span><br><span class=\"line\">            debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。</span><br><span class=\"line\">            appId: appId, // 必填，公众号的唯一标识</span><br><span class=\"line\">            timestamp: timeStamp, // 必填，生成签名的时间戳</span><br><span class=\"line\">            nonceStr: nonceStr, // 必填，生成签名的随机串</span><br><span class=\"line\">            signature: signature,// 必填，签名，见附录1</span><br><span class=\"line\">            jsApiList: ['chooseWXPay'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        wx.ready(function (res) &#123;</span><br><span class=\"line\">            // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。</span><br><span class=\"line\">            wx.chooseWXPay(&#123;</span><br><span class=\"line\">                timestamp: timeStamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符</span><br><span class=\"line\">                nonceStr: nonceStr, // 支付签名随机串，不长于 32 位</span><br><span class=\"line\">                package: pk, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=***）</span><br><span class=\"line\">                signType: signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'</span><br><span class=\"line\">                paySign: paySign, // 支付签名</span><br><span class=\"line\">                success: function (res) &#123;</span><br><span class=\"line\">                    location.href = 'http://' + location.host + '/order';</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                cancel: function (res) &#123;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                fail: function (res) &#123;</span><br><span class=\"line\">                    $.toptip('支付失败！', 'error');</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        wx.error(function (res) &#123;</span><br><span class=\"line\">            alert(\"error:\" + JSON.stringify(res));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3-支付回调\">3.支付回调</h3><p>在第一步时我们有配置了两个参数，其中：<br> PAY_RESULT_URL 为微信支付成功后跳转的页面URL<br> NOTIFY_URL 为支付成功后微信回调触发的接口，通过触发，完成服务器订单付款状态的更改</p>\n<p> 可能会对这个接口感到奇怪，我们明明没有在项目中调用过这个接口啊。<br> 要理解这个接口就要理解回调的概念，这里就详细解释回调的含义的，只需明白，这个是专门提供给微信调用的就行了，发起支付时，是在微信上实现的，我们并不知道支付的结果，只能等微信主动通知我们。</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\">     * 微信支付成功后的回调函数</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> request</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"/notify\"</span>, method = RequestMethod.POST)</span><br><span class=\"line\">    <span class=\"meta\">@ResponseBody</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">wechatNotify</span><span class=\"params\">(HttpServletRequest request)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 从 request 对象中获取 WechatNotify 对象</span></span><br><span class=\"line\">        WechatNotify notify = getNotifyBean(request);</span><br><span class=\"line\">        <span class=\"comment\">// 如果 notify 对象不为空 并且 result_code 和 return_code 都为 'SUCCESS' 则表示支付成功</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (StringUtils.equals(notify.getResult_code(), <span class=\"string\">\"SUCCESS\"</span>) &amp;&amp; StringUtils.equals(notify.getReturn_code(), <span class=\"string\">\"SUCCESS\"</span>)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                orderService.update(notify.getOut_trade_no(), notify.getTime_end());</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">                logger.error(e.getMessage(), e);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\\n&lt;return_code&gt;&lt;![CDATA[FAIL]]&gt;&lt;/return_code&gt;\\n&lt;return_msg&gt;&lt;![CDATA[ERROR]]&gt;&lt;/return_msg&gt;\\n&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\\n&lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;\\n&lt;return_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/return_msg&gt;\\n&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\\n&lt;return_code&gt;&lt;![CDATA[FAIL]]&gt;&lt;/return_code&gt;\\n&lt;return_msg&gt;&lt;![CDATA[ERROR]]&gt;&lt;/return_msg&gt;\\n&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"退款\">退款</h2><p>退款相对于付款就麻烦一点，因为给钱给微信与向微信拿钱肯定不一样。<br>首先就是证书的下载与放置到项目中，略。<br>剩下就是调用微信退款接口，部分代码如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\">   * 退款</span><br><span class=\"line\">   *</span><br><span class=\"line\">   * <span class=\"doctag\">@param</span> order 订单</span><br><span class=\"line\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">refund</span><span class=\"params\">(Order order)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">//1. 微信退款</span></span><br><span class=\"line\">      <span class=\"keyword\">boolean</span> refundResult = payService.refund(order.getId(), order.getId(), String.valueOf(order.getPayMoney()), String.valueOf(order.getPayMoney()));</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!refundResult) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> OrderException(<span class=\"string\">\"退款失败\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">//2.处理订单</span></span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          order.setStatus(OrderStatus.REFUNDED.getCode());</span><br><span class=\"line\">          order.setRefundTime(<span class=\"keyword\">new</span> Date());</span><br><span class=\"line\">          order.setRefundedTime(<span class=\"keyword\">new</span> Date());</span><br><span class=\"line\">          save(order);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">          LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> OrderException(<span class=\"string\">\"退款失败，请联系客服\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"comment\">/**</span><br><span class=\"line\">       * 退款</span><br><span class=\"line\">       * <span class=\"doctag\">@return</span></span><br><span class=\"line\">       */</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">refund</span><span class=\"params\">(String out_refund_no,String out_trade_no,String refund_fee,String total_fee)</span> </span>&#123;</span><br><span class=\"line\">          WechatRefundModel xml = <span class=\"keyword\">new</span> WechatRefundModel();</span><br><span class=\"line\">          xml.setAppid(Global.getConfig(<span class=\"string\">\"appid\"</span>));</span><br><span class=\"line\">          xml.setMch_id(Global.getConfig(<span class=\"string\">\"mchid\"</span>));</span><br><span class=\"line\">          xml.setNonce_str(encoder.createNonceStr());</span><br><span class=\"line\">          xml.setOp_user_id(Global.getConfig(<span class=\"string\">\"mchid\"</span>));</span><br><span class=\"line\">          xml.setOut_refund_no(out_refund_no);</span><br><span class=\"line\">          xml.setOut_trade_no(out_trade_no);</span><br><span class=\"line\">          xml.setRefund_fee(refund_fee);</span><br><span class=\"line\">          xml.setTotal_fee(total_fee);</span><br><span class=\"line\">          xml.sign(encoder);</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">              String result = doRefund(<span class=\"string\">\"https://api.mch.weixin.qq.com/secapi/pay/refund\"</span>,xml.toString());</span><br><span class=\"line\">              Map map = XmlHelper.of(result).toMap();</span><br><span class=\"line\">              String returnCode = (String) map.get(<span class=\"string\">\"return_code\"</span>);</span><br><span class=\"line\">              <span class=\"keyword\">if</span> (returnCode.equals(<span class=\"string\">\"SUCCESS\"</span>))&#123;</span><br><span class=\"line\">                  <span class=\"comment\">//todo</span></span><br><span class=\"line\">                  LOGGER.error(<span class=\"string\">\"=============================\"</span>+map.get(<span class=\"string\">\"return_msg\"</span>)+ <span class=\"string\">\"====================================\"</span>);</span><br><span class=\"line\">                  <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">              &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                  LOGGER.error(<span class=\"string\">\"=============================\"</span>+map.get(<span class=\"string\">\"return_msg\"</span>)+ <span class=\"string\">\"====================================\"</span>);</span><br><span class=\"line\">                  <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">          &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">              LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">              <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">private</span>  String <span class=\"title\">doRefund</span><span class=\"params\">(String url,String data)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">          KeyStore keyStore  = KeyStore.getInstance(<span class=\"string\">\"PKCS12\"</span>);</span><br><span class=\"line\">          InputStream instream = <span class=\"keyword\">this</span>.getClass().getClassLoader().getResourceAsStream(<span class=\"string\">\"apiclient_cert.p12\"</span>);<span class=\"comment\">//P12文件目录</span></span><br><span class=\"line\">          <span class=\"keyword\">char</span>[] password = Global.getConfig(<span class=\"string\">\"mchid\"</span>).toCharArray();</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">              keyStore.load(instream, password);<span class=\"comment\">//这里写密码..默认是你的MCHID</span></span><br><span class=\"line\">          &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">              instream.close();</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          SSLContext sslcontext = SSLContexts.custom()</span><br><span class=\"line\">                  .loadKeyMaterial(keyStore, password)<span class=\"comment\">//这里也是写密码的</span></span><br><span class=\"line\">                  .build();</span><br><span class=\"line\">          <span class=\"comment\">// Allow TLSv1 protocol only</span></span><br><span class=\"line\">          SSLConnectionSocketFactory sslsf = <span class=\"keyword\">new</span> SSLConnectionSocketFactory(</span><br><span class=\"line\">                  sslcontext,</span><br><span class=\"line\">                  <span class=\"keyword\">new</span> String[] &#123; <span class=\"string\">\"TLSv1\"</span> &#125;,</span><br><span class=\"line\">                  <span class=\"keyword\">null</span>,</span><br><span class=\"line\">                  SSLConnectionSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);</span><br><span class=\"line\">          CloseableHttpClient httpclient = HttpClients.custom()</span><br><span class=\"line\">                  .setSSLSocketFactory(sslsf)</span><br><span class=\"line\">                  .build();</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">              HttpPost httpost = <span class=\"keyword\">new</span> HttpPost(url); <span class=\"comment\">// 设置响应头信息</span></span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"Connection\"</span>, <span class=\"string\">\"keep-alive\"</span>);</span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"Accept\"</span>, <span class=\"string\">\"*/*\"</span>);</span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"Content-Type\"</span>, <span class=\"string\">\"application/x-www-form-urlencoded; charset=UTF-8\"</span>);</span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"Host\"</span>, <span class=\"string\">\"api.mch.weixin.qq.com\"</span>);</span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"X-Requested-With\"</span>, <span class=\"string\">\"XMLHttpRequest\"</span>);</span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"Cache-Control\"</span>, <span class=\"string\">\"max-age=0\"</span>);</span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"User-Agent\"</span>, <span class=\"string\">\"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0) \"</span>);</span><br><span class=\"line\">              httpost.setEntity(<span class=\"keyword\">new</span> StringEntity(data, <span class=\"string\">\"UTF-8\"</span>));</span><br><span class=\"line\">              CloseableHttpResponse response = httpclient.execute(httpost);</span><br><span class=\"line\">              <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                  HttpEntity entity = response.getEntity();</span><br><span class=\"line\">  </span><br><span class=\"line\">                  String jsonStr = EntityUtils.toString(response.getEntity(), <span class=\"string\">\"UTF-8\"</span>);</span><br><span class=\"line\">                  EntityUtils.consume(entity);</span><br><span class=\"line\">                  <span class=\"keyword\">return</span> jsonStr;</span><br><span class=\"line\">              &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                  response.close();</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">          &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">              httpclient.close();</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"源码\">源码</h1><h2 id=\"PayController-java\">PayController.java</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.weixin.pay;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.LoggerFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Controller;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.config.Global;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.controller.BaseController;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.utils.StringUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.Order;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.service.OrderService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.service.UserService;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.bind.JAXBContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.bind.JAXBException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.bind.Unmarshaller;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.DataInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.StringReader;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Created by dongxiaoxia on 2016/12/29.</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Controller</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"pay\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PayController</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(PayController.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> PayService payService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OrderService orderService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserService userService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 支付完成页面</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 跳转支付完成页面，由微信端支付完成后自动跳转</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"result\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">result</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"pay/result\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 微信支付成功后的回调函数</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> request</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"/notify\"</span>, method = RequestMethod.POST)</span><br><span class=\"line\">    <span class=\"meta\">@ResponseBody</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">wechatNotify</span><span class=\"params\">(HttpServletRequest request)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 从 request 对象中获取 WechatNotify 对象</span></span><br><span class=\"line\">        WechatNotify notify = getNotifyBean(request);</span><br><span class=\"line\">        <span class=\"comment\">// 如果 notify 对象不为空 并且 result_code 和 return_code 都为 'SUCCESS' 则表示支付成功</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (StringUtils.equals(notify.getResult_code(), <span class=\"string\">\"SUCCESS\"</span>) &amp;&amp; StringUtils.equals(notify.getReturn_code(), <span class=\"string\">\"SUCCESS\"</span>)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                orderService.update(notify.getOut_trade_no(), notify.getTime_end());</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">                logger.error(e.getMessage(), e);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\\n&lt;return_code&gt;&lt;![CDATA[FAIL]]&gt;&lt;/return_code&gt;\\n&lt;return_msg&gt;&lt;![CDATA[ERROR]]&gt;&lt;/return_msg&gt;\\n&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\\n&lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;\\n&lt;return_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/return_msg&gt;\\n&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\\n&lt;return_code&gt;&lt;![CDATA[FAIL]]&gt;&lt;/return_code&gt;\\n&lt;return_msg&gt;&lt;![CDATA[ERROR]]&gt;&lt;/return_msg&gt;\\n&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 微信回调成功后 将 xml 转换为  WechatNotify 对象</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> request</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> WechatNotify 对象</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> WechatNotify <span class=\"title\">getNotifyBean</span><span class=\"params\">(HttpServletRequest request)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            DataInputStream in = <span class=\"keyword\">new</span> DataInputStream(request.getInputStream());</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] dataOrigin = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[request.getContentLength()];</span><br><span class=\"line\">            <span class=\"comment\">// 根据长度，将消息实体的内容读入字节数组dataOrigin中</span></span><br><span class=\"line\">            in.readFully(dataOrigin);</span><br><span class=\"line\">            <span class=\"comment\">// 关闭数据流</span></span><br><span class=\"line\">            in.close();</span><br><span class=\"line\">            <span class=\"comment\">// 从字节数组中得到表示实体的字符串</span></span><br><span class=\"line\">            String xml = <span class=\"keyword\">new</span> String(dataOrigin);</span><br><span class=\"line\">            <span class=\"comment\">// 将 xml 转换为  WechatNotify 对象</span></span><br><span class=\"line\">            Object object;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                JAXBContext jc = JAXBContext.newInstance(WechatNotify.class);</span><br><span class=\"line\">                Unmarshaller us = jc.createUnmarshaller();</span><br><span class=\"line\">                object = us.unmarshal(<span class=\"keyword\">new</span> StringReader(xml));</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (JAXBException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">                object = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (object != <span class=\"keyword\">null</span> &amp;&amp; object <span class=\"keyword\">instanceof</span> WechatNotify) &#123;</span><br><span class=\"line\">                WechatNotify notify = (WechatNotify) object;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> notify;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"PayService-java_支付回调控制器\">PayService.java 支付回调控制器</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.weixin.pay;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.jfinal.weixin.sdk.kit.PaymentKit;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.jfinal.weixin.sdk.utils.XmlHelper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.HttpEntity;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.conn.ssl.SSLConnectionSocketFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.conn.ssl.SSLContexts;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.entity.StringEntity;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.util.EntityUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.LoggerFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.ui.Model;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.client.RestTemplate;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.config.Global;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.utils.StringUtils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.net.ssl.SSLContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.KeyStore;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2016-06-28 11:15</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PayService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(PayService.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    SignMD5 encoder = <span class=\"keyword\">new</span> SignMD5();</span><br><span class=\"line\">    RestTemplate restTemplate = <span class=\"keyword\">new</span> RestTemplate();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 微信支付统一下单接口</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> notifyUrl    支付成功后回调路径</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> openId       用户的 openId</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> body         商品描述</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> total        支付金额（单位分）</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> out_trade_no 订单唯一订单号</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">unifiedorder</span><span class=\"params\">(String notifyUrl, String openId, String body, String total, String out_trade_no)</span> </span>&#123;</span><br><span class=\"line\">        WechatPayModel xml = <span class=\"keyword\">new</span> WechatPayModel();</span><br><span class=\"line\">        xml.setAppid(Global.getConfig(<span class=\"string\">\"appid\"</span>));</span><br><span class=\"line\">        xml.setMch_id(Global.getConfig(<span class=\"string\">\"mchid\"</span>));</span><br><span class=\"line\">        xml.setNonce_str(encoder.createNonceStr());</span><br><span class=\"line\">        xml.setBody(body);</span><br><span class=\"line\">        xml.setOut_trade_no(out_trade_no);</span><br><span class=\"line\">        xml.setTotal_fee(total);</span><br><span class=\"line\">        xml.setSpbill_create_ip(<span class=\"string\">\"127.0.0.1\"</span>);<span class=\"comment\">//// <span class=\"doctag\">TODO:</span> 2016/6/28</span></span><br><span class=\"line\">        xml.setNotify_url(notifyUrl);</span><br><span class=\"line\">        xml.setTrade_type(<span class=\"string\">\"JSAPI\"</span>);</span><br><span class=\"line\">        xml.setOpenid(openId);</span><br><span class=\"line\">        xml.sign(encoder);</span><br><span class=\"line\"></span><br><span class=\"line\">        String result = restTemplate.postForObject(<span class=\"string\">\"https://api.mch.weixin.qq.com/pay/unifiedorder\"</span>, xml, String.class);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 调起微信支付</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> model</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> res   预支付订单 字符串</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> url   微信支付 url</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">wechatPay</span><span class=\"params\">(Model model, String res, String url)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Map&lt;String, String&gt; start = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">            StringBuilder startSign = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">            Map&lt;String, String&gt; pay = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">            StringBuilder paySign = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">            Map map = XmlHelper.of(res).toMap();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (StringUtils.equals((String) map.get(<span class=\"string\">\"return_code\"</span>), <span class=\"string\">\"SUCCESS\"</span>)) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 得到的预支付订单，重新生成微信支付参数</span></span><br><span class=\"line\">                String prepay_id = (String) map.get(<span class=\"string\">\"prepay_id\"</span>);</span><br><span class=\"line\">                String jsapi_ticket = TicketManager.getDefaultTicket();</span><br><span class=\"line\">                <span class=\"comment\">// 生成 微信支付 config 参数</span></span><br><span class=\"line\">                start.put(<span class=\"string\">\"appId\"</span>, Global.getConfig(<span class=\"string\">\"appid\"</span>));</span><br><span class=\"line\">                start.put(<span class=\"string\">\"nonceStr\"</span>, encoder.createNonceStr());</span><br><span class=\"line\">                start.put(<span class=\"string\">\"timestamp\"</span>, encoder.createTimeStamp());</span><br><span class=\"line\">                <span class=\"comment\">// 生成 config 签名</span></span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"jsapi_ticket=\"</span>).append(jsapi_ticket);</span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"&amp;noncestr=\"</span>).append(start.get(<span class=\"string\">\"nonceStr\"</span>));</span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"&amp;timestamp=\"</span>).append(start.get(<span class=\"string\">\"timestamp\"</span>));</span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"&amp;url=\"</span>).append(url);</span><br><span class=\"line\">                start.put(<span class=\"string\">\"signature\"</span>, encoder.encode(startSign.toString()));</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">// config信息验证后会执行ready方法的参数</span></span><br><span class=\"line\">                pay.put(<span class=\"string\">\"signType\"</span>, <span class=\"string\">\"MD5\"</span>);</span><br><span class=\"line\">                pay.put(<span class=\"string\">\"packageStr\"</span>, <span class=\"string\">\"prepay_id=\"</span> + prepay_id);</span><br><span class=\"line\">                <span class=\"comment\">// 生成支付签名</span></span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"appId=\"</span>).append(start.get(<span class=\"string\">\"appId\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;nonceStr=\"</span>).append(start.get(<span class=\"string\">\"nonceStr\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;package=\"</span>).append(pay.get(<span class=\"string\">\"packageStr\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;signType=\"</span>).append(pay.get(<span class=\"string\">\"signType\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;timeStamp=\"</span>).append(start.get(<span class=\"string\">\"timestamp\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;key=\"</span>).append(Global.getConfig(<span class=\"string\">\"payKey\"</span>));</span><br><span class=\"line\">                pay.put(<span class=\"string\">\"paySign\"</span>, encoder.encode(paySign.toString()));</span><br><span class=\"line\">                <span class=\"comment\">// 将微信支参数放入 model 对象中以便前端使用</span></span><br><span class=\"line\">                model.addAttribute(<span class=\"string\">\"start\"</span>, start);</span><br><span class=\"line\">                model.addAttribute(<span class=\"string\">\"pay\"</span>, pay);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                LOGGER.error(<span class=\"keyword\">new</span> String(PaymentKit.xmlToMap(res).get(<span class=\"string\">\"return_msg\"</span>).getBytes(<span class=\"string\">\"iso8859-1\"</span>)));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            model.addAttribute(<span class=\"string\">\"wechatMessage\"</span>, <span class=\"string\">\"微信授权失败!\"</span>);</span><br><span class=\"line\">            LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 调起微信支付</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> res 预支付订单 字符串</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> url 微信支付 url</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Map <span class=\"title\">wechatPay</span><span class=\"params\">(String res, String url)</span> </span>&#123;</span><br><span class=\"line\">        Map&lt;String, Object&gt; result = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Map&lt;String, String&gt; start = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">            StringBuilder startSign = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">            Map&lt;String, String&gt; pay = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">            StringBuilder paySign = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">            Map map = XmlHelper.of(res).toMap();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (StringUtils.equals((String) map.get(<span class=\"string\">\"return_code\"</span>), <span class=\"string\">\"SUCCESS\"</span>)) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 得到的预支付订单，重新生成微信支付参数</span></span><br><span class=\"line\">                String prepay_id = (String) map.get(<span class=\"string\">\"prepay_id\"</span>);</span><br><span class=\"line\">                String jsapi_ticket = TicketManager.getDefaultTicket();</span><br><span class=\"line\">                <span class=\"comment\">// 生成 微信支付 config 参数</span></span><br><span class=\"line\">                start.put(<span class=\"string\">\"appId\"</span>, Global.getConfig(<span class=\"string\">\"appid\"</span>));</span><br><span class=\"line\">                start.put(<span class=\"string\">\"nonceStr\"</span>, encoder.createNonceStr());</span><br><span class=\"line\">                start.put(<span class=\"string\">\"timestamp\"</span>, encoder.createTimeStamp());</span><br><span class=\"line\">                <span class=\"comment\">// 生成 config 签名</span></span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"jsapi_ticket=\"</span>).append(jsapi_ticket);</span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"&amp;noncestr=\"</span>).append(start.get(<span class=\"string\">\"nonceStr\"</span>));</span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"&amp;timestamp=\"</span>).append(start.get(<span class=\"string\">\"timestamp\"</span>));</span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"&amp;url=\"</span>).append(url);</span><br><span class=\"line\">                start.put(<span class=\"string\">\"signature\"</span>, encoder.encode(startSign.toString()));</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">// config信息验证后会执行ready方法的参数</span></span><br><span class=\"line\">                pay.put(<span class=\"string\">\"signType\"</span>, <span class=\"string\">\"MD5\"</span>);</span><br><span class=\"line\">                pay.put(<span class=\"string\">\"packageStr\"</span>, <span class=\"string\">\"prepay_id=\"</span> + prepay_id);</span><br><span class=\"line\">                <span class=\"comment\">// 生成支付签名</span></span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"appId=\"</span>).append(start.get(<span class=\"string\">\"appId\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;nonceStr=\"</span>).append(start.get(<span class=\"string\">\"nonceStr\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;package=\"</span>).append(pay.get(<span class=\"string\">\"packageStr\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;signType=\"</span>).append(pay.get(<span class=\"string\">\"signType\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;timeStamp=\"</span>).append(start.get(<span class=\"string\">\"timestamp\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;key=\"</span>).append(Global.getConfig(<span class=\"string\">\"payKey\"</span>));</span><br><span class=\"line\">                pay.put(<span class=\"string\">\"paySign\"</span>, encoder.encode(paySign.toString()));</span><br><span class=\"line\">                <span class=\"comment\">// 将微信支参数放入 result 对象中以便前端使用</span></span><br><span class=\"line\">                result.put(<span class=\"string\">\"start\"</span>, start);</span><br><span class=\"line\">                result.put(<span class=\"string\">\"pay\"</span>, pay);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                LOGGER.error(<span class=\"keyword\">new</span> String(PaymentKit.xmlToMap(res).get(<span class=\"string\">\"return_msg\"</span>).getBytes(<span class=\"string\">\"iso8859-1\"</span>)));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            result.put(<span class=\"string\">\"wechatMessage\"</span>, <span class=\"string\">\"微信授权失败!\"</span>);</span><br><span class=\"line\">            LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 退款</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">refund</span><span class=\"params\">(String out_refund_no,String out_trade_no,String refund_fee,String total_fee)</span> </span>&#123;</span><br><span class=\"line\">        WechatRefundModel xml = <span class=\"keyword\">new</span> WechatRefundModel();</span><br><span class=\"line\">        xml.setAppid(Global.getConfig(<span class=\"string\">\"appid\"</span>));</span><br><span class=\"line\">        xml.setMch_id(Global.getConfig(<span class=\"string\">\"mchid\"</span>));</span><br><span class=\"line\">        xml.setNonce_str(encoder.createNonceStr());</span><br><span class=\"line\">        xml.setOp_user_id(Global.getConfig(<span class=\"string\">\"mchid\"</span>));</span><br><span class=\"line\">        xml.setOut_refund_no(out_refund_no);</span><br><span class=\"line\">        xml.setOut_trade_no(out_trade_no);</span><br><span class=\"line\">        xml.setRefund_fee(refund_fee);</span><br><span class=\"line\">        xml.setTotal_fee(total_fee);</span><br><span class=\"line\">        xml.sign(encoder);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            String result = doRefund(<span class=\"string\">\"https://api.mch.weixin.qq.com/secapi/pay/refund\"</span>,xml.toString());</span><br><span class=\"line\">            Map map = XmlHelper.of(result).toMap();</span><br><span class=\"line\">            String returnCode = (String) map.get(<span class=\"string\">\"return_code\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (returnCode.equals(<span class=\"string\">\"SUCCESS\"</span>))&#123;</span><br><span class=\"line\">                <span class=\"comment\">//todo</span></span><br><span class=\"line\">                LOGGER.error(<span class=\"string\">\"=============================\"</span>+map.get(<span class=\"string\">\"return_msg\"</span>)+ <span class=\"string\">\"====================================\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                LOGGER.error(<span class=\"string\">\"=============================\"</span>+map.get(<span class=\"string\">\"return_msg\"</span>)+ <span class=\"string\">\"====================================\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">            LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span>  String <span class=\"title\">doRefund</span><span class=\"params\">(String url,String data)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        KeyStore keyStore  = KeyStore.getInstance(<span class=\"string\">\"PKCS12\"</span>);</span><br><span class=\"line\">        InputStream instream = <span class=\"keyword\">this</span>.getClass().getClassLoader().getResourceAsStream(<span class=\"string\">\"apiclient_cert.p12\"</span>);<span class=\"comment\">//P12文件目录</span></span><br><span class=\"line\">        <span class=\"keyword\">char</span>[] password = Global.getConfig(<span class=\"string\">\"mchid\"</span>).toCharArray();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            keyStore.load(instream, password);<span class=\"comment\">//这里写密码..默认是你的MCHID</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            instream.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        SSLContext sslcontext = SSLContexts.custom()</span><br><span class=\"line\">                .loadKeyMaterial(keyStore, password)<span class=\"comment\">//这里也是写密码的</span></span><br><span class=\"line\">                .build();</span><br><span class=\"line\">        <span class=\"comment\">// Allow TLSv1 protocol only</span></span><br><span class=\"line\">        SSLConnectionSocketFactory sslsf = <span class=\"keyword\">new</span> SSLConnectionSocketFactory(</span><br><span class=\"line\">                sslcontext,</span><br><span class=\"line\">                <span class=\"keyword\">new</span> String[] &#123; <span class=\"string\">\"TLSv1\"</span> &#125;,</span><br><span class=\"line\">                <span class=\"keyword\">null</span>,</span><br><span class=\"line\">                SSLConnectionSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);</span><br><span class=\"line\">        CloseableHttpClient httpclient = HttpClients.custom()</span><br><span class=\"line\">                .setSSLSocketFactory(sslsf)</span><br><span class=\"line\">                .build();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            HttpPost httpost = <span class=\"keyword\">new</span> HttpPost(url); <span class=\"comment\">// 设置响应头信息</span></span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"Connection\"</span>, <span class=\"string\">\"keep-alive\"</span>);</span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"Accept\"</span>, <span class=\"string\">\"*/*\"</span>);</span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"Content-Type\"</span>, <span class=\"string\">\"application/x-www-form-urlencoded; charset=UTF-8\"</span>);</span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"Host\"</span>, <span class=\"string\">\"api.mch.weixin.qq.com\"</span>);</span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"X-Requested-With\"</span>, <span class=\"string\">\"XMLHttpRequest\"</span>);</span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"Cache-Control\"</span>, <span class=\"string\">\"max-age=0\"</span>);</span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"User-Agent\"</span>, <span class=\"string\">\"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0) \"</span>);</span><br><span class=\"line\">            httpost.setEntity(<span class=\"keyword\">new</span> StringEntity(data, <span class=\"string\">\"UTF-8\"</span>));</span><br><span class=\"line\">            CloseableHttpResponse response = httpclient.execute(httpost);</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                HttpEntity entity = response.getEntity();</span><br><span class=\"line\"></span><br><span class=\"line\">                String jsonStr = EntityUtils.toString(response.getEntity(), <span class=\"string\">\"UTF-8\"</span>);</span><br><span class=\"line\">                EntityUtils.consume(entity);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> jsonStr;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                response.close();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            httpclient.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"OrderController-java_订单控制器\">OrderController.java 订单控制器</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.modules.controller;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.LoggerFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Controller;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.ui.Model;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.controller.BaseController;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.utils.DateUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.Clinic;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.Items;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.Order;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.exception.OrderException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.service.ItemsService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.service.OrderService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.vo.AjaxResult;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.vo.OrderStatus;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpSession;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Created by dongxiaoxia on 2016/12/30.</span><br><span class=\"line\"> * &lt;p&gt;</span><br><span class=\"line\"> * 订单控制器</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Controller</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"order\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OrderController</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(OrderController.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OrderService orderService;</span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ItemsService itemsService;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 我的订单列表首页</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 跳转订单首页</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"\"</span>, method = RequestMethod.GET)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">index</span><span class=\"params\">(HttpSession session, Model model)</span> </span>&#123;</span><br><span class=\"line\">        User user = (User) session.getAttribute(<span class=\"string\">\"user\"</span>);</span><br><span class=\"line\">        Order order = <span class=\"keyword\">new</span> Order();</span><br><span class=\"line\">        order.setCreateBy(user);</span><br><span class=\"line\">        <span class=\"comment\">//查找出当前用户创建的订单列表</span></span><br><span class=\"line\">        List&lt;Order&gt; orders = orderService.findList(order);</span><br><span class=\"line\">        model.addAttribute(<span class=\"string\">\"orders\"</span>, orders);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"order/index\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 订单详情</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> orderId 订单编号</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 跳转订单详情页面</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"&#123;orderId&#125;\"</span>, method = RequestMethod.GET)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">detail</span><span class=\"params\">(@PathVariable String orderId, Model model, HttpServletResponse response, HttpSession session)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        Order order = orderService.get(orderId);</span><br><span class=\"line\">        User user = (User) session.getAttribute(<span class=\"string\">\"user\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (order == <span class=\"keyword\">null</span> || !order.getCreateBy().getId().equals(user.getId())) &#123;</span><br><span class=\"line\">            response.sendError(HttpServletResponse.SC_NOT_FOUND);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"comment\">//        orderService.get() 查出来的order中clinic没有关联查询area，因此重新获取</span></span><br><span class=\"line\">        Clinic clinic = clinicService.get(order.getClinic().getId());</span><br><span class=\"line\">        order.setClinic(clinic);</span><br><span class=\"line\">        model.addAttribute(<span class=\"string\">\"order\"</span>, order);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"order/detail\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 退款</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> orderId 订单编号</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 退款操作结果</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@ResponseBody</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"refund/&#123;orderId&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> AjaxResult <span class=\"title\">refund</span><span class=\"params\">(@PathVariable String orderId, HttpSession session)</span> </span>&#123;</span><br><span class=\"line\">        Order order = orderService.get(orderId);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (order == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"订单不存在\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        User user = (User) session.getAttribute(<span class=\"string\">\"user\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!order.getCreateBy().getId().equals(user.getId())) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"没有权限\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (OrderStatus.PAID.getCode() != order.getStatus()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"不在退款范围\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            orderService.refund(order);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.success();</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (OrderException e)&#123;</span><br><span class=\"line\">            LOGGER.error(e.getMessage(),e);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(e.getMessage());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 下订单（未付款）</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> itemsId         服务项目编号</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> appointmentTime 预约时间</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 下订单操作结果</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@ResponseBody</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(method = RequestMethod.POST)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> AjaxResult <span class=\"title\">add</span><span class=\"params\">(HttpSession session, String itemsId, String appointmentTime)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (StringUtils.isEmpty(itemsId)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"itemsId 不能为空\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (StringUtils.isEmpty(appointmentTime)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"appointmentTime 不能为空\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Items items = itemsService.get(itemsId);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (items == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"该服务项目不存在\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        User user = (User) session.getAttribute(<span class=\"string\">\"user\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Map result = orderService.add(items, appointmentTime,user); <span class=\"comment\">//下订单</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.success(result);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">            LOGGER.error(e.getMessage(),e);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"支付失败，请稍候再试\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 跳转确定订单支付页面</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> itemsId 服务项目编号</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 支付页面</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"create/&#123;itemsId&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">create</span><span class=\"params\">(@PathVariable String itemsId, Model model, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        Items items = itemsService.get(itemsId);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (items == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            response.sendError(HttpServletResponse.SC_NOT_FOUND);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        model.addAttribute(<span class=\"string\">\"items\"</span>, items);</span><br><span class=\"line\">        model.addAttribute(<span class=\"string\">\"dateStr\"</span>, DateUtils.getDateStr(<span class=\"keyword\">new</span> Date(), <span class=\"number\">31</span>, <span class=\"string\">\"yyyy-MM-dd\"</span>));<span class=\"comment\">//预约日期范围（今天开始，默认一个月）</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"order/create\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"OrderService-java_订单服务器\">OrderService.java 订单服务器</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.modules.service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.LoggerFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.config.Global;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.service.CrudService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.utils.DateUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.dao.OrderDao;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.Items;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.Order;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.exception.OrderException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.vo.OrderStatus;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.vo.PayResult;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.weixin.TemplateMassageUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.weixin.pay.PayService;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.text.ParseException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Created by dongxiaoxia on 2016/12/30.</span><br><span class=\"line\"> * &lt;p&gt;</span><br><span class=\"line\"> * 订单服务类</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"order\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OrderService</span> <span class=\"keyword\">extends</span> <span class=\"title\">CrudService</span>&lt;<span class=\"title\">OrderDao</span>, <span class=\"title\">Order</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(OrderService.class);</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Timer TIMER = <span class=\"keyword\">new</span> Timer();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DEFAULT_VALIDITY_TIME = Integer.valueOf(Global.getConfig(<span class=\"string\">\"payTime\"</span>));<span class=\"comment\">//默认2分钟</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String NOTIFY_URL = Global.getConfig(<span class=\"string\">\"domainName\"</span>) + <span class=\"string\">\"/pay/notify\"</span>;<span class=\"comment\">//微信支付回调接口</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String PAY_RESULT_URL = Global.getConfig(<span class=\"string\">\"domainName\"</span>) + <span class=\"string\">\"/pay/result\"</span>;<span class=\"comment\">//微信支付结果页面接口</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String PAY_BODY = <span class=\"string\">\"牙齐齐服务\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> PayService payService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 下单（但付款）</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> items           订单对应项目</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> appointmentTime 预约时间</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> owner           订单拥有者</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 微信支付下单结果信息集合</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Map <span class=\"title\">add</span><span class=\"params\">(Items items , User owner)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (items == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"items can not be null\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Order order = <span class=\"keyword\">new</span> Order();</span><br><span class=\"line\">        order.setItems(items);</span><br><span class=\"line\">        order.setPayMoney(items.getPrice());</span><br><span class=\"line\">        order.setStatus(OrderStatus.NEED_PAY.getCode());</span><br><span class=\"line\">        order.setPayResult(PayResult.NEED_PAY.getCode());</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.save(order);</span><br><span class=\"line\">        <span class=\"comment\">//支付倒计时，定时删除未支付的订单</span></span><br><span class=\"line\">        TIMER.schedule(<span class=\"keyword\">new</span> TimeoutTask(order.getId()), DEFAULT_VALIDITY_TIME);</span><br><span class=\"line\">        <span class=\"comment\">//调用微信支付统一下单接口，获取微信支付统一订单号</span></span><br><span class=\"line\">        String res = payService.unifiedorder(NOTIFY_URL, owner.getOpenId(), PAY_BODY, String.valueOf(order.getPayMoney()), order.getId());</span><br><span class=\"line\">        <span class=\"comment\">//调起微信支付，获取微信支付下单结果信息集合</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> payService.wechatPay(res, PAY_RESULT_URL);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 修改订单</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> orderId 订单编号</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> time 微信支付时间</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Transactional</span>(readOnly = <span class=\"keyword\">false</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(String orderId, String time)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Order order = dao.get(orderId);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (order != <span class=\"keyword\">null</span> &amp;&amp; PayResult.SUCCESS.getCode() != order.getPayResult()) &#123;<span class=\"comment\">//订单处于未支付成功状态</span></span><br><span class=\"line\">                order.setPayResult(PayResult.SUCCESS.getCode());<span class=\"comment\">//设置支付状态</span></span><br><span class=\"line\">                order.setStatus(OrderStatus.PAID.getCode());<span class=\"comment\">//设置订单状态</span></span><br><span class=\"line\">                order.setVoucher(String.valueOf(<span class=\"number\">10000000</span> + <span class=\"keyword\">new</span> Random().nextInt(<span class=\"number\">89999999</span>)));<span class=\"comment\">//生成服务凭证，预测用户少，不会重复</span></span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    order.setCreateDate(<span class=\"keyword\">new</span> Date(DateUtils.parseDate(time, <span class=\"string\">\"yyyyMMddHHmmss\"</span>).getTime()));<span class=\"comment\">//把订单生成时间设置为微信支付成功的时间</span></span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (ParseException e) &#123;</span><br><span class=\"line\">                    order.setCreateDate(<span class=\"keyword\">new</span> Date(System.currentTimeMillis()));</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                dao.update(order);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (OrderException e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> OrderException(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 退款</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> order 订单</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">refund</span><span class=\"params\">(Order order)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1. 微信退款</span></span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> refundResult = payService.refund(order.getId(), order.getId(), String.valueOf(order.getPayMoney()), String.valueOf(order.getPayMoney()));</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!refundResult) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> OrderException(<span class=\"string\">\"退款失败\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//2.处理订单</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            order.setStatus(OrderStatus.REFUNDED.getCode());</span><br><span class=\"line\">            order.setRefundTime(<span class=\"keyword\">new</span> Date());</span><br><span class=\"line\">            order.setRefundedTime(<span class=\"keyword\">new</span> Date());</span><br><span class=\"line\">            save(order);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">            SmsUtils.notify(Global.getConfig(<span class=\"string\">\"adminMobile\"</span>), order.getId(), <span class=\"string\">\"用户申请退款处理出现异常错误,请及时处理\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> OrderException(<span class=\"string\">\"退款失败，请联系客服\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//3. 发消息模版给用户</span></span><br><span class=\"line\">        TemplateMassageUtils.sendRefundOrderSuccessTemplateMessage(order.getCreateBy(), order);</span><br><span class=\"line\">        <span class=\"comment\">//4. 发消息模版给管理员</span></span><br><span class=\"line\">        TemplateMassageUtils.sendRefundOrderSuccessTemplateMessageToAdmin(order);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 删除过期任务</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TimeoutTask</span> <span class=\"keyword\">extends</span> <span class=\"title\">TimerTask</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String orderId;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TimeoutTask</span><span class=\"params\">(String orderId)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.orderId = orderId;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/**</span><br><span class=\"line\">         * The action to be performed by this timer task.</span><br><span class=\"line\">         */</span></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">//删除未支付的订单</span></span><br><span class=\"line\">            Order order = dao.get(orderId);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (order == <span class=\"keyword\">null</span> || PayResult.SUCCESS.getCode() == order.getPayResult()) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            order.setId(orderId);</span><br><span class=\"line\">            dao.delete(order);</span><br><span class=\"line\">            LOGGER.info(<span class=\"string\">\"========================删除orderID:\"</span> + orderId + <span class=\"string\">\" 订单成功！================================\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Order-java_订单类\">Order.java 订单类</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * 实体类-订单</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Order</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> serialVersionUID = -<span class=\"number\">596545820416981026L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Items items;            <span class=\"comment\">//服务项目</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> payResult;       <span class=\"comment\">//支付结果 (-1,\"待付款\"),(0, \"支付成功\"),(1,\"支付失败\")</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> payMoney;         <span class=\"comment\">//支付金额,单位（分）</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String voucher;         <span class=\"comment\">//服务凭证</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String appointmentTime; <span class=\"comment\">//预约时段</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> status;          <span class=\"comment\">//服务状态（-1预定，代付款 0已付款，1申请退款，2已退款，9已完成）</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date refundTime;        <span class=\"comment\">//请求退款时间</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date refundedTime;      <span class=\"comment\">//退款完成时间</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date finishTime;        <span class=\"comment\">//服务完成时间</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//getter and setter</span></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"SignMD5-java_签名工具类\">SignMD5.java 签名工具类</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.weixin.pay;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.UnsupportedEncodingException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.MessageDigest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.NoSuchAlgorithmException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Formatter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.UUID;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2016-06-28 11:08</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SignMD5</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">byteToHex</span><span class=\"params\">(<span class=\"keyword\">final</span> <span class=\"keyword\">byte</span>[] hash)</span> </span>&#123;</span><br><span class=\"line\">        Formatter formatter = <span class=\"keyword\">new</span> Formatter();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">byte</span> b : hash) &#123;</span><br><span class=\"line\">            formatter.format(<span class=\"string\">\"%02x\"</span>, b);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        String result = formatter.toString();</span><br><span class=\"line\">        formatter.close();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">encode</span><span class=\"params\">(CharSequence charSequence)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            MessageDigest crypt = MessageDigest.getInstance(<span class=\"string\">\"MD5\"</span>);</span><br><span class=\"line\">            crypt.reset();</span><br><span class=\"line\">            crypt.update(charSequence.toString().getBytes(<span class=\"string\">\"UTF-8\"</span>));</span><br><span class=\"line\">            <span class=\"keyword\">return</span> byteToHex(crypt.digest());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">matches</span><span class=\"params\">(CharSequence charSequence, String encodedPassword)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> encode(charSequence).equals(encodedPassword);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">createNonceStr</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> UUID.randomUUID().toString().replaceAll(<span class=\"string\">\"-\"</span>,<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">createTimeStamp</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Long.toString(System.currentTimeMillis() / <span class=\"number\">1000</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"WechatNotify-java_微信支付回调结果封装\">WechatNotify.java 微信支付回调结果封装</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.weixin.pay;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.bind.annotation.XmlRootElement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.Serializable;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2016-06-28 11:10</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@XmlRootElement</span>(name=<span class=\"string\">\"xml\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WechatNotify</span> <span class=\"keyword\">implements</span> <span class=\"title\">Serializable</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> serialVersionUID = <span class=\"number\">8047707600433551023L</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String appid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String attach;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String bank_type;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String fee_type;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String is_subscribe;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String mch_id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String nonce_str;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String openid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String out_trade_no;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String result_code;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String return_code;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String sign;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String sub_mch_id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String time_end;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String total_fee;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String trade_type;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String transaction_id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAppid</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> appid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAppid</span><span class=\"params\">(String appid)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.appid = appid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAttach</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> attach;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAttach</span><span class=\"params\">(String attach)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.attach = attach;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getBank_type</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> bank_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setBank_type</span><span class=\"params\">(String bank_type)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.bank_type = bank_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getFee_type</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fee_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setFee_type</span><span class=\"params\">(String fee_type)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fee_type = fee_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getIs_subscribe</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> is_subscribe;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setIs_subscribe</span><span class=\"params\">(String is_subscribe)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.is_subscribe = is_subscribe;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getMch_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMch_id</span><span class=\"params\">(String mch_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mch_id = mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getNonce_str</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nonce_str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNonce_str</span><span class=\"params\">(String nonce_str)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.nonce_str = nonce_str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOpenid</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> openid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOpenid</span><span class=\"params\">(String openid)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.openid = openid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOut_trade_no</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> out_trade_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOut_trade_no</span><span class=\"params\">(String out_trade_no)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.out_trade_no = out_trade_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getResult_code</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result_code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setResult_code</span><span class=\"params\">(String result_code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.result_code = result_code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getReturn_code</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> return_code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setReturn_code</span><span class=\"params\">(String return_code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.return_code = return_code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSign</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sign;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSign</span><span class=\"params\">(String sign)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sign = sign;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSub_mch_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sub_mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSub_mch_id</span><span class=\"params\">(String sub_mch_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sub_mch_id = sub_mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTime_end</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> time_end;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTime_end</span><span class=\"params\">(String time_end)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.time_end = time_end;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTotal_fee</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTotal_fee</span><span class=\"params\">(String total_fee)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.total_fee = total_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTrade_type</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> trade_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTrade_type</span><span class=\"params\">(String trade_type)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.trade_type = trade_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTransaction_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> transaction_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTransaction_id</span><span class=\"params\">(String transaction_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.transaction_id = transaction_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"WechatPayModel-java_微信支付统一订单接口参数封装模型\">WechatPayModel.java 微信支付统一订单接口参数封装模型</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.weixin.pay;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.config.Global;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.bind.annotation.XmlRootElement;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2016-06-28 11:11</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@XmlRootElement</span>(name = <span class=\"string\">\"XML\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WechatPayModel</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String appid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String mch_id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String nonce_str;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String body;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String out_trade_no;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String total_fee;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String spbill_create_ip;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String notify_url;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String trade_type;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String openid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String sign;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAppid</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> appid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAppid</span><span class=\"params\">(String appid)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.appid = appid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getMch_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMch_id</span><span class=\"params\">(String mch_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mch_id = mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getNonce_str</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nonce_str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNonce_str</span><span class=\"params\">(String nonce_str)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.nonce_str = nonce_str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOut_trade_no</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> out_trade_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOut_trade_no</span><span class=\"params\">(String out_trade_no)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.out_trade_no = out_trade_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTotal_fee</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTotal_fee</span><span class=\"params\">(String total_fee)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.total_fee = total_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSpbill_create_ip</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> spbill_create_ip;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSpbill_create_ip</span><span class=\"params\">(String spbill_create_ip)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.spbill_create_ip = spbill_create_ip;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getNotify_url</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> notify_url;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNotify_url</span><span class=\"params\">(String notify_url)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.notify_url = notify_url;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTrade_type</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> trade_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTrade_type</span><span class=\"params\">(String trade_type)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.trade_type = trade_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getBody</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> body;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setBody</span><span class=\"params\">(String body)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.body = body;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSign</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sign;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSign</span><span class=\"params\">(String sign)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sign = sign;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOpenid</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> openid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOpenid</span><span class=\"params\">(String openid)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.openid = openid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">sign</span><span class=\"params\">(SignMD5 encoder)</span> </span>&#123;</span><br><span class=\"line\">        StringBuilder stringBuilder = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"appid=\"</span>).append(getAppid());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;body=\"</span>).append(getBody());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;mch_id=\"</span>).append(getMch_id());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;nonce_str=\"</span>).append(getNonce_str());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;notify_url=\"</span>).append(getNotify_url());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;openid=\"</span>).append(getOpenid());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;out_trade_no=\"</span>).append(getOut_trade_no());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;spbill_create_ip=\"</span>).append(getSpbill_create_ip());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;total_fee=\"</span>).append(getTotal_fee());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;trade_type=\"</span>).append(getTrade_type());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;key=\"</span>).append(Global.getConfig(<span class=\"string\">\"payKey\"</span>));</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sign = encoder.encode(stringBuilder.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;appid&gt;&lt;![CDATA[\"</span> + appid + <span class=\"string\">\"]]&gt;&lt;/appid&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;body&gt;&lt;![CDATA[\"</span> + body + <span class=\"string\">\"]]&gt;&lt;/body&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;mch_id&gt;&lt;![CDATA[\"</span> + mch_id + <span class=\"string\">\"]]&gt;&lt;/mch_id&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;nonce_str&gt;&lt;![CDATA[\"</span> + nonce_str + <span class=\"string\">\"]]&gt;&lt;/nonce_str&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;notify_url&gt;&lt;![CDATA[\"</span> + notify_url + <span class=\"string\">\"]]&gt;&lt;/notify_url&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;openid&gt;&lt;![CDATA[\"</span> + openid + <span class=\"string\">\"]]&gt;&lt;/openid&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;out_trade_no&gt;&lt;![CDATA[\"</span> + out_trade_no + <span class=\"string\">\"]]&gt;&lt;/out_trade_no&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;spbill_create_ip&gt;&lt;![CDATA[\"</span> + spbill_create_ip + <span class=\"string\">\"]]&gt;&lt;/spbill_create_ip&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;trade_type&gt;&lt;![CDATA[\"</span> + trade_type + <span class=\"string\">\"]]&gt;&lt;/trade_type&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;total_fee&gt;&lt;![CDATA[\"</span> + total_fee + <span class=\"string\">\"]]&gt;&lt;/total_fee&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;sign&gt;&lt;![CDATA[\"</span> + sign + <span class=\"string\">\"]]&gt;&lt;/sign&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"WechatRefundModel-java_微信退款接口参数封装模型\">WechatRefundModel.java 微信退款接口参数封装模型</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.weixin.pay;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.config.Global;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.bind.annotation.XmlRootElement;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2017-01-03 20:30</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@XmlRootElement</span>(name = <span class=\"string\">\"XML\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WechatRefundModel</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String appid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String mch_id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String nonce_str;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String op_user_id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String out_refund_no;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String out_trade_no;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String refund_fee;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String sign;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String total_fee;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAppid</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> appid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAppid</span><span class=\"params\">(String appid)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.appid = appid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getMch_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMch_id</span><span class=\"params\">(String mch_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mch_id = mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getNonce_str</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nonce_str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNonce_str</span><span class=\"params\">(String nonce_str)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.nonce_str = nonce_str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOp_user_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> op_user_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOp_user_id</span><span class=\"params\">(String op_user_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.op_user_id = op_user_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOut_refund_no</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> out_refund_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOut_refund_no</span><span class=\"params\">(String out_refund_no)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.out_refund_no = out_refund_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOut_trade_no</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> out_trade_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOut_trade_no</span><span class=\"params\">(String out_trade_no)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.out_trade_no = out_trade_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getRefund_fee</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> refund_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setRefund_fee</span><span class=\"params\">(String refund_fee)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.refund_fee = refund_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTotal_fee</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTotal_fee</span><span class=\"params\">(String total_fee)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.total_fee = total_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSign</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sign;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSign</span><span class=\"params\">(String sign)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sign = sign;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">sign</span><span class=\"params\">(SignMD5 encoder)</span> </span>&#123;</span><br><span class=\"line\">        StringBuilder stringBuilder = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"appid=\"</span>).append(getAppid());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;mch_id=\"</span>).append(getMch_id());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;nonce_str=\"</span>).append(getNonce_str());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;op_user_id=\"</span>).append(getOp_user_id());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;out_refund_no=\"</span>).append(getOut_refund_no());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;out_trade_no=\"</span>).append(getOut_trade_no());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;refund_fee=\"</span>).append(getRefund_fee());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;total_fee=\"</span>).append(getTotal_fee());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;key=\"</span>).append(Global.getConfig(<span class=\"string\">\"payKey\"</span>));</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sign = encoder.encode(stringBuilder.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;appid&gt;&lt;![CDATA[\"</span> + appid + <span class=\"string\">\"]]&gt;&lt;/appid&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;mch_id&gt;&lt;![CDATA[\"</span> + mch_id + <span class=\"string\">\"]]&gt;&lt;/mch_id&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;nonce_str&gt;&lt;![CDATA[\"</span> + nonce_str + <span class=\"string\">\"]]&gt;&lt;/nonce_str&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;op_user_id&gt;&lt;![CDATA[\"</span> + op_user_id + <span class=\"string\">\"]]&gt;&lt;/op_user_id&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;out_refund_no&gt;&lt;![CDATA[\"</span> + out_refund_no + <span class=\"string\">\"]]&gt;&lt;/out_refund_no&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;out_trade_no&gt;&lt;![CDATA[\"</span> + out_trade_no + <span class=\"string\">\"]]&gt;&lt;/out_trade_no&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;refund_fee&gt;&lt;![CDATA[\"</span> + refund_fee + <span class=\"string\">\"]]&gt;&lt;/refund_fee&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;total_fee&gt;&lt;![CDATA[\"</span> + total_fee + <span class=\"string\">\"]]&gt;&lt;/total_fee&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;sign&gt;&lt;![CDATA[\"</span> + sign + <span class=\"string\">\"]]&gt;&lt;/sign&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","excerpt":"","more":"<p>微信支付功能模块是一个可以抽离的模块，因此controller、service等集中放在一个包下管理。<br>由于业务需求，现在与OrderController、OrderService集成耦合。<br>本文档是根据实际项目抽取总结出来的，很多代码可以根据实际开发进一步更改完善。</p>\n<h1 id=\"最终实现目标\">最终实现目标</h1><ol>\n<li>实现微信公众号支付功能</li>\n<li>实现微信公众号退款功能</li>\n<li>本文档附加了大部分的支付模块源码，通过本文档就能抽取出一个独立的支付模块，方便快速开发。</li>\n</ol>\n<h1 id=\"准备条件\">准备条件</h1><ol>\n<li><p><a href=\"https://pay.weixin.qq.com/index.php\">微信支付|商户平台</a>的账号</p>\n<ul>\n<li>这个不归程序员准备，略过</li>\n<li>商户平台的账号必须与公众号的配置对应，在公众号的微信支付模块设置</li>\n</ul>\n</li>\n<li><p>一个可以在公网访问的公众号</p>\n<ul>\n<li>微信支付不能在localhost测试</li>\n<li>微信支付不能在微信web开发者工具上测试，只能在手机真实试验</li>\n<li>公众号相关配置的要配置设置好</li>\n</ul>\n</li>\n</ol>\n<h1 id=\"微信支付思路\">微信支付思路</h1><ol>\n<li>应该存在一个支付页面，假设页面很简单，上面就一个支付按钮，用户点击按钮就能够完成支付。</li>\n<li>用户点击的时候，Ajax 调用后台创建接口接口。</li>\n<li>创建订单接口首先会创建一个未付款的订单，订单的参数如价格、数量、订单号、等可以根据业务自定义。</li>\n<li>创建订单后，会调用微信提供的统一下单接口，微信会根据我们传递的参数，生成一个预支付交易会话标识（prepay_id，就是通过这个来识别该订单的），返回给后台。</li>\n<li>后台接收到prepay_id后，构造微信支付所需要的参数，把参数返回给客户端。</li>\n<li>客户端之前发起的 Ajax 请求，接收到成功的响应后，拿接收到的参数调用JSAPI支付接口，向微信发起支付。</li>\n<li>如果之前的步骤都成功，微信会弹出支付页面，让用户输入密码支付。</li>\n<li>支付成功后微信会跳转H5页面，并且异步通知后台支付结果，后台进一步处理订单，如标记订单付款成功，更新订单日志。</li>\n</ol>\n<p>简而言之，服务器创建订单，触发微信支付，支付后微信异步回调，服务器修改订单状态。</p>\n<h1 id=\"简单实现微信支付的两个功能\">简单实现微信支付的两个功能</h1><h2 id=\"公众号支付\">公众号支付</h2><h3 id=\"1-下单\">1.下单</h3><p>第一步，根据业务生成未支付的订单，调用微信支付统一下单接口，获取微信支付统一订单号 prepay_id ，有了这个才能进一步支付；调起微信支付，获取微信支付下单结果信息集合，集合信息为供页面调用微信JS_API的一些字段信息。</p>\n<h4 id=\"下单（未付款）方法\">下单（未付款）方法</h4><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">    private static final String NOTIFY_URL = Global.getConfig(\"domainName\") + \"/pay/notify\";//微信支付回调接口</span><br><span class=\"line\">    private static final String PAY_RESULT_URL = Global.getConfig(\"domainName\") + \"/pay/result\";//微信支付结果页面接口</span><br><span class=\"line\">    private static final String PAY_BODY = \"牙齐齐服务\";</span><br><span class=\"line\">    </span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * 下单（但付款）</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * @param items           订单对应项目</span><br><span class=\"line\">     * @param owner           订单拥有者</span><br><span class=\"line\">     * @return 微信支付下单结果信息集合</span><br><span class=\"line\">     */</span><br><span class=\"line\">    public Map add(Items items, User owner) &#123;</span><br><span class=\"line\">        Order order = new Order();</span><br><span class=\"line\">        order.setItems(items);</span><br><span class=\"line\">        order.setPayMoney(items.getPrice());</span><br><span class=\"line\">        order.setStatus(OrderStatus.NEED_PAY.getCode());</span><br><span class=\"line\">        order.setPayResult(PayResult.NEED_PAY.getCode());</span><br><span class=\"line\">        this.save(order);</span><br><span class=\"line\">        //支付倒计时，定时删除未支付的订单</span><br><span class=\"line\">        TIMER.schedule(new TimeoutTask(order.getId()), DEFAULT_VALIDITY_TIME);</span><br><span class=\"line\">        //调用微信支付统一下单接口，获取微信支付统一订单号</span><br><span class=\"line\">        String res = payService.unifiedorder(NOTIFY_URL, owner.getOpenId(), PAY_BODY, String.valueOf(order.getPayMoney()), order.getId());</span><br><span class=\"line\">        //调起微信支付，获取微信支付下单结果信息集合</span><br><span class=\"line\">        return payService.wechatPay(res, PAY_RESULT_URL);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">````    </span><br><span class=\"line\"></span><br><span class=\"line\">#### 微信支付统一下单接口</span><br><span class=\"line\"></span><br><span class=\"line\">````java</span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * 微信支付统一下单接口</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * @param notifyUrl    支付成功后回调路径</span><br><span class=\"line\">     * @param openId       用户的 openId</span><br><span class=\"line\">     * @param body         商品描述</span><br><span class=\"line\">     * @param total        支付金额（单位分）</span><br><span class=\"line\">     * @param out_trade_no 订单唯一订单号</span><br><span class=\"line\">     * @return</span><br><span class=\"line\">     */</span><br><span class=\"line\">    public String unifiedorder(String notifyUrl, String openId, String body, String total, String out_trade_no) &#123;</span><br><span class=\"line\">        WechatPayModel xml = new WechatPayModel();</span><br><span class=\"line\">        xml.setAppid(Global.getConfig(\"appid\"));</span><br><span class=\"line\">        xml.setMch_id(Global.getConfig(\"mchid\"));</span><br><span class=\"line\">        xml.setNonce_str(encoder.createNonceStr());</span><br><span class=\"line\">        xml.setBody(body);</span><br><span class=\"line\">        xml.setOut_trade_no(out_trade_no);</span><br><span class=\"line\">        xml.setTotal_fee(total);</span><br><span class=\"line\">        xml.setSpbill_create_ip(\"127.0.0.1\");//// TODO: 2016/6/28</span><br><span class=\"line\">        xml.setNotify_url(notifyUrl);</span><br><span class=\"line\">        xml.setTrade_type(\"JSAPI\");</span><br><span class=\"line\">        xml.setOpenid(openId);</span><br><span class=\"line\">        xml.sign(encoder);</span><br><span class=\"line\"></span><br><span class=\"line\">        String result = restTemplate.postForObject(\"https://api.mch.weixin.qq.com/pay/unifiedorder\", xml, String.class);</span><br><span class=\"line\">        return result;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"获取页面调用所需参数\">获取页面调用所需参数</h4><p>需要注意的是支付不能在微信开发者接口测试，只能在手机上测试哦！</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">/**</span><br><span class=\"line\"> * 调起微信支付</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * <span class=\"doctag\">@param</span> model</span><br><span class=\"line\"> * <span class=\"doctag\">@param</span> res   预支付订单 字符串</span><br><span class=\"line\"> * <span class=\"doctag\">@param</span> url   微信支付 url</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">wechatPay</span><span class=\"params\">(Model model, String res, String url)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        Map&lt;String, String&gt; start = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        StringBuilder startSign = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">        Map&lt;String, String&gt; pay = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        StringBuilder paySign = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">        Map map = XmlHelper.of(res).toMap();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (StringUtils.equals((String) map.get(<span class=\"string\">\"return_code\"</span>), <span class=\"string\">\"SUCCESS\"</span>)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 得到的预支付订单，重新生成微信支付参数</span></span><br><span class=\"line\">            String prepay_id = (String) map.get(<span class=\"string\">\"prepay_id\"</span>);</span><br><span class=\"line\">            String jsapi_ticket = TicketManager.getDefaultTicket();</span><br><span class=\"line\">            <span class=\"comment\">// 生成 微信支付 config 参数</span></span><br><span class=\"line\">            start.put(<span class=\"string\">\"appId\"</span>, Global.getConfig(<span class=\"string\">\"appid\"</span>));</span><br><span class=\"line\">            start.put(<span class=\"string\">\"nonceStr\"</span>, encoder.createNonceStr());</span><br><span class=\"line\">            start.put(<span class=\"string\">\"timestamp\"</span>, encoder.createTimeStamp());</span><br><span class=\"line\">            <span class=\"comment\">// 生成 config 签名</span></span><br><span class=\"line\">            startSign.append(<span class=\"string\">\"jsapi_ticket=\"</span>).append(jsapi_ticket);</span><br><span class=\"line\">            startSign.append(<span class=\"string\">\"&amp;noncestr=\"</span>).append(start.get(<span class=\"string\">\"nonceStr\"</span>));</span><br><span class=\"line\">            startSign.append(<span class=\"string\">\"&amp;timestamp=\"</span>).append(start.get(<span class=\"string\">\"timestamp\"</span>));</span><br><span class=\"line\">            startSign.append(<span class=\"string\">\"&amp;url=\"</span>).append(url);</span><br><span class=\"line\">            start.put(<span class=\"string\">\"signature\"</span>, encoder.encode(startSign.toString()));</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// config信息验证后会执行ready方法的参数</span></span><br><span class=\"line\">            pay.put(<span class=\"string\">\"signType\"</span>, <span class=\"string\">\"MD5\"</span>);</span><br><span class=\"line\">            pay.put(<span class=\"string\">\"packageStr\"</span>, <span class=\"string\">\"prepay_id=\"</span> + prepay_id);</span><br><span class=\"line\">            <span class=\"comment\">// 生成支付签名</span></span><br><span class=\"line\">            paySign.append(<span class=\"string\">\"appId=\"</span>).append(start.get(<span class=\"string\">\"appId\"</span>));</span><br><span class=\"line\">            paySign.append(<span class=\"string\">\"&amp;nonceStr=\"</span>).append(start.get(<span class=\"string\">\"nonceStr\"</span>));</span><br><span class=\"line\">            paySign.append(<span class=\"string\">\"&amp;package=\"</span>).append(pay.get(<span class=\"string\">\"packageStr\"</span>));</span><br><span class=\"line\">            paySign.append(<span class=\"string\">\"&amp;signType=\"</span>).append(pay.get(<span class=\"string\">\"signType\"</span>));</span><br><span class=\"line\">            paySign.append(<span class=\"string\">\"&amp;timeStamp=\"</span>).append(start.get(<span class=\"string\">\"timestamp\"</span>));</span><br><span class=\"line\">            paySign.append(<span class=\"string\">\"&amp;key=\"</span>).append(Global.getConfig(<span class=\"string\">\"payKey\"</span>));</span><br><span class=\"line\">            pay.put(<span class=\"string\">\"paySign\"</span>, encoder.encode(paySign.toString()));</span><br><span class=\"line\">            <span class=\"comment\">// 将微信支参数放入 model 对象中以便前端使用</span></span><br><span class=\"line\">            model.addAttribute(<span class=\"string\">\"start\"</span>, start);</span><br><span class=\"line\">            model.addAttribute(<span class=\"string\">\"pay\"</span>, pay);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            LOGGER.error(<span class=\"keyword\">new</span> String(PaymentKit.xmlToMap(res).get(<span class=\"string\">\"return_msg\"</span>).getBytes(<span class=\"string\">\"iso8859-1\"</span>)));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        model.addAttribute(<span class=\"string\">\"wechatMessage\"</span>, <span class=\"string\">\"微信授权失败!\"</span>);</span><br><span class=\"line\">        LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-支付\">2.支付</h3><p>支付页面源码：<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%@</span> <span class=\"attr\">page</span> <span class=\"attr\">contentType</span>=<span class=\"string\">\"text/html;charset=UTF-8\"</span> <span class=\"attr\">language</span>=<span class=\"string\">\"java\"</span> %&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%@</span> <span class=\"attr\">include</span> <span class=\"attr\">file</span>=<span class=\"string\">\"/WEB-INF/views/include/taglib.jsp\"</span> %&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"IE=$&#123;ctxStatic&#125;edge\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%@include</span> <span class=\"attr\">file</span>=<span class=\"string\">\"/WEB-INF/views/include/css.jsp\"</span> %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>确认订单<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">ontouchstart</span>=<span class=\"string\">\"\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">onclick</span>=<span class=\"string\">\"addOrder()\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"javascript:;\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"weui_btn weui_btn_primary\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin: 0rem 1rem\"</span>&gt;</span>支付<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%@include</span> <span class=\"attr\">file</span>=<span class=\"string\">\"/WEB-INF/views/include/js.jsp\"</span> %&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://res.wx.qq.com/open/js/jweixin-1.0.0.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"undefined\"></span><br><span class=\"line\"></span><br><span class=\"line\">    function addOrder() &#123;</span><br><span class=\"line\">        var itemsId = '$&#123;items.id&#125;';</span><br><span class=\"line\">        $.showLoading(\"正在处理...\");</span><br><span class=\"line\">        $.post(\"$&#123;ctx&#125;/order\", &#123;itemsId: itemsId&#125;, function (result) &#123;</span><br><span class=\"line\">            $.hideLoading();</span><br><span class=\"line\">            if (result &amp;&amp; result.success) &#123;</span><br><span class=\"line\">                $.hideLoading();</span><br><span class=\"line\">                pay(result.data);</span><br><span class=\"line\">            &#125; else &#123;</span><br><span class=\"line\">                $.toptip(result.message, 'error');</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //微信支付</span><br><span class=\"line\">    function pay(data) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        //config</span><br><span class=\"line\">        var appId = data.start.appId;</span><br><span class=\"line\">        var timeStamp = data.start.timestamp;</span><br><span class=\"line\">        var nonceStr = data.start.nonceStr;</span><br><span class=\"line\">        var signature = data.start.signature;</span><br><span class=\"line\"></span><br><span class=\"line\">        var signType = data.pay.signType;</span><br><span class=\"line\">        var pk = data.pay.packageStr;</span><br><span class=\"line\">        var paySign = data.pay.paySign;</span><br><span class=\"line\"></span><br><span class=\"line\">        wx.config(&#123;</span><br><span class=\"line\">            debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。</span><br><span class=\"line\">            appId: appId, // 必填，公众号的唯一标识</span><br><span class=\"line\">            timestamp: timeStamp, // 必填，生成签名的时间戳</span><br><span class=\"line\">            nonceStr: nonceStr, // 必填，生成签名的随机串</span><br><span class=\"line\">            signature: signature,// 必填，签名，见附录1</span><br><span class=\"line\">            jsApiList: ['chooseWXPay'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        wx.ready(function (res) &#123;</span><br><span class=\"line\">            // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。</span><br><span class=\"line\">            wx.chooseWXPay(&#123;</span><br><span class=\"line\">                timestamp: timeStamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符</span><br><span class=\"line\">                nonceStr: nonceStr, // 支付签名随机串，不长于 32 位</span><br><span class=\"line\">                package: pk, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=***）</span><br><span class=\"line\">                signType: signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'</span><br><span class=\"line\">                paySign: paySign, // 支付签名</span><br><span class=\"line\">                success: function (res) &#123;</span><br><span class=\"line\">                    location.href = 'http://' + location.host + '/order';</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                cancel: function (res) &#123;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                fail: function (res) &#123;</span><br><span class=\"line\">                    $.toptip('支付失败！', 'error');</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        wx.error(function (res) &#123;</span><br><span class=\"line\">            alert(\"error:\" + JSON.stringify(res));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3-支付回调\">3.支付回调</h3><p>在第一步时我们有配置了两个参数，其中：<br> PAY_RESULT_URL 为微信支付成功后跳转的页面URL<br> NOTIFY_URL 为支付成功后微信回调触发的接口，通过触发，完成服务器订单付款状态的更改</p>\n<p> 可能会对这个接口感到奇怪，我们明明没有在项目中调用过这个接口啊。<br> 要理解这个接口就要理解回调的概念，这里就详细解释回调的含义的，只需明白，这个是专门提供给微信调用的就行了，发起支付时，是在微信上实现的，我们并不知道支付的结果，只能等微信主动通知我们。</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\">     * 微信支付成功后的回调函数</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> request</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"/notify\"</span>, method = RequestMethod.POST)</span><br><span class=\"line\">    <span class=\"meta\">@ResponseBody</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">wechatNotify</span><span class=\"params\">(HttpServletRequest request)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 从 request 对象中获取 WechatNotify 对象</span></span><br><span class=\"line\">        WechatNotify notify = getNotifyBean(request);</span><br><span class=\"line\">        <span class=\"comment\">// 如果 notify 对象不为空 并且 result_code 和 return_code 都为 'SUCCESS' 则表示支付成功</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (StringUtils.equals(notify.getResult_code(), <span class=\"string\">\"SUCCESS\"</span>) &amp;&amp; StringUtils.equals(notify.getReturn_code(), <span class=\"string\">\"SUCCESS\"</span>)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                orderService.update(notify.getOut_trade_no(), notify.getTime_end());</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">                logger.error(e.getMessage(), e);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\\n&lt;return_code&gt;&lt;![CDATA[FAIL]]&gt;&lt;/return_code&gt;\\n&lt;return_msg&gt;&lt;![CDATA[ERROR]]&gt;&lt;/return_msg&gt;\\n&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\\n&lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;\\n&lt;return_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/return_msg&gt;\\n&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\\n&lt;return_code&gt;&lt;![CDATA[FAIL]]&gt;&lt;/return_code&gt;\\n&lt;return_msg&gt;&lt;![CDATA[ERROR]]&gt;&lt;/return_msg&gt;\\n&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"退款\">退款</h2><p>退款相对于付款就麻烦一点，因为给钱给微信与向微信拿钱肯定不一样。<br>首先就是证书的下载与放置到项目中，略。<br>剩下就是调用微信退款接口，部分代码如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\">   * 退款</span><br><span class=\"line\">   *</span><br><span class=\"line\">   * <span class=\"doctag\">@param</span> order 订单</span><br><span class=\"line\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">refund</span><span class=\"params\">(Order order)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">//1. 微信退款</span></span><br><span class=\"line\">      <span class=\"keyword\">boolean</span> refundResult = payService.refund(order.getId(), order.getId(), String.valueOf(order.getPayMoney()), String.valueOf(order.getPayMoney()));</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!refundResult) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> OrderException(<span class=\"string\">\"退款失败\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">//2.处理订单</span></span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          order.setStatus(OrderStatus.REFUNDED.getCode());</span><br><span class=\"line\">          order.setRefundTime(<span class=\"keyword\">new</span> Date());</span><br><span class=\"line\">          order.setRefundedTime(<span class=\"keyword\">new</span> Date());</span><br><span class=\"line\">          save(order);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">          LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> OrderException(<span class=\"string\">\"退款失败，请联系客服\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"comment\">/**</span><br><span class=\"line\">       * 退款</span><br><span class=\"line\">       * <span class=\"doctag\">@return</span></span><br><span class=\"line\">       */</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">refund</span><span class=\"params\">(String out_refund_no,String out_trade_no,String refund_fee,String total_fee)</span> </span>&#123;</span><br><span class=\"line\">          WechatRefundModel xml = <span class=\"keyword\">new</span> WechatRefundModel();</span><br><span class=\"line\">          xml.setAppid(Global.getConfig(<span class=\"string\">\"appid\"</span>));</span><br><span class=\"line\">          xml.setMch_id(Global.getConfig(<span class=\"string\">\"mchid\"</span>));</span><br><span class=\"line\">          xml.setNonce_str(encoder.createNonceStr());</span><br><span class=\"line\">          xml.setOp_user_id(Global.getConfig(<span class=\"string\">\"mchid\"</span>));</span><br><span class=\"line\">          xml.setOut_refund_no(out_refund_no);</span><br><span class=\"line\">          xml.setOut_trade_no(out_trade_no);</span><br><span class=\"line\">          xml.setRefund_fee(refund_fee);</span><br><span class=\"line\">          xml.setTotal_fee(total_fee);</span><br><span class=\"line\">          xml.sign(encoder);</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">              String result = doRefund(<span class=\"string\">\"https://api.mch.weixin.qq.com/secapi/pay/refund\"</span>,xml.toString());</span><br><span class=\"line\">              Map map = XmlHelper.of(result).toMap();</span><br><span class=\"line\">              String returnCode = (String) map.get(<span class=\"string\">\"return_code\"</span>);</span><br><span class=\"line\">              <span class=\"keyword\">if</span> (returnCode.equals(<span class=\"string\">\"SUCCESS\"</span>))&#123;</span><br><span class=\"line\">                  <span class=\"comment\">//todo</span></span><br><span class=\"line\">                  LOGGER.error(<span class=\"string\">\"=============================\"</span>+map.get(<span class=\"string\">\"return_msg\"</span>)+ <span class=\"string\">\"====================================\"</span>);</span><br><span class=\"line\">                  <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">              &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                  LOGGER.error(<span class=\"string\">\"=============================\"</span>+map.get(<span class=\"string\">\"return_msg\"</span>)+ <span class=\"string\">\"====================================\"</span>);</span><br><span class=\"line\">                  <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">          &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">              LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">              <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">private</span>  String <span class=\"title\">doRefund</span><span class=\"params\">(String url,String data)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">          KeyStore keyStore  = KeyStore.getInstance(<span class=\"string\">\"PKCS12\"</span>);</span><br><span class=\"line\">          InputStream instream = <span class=\"keyword\">this</span>.getClass().getClassLoader().getResourceAsStream(<span class=\"string\">\"apiclient_cert.p12\"</span>);<span class=\"comment\">//P12文件目录</span></span><br><span class=\"line\">          <span class=\"keyword\">char</span>[] password = Global.getConfig(<span class=\"string\">\"mchid\"</span>).toCharArray();</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">              keyStore.load(instream, password);<span class=\"comment\">//这里写密码..默认是你的MCHID</span></span><br><span class=\"line\">          &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">              instream.close();</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          SSLContext sslcontext = SSLContexts.custom()</span><br><span class=\"line\">                  .loadKeyMaterial(keyStore, password)<span class=\"comment\">//这里也是写密码的</span></span><br><span class=\"line\">                  .build();</span><br><span class=\"line\">          <span class=\"comment\">// Allow TLSv1 protocol only</span></span><br><span class=\"line\">          SSLConnectionSocketFactory sslsf = <span class=\"keyword\">new</span> SSLConnectionSocketFactory(</span><br><span class=\"line\">                  sslcontext,</span><br><span class=\"line\">                  <span class=\"keyword\">new</span> String[] &#123; <span class=\"string\">\"TLSv1\"</span> &#125;,</span><br><span class=\"line\">                  <span class=\"keyword\">null</span>,</span><br><span class=\"line\">                  SSLConnectionSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);</span><br><span class=\"line\">          CloseableHttpClient httpclient = HttpClients.custom()</span><br><span class=\"line\">                  .setSSLSocketFactory(sslsf)</span><br><span class=\"line\">                  .build();</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">              HttpPost httpost = <span class=\"keyword\">new</span> HttpPost(url); <span class=\"comment\">// 设置响应头信息</span></span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"Connection\"</span>, <span class=\"string\">\"keep-alive\"</span>);</span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"Accept\"</span>, <span class=\"string\">\"*/*\"</span>);</span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"Content-Type\"</span>, <span class=\"string\">\"application/x-www-form-urlencoded; charset=UTF-8\"</span>);</span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"Host\"</span>, <span class=\"string\">\"api.mch.weixin.qq.com\"</span>);</span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"X-Requested-With\"</span>, <span class=\"string\">\"XMLHttpRequest\"</span>);</span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"Cache-Control\"</span>, <span class=\"string\">\"max-age=0\"</span>);</span><br><span class=\"line\">              httpost.addHeader(<span class=\"string\">\"User-Agent\"</span>, <span class=\"string\">\"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0) \"</span>);</span><br><span class=\"line\">              httpost.setEntity(<span class=\"keyword\">new</span> StringEntity(data, <span class=\"string\">\"UTF-8\"</span>));</span><br><span class=\"line\">              CloseableHttpResponse response = httpclient.execute(httpost);</span><br><span class=\"line\">              <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                  HttpEntity entity = response.getEntity();</span><br><span class=\"line\">  </span><br><span class=\"line\">                  String jsonStr = EntityUtils.toString(response.getEntity(), <span class=\"string\">\"UTF-8\"</span>);</span><br><span class=\"line\">                  EntityUtils.consume(entity);</span><br><span class=\"line\">                  <span class=\"keyword\">return</span> jsonStr;</span><br><span class=\"line\">              &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                  response.close();</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">          &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">              httpclient.close();</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"源码\">源码</h1><h2 id=\"PayController-java\">PayController.java</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.weixin.pay;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.LoggerFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Controller;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.config.Global;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.controller.BaseController;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.utils.StringUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.Order;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.service.OrderService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.service.UserService;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.bind.JAXBContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.bind.JAXBException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.bind.Unmarshaller;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.DataInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.StringReader;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Created by dongxiaoxia on 2016/12/29.</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Controller</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"pay\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PayController</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(PayController.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> PayService payService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OrderService orderService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserService userService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 支付完成页面</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 跳转支付完成页面，由微信端支付完成后自动跳转</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"result\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">result</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"pay/result\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 微信支付成功后的回调函数</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> request</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"/notify\"</span>, method = RequestMethod.POST)</span><br><span class=\"line\">    <span class=\"meta\">@ResponseBody</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">wechatNotify</span><span class=\"params\">(HttpServletRequest request)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 从 request 对象中获取 WechatNotify 对象</span></span><br><span class=\"line\">        WechatNotify notify = getNotifyBean(request);</span><br><span class=\"line\">        <span class=\"comment\">// 如果 notify 对象不为空 并且 result_code 和 return_code 都为 'SUCCESS' 则表示支付成功</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (StringUtils.equals(notify.getResult_code(), <span class=\"string\">\"SUCCESS\"</span>) &amp;&amp; StringUtils.equals(notify.getReturn_code(), <span class=\"string\">\"SUCCESS\"</span>)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                orderService.update(notify.getOut_trade_no(), notify.getTime_end());</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">                logger.error(e.getMessage(), e);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\\n&lt;return_code&gt;&lt;![CDATA[FAIL]]&gt;&lt;/return_code&gt;\\n&lt;return_msg&gt;&lt;![CDATA[ERROR]]&gt;&lt;/return_msg&gt;\\n&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\\n&lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;\\n&lt;return_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/return_msg&gt;\\n&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\\n&lt;return_code&gt;&lt;![CDATA[FAIL]]&gt;&lt;/return_code&gt;\\n&lt;return_msg&gt;&lt;![CDATA[ERROR]]&gt;&lt;/return_msg&gt;\\n&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 微信回调成功后 将 xml 转换为  WechatNotify 对象</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> request</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> WechatNotify 对象</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> WechatNotify <span class=\"title\">getNotifyBean</span><span class=\"params\">(HttpServletRequest request)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            DataInputStream in = <span class=\"keyword\">new</span> DataInputStream(request.getInputStream());</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] dataOrigin = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[request.getContentLength()];</span><br><span class=\"line\">            <span class=\"comment\">// 根据长度，将消息实体的内容读入字节数组dataOrigin中</span></span><br><span class=\"line\">            in.readFully(dataOrigin);</span><br><span class=\"line\">            <span class=\"comment\">// 关闭数据流</span></span><br><span class=\"line\">            in.close();</span><br><span class=\"line\">            <span class=\"comment\">// 从字节数组中得到表示实体的字符串</span></span><br><span class=\"line\">            String xml = <span class=\"keyword\">new</span> String(dataOrigin);</span><br><span class=\"line\">            <span class=\"comment\">// 将 xml 转换为  WechatNotify 对象</span></span><br><span class=\"line\">            Object object;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                JAXBContext jc = JAXBContext.newInstance(WechatNotify.class);</span><br><span class=\"line\">                Unmarshaller us = jc.createUnmarshaller();</span><br><span class=\"line\">                object = us.unmarshal(<span class=\"keyword\">new</span> StringReader(xml));</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (JAXBException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">                object = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (object != <span class=\"keyword\">null</span> &amp;&amp; object <span class=\"keyword\">instanceof</span> WechatNotify) &#123;</span><br><span class=\"line\">                WechatNotify notify = (WechatNotify) object;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> notify;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"PayService-java_支付回调控制器\">PayService.java 支付回调控制器</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.weixin.pay;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.jfinal.weixin.sdk.kit.PaymentKit;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.jfinal.weixin.sdk.utils.XmlHelper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.HttpEntity;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.conn.ssl.SSLConnectionSocketFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.conn.ssl.SSLContexts;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.entity.StringEntity;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.http.util.EntityUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.LoggerFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.ui.Model;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.client.RestTemplate;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.config.Global;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.utils.StringUtils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.net.ssl.SSLContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.KeyStore;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2016-06-28 11:15</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PayService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(PayService.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    SignMD5 encoder = <span class=\"keyword\">new</span> SignMD5();</span><br><span class=\"line\">    RestTemplate restTemplate = <span class=\"keyword\">new</span> RestTemplate();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 微信支付统一下单接口</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> notifyUrl    支付成功后回调路径</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> openId       用户的 openId</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> body         商品描述</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> total        支付金额（单位分）</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> out_trade_no 订单唯一订单号</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">unifiedorder</span><span class=\"params\">(String notifyUrl, String openId, String body, String total, String out_trade_no)</span> </span>&#123;</span><br><span class=\"line\">        WechatPayModel xml = <span class=\"keyword\">new</span> WechatPayModel();</span><br><span class=\"line\">        xml.setAppid(Global.getConfig(<span class=\"string\">\"appid\"</span>));</span><br><span class=\"line\">        xml.setMch_id(Global.getConfig(<span class=\"string\">\"mchid\"</span>));</span><br><span class=\"line\">        xml.setNonce_str(encoder.createNonceStr());</span><br><span class=\"line\">        xml.setBody(body);</span><br><span class=\"line\">        xml.setOut_trade_no(out_trade_no);</span><br><span class=\"line\">        xml.setTotal_fee(total);</span><br><span class=\"line\">        xml.setSpbill_create_ip(<span class=\"string\">\"127.0.0.1\"</span>);<span class=\"comment\">//// <span class=\"doctag\">TODO:</span> 2016/6/28</span></span><br><span class=\"line\">        xml.setNotify_url(notifyUrl);</span><br><span class=\"line\">        xml.setTrade_type(<span class=\"string\">\"JSAPI\"</span>);</span><br><span class=\"line\">        xml.setOpenid(openId);</span><br><span class=\"line\">        xml.sign(encoder);</span><br><span class=\"line\"></span><br><span class=\"line\">        String result = restTemplate.postForObject(<span class=\"string\">\"https://api.mch.weixin.qq.com/pay/unifiedorder\"</span>, xml, String.class);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 调起微信支付</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> model</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> res   预支付订单 字符串</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> url   微信支付 url</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">wechatPay</span><span class=\"params\">(Model model, String res, String url)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Map&lt;String, String&gt; start = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">            StringBuilder startSign = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">            Map&lt;String, String&gt; pay = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">            StringBuilder paySign = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">            Map map = XmlHelper.of(res).toMap();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (StringUtils.equals((String) map.get(<span class=\"string\">\"return_code\"</span>), <span class=\"string\">\"SUCCESS\"</span>)) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 得到的预支付订单，重新生成微信支付参数</span></span><br><span class=\"line\">                String prepay_id = (String) map.get(<span class=\"string\">\"prepay_id\"</span>);</span><br><span class=\"line\">                String jsapi_ticket = TicketManager.getDefaultTicket();</span><br><span class=\"line\">                <span class=\"comment\">// 生成 微信支付 config 参数</span></span><br><span class=\"line\">                start.put(<span class=\"string\">\"appId\"</span>, Global.getConfig(<span class=\"string\">\"appid\"</span>));</span><br><span class=\"line\">                start.put(<span class=\"string\">\"nonceStr\"</span>, encoder.createNonceStr());</span><br><span class=\"line\">                start.put(<span class=\"string\">\"timestamp\"</span>, encoder.createTimeStamp());</span><br><span class=\"line\">                <span class=\"comment\">// 生成 config 签名</span></span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"jsapi_ticket=\"</span>).append(jsapi_ticket);</span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"&amp;noncestr=\"</span>).append(start.get(<span class=\"string\">\"nonceStr\"</span>));</span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"&amp;timestamp=\"</span>).append(start.get(<span class=\"string\">\"timestamp\"</span>));</span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"&amp;url=\"</span>).append(url);</span><br><span class=\"line\">                start.put(<span class=\"string\">\"signature\"</span>, encoder.encode(startSign.toString()));</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">// config信息验证后会执行ready方法的参数</span></span><br><span class=\"line\">                pay.put(<span class=\"string\">\"signType\"</span>, <span class=\"string\">\"MD5\"</span>);</span><br><span class=\"line\">                pay.put(<span class=\"string\">\"packageStr\"</span>, <span class=\"string\">\"prepay_id=\"</span> + prepay_id);</span><br><span class=\"line\">                <span class=\"comment\">// 生成支付签名</span></span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"appId=\"</span>).append(start.get(<span class=\"string\">\"appId\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;nonceStr=\"</span>).append(start.get(<span class=\"string\">\"nonceStr\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;package=\"</span>).append(pay.get(<span class=\"string\">\"packageStr\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;signType=\"</span>).append(pay.get(<span class=\"string\">\"signType\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;timeStamp=\"</span>).append(start.get(<span class=\"string\">\"timestamp\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;key=\"</span>).append(Global.getConfig(<span class=\"string\">\"payKey\"</span>));</span><br><span class=\"line\">                pay.put(<span class=\"string\">\"paySign\"</span>, encoder.encode(paySign.toString()));</span><br><span class=\"line\">                <span class=\"comment\">// 将微信支参数放入 model 对象中以便前端使用</span></span><br><span class=\"line\">                model.addAttribute(<span class=\"string\">\"start\"</span>, start);</span><br><span class=\"line\">                model.addAttribute(<span class=\"string\">\"pay\"</span>, pay);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                LOGGER.error(<span class=\"keyword\">new</span> String(PaymentKit.xmlToMap(res).get(<span class=\"string\">\"return_msg\"</span>).getBytes(<span class=\"string\">\"iso8859-1\"</span>)));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            model.addAttribute(<span class=\"string\">\"wechatMessage\"</span>, <span class=\"string\">\"微信授权失败!\"</span>);</span><br><span class=\"line\">            LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 调起微信支付</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> res 预支付订单 字符串</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> url 微信支付 url</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Map <span class=\"title\">wechatPay</span><span class=\"params\">(String res, String url)</span> </span>&#123;</span><br><span class=\"line\">        Map&lt;String, Object&gt; result = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Map&lt;String, String&gt; start = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">            StringBuilder startSign = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">            Map&lt;String, String&gt; pay = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">            StringBuilder paySign = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">            Map map = XmlHelper.of(res).toMap();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (StringUtils.equals((String) map.get(<span class=\"string\">\"return_code\"</span>), <span class=\"string\">\"SUCCESS\"</span>)) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 得到的预支付订单，重新生成微信支付参数</span></span><br><span class=\"line\">                String prepay_id = (String) map.get(<span class=\"string\">\"prepay_id\"</span>);</span><br><span class=\"line\">                String jsapi_ticket = TicketManager.getDefaultTicket();</span><br><span class=\"line\">                <span class=\"comment\">// 生成 微信支付 config 参数</span></span><br><span class=\"line\">                start.put(<span class=\"string\">\"appId\"</span>, Global.getConfig(<span class=\"string\">\"appid\"</span>));</span><br><span class=\"line\">                start.put(<span class=\"string\">\"nonceStr\"</span>, encoder.createNonceStr());</span><br><span class=\"line\">                start.put(<span class=\"string\">\"timestamp\"</span>, encoder.createTimeStamp());</span><br><span class=\"line\">                <span class=\"comment\">// 生成 config 签名</span></span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"jsapi_ticket=\"</span>).append(jsapi_ticket);</span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"&amp;noncestr=\"</span>).append(start.get(<span class=\"string\">\"nonceStr\"</span>));</span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"&amp;timestamp=\"</span>).append(start.get(<span class=\"string\">\"timestamp\"</span>));</span><br><span class=\"line\">                startSign.append(<span class=\"string\">\"&amp;url=\"</span>).append(url);</span><br><span class=\"line\">                start.put(<span class=\"string\">\"signature\"</span>, encoder.encode(startSign.toString()));</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">// config信息验证后会执行ready方法的参数</span></span><br><span class=\"line\">                pay.put(<span class=\"string\">\"signType\"</span>, <span class=\"string\">\"MD5\"</span>);</span><br><span class=\"line\">                pay.put(<span class=\"string\">\"packageStr\"</span>, <span class=\"string\">\"prepay_id=\"</span> + prepay_id);</span><br><span class=\"line\">                <span class=\"comment\">// 生成支付签名</span></span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"appId=\"</span>).append(start.get(<span class=\"string\">\"appId\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;nonceStr=\"</span>).append(start.get(<span class=\"string\">\"nonceStr\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;package=\"</span>).append(pay.get(<span class=\"string\">\"packageStr\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;signType=\"</span>).append(pay.get(<span class=\"string\">\"signType\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;timeStamp=\"</span>).append(start.get(<span class=\"string\">\"timestamp\"</span>));</span><br><span class=\"line\">                paySign.append(<span class=\"string\">\"&amp;key=\"</span>).append(Global.getConfig(<span class=\"string\">\"payKey\"</span>));</span><br><span class=\"line\">                pay.put(<span class=\"string\">\"paySign\"</span>, encoder.encode(paySign.toString()));</span><br><span class=\"line\">                <span class=\"comment\">// 将微信支参数放入 result 对象中以便前端使用</span></span><br><span class=\"line\">                result.put(<span class=\"string\">\"start\"</span>, start);</span><br><span class=\"line\">                result.put(<span class=\"string\">\"pay\"</span>, pay);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                LOGGER.error(<span class=\"keyword\">new</span> String(PaymentKit.xmlToMap(res).get(<span class=\"string\">\"return_msg\"</span>).getBytes(<span class=\"string\">\"iso8859-1\"</span>)));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            result.put(<span class=\"string\">\"wechatMessage\"</span>, <span class=\"string\">\"微信授权失败!\"</span>);</span><br><span class=\"line\">            LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 退款</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span></span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">refund</span><span class=\"params\">(String out_refund_no,String out_trade_no,String refund_fee,String total_fee)</span> </span>&#123;</span><br><span class=\"line\">        WechatRefundModel xml = <span class=\"keyword\">new</span> WechatRefundModel();</span><br><span class=\"line\">        xml.setAppid(Global.getConfig(<span class=\"string\">\"appid\"</span>));</span><br><span class=\"line\">        xml.setMch_id(Global.getConfig(<span class=\"string\">\"mchid\"</span>));</span><br><span class=\"line\">        xml.setNonce_str(encoder.createNonceStr());</span><br><span class=\"line\">        xml.setOp_user_id(Global.getConfig(<span class=\"string\">\"mchid\"</span>));</span><br><span class=\"line\">        xml.setOut_refund_no(out_refund_no);</span><br><span class=\"line\">        xml.setOut_trade_no(out_trade_no);</span><br><span class=\"line\">        xml.setRefund_fee(refund_fee);</span><br><span class=\"line\">        xml.setTotal_fee(total_fee);</span><br><span class=\"line\">        xml.sign(encoder);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            String result = doRefund(<span class=\"string\">\"https://api.mch.weixin.qq.com/secapi/pay/refund\"</span>,xml.toString());</span><br><span class=\"line\">            Map map = XmlHelper.of(result).toMap();</span><br><span class=\"line\">            String returnCode = (String) map.get(<span class=\"string\">\"return_code\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (returnCode.equals(<span class=\"string\">\"SUCCESS\"</span>))&#123;</span><br><span class=\"line\">                <span class=\"comment\">//todo</span></span><br><span class=\"line\">                LOGGER.error(<span class=\"string\">\"=============================\"</span>+map.get(<span class=\"string\">\"return_msg\"</span>)+ <span class=\"string\">\"====================================\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                LOGGER.error(<span class=\"string\">\"=============================\"</span>+map.get(<span class=\"string\">\"return_msg\"</span>)+ <span class=\"string\">\"====================================\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">            LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span>  String <span class=\"title\">doRefund</span><span class=\"params\">(String url,String data)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        KeyStore keyStore  = KeyStore.getInstance(<span class=\"string\">\"PKCS12\"</span>);</span><br><span class=\"line\">        InputStream instream = <span class=\"keyword\">this</span>.getClass().getClassLoader().getResourceAsStream(<span class=\"string\">\"apiclient_cert.p12\"</span>);<span class=\"comment\">//P12文件目录</span></span><br><span class=\"line\">        <span class=\"keyword\">char</span>[] password = Global.getConfig(<span class=\"string\">\"mchid\"</span>).toCharArray();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            keyStore.load(instream, password);<span class=\"comment\">//这里写密码..默认是你的MCHID</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            instream.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        SSLContext sslcontext = SSLContexts.custom()</span><br><span class=\"line\">                .loadKeyMaterial(keyStore, password)<span class=\"comment\">//这里也是写密码的</span></span><br><span class=\"line\">                .build();</span><br><span class=\"line\">        <span class=\"comment\">// Allow TLSv1 protocol only</span></span><br><span class=\"line\">        SSLConnectionSocketFactory sslsf = <span class=\"keyword\">new</span> SSLConnectionSocketFactory(</span><br><span class=\"line\">                sslcontext,</span><br><span class=\"line\">                <span class=\"keyword\">new</span> String[] &#123; <span class=\"string\">\"TLSv1\"</span> &#125;,</span><br><span class=\"line\">                <span class=\"keyword\">null</span>,</span><br><span class=\"line\">                SSLConnectionSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);</span><br><span class=\"line\">        CloseableHttpClient httpclient = HttpClients.custom()</span><br><span class=\"line\">                .setSSLSocketFactory(sslsf)</span><br><span class=\"line\">                .build();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            HttpPost httpost = <span class=\"keyword\">new</span> HttpPost(url); <span class=\"comment\">// 设置响应头信息</span></span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"Connection\"</span>, <span class=\"string\">\"keep-alive\"</span>);</span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"Accept\"</span>, <span class=\"string\">\"*/*\"</span>);</span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"Content-Type\"</span>, <span class=\"string\">\"application/x-www-form-urlencoded; charset=UTF-8\"</span>);</span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"Host\"</span>, <span class=\"string\">\"api.mch.weixin.qq.com\"</span>);</span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"X-Requested-With\"</span>, <span class=\"string\">\"XMLHttpRequest\"</span>);</span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"Cache-Control\"</span>, <span class=\"string\">\"max-age=0\"</span>);</span><br><span class=\"line\">            httpost.addHeader(<span class=\"string\">\"User-Agent\"</span>, <span class=\"string\">\"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0) \"</span>);</span><br><span class=\"line\">            httpost.setEntity(<span class=\"keyword\">new</span> StringEntity(data, <span class=\"string\">\"UTF-8\"</span>));</span><br><span class=\"line\">            CloseableHttpResponse response = httpclient.execute(httpost);</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                HttpEntity entity = response.getEntity();</span><br><span class=\"line\"></span><br><span class=\"line\">                String jsonStr = EntityUtils.toString(response.getEntity(), <span class=\"string\">\"UTF-8\"</span>);</span><br><span class=\"line\">                EntityUtils.consume(entity);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> jsonStr;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                response.close();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            httpclient.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"OrderController-java_订单控制器\">OrderController.java 订单控制器</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.modules.controller;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.LoggerFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Controller;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.ui.Model;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.controller.BaseController;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.utils.DateUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.Clinic;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.Items;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.Order;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.exception.OrderException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.service.ItemsService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.service.OrderService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.vo.AjaxResult;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.vo.OrderStatus;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpSession;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Created by dongxiaoxia on 2016/12/30.</span><br><span class=\"line\"> * &lt;p&gt;</span><br><span class=\"line\"> * 订单控制器</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Controller</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"order\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OrderController</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(OrderController.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OrderService orderService;</span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ItemsService itemsService;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 我的订单列表首页</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 跳转订单首页</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"\"</span>, method = RequestMethod.GET)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">index</span><span class=\"params\">(HttpSession session, Model model)</span> </span>&#123;</span><br><span class=\"line\">        User user = (User) session.getAttribute(<span class=\"string\">\"user\"</span>);</span><br><span class=\"line\">        Order order = <span class=\"keyword\">new</span> Order();</span><br><span class=\"line\">        order.setCreateBy(user);</span><br><span class=\"line\">        <span class=\"comment\">//查找出当前用户创建的订单列表</span></span><br><span class=\"line\">        List&lt;Order&gt; orders = orderService.findList(order);</span><br><span class=\"line\">        model.addAttribute(<span class=\"string\">\"orders\"</span>, orders);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"order/index\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 订单详情</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> orderId 订单编号</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 跳转订单详情页面</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"&#123;orderId&#125;\"</span>, method = RequestMethod.GET)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">detail</span><span class=\"params\">(@PathVariable String orderId, Model model, HttpServletResponse response, HttpSession session)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        Order order = orderService.get(orderId);</span><br><span class=\"line\">        User user = (User) session.getAttribute(<span class=\"string\">\"user\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (order == <span class=\"keyword\">null</span> || !order.getCreateBy().getId().equals(user.getId())) &#123;</span><br><span class=\"line\">            response.sendError(HttpServletResponse.SC_NOT_FOUND);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"comment\">//        orderService.get() 查出来的order中clinic没有关联查询area，因此重新获取</span></span><br><span class=\"line\">        Clinic clinic = clinicService.get(order.getClinic().getId());</span><br><span class=\"line\">        order.setClinic(clinic);</span><br><span class=\"line\">        model.addAttribute(<span class=\"string\">\"order\"</span>, order);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"order/detail\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 退款</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> orderId 订单编号</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 退款操作结果</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@ResponseBody</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"refund/&#123;orderId&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> AjaxResult <span class=\"title\">refund</span><span class=\"params\">(@PathVariable String orderId, HttpSession session)</span> </span>&#123;</span><br><span class=\"line\">        Order order = orderService.get(orderId);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (order == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"订单不存在\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        User user = (User) session.getAttribute(<span class=\"string\">\"user\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!order.getCreateBy().getId().equals(user.getId())) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"没有权限\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (OrderStatus.PAID.getCode() != order.getStatus()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"不在退款范围\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            orderService.refund(order);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.success();</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (OrderException e)&#123;</span><br><span class=\"line\">            LOGGER.error(e.getMessage(),e);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(e.getMessage());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 下订单（未付款）</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> itemsId         服务项目编号</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> appointmentTime 预约时间</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 下订单操作结果</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@ResponseBody</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(method = RequestMethod.POST)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> AjaxResult <span class=\"title\">add</span><span class=\"params\">(HttpSession session, String itemsId, String appointmentTime)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (StringUtils.isEmpty(itemsId)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"itemsId 不能为空\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (StringUtils.isEmpty(appointmentTime)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"appointmentTime 不能为空\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Items items = itemsService.get(itemsId);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (items == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"该服务项目不存在\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        User user = (User) session.getAttribute(<span class=\"string\">\"user\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Map result = orderService.add(items, appointmentTime,user); <span class=\"comment\">//下订单</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.success(result);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">            LOGGER.error(e.getMessage(),e);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> AjaxResult.fail(<span class=\"string\">\"支付失败，请稍候再试\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 跳转确定订单支付页面</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> itemsId 服务项目编号</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 支付页面</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"create/&#123;itemsId&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">create</span><span class=\"params\">(@PathVariable String itemsId, Model model, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        Items items = itemsService.get(itemsId);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (items == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            response.sendError(HttpServletResponse.SC_NOT_FOUND);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        model.addAttribute(<span class=\"string\">\"items\"</span>, items);</span><br><span class=\"line\">        model.addAttribute(<span class=\"string\">\"dateStr\"</span>, DateUtils.getDateStr(<span class=\"keyword\">new</span> Date(), <span class=\"number\">31</span>, <span class=\"string\">\"yyyy-MM-dd\"</span>));<span class=\"comment\">//预约日期范围（今天开始，默认一个月）</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"order/create\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"OrderService-java_订单服务器\">OrderService.java 订单服务器</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.modules.service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.LoggerFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.config.Global;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.service.CrudService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.utils.DateUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.dao.OrderDao;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.Items;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.Order;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.entity.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.exception.OrderException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.vo.OrderStatus;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.modules.vo.PayResult;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.weixin.TemplateMassageUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.weixin.pay.PayService;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.text.ParseException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * Created by dongxiaoxia on 2016/12/30.</span><br><span class=\"line\"> * &lt;p&gt;</span><br><span class=\"line\"> * 订单服务类</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"order\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OrderService</span> <span class=\"keyword\">extends</span> <span class=\"title\">CrudService</span>&lt;<span class=\"title\">OrderDao</span>, <span class=\"title\">Order</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(OrderService.class);</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Timer TIMER = <span class=\"keyword\">new</span> Timer();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DEFAULT_VALIDITY_TIME = Integer.valueOf(Global.getConfig(<span class=\"string\">\"payTime\"</span>));<span class=\"comment\">//默认2分钟</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String NOTIFY_URL = Global.getConfig(<span class=\"string\">\"domainName\"</span>) + <span class=\"string\">\"/pay/notify\"</span>;<span class=\"comment\">//微信支付回调接口</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String PAY_RESULT_URL = Global.getConfig(<span class=\"string\">\"domainName\"</span>) + <span class=\"string\">\"/pay/result\"</span>;<span class=\"comment\">//微信支付结果页面接口</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String PAY_BODY = <span class=\"string\">\"牙齐齐服务\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> PayService payService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 下单（但付款）</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> items           订单对应项目</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> appointmentTime 预约时间</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> owner           订单拥有者</span><br><span class=\"line\">     * <span class=\"doctag\">@return</span> 微信支付下单结果信息集合</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Map <span class=\"title\">add</span><span class=\"params\">(Items items , User owner)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (items == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"items can not be null\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Order order = <span class=\"keyword\">new</span> Order();</span><br><span class=\"line\">        order.setItems(items);</span><br><span class=\"line\">        order.setPayMoney(items.getPrice());</span><br><span class=\"line\">        order.setStatus(OrderStatus.NEED_PAY.getCode());</span><br><span class=\"line\">        order.setPayResult(PayResult.NEED_PAY.getCode());</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.save(order);</span><br><span class=\"line\">        <span class=\"comment\">//支付倒计时，定时删除未支付的订单</span></span><br><span class=\"line\">        TIMER.schedule(<span class=\"keyword\">new</span> TimeoutTask(order.getId()), DEFAULT_VALIDITY_TIME);</span><br><span class=\"line\">        <span class=\"comment\">//调用微信支付统一下单接口，获取微信支付统一订单号</span></span><br><span class=\"line\">        String res = payService.unifiedorder(NOTIFY_URL, owner.getOpenId(), PAY_BODY, String.valueOf(order.getPayMoney()), order.getId());</span><br><span class=\"line\">        <span class=\"comment\">//调起微信支付，获取微信支付下单结果信息集合</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> payService.wechatPay(res, PAY_RESULT_URL);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 修改订单</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> orderId 订单编号</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> time 微信支付时间</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Transactional</span>(readOnly = <span class=\"keyword\">false</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(String orderId, String time)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Order order = dao.get(orderId);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (order != <span class=\"keyword\">null</span> &amp;&amp; PayResult.SUCCESS.getCode() != order.getPayResult()) &#123;<span class=\"comment\">//订单处于未支付成功状态</span></span><br><span class=\"line\">                order.setPayResult(PayResult.SUCCESS.getCode());<span class=\"comment\">//设置支付状态</span></span><br><span class=\"line\">                order.setStatus(OrderStatus.PAID.getCode());<span class=\"comment\">//设置订单状态</span></span><br><span class=\"line\">                order.setVoucher(String.valueOf(<span class=\"number\">10000000</span> + <span class=\"keyword\">new</span> Random().nextInt(<span class=\"number\">89999999</span>)));<span class=\"comment\">//生成服务凭证，预测用户少，不会重复</span></span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    order.setCreateDate(<span class=\"keyword\">new</span> Date(DateUtils.parseDate(time, <span class=\"string\">\"yyyyMMddHHmmss\"</span>).getTime()));<span class=\"comment\">//把订单生成时间设置为微信支付成功的时间</span></span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (ParseException e) &#123;</span><br><span class=\"line\">                    order.setCreateDate(<span class=\"keyword\">new</span> Date(System.currentTimeMillis()));</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                dao.update(order);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (OrderException e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> OrderException(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 退款</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * <span class=\"doctag\">@param</span> order 订单</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">refund</span><span class=\"params\">(Order order)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1. 微信退款</span></span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> refundResult = payService.refund(order.getId(), order.getId(), String.valueOf(order.getPayMoney()), String.valueOf(order.getPayMoney()));</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!refundResult) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> OrderException(<span class=\"string\">\"退款失败\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//2.处理订单</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            order.setStatus(OrderStatus.REFUNDED.getCode());</span><br><span class=\"line\">            order.setRefundTime(<span class=\"keyword\">new</span> Date());</span><br><span class=\"line\">            order.setRefundedTime(<span class=\"keyword\">new</span> Date());</span><br><span class=\"line\">            save(order);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            LOGGER.error(e.getMessage(), e);</span><br><span class=\"line\">            SmsUtils.notify(Global.getConfig(<span class=\"string\">\"adminMobile\"</span>), order.getId(), <span class=\"string\">\"用户申请退款处理出现异常错误,请及时处理\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> OrderException(<span class=\"string\">\"退款失败，请联系客服\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//3. 发消息模版给用户</span></span><br><span class=\"line\">        TemplateMassageUtils.sendRefundOrderSuccessTemplateMessage(order.getCreateBy(), order);</span><br><span class=\"line\">        <span class=\"comment\">//4. 发消息模版给管理员</span></span><br><span class=\"line\">        TemplateMassageUtils.sendRefundOrderSuccessTemplateMessageToAdmin(order);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span><br><span class=\"line\">     * 删除过期任务</span><br><span class=\"line\">     */</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TimeoutTask</span> <span class=\"keyword\">extends</span> <span class=\"title\">TimerTask</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String orderId;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TimeoutTask</span><span class=\"params\">(String orderId)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.orderId = orderId;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/**</span><br><span class=\"line\">         * The action to be performed by this timer task.</span><br><span class=\"line\">         */</span></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">//删除未支付的订单</span></span><br><span class=\"line\">            Order order = dao.get(orderId);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (order == <span class=\"keyword\">null</span> || PayResult.SUCCESS.getCode() == order.getPayResult()) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            order.setId(orderId);</span><br><span class=\"line\">            dao.delete(order);</span><br><span class=\"line\">            LOGGER.info(<span class=\"string\">\"========================删除orderID:\"</span> + orderId + <span class=\"string\">\" 订单成功！================================\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Order-java_订单类\">Order.java 订单类</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * 实体类-订单</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Order</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> serialVersionUID = -<span class=\"number\">596545820416981026L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Items items;            <span class=\"comment\">//服务项目</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> payResult;       <span class=\"comment\">//支付结果 (-1,\"待付款\"),(0, \"支付成功\"),(1,\"支付失败\")</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> payMoney;         <span class=\"comment\">//支付金额,单位（分）</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String voucher;         <span class=\"comment\">//服务凭证</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String appointmentTime; <span class=\"comment\">//预约时段</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> status;          <span class=\"comment\">//服务状态（-1预定，代付款 0已付款，1申请退款，2已退款，9已完成）</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date refundTime;        <span class=\"comment\">//请求退款时间</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date refundedTime;      <span class=\"comment\">//退款完成时间</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date finishTime;        <span class=\"comment\">//服务完成时间</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//getter and setter</span></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"SignMD5-java_签名工具类\">SignMD5.java 签名工具类</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.weixin.pay;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.UnsupportedEncodingException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.MessageDigest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.NoSuchAlgorithmException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Formatter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.UUID;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2016-06-28 11:08</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SignMD5</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">byteToHex</span><span class=\"params\">(<span class=\"keyword\">final</span> <span class=\"keyword\">byte</span>[] hash)</span> </span>&#123;</span><br><span class=\"line\">        Formatter formatter = <span class=\"keyword\">new</span> Formatter();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">byte</span> b : hash) &#123;</span><br><span class=\"line\">            formatter.format(<span class=\"string\">\"%02x\"</span>, b);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        String result = formatter.toString();</span><br><span class=\"line\">        formatter.close();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">encode</span><span class=\"params\">(CharSequence charSequence)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            MessageDigest crypt = MessageDigest.getInstance(<span class=\"string\">\"MD5\"</span>);</span><br><span class=\"line\">            crypt.reset();</span><br><span class=\"line\">            crypt.update(charSequence.toString().getBytes(<span class=\"string\">\"UTF-8\"</span>));</span><br><span class=\"line\">            <span class=\"keyword\">return</span> byteToHex(crypt.digest());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">matches</span><span class=\"params\">(CharSequence charSequence, String encodedPassword)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> encode(charSequence).equals(encodedPassword);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">createNonceStr</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> UUID.randomUUID().toString().replaceAll(<span class=\"string\">\"-\"</span>,<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">createTimeStamp</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Long.toString(System.currentTimeMillis() / <span class=\"number\">1000</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"WechatNotify-java_微信支付回调结果封装\">WechatNotify.java 微信支付回调结果封装</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.weixin.pay;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.bind.annotation.XmlRootElement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.Serializable;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2016-06-28 11:10</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@XmlRootElement</span>(name=<span class=\"string\">\"xml\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WechatNotify</span> <span class=\"keyword\">implements</span> <span class=\"title\">Serializable</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> serialVersionUID = <span class=\"number\">8047707600433551023L</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String appid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String attach;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String bank_type;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String fee_type;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String is_subscribe;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String mch_id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String nonce_str;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String openid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String out_trade_no;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String result_code;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String return_code;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String sign;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String sub_mch_id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String time_end;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String total_fee;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String trade_type;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String transaction_id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAppid</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> appid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAppid</span><span class=\"params\">(String appid)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.appid = appid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAttach</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> attach;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAttach</span><span class=\"params\">(String attach)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.attach = attach;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getBank_type</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> bank_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setBank_type</span><span class=\"params\">(String bank_type)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.bank_type = bank_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getFee_type</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fee_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setFee_type</span><span class=\"params\">(String fee_type)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fee_type = fee_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getIs_subscribe</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> is_subscribe;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setIs_subscribe</span><span class=\"params\">(String is_subscribe)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.is_subscribe = is_subscribe;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getMch_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMch_id</span><span class=\"params\">(String mch_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mch_id = mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getNonce_str</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nonce_str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNonce_str</span><span class=\"params\">(String nonce_str)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.nonce_str = nonce_str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOpenid</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> openid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOpenid</span><span class=\"params\">(String openid)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.openid = openid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOut_trade_no</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> out_trade_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOut_trade_no</span><span class=\"params\">(String out_trade_no)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.out_trade_no = out_trade_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getResult_code</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result_code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setResult_code</span><span class=\"params\">(String result_code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.result_code = result_code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getReturn_code</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> return_code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setReturn_code</span><span class=\"params\">(String return_code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.return_code = return_code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSign</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sign;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSign</span><span class=\"params\">(String sign)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sign = sign;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSub_mch_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sub_mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSub_mch_id</span><span class=\"params\">(String sub_mch_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sub_mch_id = sub_mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTime_end</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> time_end;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTime_end</span><span class=\"params\">(String time_end)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.time_end = time_end;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTotal_fee</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTotal_fee</span><span class=\"params\">(String total_fee)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.total_fee = total_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTrade_type</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> trade_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTrade_type</span><span class=\"params\">(String trade_type)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.trade_type = trade_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTransaction_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> transaction_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTransaction_id</span><span class=\"params\">(String transaction_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.transaction_id = transaction_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"WechatPayModel-java_微信支付统一订单接口参数封装模型\">WechatPayModel.java 微信支付统一订单接口参数封装模型</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.weixin.pay;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.config.Global;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.bind.annotation.XmlRootElement;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2016-06-28 11:11</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@XmlRootElement</span>(name = <span class=\"string\">\"XML\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WechatPayModel</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String appid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String mch_id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String nonce_str;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String body;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String out_trade_no;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String total_fee;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String spbill_create_ip;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String notify_url;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String trade_type;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String openid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String sign;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAppid</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> appid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAppid</span><span class=\"params\">(String appid)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.appid = appid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getMch_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMch_id</span><span class=\"params\">(String mch_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mch_id = mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getNonce_str</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nonce_str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNonce_str</span><span class=\"params\">(String nonce_str)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.nonce_str = nonce_str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOut_trade_no</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> out_trade_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOut_trade_no</span><span class=\"params\">(String out_trade_no)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.out_trade_no = out_trade_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTotal_fee</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTotal_fee</span><span class=\"params\">(String total_fee)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.total_fee = total_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSpbill_create_ip</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> spbill_create_ip;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSpbill_create_ip</span><span class=\"params\">(String spbill_create_ip)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.spbill_create_ip = spbill_create_ip;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getNotify_url</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> notify_url;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNotify_url</span><span class=\"params\">(String notify_url)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.notify_url = notify_url;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTrade_type</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> trade_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTrade_type</span><span class=\"params\">(String trade_type)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.trade_type = trade_type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getBody</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> body;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setBody</span><span class=\"params\">(String body)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.body = body;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSign</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sign;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSign</span><span class=\"params\">(String sign)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sign = sign;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOpenid</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> openid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOpenid</span><span class=\"params\">(String openid)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.openid = openid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">sign</span><span class=\"params\">(SignMD5 encoder)</span> </span>&#123;</span><br><span class=\"line\">        StringBuilder stringBuilder = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"appid=\"</span>).append(getAppid());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;body=\"</span>).append(getBody());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;mch_id=\"</span>).append(getMch_id());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;nonce_str=\"</span>).append(getNonce_str());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;notify_url=\"</span>).append(getNotify_url());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;openid=\"</span>).append(getOpenid());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;out_trade_no=\"</span>).append(getOut_trade_no());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;spbill_create_ip=\"</span>).append(getSpbill_create_ip());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;total_fee=\"</span>).append(getTotal_fee());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;trade_type=\"</span>).append(getTrade_type());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;key=\"</span>).append(Global.getConfig(<span class=\"string\">\"payKey\"</span>));</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sign = encoder.encode(stringBuilder.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;appid&gt;&lt;![CDATA[\"</span> + appid + <span class=\"string\">\"]]&gt;&lt;/appid&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;body&gt;&lt;![CDATA[\"</span> + body + <span class=\"string\">\"]]&gt;&lt;/body&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;mch_id&gt;&lt;![CDATA[\"</span> + mch_id + <span class=\"string\">\"]]&gt;&lt;/mch_id&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;nonce_str&gt;&lt;![CDATA[\"</span> + nonce_str + <span class=\"string\">\"]]&gt;&lt;/nonce_str&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;notify_url&gt;&lt;![CDATA[\"</span> + notify_url + <span class=\"string\">\"]]&gt;&lt;/notify_url&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;openid&gt;&lt;![CDATA[\"</span> + openid + <span class=\"string\">\"]]&gt;&lt;/openid&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;out_trade_no&gt;&lt;![CDATA[\"</span> + out_trade_no + <span class=\"string\">\"]]&gt;&lt;/out_trade_no&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;spbill_create_ip&gt;&lt;![CDATA[\"</span> + spbill_create_ip + <span class=\"string\">\"]]&gt;&lt;/spbill_create_ip&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;trade_type&gt;&lt;![CDATA[\"</span> + trade_type + <span class=\"string\">\"]]&gt;&lt;/trade_type&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;total_fee&gt;&lt;![CDATA[\"</span> + total_fee + <span class=\"string\">\"]]&gt;&lt;/total_fee&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;sign&gt;&lt;![CDATA[\"</span> + sign + <span class=\"string\">\"]]&gt;&lt;/sign&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"WechatRefundModel-java_微信退款接口参数封装模型\">WechatRefundModel.java 微信退款接口参数封装模型</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> xyz.dongxiaoxia.weixin.pay;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> xyz.dongxiaoxia.common.config.Global;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.bind.annotation.XmlRootElement;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2017-01-03 20:30</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@XmlRootElement</span>(name = <span class=\"string\">\"XML\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WechatRefundModel</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String appid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String mch_id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String nonce_str;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String op_user_id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String out_refund_no;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String out_trade_no;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String refund_fee;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String sign;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String total_fee;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAppid</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> appid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAppid</span><span class=\"params\">(String appid)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.appid = appid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getMch_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMch_id</span><span class=\"params\">(String mch_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mch_id = mch_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getNonce_str</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nonce_str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNonce_str</span><span class=\"params\">(String nonce_str)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.nonce_str = nonce_str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOp_user_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> op_user_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOp_user_id</span><span class=\"params\">(String op_user_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.op_user_id = op_user_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOut_refund_no</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> out_refund_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOut_refund_no</span><span class=\"params\">(String out_refund_no)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.out_refund_no = out_refund_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getOut_trade_no</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> out_trade_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOut_trade_no</span><span class=\"params\">(String out_trade_no)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.out_trade_no = out_trade_no;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getRefund_fee</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> refund_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setRefund_fee</span><span class=\"params\">(String refund_fee)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.refund_fee = refund_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTotal_fee</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTotal_fee</span><span class=\"params\">(String total_fee)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.total_fee = total_fee;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSign</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sign;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSign</span><span class=\"params\">(String sign)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sign = sign;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">sign</span><span class=\"params\">(SignMD5 encoder)</span> </span>&#123;</span><br><span class=\"line\">        StringBuilder stringBuilder = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"appid=\"</span>).append(getAppid());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;mch_id=\"</span>).append(getMch_id());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;nonce_str=\"</span>).append(getNonce_str());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;op_user_id=\"</span>).append(getOp_user_id());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;out_refund_no=\"</span>).append(getOut_refund_no());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;out_trade_no=\"</span>).append(getOut_trade_no());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;refund_fee=\"</span>).append(getRefund_fee());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;total_fee=\"</span>).append(getTotal_fee());</span><br><span class=\"line\">        stringBuilder.append(<span class=\"string\">\"&amp;key=\"</span>).append(Global.getConfig(<span class=\"string\">\"payKey\"</span>));</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sign = encoder.encode(stringBuilder.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;xml&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;appid&gt;&lt;![CDATA[\"</span> + appid + <span class=\"string\">\"]]&gt;&lt;/appid&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;mch_id&gt;&lt;![CDATA[\"</span> + mch_id + <span class=\"string\">\"]]&gt;&lt;/mch_id&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;nonce_str&gt;&lt;![CDATA[\"</span> + nonce_str + <span class=\"string\">\"]]&gt;&lt;/nonce_str&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;op_user_id&gt;&lt;![CDATA[\"</span> + op_user_id + <span class=\"string\">\"]]&gt;&lt;/op_user_id&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;out_refund_no&gt;&lt;![CDATA[\"</span> + out_refund_no + <span class=\"string\">\"]]&gt;&lt;/out_refund_no&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;out_trade_no&gt;&lt;![CDATA[\"</span> + out_trade_no + <span class=\"string\">\"]]&gt;&lt;/out_trade_no&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;refund_fee&gt;&lt;![CDATA[\"</span> + refund_fee + <span class=\"string\">\"]]&gt;&lt;/refund_fee&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;total_fee&gt;&lt;![CDATA[\"</span> + total_fee + <span class=\"string\">\"]]&gt;&lt;/total_fee&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;sign&gt;&lt;![CDATA[\"</span> + sign + <span class=\"string\">\"]]&gt;&lt;/sign&gt;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"&lt;/xml&gt;\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"SpringMVC Controller接收List< Map>或List< Object>","date":"2015-12-23T12:58:44.000Z","_content":"google了一个下午，暂时找到两种解决办法，虽然这两种方法都不是很方便，暂时先这么用着吧！\n## 1.全部参数封装为一个对象\n### controller类\n```java\n/**\n * 批量新增用户\n *\n * 不能直接传List  < Map> 数组对象，只能用两个法子传参数，一个是把数组对象在前端变为String传到后台再解析，另外一个就是把所有参数封装成一个对象，前端JSON.stringify(params)后变为字符串传到后台，后台会自动转换为对象\n *\n * @param batchCreateVO 封装好的对象\n * @param request\n * @param session\n * @return\n */\n@RequestMapping(value = \"/batchCreate\", produces = MediaTypes.JSON_UTF_8)\n@ResponseBody\nprotected String batchCreate(\n        @RequestBody BatchCreateVO batchCreateVO,\n        HttpServletRequest request, HttpSession session) {\n        //dosomething\n\t}\n```\n\n### 封装的对象\n```java\npackage com.miracle.mby.account.vo;\n\nimport java.util.List;\nimport java.util.Map;\n\n/**\n * 移动端批量创建用户封装对象\n * <p/>\n * ticket       身份校验ticket\n * mac          身份校验mac\n * refDeptId    企业顶级部门\n * usersString  用户对象数组字符串\n *\n * @author dongxiaoxia\n * @create 2015-12-22 14:33\n */\npublic class BatchCreateVO {\n    private String ticket;\n    private String mac;\n    private String refDeptId;\n    private List<Map> users;\n\n    public String getTicket() {\n        return ticket;\n    }\n\n    public void setTicket(String ticket) {\n        this.ticket = ticket;\n    }\n\n    public String getMac() {\n        return mac;\n    }\n\n    public void setMac(String mac) {\n        this.mac = mac;\n    }\n\n    public String getRefDeptId() {\n        return refDeptId;\n    }\n\n    public void setRefDeptId(String refDeptId) {\n        this.refDeptId = refDeptId;\n    }\n\n    public List<Map> getUsers() {\n        return users;\n    }\n\n    public void setUsers(List<Map> users) {\n        this.users = users;\n    }\n}\n```\n\n### 页面请求\n```javascript\nvar users = [{\"userName\": \"测试用户1\",\"sex\":0,\"mobile\":\"15432343213\",\"email\":\"123@123.com\",\"phone\":\"123213\",\"departmentIds\":[]}];\nvar params ={\n    \"ticket\":\"test\",\n    \"mac\":\"test\",\n    \"refDeptId\":\"fa0823254d6011e58434ac220bcd3c54\",\n    \"users\":users\n};\n$.ajax({\n    type: 'POST',\n    url: 'http://localhost:8081/api/mobile/user/batchCreate',\n    data: JSON.stringify(params),\n    dataType: 'json', contentType: \"application/json; charset=utf-8\"\n});\n```\n\n\n## 2.单独转换需要的List\n单独把List< Map>或List< Object> 参数转换为json字符串，然后传到后台之后再把字符串转换会对象\n\n\n\n\n\n","source":"_posts/SpringMVC Controller接收List Map或List Object.md","raw":"title: SpringMVC Controller接收List< Map>或List< Object>\ndate: 2015-12-23 20:58:44\npermalink: spring00001\ntags:\n- Spring\ncategories:\n- Spring\n\n---\ngoogle了一个下午，暂时找到两种解决办法，虽然这两种方法都不是很方便，暂时先这么用着吧！\n## 1.全部参数封装为一个对象\n### controller类\n```java\n/**\n * 批量新增用户\n *\n * 不能直接传List  < Map> 数组对象，只能用两个法子传参数，一个是把数组对象在前端变为String传到后台再解析，另外一个就是把所有参数封装成一个对象，前端JSON.stringify(params)后变为字符串传到后台，后台会自动转换为对象\n *\n * @param batchCreateVO 封装好的对象\n * @param request\n * @param session\n * @return\n */\n@RequestMapping(value = \"/batchCreate\", produces = MediaTypes.JSON_UTF_8)\n@ResponseBody\nprotected String batchCreate(\n        @RequestBody BatchCreateVO batchCreateVO,\n        HttpServletRequest request, HttpSession session) {\n        //dosomething\n\t}\n```\n\n### 封装的对象\n```java\npackage com.miracle.mby.account.vo;\n\nimport java.util.List;\nimport java.util.Map;\n\n/**\n * 移动端批量创建用户封装对象\n * <p/>\n * ticket       身份校验ticket\n * mac          身份校验mac\n * refDeptId    企业顶级部门\n * usersString  用户对象数组字符串\n *\n * @author dongxiaoxia\n * @create 2015-12-22 14:33\n */\npublic class BatchCreateVO {\n    private String ticket;\n    private String mac;\n    private String refDeptId;\n    private List<Map> users;\n\n    public String getTicket() {\n        return ticket;\n    }\n\n    public void setTicket(String ticket) {\n        this.ticket = ticket;\n    }\n\n    public String getMac() {\n        return mac;\n    }\n\n    public void setMac(String mac) {\n        this.mac = mac;\n    }\n\n    public String getRefDeptId() {\n        return refDeptId;\n    }\n\n    public void setRefDeptId(String refDeptId) {\n        this.refDeptId = refDeptId;\n    }\n\n    public List<Map> getUsers() {\n        return users;\n    }\n\n    public void setUsers(List<Map> users) {\n        this.users = users;\n    }\n}\n```\n\n### 页面请求\n```javascript\nvar users = [{\"userName\": \"测试用户1\",\"sex\":0,\"mobile\":\"15432343213\",\"email\":\"123@123.com\",\"phone\":\"123213\",\"departmentIds\":[]}];\nvar params ={\n    \"ticket\":\"test\",\n    \"mac\":\"test\",\n    \"refDeptId\":\"fa0823254d6011e58434ac220bcd3c54\",\n    \"users\":users\n};\n$.ajax({\n    type: 'POST',\n    url: 'http://localhost:8081/api/mobile/user/batchCreate',\n    data: JSON.stringify(params),\n    dataType: 'json', contentType: \"application/json; charset=utf-8\"\n});\n```\n\n\n## 2.单独转换需要的List\n单独把List< Map>或List< Object> 参数转换为json字符串，然后传到后台之后再把字符串转换会对象\n\n\n\n\n\n","slug":"spring00001","published":1,"updated":"2016-05-10T04:46:54.277Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431olr000ouco08q7m53c4","content":"<p>google了一个下午，暂时找到两种解决办法，虽然这两种方法都不是很方便，暂时先这么用着吧！</p>\n<h2 id=\"1-全部参数封装为一个对象\">1.全部参数封装为一个对象</h2><h3 id=\"controller类\">controller类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * 批量新增用户</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * 不能直接传List  &lt; Map&gt; 数组对象，只能用两个法子传参数，一个是把数组对象在前端变为String传到后台再解析，另外一个就是把所有参数封装成一个对象，前端JSON.stringify(params)后变为字符串传到后台，后台会自动转换为对象</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * <span class=\"doctag\">@param</span> batchCreateVO 封装好的对象</span><br><span class=\"line\"> * <span class=\"doctag\">@param</span> request</span><br><span class=\"line\"> * <span class=\"doctag\">@param</span> session</span><br><span class=\"line\"> * <span class=\"doctag\">@return</span></span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"/batchCreate\"</span>, produces = MediaTypes.JSON_UTF_8)</span><br><span class=\"line\"><span class=\"meta\">@ResponseBody</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> String <span class=\"title\">batchCreate</span><span class=\"params\">(</span><br><span class=\"line\">        @RequestBody BatchCreateVO batchCreateVO,</span><br><span class=\"line\">        HttpServletRequest request, HttpSession session)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//dosomething</span></span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"封装的对象\">封装的对象</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.miracle.mby.account.vo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * 移动端批量创建用户封装对象</span><br><span class=\"line\"> * &lt;p/&gt;</span><br><span class=\"line\"> * ticket       身份校验ticket</span><br><span class=\"line\"> * mac          身份校验mac</span><br><span class=\"line\"> * refDeptId    企业顶级部门</span><br><span class=\"line\"> * usersString  用户对象数组字符串</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2015-12-22 14:33</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BatchCreateVO</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String ticket;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String mac;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String refDeptId;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Map&gt; users;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTicket</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ticket;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTicket</span><span class=\"params\">(String ticket)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.ticket = ticket;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getMac</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mac;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMac</span><span class=\"params\">(String mac)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mac = mac;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getRefDeptId</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> refDeptId;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setRefDeptId</span><span class=\"params\">(String refDeptId)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.refDeptId = refDeptId;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Map&gt; <span class=\"title\">getUsers</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> users;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUsers</span><span class=\"params\">(List&lt;Map&gt; users)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.users = users;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"页面请求\">页面请求</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> users = [&#123;<span class=\"string\">\"userName\"</span>: <span class=\"string\">\"测试用户1\"</span>,<span class=\"string\">\"sex\"</span>:<span class=\"number\">0</span>,<span class=\"string\">\"mobile\"</span>:<span class=\"string\">\"15432343213\"</span>,<span class=\"string\">\"email\"</span>:<span class=\"string\">\"123@123.com\"</span>,<span class=\"string\">\"phone\"</span>:<span class=\"string\">\"123213\"</span>,<span class=\"string\">\"departmentIds\"</span>:[]&#125;];</span><br><span class=\"line\"><span class=\"keyword\">var</span> params =&#123;</span><br><span class=\"line\">    <span class=\"string\">\"ticket\"</span>:<span class=\"string\">\"test\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"mac\"</span>:<span class=\"string\">\"test\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"refDeptId\"</span>:<span class=\"string\">\"fa0823254d6011e58434ac220bcd3c54\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"users\"</span>:users</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">$.ajax(&#123;</span><br><span class=\"line\">    type: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">    url: <span class=\"string\">'http://localhost:8081/api/mobile/user/batchCreate'</span>,</span><br><span class=\"line\">    data: <span class=\"built_in\">JSON</span>.stringify(params),</span><br><span class=\"line\">    dataType: <span class=\"string\">'json'</span>, contentType: <span class=\"string\">\"application/json; charset=utf-8\"</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"2-单独转换需要的List\">2.单独转换需要的List</h2><p>单独把List&lt; Map&gt;或List&lt; Object&gt; 参数转换为json字符串，然后传到后台之后再把字符串转换会对象</p>\n","excerpt":"","more":"<p>google了一个下午，暂时找到两种解决办法，虽然这两种方法都不是很方便，暂时先这么用着吧！</p>\n<h2 id=\"1-全部参数封装为一个对象\">1.全部参数封装为一个对象</h2><h3 id=\"controller类\">controller类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * 批量新增用户</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * 不能直接传List  &lt; Map&gt; 数组对象，只能用两个法子传参数，一个是把数组对象在前端变为String传到后台再解析，另外一个就是把所有参数封装成一个对象，前端JSON.stringify(params)后变为字符串传到后台，后台会自动转换为对象</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * <span class=\"doctag\">@param</span> batchCreateVO 封装好的对象</span><br><span class=\"line\"> * <span class=\"doctag\">@param</span> request</span><br><span class=\"line\"> * <span class=\"doctag\">@param</span> session</span><br><span class=\"line\"> * <span class=\"doctag\">@return</span></span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"/batchCreate\"</span>, produces = MediaTypes.JSON_UTF_8)</span><br><span class=\"line\"><span class=\"meta\">@ResponseBody</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> String <span class=\"title\">batchCreate</span><span class=\"params\">(</span><br><span class=\"line\">        @RequestBody BatchCreateVO batchCreateVO,</span><br><span class=\"line\">        HttpServletRequest request, HttpSession session)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//dosomething</span></span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"封装的对象\">封装的对象</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.miracle.mby.account.vo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span><br><span class=\"line\"> * 移动端批量创建用户封装对象</span><br><span class=\"line\"> * &lt;p/&gt;</span><br><span class=\"line\"> * ticket       身份校验ticket</span><br><span class=\"line\"> * mac          身份校验mac</span><br><span class=\"line\"> * refDeptId    企业顶级部门</span><br><span class=\"line\"> * usersString  用户对象数组字符串</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * <span class=\"doctag\">@author</span> dongxiaoxia</span><br><span class=\"line\"> * <span class=\"doctag\">@create</span> 2015-12-22 14:33</span><br><span class=\"line\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BatchCreateVO</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String ticket;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String mac;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String refDeptId;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Map&gt; users;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTicket</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ticket;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTicket</span><span class=\"params\">(String ticket)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.ticket = ticket;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getMac</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mac;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMac</span><span class=\"params\">(String mac)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mac = mac;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getRefDeptId</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> refDeptId;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setRefDeptId</span><span class=\"params\">(String refDeptId)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.refDeptId = refDeptId;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Map&gt; <span class=\"title\">getUsers</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> users;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUsers</span><span class=\"params\">(List&lt;Map&gt; users)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.users = users;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"页面请求\">页面请求</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> users = [&#123;<span class=\"string\">\"userName\"</span>: <span class=\"string\">\"测试用户1\"</span>,<span class=\"string\">\"sex\"</span>:<span class=\"number\">0</span>,<span class=\"string\">\"mobile\"</span>:<span class=\"string\">\"15432343213\"</span>,<span class=\"string\">\"email\"</span>:<span class=\"string\">\"123@123.com\"</span>,<span class=\"string\">\"phone\"</span>:<span class=\"string\">\"123213\"</span>,<span class=\"string\">\"departmentIds\"</span>:[]&#125;];</span><br><span class=\"line\"><span class=\"keyword\">var</span> params =&#123;</span><br><span class=\"line\">    <span class=\"string\">\"ticket\"</span>:<span class=\"string\">\"test\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"mac\"</span>:<span class=\"string\">\"test\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"refDeptId\"</span>:<span class=\"string\">\"fa0823254d6011e58434ac220bcd3c54\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"users\"</span>:users</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">$.ajax(&#123;</span><br><span class=\"line\">    type: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">    url: <span class=\"string\">'http://localhost:8081/api/mobile/user/batchCreate'</span>,</span><br><span class=\"line\">    data: <span class=\"built_in\">JSON</span>.stringify(params),</span><br><span class=\"line\">    dataType: <span class=\"string\">'json'</span>, contentType: <span class=\"string\">\"application/json; charset=utf-8\"</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"2-单独转换需要的List\">2.单独转换需要的List</h2><p>单独把List&lt; Map&gt;或List&lt; Object&gt; 参数转换为json字符串，然后传到后台之后再把字符串转换会对象</p>\n"},{"title":"倒计时功能参数传递","date":"2016-06-24T15:33:44.000Z","_content":"\n有关倒计时的一些项目，有几个参数是有必要传到前端页面的。\n\n\n\t1. 开始时间：当前时间晚于开始时间时，活动才开始。\n\t2. 结束时间：没有结束时间怎么倒数。\n\t3. 当前时间：由于各个浏览器等客户端的当前时间不是一致的，与后台的当前时间有出入。客户端的当前时间是根据客户端时间设置的，所以必须由后台传过去。\n\n\n之前开发一个倒计时功能的时候，才跳过这个小小的坑。为什么电脑上的倒计时与系统一致，ios要快上几秒，不同ios手机的时间又是一致的，而安卓却要慢上1分多钟。还以为是前段不同操作系统的兼容是不一样的，原来是想歪了。电脑上的倒计时与系统一致是因为系统就在这台电脑上。\n","source":"_posts/倒计时功能参数传递.md","raw":"title: 倒计时功能参数传递\ndate: 2016-06-24 23:33:44\npermalink: 倒计时功能参数传递\ntags:\n- tips\ncategories:\n- tips\n\n---\n\n有关倒计时的一些项目，有几个参数是有必要传到前端页面的。\n\n\n\t1. 开始时间：当前时间晚于开始时间时，活动才开始。\n\t2. 结束时间：没有结束时间怎么倒数。\n\t3. 当前时间：由于各个浏览器等客户端的当前时间不是一致的，与后台的当前时间有出入。客户端的当前时间是根据客户端时间设置的，所以必须由后台传过去。\n\n\n之前开发一个倒计时功能的时候，才跳过这个小小的坑。为什么电脑上的倒计时与系统一致，ios要快上几秒，不同ios手机的时间又是一致的，而安卓却要慢上1分多钟。还以为是前段不同操作系统的兼容是不一样的，原来是想歪了。电脑上的倒计时与系统一致是因为系统就在这台电脑上。\n","slug":"倒计时功能参数传递","published":1,"updated":"2016-06-24T15:36:57.749Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431olt000suco004vh9sq3","content":"<p>有关倒计时的一些项目，有几个参数是有必要传到前端页面的。</p>\n<pre><code><span class=\"number\">1.</span> 开始时间：当前时间晚于开始时间时，活动才开始。\n<span class=\"number\">2.</span> 结束时间：没有结束时间怎么倒数。\n<span class=\"number\">3.</span> 当前时间：由于各个浏览器等客户端的当前时间不是一致的，与后台的当前时间有出入。客户端的当前时间是根据客户端时间设置的，所以必须由后台传过去。\n</code></pre><p>之前开发一个倒计时功能的时候，才跳过这个小小的坑。为什么电脑上的倒计时与系统一致，ios要快上几秒，不同ios手机的时间又是一致的，而安卓却要慢上1分多钟。还以为是前段不同操作系统的兼容是不一样的，原来是想歪了。电脑上的倒计时与系统一致是因为系统就在这台电脑上。</p>\n","excerpt":"","more":"<p>有关倒计时的一些项目，有几个参数是有必要传到前端页面的。</p>\n<pre><code><span class=\"number\">1.</span> 开始时间：当前时间晚于开始时间时，活动才开始。\n<span class=\"number\">2.</span> 结束时间：没有结束时间怎么倒数。\n<span class=\"number\">3.</span> 当前时间：由于各个浏览器等客户端的当前时间不是一致的，与后台的当前时间有出入。客户端的当前时间是根据客户端时间设置的，所以必须由后台传过去。\n</code></pre><p>之前开发一个倒计时功能的时候，才跳过这个小小的坑。为什么电脑上的倒计时与系统一致，ios要快上几秒，不同ios手机的时间又是一致的，而安卓却要慢上1分多钟。还以为是前段不同操作系统的兼容是不一样的，原来是想歪了。电脑上的倒计时与系统一致是因为系统就在这台电脑上。</p>\n"},{"title":"利用GitHub搭建个人maven仓库","date":"2016-10-18T02:56:30.000Z","_content":"\n## 一.deploy项目到本地\n\n1.在pom.xml中配置distribuManage\n```xml\n<distributionManagement>\n    <repository>\n        <id>file-repository</id>\n        <url>file://D:\\GitHub\\maven-repo</url>\n        <!--SNAPSHOT 名称下用 Maven3 uniqueVersion不起作用 ，必须用Maven2-->\n        <uniqueVersion>false</uniqueVersion>\n    </repository>\n</distributionManagement>\n```\n2.执行命令 `mvn deploy`\n## 二.  提交项目到GitHub\n```bash\ngit init\ngit add -A\ngit commit -m \"first commit\"\ngit remote add origin https://github.com/dongxiaoxia/maven-repo.git\ngit push -u origin master\n```\n## 三.在其他项目中引入该依赖\n```xml\n    <repositories>\n        <repository>\n            <id>dongxiaoxia-repository</id>\n            <name>东小侠的仓库</name>\n            <url>https://raw.githubusercontent.com/dongxiaoxia/maven-repo/master</url>\n        </repository>\n    </repositories>\n\n    <dependencies>\n        <dependency>\n            <groupId>xyz.dongxiaoxia.commons</groupId>\n            <artifactId>utils</artifactId>\n            <version>1.0-SNAPSHOT</version>\n        </dependency>\n    </dependencies>\n```\n## 注意问题\n1. 如果项目为SNAPSHOT快照版本，deploy时生成的jar包名称会带上时间戳，`<uniqueVersion>false</uniqueVersion>` 没有效果，解决方法两种，一是去掉SNAPSHOT名称后缀，二是把maven版本maven3改为maven2，并且加上`<uniqueVersion>false</uniqueVersion>` 。\n<br/>\n2. 其他项目引用时可能会找不到该依赖，可以看一下maven 的setting配置文件，在我的setting文件中，配置了如下一段配置：\n```\n     <mirror>\n        <id>nexus-osc</id>\n        <mirrorOf>*</mirrorOf>\n        <name>Nexus osc</name>\n        <url>http://repo1.maven.org/maven2/</url>\n     </mirror>\n```\n这样配置的话就算pom.xml文件配置了正确的repository，也没有效果，因为所有的依赖都被拦截掉了。\n可以配置如下:\n```\n    <mirror>\n        <id>nexus-osc</id>\n        <mirrorOf>*,!dongxiaoxia-repository</mirrorOf>\n        <name>Nexus osc</name>\n        <url>http://repo1.maven.org/maven2/</url>\n    </mirror>\n```\n\n>三步下来，成功利用GitHub搭建个人maven仓库并且成功引用到项目中。GitHub中的maven仓库例子请见 [maven-repo](https://github.com/dongxiaoxia/maven-repo) 。\n","source":"_posts/利用GitHub搭建个人maven仓库.md","raw":"title: 利用GitHub搭建个人maven仓库\ndate: 2016-10-18 10:56:30\npermalink: github-maven-repository\ntags:\n- github maven \ncategories:\n- maven\n\n---\n\n## 一.deploy项目到本地\n\n1.在pom.xml中配置distribuManage\n```xml\n<distributionManagement>\n    <repository>\n        <id>file-repository</id>\n        <url>file://D:\\GitHub\\maven-repo</url>\n        <!--SNAPSHOT 名称下用 Maven3 uniqueVersion不起作用 ，必须用Maven2-->\n        <uniqueVersion>false</uniqueVersion>\n    </repository>\n</distributionManagement>\n```\n2.执行命令 `mvn deploy`\n## 二.  提交项目到GitHub\n```bash\ngit init\ngit add -A\ngit commit -m \"first commit\"\ngit remote add origin https://github.com/dongxiaoxia/maven-repo.git\ngit push -u origin master\n```\n## 三.在其他项目中引入该依赖\n```xml\n    <repositories>\n        <repository>\n            <id>dongxiaoxia-repository</id>\n            <name>东小侠的仓库</name>\n            <url>https://raw.githubusercontent.com/dongxiaoxia/maven-repo/master</url>\n        </repository>\n    </repositories>\n\n    <dependencies>\n        <dependency>\n            <groupId>xyz.dongxiaoxia.commons</groupId>\n            <artifactId>utils</artifactId>\n            <version>1.0-SNAPSHOT</version>\n        </dependency>\n    </dependencies>\n```\n## 注意问题\n1. 如果项目为SNAPSHOT快照版本，deploy时生成的jar包名称会带上时间戳，`<uniqueVersion>false</uniqueVersion>` 没有效果，解决方法两种，一是去掉SNAPSHOT名称后缀，二是把maven版本maven3改为maven2，并且加上`<uniqueVersion>false</uniqueVersion>` 。\n<br/>\n2. 其他项目引用时可能会找不到该依赖，可以看一下maven 的setting配置文件，在我的setting文件中，配置了如下一段配置：\n```\n     <mirror>\n        <id>nexus-osc</id>\n        <mirrorOf>*</mirrorOf>\n        <name>Nexus osc</name>\n        <url>http://repo1.maven.org/maven2/</url>\n     </mirror>\n```\n这样配置的话就算pom.xml文件配置了正确的repository，也没有效果，因为所有的依赖都被拦截掉了。\n可以配置如下:\n```\n    <mirror>\n        <id>nexus-osc</id>\n        <mirrorOf>*,!dongxiaoxia-repository</mirrorOf>\n        <name>Nexus osc</name>\n        <url>http://repo1.maven.org/maven2/</url>\n    </mirror>\n```\n\n>三步下来，成功利用GitHub搭建个人maven仓库并且成功引用到项目中。GitHub中的maven仓库例子请见 [maven-repo](https://github.com/dongxiaoxia/maven-repo) 。\n","slug":"github-maven-repository","published":1,"updated":"2016-10-18T03:04:03.727Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431olz000vuco0zgib6eb6","content":"<h2 id=\"一-deploy项目到本地\">一.deploy项目到本地</h2><p>1.在pom.xml中配置distribuManage<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>file-repository<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>file://D:\\GitHub\\maven-repo<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--SNAPSHOT 名称下用 Maven3 uniqueVersion不起作用 ，必须用Maven2--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">uniqueVersion</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">uniqueVersion</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>2.执行命令 <code>mvn deploy</code></p>\n<h2 id=\"二-_提交项目到GitHub\">二.  提交项目到GitHub</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git commit -m <span class=\"string\">\"first commit\"</span></span><br><span class=\"line\">git remote add origin https://github.com/dongxiaoxia/maven-repo.git</span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure>\n<h2 id=\"三-在其他项目中引入该依赖\">三.在其他项目中引入该依赖</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>dongxiaoxia-repository<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>东小侠的仓库<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://raw.githubusercontent.com/dongxiaoxia/maven-repo/master<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>xyz.dongxiaoxia.commons<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>utils<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"注意问题\">注意问题</h2><ol>\n<li>如果项目为SNAPSHOT快照版本，deploy时生成的jar包名称会带上时间戳，<code>&lt;uniqueVersion&gt;false&lt;/uniqueVersion&gt;</code> 没有效果，解决方法两种，一是去掉SNAPSHOT名称后缀，二是把maven版本maven3改为maven2，并且加上<code>&lt;uniqueVersion&gt;false&lt;/uniqueVersion&gt;</code> 。<br><br></li>\n<li>其他项目引用时可能会找不到该依赖，可以看一下maven 的setting配置文件，在我的setting文件中，配置了如下一段配置：<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;mirror&gt;</span><br><span class=\"line\">   &lt;id&gt;nexus-osc&lt;/id&gt;</span><br><span class=\"line\">   &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;</span><br><span class=\"line\">   &lt;name&gt;Nexus osc&lt;/name&gt;</span><br><span class=\"line\">   &lt;url&gt;http://repo1.maven.org/maven2/&lt;/url&gt;</span><br><span class=\"line\">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>这样配置的话就算pom.xml文件配置了正确的repository，也没有效果，因为所有的依赖都被拦截掉了。<br>可以配置如下:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;mirror&gt;</span><br><span class=\"line\">    &lt;id&gt;nexus-osc&lt;/id&gt;</span><br><span class=\"line\">    &lt;mirrorOf&gt;*,!dongxiaoxia-repository&lt;/mirrorOf&gt;</span><br><span class=\"line\">    &lt;name&gt;Nexus osc&lt;/name&gt;</span><br><span class=\"line\">    &lt;url&gt;http://repo1.maven.org/maven2/&lt;/url&gt;</span><br><span class=\"line\">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>三步下来，成功利用GitHub搭建个人maven仓库并且成功引用到项目中。GitHub中的maven仓库例子请见 <a href=\"https://github.com/dongxiaoxia/maven-repo\" target=\"_blank\" rel=\"external\">maven-repo</a> 。</p>\n</blockquote>\n","excerpt":"","more":"<h2 id=\"一-deploy项目到本地\">一.deploy项目到本地</h2><p>1.在pom.xml中配置distribuManage<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>file-repository<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>file://D:\\GitHub\\maven-repo<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--SNAPSHOT 名称下用 Maven3 uniqueVersion不起作用 ，必须用Maven2--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">uniqueVersion</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">uniqueVersion</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>2.执行命令 <code>mvn deploy</code></p>\n<h2 id=\"二-_提交项目到GitHub\">二.  提交项目到GitHub</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git commit -m <span class=\"string\">\"first commit\"</span></span><br><span class=\"line\">git remote add origin https://github.com/dongxiaoxia/maven-repo.git</span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure>\n<h2 id=\"三-在其他项目中引入该依赖\">三.在其他项目中引入该依赖</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>dongxiaoxia-repository<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>东小侠的仓库<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://raw.githubusercontent.com/dongxiaoxia/maven-repo/master<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>xyz.dongxiaoxia.commons<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>utils<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"注意问题\">注意问题</h2><ol>\n<li>如果项目为SNAPSHOT快照版本，deploy时生成的jar包名称会带上时间戳，<code>&lt;uniqueVersion&gt;false&lt;/uniqueVersion&gt;</code> 没有效果，解决方法两种，一是去掉SNAPSHOT名称后缀，二是把maven版本maven3改为maven2，并且加上<code>&lt;uniqueVersion&gt;false&lt;/uniqueVersion&gt;</code> 。<br><br/></li>\n<li>其他项目引用时可能会找不到该依赖，可以看一下maven 的setting配置文件，在我的setting文件中，配置了如下一段配置：<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;mirror&gt;</span><br><span class=\"line\">   &lt;id&gt;nexus-osc&lt;/id&gt;</span><br><span class=\"line\">   &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;</span><br><span class=\"line\">   &lt;name&gt;Nexus osc&lt;/name&gt;</span><br><span class=\"line\">   &lt;url&gt;http://repo1.maven.org/maven2/&lt;/url&gt;</span><br><span class=\"line\">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>这样配置的话就算pom.xml文件配置了正确的repository，也没有效果，因为所有的依赖都被拦截掉了。<br>可以配置如下:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;mirror&gt;</span><br><span class=\"line\">    &lt;id&gt;nexus-osc&lt;/id&gt;</span><br><span class=\"line\">    &lt;mirrorOf&gt;*,!dongxiaoxia-repository&lt;/mirrorOf&gt;</span><br><span class=\"line\">    &lt;name&gt;Nexus osc&lt;/name&gt;</span><br><span class=\"line\">    &lt;url&gt;http://repo1.maven.org/maven2/&lt;/url&gt;</span><br><span class=\"line\">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>三步下来，成功利用GitHub搭建个人maven仓库并且成功引用到项目中。GitHub中的maven仓库例子请见 <a href=\"https://github.com/dongxiaoxia/maven-repo\">maven-repo</a> 。</p>\n</blockquote>\n"},{"title":"在线工具推荐","date":"2016-05-26T08:42:44.000Z","_content":"\n\n> 能在云端遨游就不要呆在线下，一直是我的一个习惯。下面记录了我觉得很好用的也很有帮助的一些在线工具。    —— [东小侠](http://www.dongxiaoxia.xyz)\n\n- **[ProcessOn](https://www.processon.com/)** ：ProcessOn是一个在线协作绘图平台，为用户提供最强大、易用的作图工具！支持在线创作流程图、BPMN、UML图、UI界面原型设计、iOS界面原型设计等。同时依托于互联网实现了人与人之间的实时协作和共享。\n\n- **[马克飞象](https://maxiang.io/)** :马克飞象是一款专为印象笔记（Evernote）打造的Markdown编辑器，通过精心的设计与技术实现，配合印象笔记强大的存储和同步功能，带来前所未有的书写体验。\n- **[MaHua](http://mahua.jser.me/)** :另外一款在线编辑markdown文档的编辑器。\n- **[谷歌翻译](https://translate.google.cn/)** :能不用百度就不用百度。\n- **[MVN REPOSITORY](http://mvnrepository.com/)** :Maven在线仓库。\n- **[开源中国](http://tool.oschina.net/)** :开源中国社区在线工具。\n- **[tool.lu](http://tool.lu/)** :在线工具 - 程序员的工具箱。\n- **[coolaf.com](http://coolaf.com/)** :在线工具。\n- **[http://grepcode.com](http://grepcode.com)** :源代码搜索。\n- **[https://searchcode.com](https://searchcode.com/)** :源代码搜索。\n- **[http://json.cn](http://json.cn/)** :json解析。\n- **[diffchecker](https://www.diffchecker.com/)** :在线对比文件的不同部分。\n- **[AutoJcode](http://www.autojcode.com/)** :Java Web在线代码生成工具，快速、高效的实现模块的增删改查。\n- **[http://tool.lu/sql](http://tool.lu/sql/ )** :SQL美化工具。\n- **[glot.io](https://glot.io/)** :在线代码运行。\n- **[http://tool.lu/coderunner/](http://tool.lu/coderunner/)** :在线代码运行。\n- **[http://tool.chinaz.com/regex](http://tool.chinaz.com/regex)** :正则测试。\n- **[http://tool.chinaz.com/tools/regexgenerate](http://tool.chinaz.com/tools/regexgenerate)** :正则生成代码。\n- **[http://tool.chinaz.com/Tools/unixtime.aspx](http://tool.chinaz.com/Tools/unixtime.aspx)** :时间戳转换。\n- **[http://tool.chinaz.com/tools/textencrypt.aspx](http://tool.chinaz.com/tools/textencrypt.aspx)** :加密解密。\n- **[http://tool.chinaz.com/Tools/OnlineColor.aspx](http://tool.chinaz.com/Tools/OnlineColor.aspx)** :在线调色板。\n- **[http://tool.oschina.net/commons](http://tool.oschina.net/commons)** :常用对照表。\n\n\n> 这里列举出了一些常用的工具，其实有一些工具链接是主页，进去后可以自己挖掘自己想要的在线工具，这里就不一一列举出来了@_@!\n> 喜欢的话不妨在看看我推荐的一些软件，打破[次元壁](http://www.dongxiaoxia.xyz/2016/05/20/soft-1/)\n\n\n","source":"_posts/在线工具推荐.md","raw":"title: 在线工具推荐\ndate: 2016-05-26 16:42:44\npermalink: online-soft\ntags:\n- 软件\ncategories:\n- 软件\n\n---\n\n\n> 能在云端遨游就不要呆在线下，一直是我的一个习惯。下面记录了我觉得很好用的也很有帮助的一些在线工具。    —— [东小侠](http://www.dongxiaoxia.xyz)\n\n- **[ProcessOn](https://www.processon.com/)** ：ProcessOn是一个在线协作绘图平台，为用户提供最强大、易用的作图工具！支持在线创作流程图、BPMN、UML图、UI界面原型设计、iOS界面原型设计等。同时依托于互联网实现了人与人之间的实时协作和共享。\n\n- **[马克飞象](https://maxiang.io/)** :马克飞象是一款专为印象笔记（Evernote）打造的Markdown编辑器，通过精心的设计与技术实现，配合印象笔记强大的存储和同步功能，带来前所未有的书写体验。\n- **[MaHua](http://mahua.jser.me/)** :另外一款在线编辑markdown文档的编辑器。\n- **[谷歌翻译](https://translate.google.cn/)** :能不用百度就不用百度。\n- **[MVN REPOSITORY](http://mvnrepository.com/)** :Maven在线仓库。\n- **[开源中国](http://tool.oschina.net/)** :开源中国社区在线工具。\n- **[tool.lu](http://tool.lu/)** :在线工具 - 程序员的工具箱。\n- **[coolaf.com](http://coolaf.com/)** :在线工具。\n- **[http://grepcode.com](http://grepcode.com)** :源代码搜索。\n- **[https://searchcode.com](https://searchcode.com/)** :源代码搜索。\n- **[http://json.cn](http://json.cn/)** :json解析。\n- **[diffchecker](https://www.diffchecker.com/)** :在线对比文件的不同部分。\n- **[AutoJcode](http://www.autojcode.com/)** :Java Web在线代码生成工具，快速、高效的实现模块的增删改查。\n- **[http://tool.lu/sql](http://tool.lu/sql/ )** :SQL美化工具。\n- **[glot.io](https://glot.io/)** :在线代码运行。\n- **[http://tool.lu/coderunner/](http://tool.lu/coderunner/)** :在线代码运行。\n- **[http://tool.chinaz.com/regex](http://tool.chinaz.com/regex)** :正则测试。\n- **[http://tool.chinaz.com/tools/regexgenerate](http://tool.chinaz.com/tools/regexgenerate)** :正则生成代码。\n- **[http://tool.chinaz.com/Tools/unixtime.aspx](http://tool.chinaz.com/Tools/unixtime.aspx)** :时间戳转换。\n- **[http://tool.chinaz.com/tools/textencrypt.aspx](http://tool.chinaz.com/tools/textencrypt.aspx)** :加密解密。\n- **[http://tool.chinaz.com/Tools/OnlineColor.aspx](http://tool.chinaz.com/Tools/OnlineColor.aspx)** :在线调色板。\n- **[http://tool.oschina.net/commons](http://tool.oschina.net/commons)** :常用对照表。\n\n\n> 这里列举出了一些常用的工具，其实有一些工具链接是主页，进去后可以自己挖掘自己想要的在线工具，这里就不一一列举出来了@_@!\n> 喜欢的话不妨在看看我推荐的一些软件，打破[次元壁](http://www.dongxiaoxia.xyz/2016/05/20/soft-1/)\n\n\n","slug":"online-soft","published":1,"updated":"2016-05-26T08:42:27.648Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431om2000zuco0pbmntgup","content":"<blockquote>\n<p>能在云端遨游就不要呆在线下，一直是我的一个习惯。下面记录了我觉得很好用的也很有帮助的一些在线工具。    —— <a href=\"http://www.dongxiaoxia.xyz\">东小侠</a></p>\n</blockquote>\n<ul>\n<li><p><strong><a href=\"https://www.processon.com/\" target=\"_blank\" rel=\"external\">ProcessOn</a></strong> ：ProcessOn是一个在线协作绘图平台，为用户提供最强大、易用的作图工具！支持在线创作流程图、BPMN、UML图、UI界面原型设计、iOS界面原型设计等。同时依托于互联网实现了人与人之间的实时协作和共享。</p>\n</li>\n<li><p><strong><a href=\"https://maxiang.io/\" target=\"_blank\" rel=\"external\">马克飞象</a></strong> :马克飞象是一款专为印象笔记（Evernote）打造的Markdown编辑器，通过精心的设计与技术实现，配合印象笔记强大的存储和同步功能，带来前所未有的书写体验。</p>\n</li>\n<li><strong><a href=\"http://mahua.jser.me/\" target=\"_blank\" rel=\"external\">MaHua</a></strong> :另外一款在线编辑markdown文档的编辑器。</li>\n<li><strong><a href=\"https://translate.google.cn/\" target=\"_blank\" rel=\"external\">谷歌翻译</a></strong> :能不用百度就不用百度。</li>\n<li><strong><a href=\"http://mvnrepository.com/\" target=\"_blank\" rel=\"external\">MVN REPOSITORY</a></strong> :Maven在线仓库。</li>\n<li><strong><a href=\"http://tool.oschina.net/\" target=\"_blank\" rel=\"external\">开源中国</a></strong> :开源中国社区在线工具。</li>\n<li><strong><a href=\"http://tool.lu/\" target=\"_blank\" rel=\"external\">tool.lu</a></strong> :在线工具 - 程序员的工具箱。</li>\n<li><strong><a href=\"http://coolaf.com/\" target=\"_blank\" rel=\"external\">coolaf.com</a></strong> :在线工具。</li>\n<li><strong><a href=\"http://grepcode.com\" target=\"_blank\" rel=\"external\">http://grepcode.com</a></strong> :源代码搜索。</li>\n<li><strong><a href=\"https://searchcode.com/\" target=\"_blank\" rel=\"external\">https://searchcode.com</a></strong> :源代码搜索。</li>\n<li><strong><a href=\"http://json.cn/\" target=\"_blank\" rel=\"external\">http://json.cn</a></strong> :json解析。</li>\n<li><strong><a href=\"https://www.diffchecker.com/\" target=\"_blank\" rel=\"external\">diffchecker</a></strong> :在线对比文件的不同部分。</li>\n<li><strong><a href=\"http://www.autojcode.com/\" target=\"_blank\" rel=\"external\">AutoJcode</a></strong> :Java Web在线代码生成工具，快速、高效的实现模块的增删改查。</li>\n<li><strong><a href=\"http://tool.lu/sql/\" target=\"_blank\" rel=\"external\">http://tool.lu/sql</a></strong> :SQL美化工具。</li>\n<li><strong><a href=\"https://glot.io/\" target=\"_blank\" rel=\"external\">glot.io</a></strong> :在线代码运行。</li>\n<li><strong><a href=\"http://tool.lu/coderunner/\" target=\"_blank\" rel=\"external\">http://tool.lu/coderunner/</a></strong> :在线代码运行。</li>\n<li><strong><a href=\"http://tool.chinaz.com/regex\" target=\"_blank\" rel=\"external\">http://tool.chinaz.com/regex</a></strong> :正则测试。</li>\n<li><strong><a href=\"http://tool.chinaz.com/tools/regexgenerate\" target=\"_blank\" rel=\"external\">http://tool.chinaz.com/tools/regexgenerate</a></strong> :正则生成代码。</li>\n<li><strong><a href=\"http://tool.chinaz.com/Tools/unixtime.aspx\" target=\"_blank\" rel=\"external\">http://tool.chinaz.com/Tools/unixtime.aspx</a></strong> :时间戳转换。</li>\n<li><strong><a href=\"http://tool.chinaz.com/tools/textencrypt.aspx\" target=\"_blank\" rel=\"external\">http://tool.chinaz.com/tools/textencrypt.aspx</a></strong> :加密解密。</li>\n<li><strong><a href=\"http://tool.chinaz.com/Tools/OnlineColor.aspx\" target=\"_blank\" rel=\"external\">http://tool.chinaz.com/Tools/OnlineColor.aspx</a></strong> :在线调色板。</li>\n<li><strong><a href=\"http://tool.oschina.net/commons\" target=\"_blank\" rel=\"external\">http://tool.oschina.net/commons</a></strong> :常用对照表。</li>\n</ul>\n<blockquote>\n<p>这里列举出了一些常用的工具，其实有一些工具链接是主页，进去后可以自己挖掘自己想要的在线工具，这里就不一一列举出来了@_@!<br>喜欢的话不妨在看看我推荐的一些软件，打破<a href=\"http://www.dongxiaoxia.xyz/2016/05/20/soft-1/\">次元壁</a></p>\n</blockquote>\n","excerpt":"","more":"<blockquote>\n<p>能在云端遨游就不要呆在线下，一直是我的一个习惯。下面记录了我觉得很好用的也很有帮助的一些在线工具。    —— <a href=\"http://www.dongxiaoxia.xyz\">东小侠</a></p>\n</blockquote>\n<ul>\n<li><p><strong><a href=\"https://www.processon.com/\">ProcessOn</a></strong> ：ProcessOn是一个在线协作绘图平台，为用户提供最强大、易用的作图工具！支持在线创作流程图、BPMN、UML图、UI界面原型设计、iOS界面原型设计等。同时依托于互联网实现了人与人之间的实时协作和共享。</p>\n</li>\n<li><p><strong><a href=\"https://maxiang.io/\">马克飞象</a></strong> :马克飞象是一款专为印象笔记（Evernote）打造的Markdown编辑器，通过精心的设计与技术实现，配合印象笔记强大的存储和同步功能，带来前所未有的书写体验。</p>\n</li>\n<li><strong><a href=\"http://mahua.jser.me/\">MaHua</a></strong> :另外一款在线编辑markdown文档的编辑器。</li>\n<li><strong><a href=\"https://translate.google.cn/\">谷歌翻译</a></strong> :能不用百度就不用百度。</li>\n<li><strong><a href=\"http://mvnrepository.com/\">MVN REPOSITORY</a></strong> :Maven在线仓库。</li>\n<li><strong><a href=\"http://tool.oschina.net/\">开源中国</a></strong> :开源中国社区在线工具。</li>\n<li><strong><a href=\"http://tool.lu/\">tool.lu</a></strong> :在线工具 - 程序员的工具箱。</li>\n<li><strong><a href=\"http://coolaf.com/\">coolaf.com</a></strong> :在线工具。</li>\n<li><strong><a href=\"http://grepcode.com\">http://grepcode.com</a></strong> :源代码搜索。</li>\n<li><strong><a href=\"https://searchcode.com/\">https://searchcode.com</a></strong> :源代码搜索。</li>\n<li><strong><a href=\"http://json.cn/\">http://json.cn</a></strong> :json解析。</li>\n<li><strong><a href=\"https://www.diffchecker.com/\">diffchecker</a></strong> :在线对比文件的不同部分。</li>\n<li><strong><a href=\"http://www.autojcode.com/\">AutoJcode</a></strong> :Java Web在线代码生成工具，快速、高效的实现模块的增删改查。</li>\n<li><strong><a href=\"http://tool.lu/sql/\">http://tool.lu/sql</a></strong> :SQL美化工具。</li>\n<li><strong><a href=\"https://glot.io/\">glot.io</a></strong> :在线代码运行。</li>\n<li><strong><a href=\"http://tool.lu/coderunner/\">http://tool.lu/coderunner/</a></strong> :在线代码运行。</li>\n<li><strong><a href=\"http://tool.chinaz.com/regex\">http://tool.chinaz.com/regex</a></strong> :正则测试。</li>\n<li><strong><a href=\"http://tool.chinaz.com/tools/regexgenerate\">http://tool.chinaz.com/tools/regexgenerate</a></strong> :正则生成代码。</li>\n<li><strong><a href=\"http://tool.chinaz.com/Tools/unixtime.aspx\">http://tool.chinaz.com/Tools/unixtime.aspx</a></strong> :时间戳转换。</li>\n<li><strong><a href=\"http://tool.chinaz.com/tools/textencrypt.aspx\">http://tool.chinaz.com/tools/textencrypt.aspx</a></strong> :加密解密。</li>\n<li><strong><a href=\"http://tool.chinaz.com/Tools/OnlineColor.aspx\">http://tool.chinaz.com/Tools/OnlineColor.aspx</a></strong> :在线调色板。</li>\n<li><strong><a href=\"http://tool.oschina.net/commons\">http://tool.oschina.net/commons</a></strong> :常用对照表。</li>\n</ul>\n<blockquote>\n<p>这里列举出了一些常用的工具，其实有一些工具链接是主页，进去后可以自己挖掘自己想要的在线工具，这里就不一一列举出来了@_@!<br>喜欢的话不妨在看看我推荐的一些软件，打破<a href=\"http://www.dongxiaoxia.xyz/2016/05/20/soft-1/\">次元壁</a></p>\n</blockquote>\n"},{"title":"如何成为一个牛掰的Java大神","date":"2015-12-24T14:17:44.000Z","_content":"\n>来自：HollisChuang's Blog\n\n>链接：http://www.hollischuang.com/archives/489\n\n# 一、基础篇\n\n## 1.1 JVM\n\n### 1.1.1. Java内存模型，Java内存管理，Java堆和栈，垃圾回收\n>http://www.jcp.org/en/jsr/detail?id=133\n\n>http://ifeve.com/jmm-faq/\n\n### 1.1.2. 了解JVM各种参数及调优\n\n### 1.1.3. 学习使用Java工具\n>jps, jstack, jmap, jconsole, jinfo, jhat, javap, …\n\n>http://kenai.com/projects/btrace\n\n>http://www.crashub.org/\n\n>https://github.com/taobao/TProfiler\n\n>https://github.com/CSUG/HouseMD\n\n>http://wiki.cyclopsgroup.org/jmxterm\n\n>https://github.com/jlusdy/TBJMap\n\n### 1.1.4. 学习Java诊断工具\n>http://www.eclipse.org/mat/\n\n>http://visualvm.java.net/oqlhelp.html\n\n### 1.1.5. 自己编写各种outofmemory，stackoverflow程序\n>HeapOutOfMemory\n\n>Young OutOfMemory\n\n>MethodArea OutOfMemory\n\n>ConstantPool OutOfMemory\n\n>DirectMemory OutOfMemory\n\n>Stack OutOfMemory\n\n>Stack OverFlow\n\n### 1.1.6. 使用工具尝试解决以下问题，并写下总结\n>当一个Java程序响应很慢时如何查找问题\n\n>当一个Java程序频繁FullGC时如何解决问题，如何查看垃圾回收日志\n\n>当一个Java应用发生OutOfMemory时该如何解决，年轻代、年老代、永久代解决办法不同，导致原因也不同\n\n### 1.1.7. 参考资料\n>http://docs.oracle.com/javase/specs/jvms/se7/html/\n\n>http://www.cs.umd.edu/~pugh/java/memoryModel/\n\n>http://gee.cs.oswego.edu/dl/jmm/cookbook.html\n\n## 1.2. Java基础知识\n\n### 1.2.1. 阅读源代码\n>java.lang.String\n\n>java.lang.Integer\n\n>java.lang.Long\n\n>java.lang.Enum\n\n>java.math.BigDecimal\n\n>java.lang.ThreadLocal\n\n>java.lang.ClassLoader & java.net.URLClassLoader\n\n>java.util.ArrayList & java.util.LinkedList\n\n>java.util.HashMap & java.util.LinkedHashMap & java.util.TreeMap\n\n>java.util.HashSet & java.util.LinkedHashSet & java.util.TreeSet\n\n### 1.2.2. 熟悉Java中各种变量类型\n### 1.2.3. 熟悉Java String的使用，熟悉String的各种函数\n### 1.2.4. 熟悉Java中各种关键字\n### 1.2.5. 学会使用List，Map，Stack，Queue，Set\n>上述数据结构的遍历\n\n>上述数据结构的使用场景\n\n>Java实现对Array/List排序\n\n>java.uti.Arrays.sort()\n\n>java.util.Collections.sort()\n\n>Java实现对List去重\n\n>Java实现对List去重，并且需要保留数据原始的出现顺序\n\n>Java实现最近最少使用cache，用LinkedHashMap\n\n### 1.2.6. Java IO&Java NIO，并学会使用\n>java.io.*\n\n>java.nio.*\n\n>nio和reactor设计模式\n\n>文件编码，字符集\n\n### 1.2.7. Java反射与javassist\n>反射与工厂模式\n\n>java.lang.reflect.*\n\n### 1.2.8. Java序列化\n>java.io. Serializable\n\n>什么是序列化，为什么序列化\n\n>序列化与单例模式\n\n>google序列化protobuf\n\n### 1.2.9. 虚引用，弱引用，软引用\n>java.lang.ref.*\n\n>实验这些引用的回收\n\n### 1.2.10. 熟悉Java系统属性\n>java.util.Properties\n\n### 1.2.11. 熟悉Annotation用法\n>java.lang.annotation.*\n\n### 1.2.12. JMS\n>javax.jms.*\n\n### 1.2.13. JMX\n>java.lang.management.*\n\n>javax.management.*\n\n### 1.2.14. 泛型和继承，泛型和擦除\n### 1.2.15. 自动拆箱装箱与字节码\n### 1.2.16. 实现Callback\n### 1.2.17. java.lang.Void类使用\n### 1.2.18. Java Agent，premain函数\n>java.lang.instrument\n\n### 1.2.19. 单元测试\n>Junit，http://junit.org/\n\n>Jmockit，https://code.google.com/p/jmockit/\n\n>djUnit，http://works.dgic.co.jp/djunit/\n\n### 1.2.20. Java实现通过正则表达式提取一段文本中的电子邮件，并将@替换为#输出\n>java.lang.util.regex.*\n\n### 1.2.21. 学习使用常用的Java工具库\n>commons.lang, commons.*…\n\n>guava-libraries\n\n>netty\n\n### 1.2.22. 什么是API&SPI\n>http://en.wikipedia.org/wiki/Application_programming_interface\n\n>http://en.wikipedia.org/wiki/Service_provider_interface\n\n### 1.2.23. 参考资料\n>JDK src.zip 源代码\n\n>http://openjdk.java.net/\n\n>http://commons.apache.org/\n\n>https://code.google.com/p/guava-libraries/\n\n>http://netty.io/\n\n>http://stackoverflow.com/questions/2954372/difference-between-spi-and-api\n\n>http://stackoverflow.com/questions/11404230/how-to-implement-the-api-spi-pattern-in-java\n\n## 1.3. Java并发编程\n\n### 1.3.1. 阅读源代码，并学会使用\n\n>java.lang.Thread\n\n>java.lang.Runnable\n\n>java.util.concurrent.Callable\n\n>java.util.concurrent.locks.ReentrantLock\n\n>java.util.concurrent.locks.ReentrantReadWriteLock\n\n>java.util.concurrent.atomic.Atomic*\n\n>java.util.concurrent.Semaphore\n\n>java.util.concurrent.CountDownLatch\n\n>java.util.concurrent.CyclicBarrier\n\n>java.util.concurrent.ConcurrentHashMap\n\n>java.util.concurrent.Executors\n\n### 1.3.2. 学习使用线程池，自己设计线程池需要注意什么\n### 1.3.3. 锁\n>什么是锁，锁的种类有哪些，每种锁有什么特点，适用场景是什么\n\n>在并发编程中锁的意义是什么\n\n### 1.3.4. synchronized的作用是什么，synchronized和lock\n### 1.3.5. sleep和wait\n### 1.3.6. wait和notify\n### 1.3.7. 写一个死锁的程序\n### 1.3.8. 什么是守护线程，守护线程和非守护线程的区别以及用法\n### 1.3.9. volatile关键字的理解\n>C++ volatile关键字和Java volatile关键字\n\n>happens-before语义\n编译器指令重排和CPU指令重排\n>http://en.wikipedia.org/wiki/Memory_ordering\n\n>http://en.wikipedia.org/wiki/Volatile_variable\n\n>http://preshing.com/20130702/the-happens-before-relation/\n\n### 1.3.10. 以下代码是不是线程安全？为什么？如果为count加上volatile修饰是否能够做到线程安全？你觉得该怎么做是线程安全的？\n>```java\npublic class Sample {\nprivate static int count = 0;\npublic static void increment() {\ncount++;\n}\n}\n```\n\n\n### 1.3.11. 解释一下下面两段代码的差别\n>代码1\n>```java\n>public class Sample {\nprivate static int count = 0;\nsynchronized public static void increment() {\ncount++;\n}\n}\n>```\n代码2\n>```java\npublic class Sample {\nprivate static AtomicInteger count = new AtomicInteger(0);\npublic static void increment() {\ncount.getAndIncrement();\n}\n}\n>```\n\n### 1.3.12. 参考资料\n>http://book.douban.com/subject/10484692/\n\n>http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html\n# 二、 进阶篇\n\n## 2.1. Java底层知识\n\n### 2.1.1. 学习了解字节码、class文件格式\n>http://en.wikipedia.org/wiki/Java_class_file\n\n>http://en.wikipedia.org/wiki/Java_bytecode\n\n>http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings\n\n>http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/\n\n>http://asm.ow2.org/\n\n### 2.1.2. 写一个程序要求实现javap的功能（手工完成，不借助ASM等工具）\n>如Java源代码：\n>```java\n>public static void main(String[] args) {\nint i = 0;\ni += 1;\ni *= 1;\nSystem.out.println(i);\n}\n>```\n编译后读取class文件输出以下代码：\n>```java\npublic static void main(java.lang.String[]);\nCode:\nStack=2, Locals=2, Args_size=1\n0: iconst_0\n1: istore_1\n2: iinc 1, 1\n5: iload_1\n6: iconst_1\n7: imul\n8: istore_1\n9: getstatic #2; //Field java/lang/System.out:Ljava/io/PrintStream;\n12: iload_1\n13: invokevirtual #3; //Method java/io/PrintStream.println:(I)V\n16: return\nLineNumberTable:\nline 4: 0\nline 5: 2\nline 6: 5\nline 7: 9\nline 8: 16\n>```\n\n### 2.1.3. CPU缓存，L1，L2，L3和伪共享\n>http://duartes.org/gustavo/blog/post/intel-cpu-caches/\n\n>http://mechanical-sympathy.blogspot.com/2011/07/false-sharing.html\n### 2.1.4. 什么是尾递归\n### 2.1.5. 熟悉位运算\n>用位运算实现加、减、乘、除、取余\n### 2.1.6. 参考资料\n>http://book.douban.com/subject/1138768/\n\n>http://book.douban.com/subject/6522893/\n\n>http://en.wikipedia.org/wiki/Java_class_file\n\n>http://en.wikipedia.org/wiki/Java_bytecode\n\n>http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings\n## 2.2. 设计模式\n\n### 2.2.1. 实现AOP\n>#### CGLIB和InvocationHandler的区别\n>>http://cglib.sourceforge.net/\n\n>#### 动态代理模式\n>#### Javassist实现AOP\n>>http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/\n>#### ASM实现AOP\n>>http://asm.ow2.org/\n\n### 2.2.2. 使用模板方法设计模式和策略设计模式实现IOC\n### 2.2.3. 不用synchronized和lock，实现线程安全的单例模式\n### 2.2.4. nio和reactor设计模式\n### 2.2.5. 参考资料\n>http://asm.ow2.org/\n\n>http://cglib.sourceforge.net/\n\n>http://www.javassist.org/\n\n## 2.3. 网络编程知识\n### 2.3.1. Java RMI，Socket，HttpClient\n### 2.3.2. 用Java写一个简单的静态文件的HTTP服务器\n>实现客户端缓存功能，支持返回304\n\n>实现可并发下载一个文件\n\n>使用线程池处理客户端请求\n\n>使用nio处理客户端请求\n\n>支持简单的rewrite规则\n\n>上述功能在实现的时候需要满足“开闭原则”\n### 2.3.3. 了解nginx和apache服务器的特性并搭建一个对应的服务器\n>http://nginx.org/\n\n>http://httpd.apache.org/\n### 2.3.4. 用Java实现FTP、SMTP协议\n### 2.3.5. 什么是CDN？如果实现？DNS起到什么作用？\n>搭建一个DNS服务器\n\n>搭建一个 Squid 或 Apache Traffic Server 服务器\n\n>http://www.squid-cache.org/\n\n>http://trafficserver.apache.org/\n\n>http://en.wikipedia.org/wiki/Domain_Name_System\n### 2.3.6. 参考资料\n>http://www.ietf.org/rfc/rfc2616.txt\n\n>http://tools.ietf.org/rfc/rfc5321.txt\n\n>http://en.wikipedia.org/wiki/Open/closed_principle\n### 2.4. 框架知识\n>spring，spring mvc，阅读主要源码\n\n>ibatis，阅读主要源码\n\n>用spring和ibatis搭建java server\n### 2.5. 应用服务器知识\n>熟悉使用jboss，https://www.jboss.org/overview/\n\n>熟悉使用tomcat，http://tomcat.apache.org/\n\n>熟悉使用jetty，http://www.eclipse.org/jetty/\n# 三、 高级篇\n\n## 3.1. 编译原理知识\n\n### 3.1.1. 用Java实现以下表达式解析并返回结果（语法和Oracle中的select sysdate-1 from dual类似）\n>sysdate\nsysdate - 1\nsysdate - 1/24\nsysdate - 1/(12*2)\n### 3.1.2. 实现对一个List通过DSL筛选\n>```java\n>QList<Map<String, Object>> mapList = new QList<Map<String, Object>>;\nmapList.add({\"name\": \"hatter test\"});\nmapList.add({\"id\": -1,\"name\": \"hatter test\"});\nmapList.add({\"id\": 0, \"name\": \"hatter test\"});\nmapList.add({\"id\": 1, \"name\": \"test test\"});\nmapList.add({\"id\": 2, \"name\": \"hatter test\"});\nmapList.add({\"id\": 3, \"name\": \"test hatter\"});\nmapList.query(\"id is not null and id > 0 and name like '%hatter%'\");\n>```\n要求返回列表中匹配的对象，即最后两个对象；\n\n### 3.1.3. 用Java实现以下程序（语法和变量作用域处理都和JavaScript类似）：\n>代码：\n>```javascript\nvar a = 1;\nvar b = 2;\nvar c = function() {\nvar a = 3;\nprintln(a);\nprintln(b);\n};\nc();\nprintln(a);\nprintln(b);\n>```\n输出：\n>```java\n3\n2\n1\n2\n>```\n### 3.1.4. 参考资料\n>http://en.wikipedia.org/wiki/Abstract_syntax_tree\n\n>https://javacc.java.net/\n\n>http://www.antlr.org/\n## 3.2. 操作系统知识\n>Ubuntu\n\n>Centos\n\n>使用linux，熟悉shell脚本\n## 3.3. 数据存储知识\n\n### 3.3.1. 关系型数据库\n>MySQL\n\n>如何看执行计划\n\n>如何搭建MySQL主备\n\n>binlog是什么\n\n>Derby，H2，PostgreSQL\n\n>SQLite\n### 3.3.2. NoSQL\n>Cache\n\n>Redis\n\n>Memcached\n\n>Leveldb\n\n>Bigtable\n\n>HBase\n\n>Cassandra\n\n>Mongodb\n\n>图数据库\n\n>neo4j\n### 3.3.3. 参考资料\n>http://db-engines.com/en/ranking\n\n>http://redis.io/\n\n>https://code.google.com/p/leveldb/\n\n>http://hbase.apache.org/\n\n>http://cassandra.apache.org/\n\n>http://www.mongodb.org/\n\n>http://www.neo4j.org/\n## 3.4. 大数据知识\n\n### 3.4.1. Zookeeper，在linux上部署zk\n### 3.4.2. Solr，Lucene，ElasticSearch\n>在linux上部署solr，solrcloud，，新增、删除、查询索引\n### 3.4.3. Storm，流式计算，了解Spark，S4\n>在linux上部署storm，用zookeeper做协调，运行storm hello world，local和remote模式运行调试storm topology。\n### 3.4.4. Hadoop，离线计算\n>Hdfs：部署NameNode，SecondaryNameNode，DataNode，上传文件、打开文件、更改文件、删除文件\n\n>MapReduce：部署JobTracker，TaskTracker，编写mr job\n\n>Hive：部署hive，书写hive sql，得到结果\n\n>Presto：类hive，不过比hive快，非常值得学习\n### 3.4.5. 分布式日志收集flume，kafka，logstash\n### 3.4.6. 数据挖掘，mahout\n### 3.4.7. 参考资料\n>http://zookeeper.apache.org/\n\n>https://lucene.apache.org/solr/\n\n>https://github.com/nathanmarz/storm/wiki\n\n>http://hadoop.apache.org/\n\n>http://prestodb.io/\n\n>http://flume.apache.org/，http://logstash.net/，http://kafka.apache.org/\n\n>http://mahout.apache.org/\n## 3.5. 网络安全知识\n\n### 3.5.1. 什么是DES、AES\n### 3.5.2. 什么是RSA、DSA\n### 3.5.3. 什么是MD5，SHA1\n### 3.5.4. 什么是SSL、TLS，为什么HTTPS相对比较安全\n### 3.5.5. 什么是中间人攻击、如果避免中间人攻击\n### 3.5.6. 什么是DOS、DDOS、CC攻击\n### 3.5.7. 什么是CSRF攻击\n### 3.5.8. 什么是CSS攻击\n### 3.5.9. 什么是SQL注入攻击\n### 3.5.10. 什么是Hash碰撞拒绝服务攻击\n### 3.5.11. 了解并学习下面几种增强安全的技术\n\n>http://www.openauthentication.org/\n\n>HOTP http://www.ietf.org/rfc/rfc4226.txt\n\n>TOTP http://tools.ietf.org/rfc/rfc6238.txt\n\n>OCRA http://tools.ietf.org/rfc/rfc6287.txt\n\n>http://en.wikipedia.org/wiki/Salt_(cryptography)\n### 3.5.12. 用openssl签一个证书部署到apache或nginx\n### 3.5.13. 参考资料\n>http://en.wikipedia.org/wiki/Cryptographic_hash_function\n\n>http://en.wikipedia.org/wiki/Block_cipher\n\n>http://en.wikipedia.org/wiki/Public-key_cryptography\n\n>http://en.wikipedia.org/wiki/Transport_Layer_Security\n\n>http://www.openssl.org/\n\n>https://code.google.com/p/google-authenticator/\n# 四、 扩展篇\n\n## 4.1. 相关知识\n\n### 4.1.1. 云计算，分布式，高可用，可扩展\n### 4.1.2. 虚拟化\n>https://linuxcontainers.org/\n\n>http://www.linux-kvm.org/page/Main_Page\n\n>http://www.xenproject.org/\n\n>https://www.docker.io/\n### 4.1.3. 监控\n>http://www.nagios.org/\n\n>http://ganglia.info/\n### 4.1.4. 负载均衡\n>http://www.linuxvirtualserver.org/\n### 4.1.5. 学习使用git\n>https://github.com/\n\n>https://git.oschina.net/\n### 4.1.6. 学习使用maven\n>http://maven.apache.org/\n### 4.1.7. 学习使用gradle\n>http://www.gradle.org/\n### 4.1.8. 学习一个小语种语言\n>Groovy\n\n>Scala\n\n>LISP, Common LISP, Schema, Clojure\n\n>R\n\n>Julia\n\n>Lua\n\n>Ruby\n### 4.1.9. 尝试了解编码的本质\n\n>了解以下概念\n>ASCII, ISO-8859-1\n\n>GB2312, GBK, GB18030\n\n>Unicode, UTF-8\n\n>不使用 String.getBytes() 等其他工具类/函数完成下面功能\n\n>```java\npublic static void main(String[] args) throws IOException {\nString str = \"Hello, 我们是中国人。\";\nbyte[] utf8Bytes = toUTF8Bytes(str);\nFileOutputStream fos = new FileOutputStream(\"f.txt\");\nfos.write(utf8Bytes);\nfos.close();\n}\npublic static byte[] toUTF8Bytes(String str) {\nreturn null; // TODO\n}\n>```\n\n>想一下上面的程序能不能写一个转GBK的？\n\n>写个程序自动判断一个文件是哪种编码\n### 4.1.10. 尝试了解时间的本质\n>时区 & 冬令时、夏令时\n\n>http://en.wikipedia.org/wiki/Time_zone\n\n>ftp://ftp.iana.org/tz/data/asia\n\n>http://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9C%8B%E6%99%82%E5%8D%80\n\n>闰年\n\n>http://en.wikipedia.org/wiki/Leap_year\n\n>闰秒\n\n>ftp://ftp.iana.org/tz/data/leapseconds\n\n>System.currentTimeMillis() 返回的时间是什么\n### 4.1.11. 参考资料\n>http://git-scm.com/\n\n>http://en.wikipedia.org/wiki/UTF-8\n\n>http://www.iana.org/time-zones\n## 4.2. 扩展学习\n### 4.2.1. JavaScript知识\n### 4.2.1.1. 什么是prototype\n>修改代码，使程序输出“1 3 5”：\n\n>http://jsfiddle.net/Ts7Fk/\n### 4.2.1.2. 什么是闭包\n>看一下这段代码，并解释一下为什么按Button1时没有alert出“This is button: 1”，如何修改：\n\n>http://jsfiddle.net/FDPj3/1/\n### 4.2.1.3. 了解并学习一个JS框架\n>jQuery\n\n>ExtJS\n\n>ArgularJS\n### 4.2.1.4. 写一个Greasemonkey插件\n>http://en.wikipedia.org/wiki/Greasemonkey\n### 4.2.1.5. 学习node.js\n>http://nodejs.org/\n### 4.2.2. 学习html5\n>ArgularJS，https://docs.angularjs.org/api\n### 4.2.3. 参考资料\n>http://www.ecmascript.org/\n\n>http://jsfiddle.net/\n\n>http://jsbin.com/\n\n>http://runjs.cn/\n\n>http://userscripts.org/\n# 五、 推荐书籍\n>《深入Java虚拟机》\n\n>《深入理解Java虚拟机》\n\n>《Effective Java》\n\n>《七周七语言》\n\n>《七周七数据》\n\n>《Hadoop技术内幕》\n\n>《Hbase In Action》\n\n>《Mahout In Action》\n\n>《这就是搜索引擎》\n\n>《Solr In Action》\n\n>《深入分析Java Web技术内幕》\n\n>《大型网站技术架构》\n\n>《高性能MySQL》\n\n>《算法导论》\n\n>《计算机程序设计艺术》\n\n>《代码大全》\n\n>《JavaScript权威指南》\n\n\n\n\n","source":"_posts/如何成为一个牛掰的Java大神.md","raw":"title: 如何成为一个牛掰的Java大神\ndate: 2015-12-24 22:17:44\npermalink: java00003\ntags:\n- java\ncategories:\n- java\n\n---\n\n>来自：HollisChuang's Blog\n\n>链接：http://www.hollischuang.com/archives/489\n\n# 一、基础篇\n\n## 1.1 JVM\n\n### 1.1.1. Java内存模型，Java内存管理，Java堆和栈，垃圾回收\n>http://www.jcp.org/en/jsr/detail?id=133\n\n>http://ifeve.com/jmm-faq/\n\n### 1.1.2. 了解JVM各种参数及调优\n\n### 1.1.3. 学习使用Java工具\n>jps, jstack, jmap, jconsole, jinfo, jhat, javap, …\n\n>http://kenai.com/projects/btrace\n\n>http://www.crashub.org/\n\n>https://github.com/taobao/TProfiler\n\n>https://github.com/CSUG/HouseMD\n\n>http://wiki.cyclopsgroup.org/jmxterm\n\n>https://github.com/jlusdy/TBJMap\n\n### 1.1.4. 学习Java诊断工具\n>http://www.eclipse.org/mat/\n\n>http://visualvm.java.net/oqlhelp.html\n\n### 1.1.5. 自己编写各种outofmemory，stackoverflow程序\n>HeapOutOfMemory\n\n>Young OutOfMemory\n\n>MethodArea OutOfMemory\n\n>ConstantPool OutOfMemory\n\n>DirectMemory OutOfMemory\n\n>Stack OutOfMemory\n\n>Stack OverFlow\n\n### 1.1.6. 使用工具尝试解决以下问题，并写下总结\n>当一个Java程序响应很慢时如何查找问题\n\n>当一个Java程序频繁FullGC时如何解决问题，如何查看垃圾回收日志\n\n>当一个Java应用发生OutOfMemory时该如何解决，年轻代、年老代、永久代解决办法不同，导致原因也不同\n\n### 1.1.7. 参考资料\n>http://docs.oracle.com/javase/specs/jvms/se7/html/\n\n>http://www.cs.umd.edu/~pugh/java/memoryModel/\n\n>http://gee.cs.oswego.edu/dl/jmm/cookbook.html\n\n## 1.2. Java基础知识\n\n### 1.2.1. 阅读源代码\n>java.lang.String\n\n>java.lang.Integer\n\n>java.lang.Long\n\n>java.lang.Enum\n\n>java.math.BigDecimal\n\n>java.lang.ThreadLocal\n\n>java.lang.ClassLoader & java.net.URLClassLoader\n\n>java.util.ArrayList & java.util.LinkedList\n\n>java.util.HashMap & java.util.LinkedHashMap & java.util.TreeMap\n\n>java.util.HashSet & java.util.LinkedHashSet & java.util.TreeSet\n\n### 1.2.2. 熟悉Java中各种变量类型\n### 1.2.3. 熟悉Java String的使用，熟悉String的各种函数\n### 1.2.4. 熟悉Java中各种关键字\n### 1.2.5. 学会使用List，Map，Stack，Queue，Set\n>上述数据结构的遍历\n\n>上述数据结构的使用场景\n\n>Java实现对Array/List排序\n\n>java.uti.Arrays.sort()\n\n>java.util.Collections.sort()\n\n>Java实现对List去重\n\n>Java实现对List去重，并且需要保留数据原始的出现顺序\n\n>Java实现最近最少使用cache，用LinkedHashMap\n\n### 1.2.6. Java IO&Java NIO，并学会使用\n>java.io.*\n\n>java.nio.*\n\n>nio和reactor设计模式\n\n>文件编码，字符集\n\n### 1.2.7. Java反射与javassist\n>反射与工厂模式\n\n>java.lang.reflect.*\n\n### 1.2.8. Java序列化\n>java.io. Serializable\n\n>什么是序列化，为什么序列化\n\n>序列化与单例模式\n\n>google序列化protobuf\n\n### 1.2.9. 虚引用，弱引用，软引用\n>java.lang.ref.*\n\n>实验这些引用的回收\n\n### 1.2.10. 熟悉Java系统属性\n>java.util.Properties\n\n### 1.2.11. 熟悉Annotation用法\n>java.lang.annotation.*\n\n### 1.2.12. JMS\n>javax.jms.*\n\n### 1.2.13. JMX\n>java.lang.management.*\n\n>javax.management.*\n\n### 1.2.14. 泛型和继承，泛型和擦除\n### 1.2.15. 自动拆箱装箱与字节码\n### 1.2.16. 实现Callback\n### 1.2.17. java.lang.Void类使用\n### 1.2.18. Java Agent，premain函数\n>java.lang.instrument\n\n### 1.2.19. 单元测试\n>Junit，http://junit.org/\n\n>Jmockit，https://code.google.com/p/jmockit/\n\n>djUnit，http://works.dgic.co.jp/djunit/\n\n### 1.2.20. Java实现通过正则表达式提取一段文本中的电子邮件，并将@替换为#输出\n>java.lang.util.regex.*\n\n### 1.2.21. 学习使用常用的Java工具库\n>commons.lang, commons.*…\n\n>guava-libraries\n\n>netty\n\n### 1.2.22. 什么是API&SPI\n>http://en.wikipedia.org/wiki/Application_programming_interface\n\n>http://en.wikipedia.org/wiki/Service_provider_interface\n\n### 1.2.23. 参考资料\n>JDK src.zip 源代码\n\n>http://openjdk.java.net/\n\n>http://commons.apache.org/\n\n>https://code.google.com/p/guava-libraries/\n\n>http://netty.io/\n\n>http://stackoverflow.com/questions/2954372/difference-between-spi-and-api\n\n>http://stackoverflow.com/questions/11404230/how-to-implement-the-api-spi-pattern-in-java\n\n## 1.3. Java并发编程\n\n### 1.3.1. 阅读源代码，并学会使用\n\n>java.lang.Thread\n\n>java.lang.Runnable\n\n>java.util.concurrent.Callable\n\n>java.util.concurrent.locks.ReentrantLock\n\n>java.util.concurrent.locks.ReentrantReadWriteLock\n\n>java.util.concurrent.atomic.Atomic*\n\n>java.util.concurrent.Semaphore\n\n>java.util.concurrent.CountDownLatch\n\n>java.util.concurrent.CyclicBarrier\n\n>java.util.concurrent.ConcurrentHashMap\n\n>java.util.concurrent.Executors\n\n### 1.3.2. 学习使用线程池，自己设计线程池需要注意什么\n### 1.3.3. 锁\n>什么是锁，锁的种类有哪些，每种锁有什么特点，适用场景是什么\n\n>在并发编程中锁的意义是什么\n\n### 1.3.4. synchronized的作用是什么，synchronized和lock\n### 1.3.5. sleep和wait\n### 1.3.6. wait和notify\n### 1.3.7. 写一个死锁的程序\n### 1.3.8. 什么是守护线程，守护线程和非守护线程的区别以及用法\n### 1.3.9. volatile关键字的理解\n>C++ volatile关键字和Java volatile关键字\n\n>happens-before语义\n编译器指令重排和CPU指令重排\n>http://en.wikipedia.org/wiki/Memory_ordering\n\n>http://en.wikipedia.org/wiki/Volatile_variable\n\n>http://preshing.com/20130702/the-happens-before-relation/\n\n### 1.3.10. 以下代码是不是线程安全？为什么？如果为count加上volatile修饰是否能够做到线程安全？你觉得该怎么做是线程安全的？\n>```java\npublic class Sample {\nprivate static int count = 0;\npublic static void increment() {\ncount++;\n}\n}\n```\n\n\n### 1.3.11. 解释一下下面两段代码的差别\n>代码1\n>```java\n>public class Sample {\nprivate static int count = 0;\nsynchronized public static void increment() {\ncount++;\n}\n}\n>```\n代码2\n>```java\npublic class Sample {\nprivate static AtomicInteger count = new AtomicInteger(0);\npublic static void increment() {\ncount.getAndIncrement();\n}\n}\n>```\n\n### 1.3.12. 参考资料\n>http://book.douban.com/subject/10484692/\n\n>http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html\n# 二、 进阶篇\n\n## 2.1. Java底层知识\n\n### 2.1.1. 学习了解字节码、class文件格式\n>http://en.wikipedia.org/wiki/Java_class_file\n\n>http://en.wikipedia.org/wiki/Java_bytecode\n\n>http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings\n\n>http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/\n\n>http://asm.ow2.org/\n\n### 2.1.2. 写一个程序要求实现javap的功能（手工完成，不借助ASM等工具）\n>如Java源代码：\n>```java\n>public static void main(String[] args) {\nint i = 0;\ni += 1;\ni *= 1;\nSystem.out.println(i);\n}\n>```\n编译后读取class文件输出以下代码：\n>```java\npublic static void main(java.lang.String[]);\nCode:\nStack=2, Locals=2, Args_size=1\n0: iconst_0\n1: istore_1\n2: iinc 1, 1\n5: iload_1\n6: iconst_1\n7: imul\n8: istore_1\n9: getstatic #2; //Field java/lang/System.out:Ljava/io/PrintStream;\n12: iload_1\n13: invokevirtual #3; //Method java/io/PrintStream.println:(I)V\n16: return\nLineNumberTable:\nline 4: 0\nline 5: 2\nline 6: 5\nline 7: 9\nline 8: 16\n>```\n\n### 2.1.3. CPU缓存，L1，L2，L3和伪共享\n>http://duartes.org/gustavo/blog/post/intel-cpu-caches/\n\n>http://mechanical-sympathy.blogspot.com/2011/07/false-sharing.html\n### 2.1.4. 什么是尾递归\n### 2.1.5. 熟悉位运算\n>用位运算实现加、减、乘、除、取余\n### 2.1.6. 参考资料\n>http://book.douban.com/subject/1138768/\n\n>http://book.douban.com/subject/6522893/\n\n>http://en.wikipedia.org/wiki/Java_class_file\n\n>http://en.wikipedia.org/wiki/Java_bytecode\n\n>http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings\n## 2.2. 设计模式\n\n### 2.2.1. 实现AOP\n>#### CGLIB和InvocationHandler的区别\n>>http://cglib.sourceforge.net/\n\n>#### 动态代理模式\n>#### Javassist实现AOP\n>>http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/\n>#### ASM实现AOP\n>>http://asm.ow2.org/\n\n### 2.2.2. 使用模板方法设计模式和策略设计模式实现IOC\n### 2.2.3. 不用synchronized和lock，实现线程安全的单例模式\n### 2.2.4. nio和reactor设计模式\n### 2.2.5. 参考资料\n>http://asm.ow2.org/\n\n>http://cglib.sourceforge.net/\n\n>http://www.javassist.org/\n\n## 2.3. 网络编程知识\n### 2.3.1. Java RMI，Socket，HttpClient\n### 2.3.2. 用Java写一个简单的静态文件的HTTP服务器\n>实现客户端缓存功能，支持返回304\n\n>实现可并发下载一个文件\n\n>使用线程池处理客户端请求\n\n>使用nio处理客户端请求\n\n>支持简单的rewrite规则\n\n>上述功能在实现的时候需要满足“开闭原则”\n### 2.3.3. 了解nginx和apache服务器的特性并搭建一个对应的服务器\n>http://nginx.org/\n\n>http://httpd.apache.org/\n### 2.3.4. 用Java实现FTP、SMTP协议\n### 2.3.5. 什么是CDN？如果实现？DNS起到什么作用？\n>搭建一个DNS服务器\n\n>搭建一个 Squid 或 Apache Traffic Server 服务器\n\n>http://www.squid-cache.org/\n\n>http://trafficserver.apache.org/\n\n>http://en.wikipedia.org/wiki/Domain_Name_System\n### 2.3.6. 参考资料\n>http://www.ietf.org/rfc/rfc2616.txt\n\n>http://tools.ietf.org/rfc/rfc5321.txt\n\n>http://en.wikipedia.org/wiki/Open/closed_principle\n### 2.4. 框架知识\n>spring，spring mvc，阅读主要源码\n\n>ibatis，阅读主要源码\n\n>用spring和ibatis搭建java server\n### 2.5. 应用服务器知识\n>熟悉使用jboss，https://www.jboss.org/overview/\n\n>熟悉使用tomcat，http://tomcat.apache.org/\n\n>熟悉使用jetty，http://www.eclipse.org/jetty/\n# 三、 高级篇\n\n## 3.1. 编译原理知识\n\n### 3.1.1. 用Java实现以下表达式解析并返回结果（语法和Oracle中的select sysdate-1 from dual类似）\n>sysdate\nsysdate - 1\nsysdate - 1/24\nsysdate - 1/(12*2)\n### 3.1.2. 实现对一个List通过DSL筛选\n>```java\n>QList<Map<String, Object>> mapList = new QList<Map<String, Object>>;\nmapList.add({\"name\": \"hatter test\"});\nmapList.add({\"id\": -1,\"name\": \"hatter test\"});\nmapList.add({\"id\": 0, \"name\": \"hatter test\"});\nmapList.add({\"id\": 1, \"name\": \"test test\"});\nmapList.add({\"id\": 2, \"name\": \"hatter test\"});\nmapList.add({\"id\": 3, \"name\": \"test hatter\"});\nmapList.query(\"id is not null and id > 0 and name like '%hatter%'\");\n>```\n要求返回列表中匹配的对象，即最后两个对象；\n\n### 3.1.3. 用Java实现以下程序（语法和变量作用域处理都和JavaScript类似）：\n>代码：\n>```javascript\nvar a = 1;\nvar b = 2;\nvar c = function() {\nvar a = 3;\nprintln(a);\nprintln(b);\n};\nc();\nprintln(a);\nprintln(b);\n>```\n输出：\n>```java\n3\n2\n1\n2\n>```\n### 3.1.4. 参考资料\n>http://en.wikipedia.org/wiki/Abstract_syntax_tree\n\n>https://javacc.java.net/\n\n>http://www.antlr.org/\n## 3.2. 操作系统知识\n>Ubuntu\n\n>Centos\n\n>使用linux，熟悉shell脚本\n## 3.3. 数据存储知识\n\n### 3.3.1. 关系型数据库\n>MySQL\n\n>如何看执行计划\n\n>如何搭建MySQL主备\n\n>binlog是什么\n\n>Derby，H2，PostgreSQL\n\n>SQLite\n### 3.3.2. NoSQL\n>Cache\n\n>Redis\n\n>Memcached\n\n>Leveldb\n\n>Bigtable\n\n>HBase\n\n>Cassandra\n\n>Mongodb\n\n>图数据库\n\n>neo4j\n### 3.3.3. 参考资料\n>http://db-engines.com/en/ranking\n\n>http://redis.io/\n\n>https://code.google.com/p/leveldb/\n\n>http://hbase.apache.org/\n\n>http://cassandra.apache.org/\n\n>http://www.mongodb.org/\n\n>http://www.neo4j.org/\n## 3.4. 大数据知识\n\n### 3.4.1. Zookeeper，在linux上部署zk\n### 3.4.2. Solr，Lucene，ElasticSearch\n>在linux上部署solr，solrcloud，，新增、删除、查询索引\n### 3.4.3. Storm，流式计算，了解Spark，S4\n>在linux上部署storm，用zookeeper做协调，运行storm hello world，local和remote模式运行调试storm topology。\n### 3.4.4. Hadoop，离线计算\n>Hdfs：部署NameNode，SecondaryNameNode，DataNode，上传文件、打开文件、更改文件、删除文件\n\n>MapReduce：部署JobTracker，TaskTracker，编写mr job\n\n>Hive：部署hive，书写hive sql，得到结果\n\n>Presto：类hive，不过比hive快，非常值得学习\n### 3.4.5. 分布式日志收集flume，kafka，logstash\n### 3.4.6. 数据挖掘，mahout\n### 3.4.7. 参考资料\n>http://zookeeper.apache.org/\n\n>https://lucene.apache.org/solr/\n\n>https://github.com/nathanmarz/storm/wiki\n\n>http://hadoop.apache.org/\n\n>http://prestodb.io/\n\n>http://flume.apache.org/，http://logstash.net/，http://kafka.apache.org/\n\n>http://mahout.apache.org/\n## 3.5. 网络安全知识\n\n### 3.5.1. 什么是DES、AES\n### 3.5.2. 什么是RSA、DSA\n### 3.5.3. 什么是MD5，SHA1\n### 3.5.4. 什么是SSL、TLS，为什么HTTPS相对比较安全\n### 3.5.5. 什么是中间人攻击、如果避免中间人攻击\n### 3.5.6. 什么是DOS、DDOS、CC攻击\n### 3.5.7. 什么是CSRF攻击\n### 3.5.8. 什么是CSS攻击\n### 3.5.9. 什么是SQL注入攻击\n### 3.5.10. 什么是Hash碰撞拒绝服务攻击\n### 3.5.11. 了解并学习下面几种增强安全的技术\n\n>http://www.openauthentication.org/\n\n>HOTP http://www.ietf.org/rfc/rfc4226.txt\n\n>TOTP http://tools.ietf.org/rfc/rfc6238.txt\n\n>OCRA http://tools.ietf.org/rfc/rfc6287.txt\n\n>http://en.wikipedia.org/wiki/Salt_(cryptography)\n### 3.5.12. 用openssl签一个证书部署到apache或nginx\n### 3.5.13. 参考资料\n>http://en.wikipedia.org/wiki/Cryptographic_hash_function\n\n>http://en.wikipedia.org/wiki/Block_cipher\n\n>http://en.wikipedia.org/wiki/Public-key_cryptography\n\n>http://en.wikipedia.org/wiki/Transport_Layer_Security\n\n>http://www.openssl.org/\n\n>https://code.google.com/p/google-authenticator/\n# 四、 扩展篇\n\n## 4.1. 相关知识\n\n### 4.1.1. 云计算，分布式，高可用，可扩展\n### 4.1.2. 虚拟化\n>https://linuxcontainers.org/\n\n>http://www.linux-kvm.org/page/Main_Page\n\n>http://www.xenproject.org/\n\n>https://www.docker.io/\n### 4.1.3. 监控\n>http://www.nagios.org/\n\n>http://ganglia.info/\n### 4.1.4. 负载均衡\n>http://www.linuxvirtualserver.org/\n### 4.1.5. 学习使用git\n>https://github.com/\n\n>https://git.oschina.net/\n### 4.1.6. 学习使用maven\n>http://maven.apache.org/\n### 4.1.7. 学习使用gradle\n>http://www.gradle.org/\n### 4.1.8. 学习一个小语种语言\n>Groovy\n\n>Scala\n\n>LISP, Common LISP, Schema, Clojure\n\n>R\n\n>Julia\n\n>Lua\n\n>Ruby\n### 4.1.9. 尝试了解编码的本质\n\n>了解以下概念\n>ASCII, ISO-8859-1\n\n>GB2312, GBK, GB18030\n\n>Unicode, UTF-8\n\n>不使用 String.getBytes() 等其他工具类/函数完成下面功能\n\n>```java\npublic static void main(String[] args) throws IOException {\nString str = \"Hello, 我们是中国人。\";\nbyte[] utf8Bytes = toUTF8Bytes(str);\nFileOutputStream fos = new FileOutputStream(\"f.txt\");\nfos.write(utf8Bytes);\nfos.close();\n}\npublic static byte[] toUTF8Bytes(String str) {\nreturn null; // TODO\n}\n>```\n\n>想一下上面的程序能不能写一个转GBK的？\n\n>写个程序自动判断一个文件是哪种编码\n### 4.1.10. 尝试了解时间的本质\n>时区 & 冬令时、夏令时\n\n>http://en.wikipedia.org/wiki/Time_zone\n\n>ftp://ftp.iana.org/tz/data/asia\n\n>http://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9C%8B%E6%99%82%E5%8D%80\n\n>闰年\n\n>http://en.wikipedia.org/wiki/Leap_year\n\n>闰秒\n\n>ftp://ftp.iana.org/tz/data/leapseconds\n\n>System.currentTimeMillis() 返回的时间是什么\n### 4.1.11. 参考资料\n>http://git-scm.com/\n\n>http://en.wikipedia.org/wiki/UTF-8\n\n>http://www.iana.org/time-zones\n## 4.2. 扩展学习\n### 4.2.1. JavaScript知识\n### 4.2.1.1. 什么是prototype\n>修改代码，使程序输出“1 3 5”：\n\n>http://jsfiddle.net/Ts7Fk/\n### 4.2.1.2. 什么是闭包\n>看一下这段代码，并解释一下为什么按Button1时没有alert出“This is button: 1”，如何修改：\n\n>http://jsfiddle.net/FDPj3/1/\n### 4.2.1.3. 了解并学习一个JS框架\n>jQuery\n\n>ExtJS\n\n>ArgularJS\n### 4.2.1.4. 写一个Greasemonkey插件\n>http://en.wikipedia.org/wiki/Greasemonkey\n### 4.2.1.5. 学习node.js\n>http://nodejs.org/\n### 4.2.2. 学习html5\n>ArgularJS，https://docs.angularjs.org/api\n### 4.2.3. 参考资料\n>http://www.ecmascript.org/\n\n>http://jsfiddle.net/\n\n>http://jsbin.com/\n\n>http://runjs.cn/\n\n>http://userscripts.org/\n# 五、 推荐书籍\n>《深入Java虚拟机》\n\n>《深入理解Java虚拟机》\n\n>《Effective Java》\n\n>《七周七语言》\n\n>《七周七数据》\n\n>《Hadoop技术内幕》\n\n>《Hbase In Action》\n\n>《Mahout In Action》\n\n>《这就是搜索引擎》\n\n>《Solr In Action》\n\n>《深入分析Java Web技术内幕》\n\n>《大型网站技术架构》\n\n>《高性能MySQL》\n\n>《算法导论》\n\n>《计算机程序设计艺术》\n\n>《代码大全》\n\n>《JavaScript权威指南》\n\n\n\n\n","slug":"java00003","published":1,"updated":"2016-05-10T04:46:54.283Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431om40011uco0zblptuvw","content":"<blockquote>\n<p>来自：HollisChuang’s Blog</p>\n<p>链接：<a href=\"http://www.hollischuang.com/archives/489\" target=\"_blank\" rel=\"external\">http://www.hollischuang.com/archives/489</a></p>\n</blockquote>\n<h1 id=\"一、基础篇\">一、基础篇</h1><h2 id=\"1-1_JVM\">1.1 JVM</h2><h3 id=\"1-1-1-_Java内存模型，Java内存管理，Java堆和栈，垃圾回收\">1.1.1. Java内存模型，Java内存管理，Java堆和栈，垃圾回收</h3><blockquote>\n<p><a href=\"http://www.jcp.org/en/jsr/detail?id=133\" target=\"_blank\" rel=\"external\">http://www.jcp.org/en/jsr/detail?id=133</a></p>\n<p><a href=\"http://ifeve.com/jmm-faq/\" target=\"_blank\" rel=\"external\">http://ifeve.com/jmm-faq/</a></p>\n</blockquote>\n<h3 id=\"1-1-2-_了解JVM各种参数及调优\">1.1.2. 了解JVM各种参数及调优</h3><h3 id=\"1-1-3-_学习使用Java工具\">1.1.3. 学习使用Java工具</h3><blockquote>\n<p>jps, jstack, jmap, jconsole, jinfo, jhat, javap, …</p>\n<p><a href=\"http://kenai.com/projects/btrace\" target=\"_blank\" rel=\"external\">http://kenai.com/projects/btrace</a></p>\n<p><a href=\"http://www.crashub.org/\" target=\"_blank\" rel=\"external\">http://www.crashub.org/</a></p>\n<p><a href=\"https://github.com/taobao/TProfiler\" target=\"_blank\" rel=\"external\">https://github.com/taobao/TProfiler</a></p>\n<p><a href=\"https://github.com/CSUG/HouseMD\" target=\"_blank\" rel=\"external\">https://github.com/CSUG/HouseMD</a></p>\n<p><a href=\"http://wiki.cyclopsgroup.org/jmxterm\" target=\"_blank\" rel=\"external\">http://wiki.cyclopsgroup.org/jmxterm</a></p>\n<p><a href=\"https://github.com/jlusdy/TBJMap\" target=\"_blank\" rel=\"external\">https://github.com/jlusdy/TBJMap</a></p>\n</blockquote>\n<h3 id=\"1-1-4-_学习Java诊断工具\">1.1.4. 学习Java诊断工具</h3><blockquote>\n<p><a href=\"http://www.eclipse.org/mat/\" target=\"_blank\" rel=\"external\">http://www.eclipse.org/mat/</a></p>\n<p><a href=\"http://visualvm.java.net/oqlhelp.html\" target=\"_blank\" rel=\"external\">http://visualvm.java.net/oqlhelp.html</a></p>\n</blockquote>\n<h3 id=\"1-1-5-_自己编写各种outofmemory，stackoverflow程序\">1.1.5. 自己编写各种outofmemory，stackoverflow程序</h3><blockquote>\n<p>HeapOutOfMemory</p>\n<p>Young OutOfMemory</p>\n<p>MethodArea OutOfMemory</p>\n<p>ConstantPool OutOfMemory</p>\n<p>DirectMemory OutOfMemory</p>\n<p>Stack OutOfMemory</p>\n<p>Stack OverFlow</p>\n</blockquote>\n<h3 id=\"1-1-6-_使用工具尝试解决以下问题，并写下总结\">1.1.6. 使用工具尝试解决以下问题，并写下总结</h3><blockquote>\n<p>当一个Java程序响应很慢时如何查找问题</p>\n<p>当一个Java程序频繁FullGC时如何解决问题，如何查看垃圾回收日志</p>\n<p>当一个Java应用发生OutOfMemory时该如何解决，年轻代、年老代、永久代解决办法不同，导致原因也不同</p>\n</blockquote>\n<h3 id=\"1-1-7-_参考资料\">1.1.7. 参考资料</h3><blockquote>\n<p><a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/\" target=\"_blank\" rel=\"external\">http://docs.oracle.com/javase/specs/jvms/se7/html/</a></p>\n<p><a href=\"http://www.cs.umd.edu/~pugh/java/memoryModel/\" target=\"_blank\" rel=\"external\">http://www.cs.umd.edu/~pugh/java/memoryModel/</a></p>\n<p><a href=\"http://gee.cs.oswego.edu/dl/jmm/cookbook.html\" target=\"_blank\" rel=\"external\">http://gee.cs.oswego.edu/dl/jmm/cookbook.html</a></p>\n</blockquote>\n<h2 id=\"1-2-_Java基础知识\">1.2. Java基础知识</h2><h3 id=\"1-2-1-_阅读源代码\">1.2.1. 阅读源代码</h3><blockquote>\n<p>java.lang.String</p>\n<p>java.lang.Integer</p>\n<p>java.lang.Long</p>\n<p>java.lang.Enum</p>\n<p>java.math.BigDecimal</p>\n<p>java.lang.ThreadLocal</p>\n<p>java.lang.ClassLoader &amp; java.net.URLClassLoader</p>\n<p>java.util.ArrayList &amp; java.util.LinkedList</p>\n<p>java.util.HashMap &amp; java.util.LinkedHashMap &amp; java.util.TreeMap</p>\n<p>java.util.HashSet &amp; java.util.LinkedHashSet &amp; java.util.TreeSet</p>\n</blockquote>\n<h3 id=\"1-2-2-_熟悉Java中各种变量类型\">1.2.2. 熟悉Java中各种变量类型</h3><h3 id=\"1-2-3-_熟悉Java_String的使用，熟悉String的各种函数\">1.2.3. 熟悉Java String的使用，熟悉String的各种函数</h3><h3 id=\"1-2-4-_熟悉Java中各种关键字\">1.2.4. 熟悉Java中各种关键字</h3><h3 id=\"1-2-5-_学会使用List，Map，Stack，Queue，Set\">1.2.5. 学会使用List，Map，Stack，Queue，Set</h3><blockquote>\n<p>上述数据结构的遍历</p>\n<p>上述数据结构的使用场景</p>\n<p>Java实现对Array/List排序</p>\n<p>java.uti.Arrays.sort()</p>\n<p>java.util.Collections.sort()</p>\n<p>Java实现对List去重</p>\n<p>Java实现对List去重，并且需要保留数据原始的出现顺序</p>\n<p>Java实现最近最少使用cache，用LinkedHashMap</p>\n</blockquote>\n<h3 id=\"1-2-6-_Java_IO&amp;Java_NIO，并学会使用\">1.2.6. Java IO&amp;Java NIO，并学会使用</h3><blockquote>\n<p>java.io.*</p>\n<p>java.nio.*</p>\n<p>nio和reactor设计模式</p>\n<p>文件编码，字符集</p>\n</blockquote>\n<h3 id=\"1-2-7-_Java反射与javassist\">1.2.7. Java反射与javassist</h3><blockquote>\n<p>反射与工厂模式</p>\n<p>java.lang.reflect.*</p>\n</blockquote>\n<h3 id=\"1-2-8-_Java序列化\">1.2.8. Java序列化</h3><blockquote>\n<p>java.io. Serializable</p>\n<p>什么是序列化，为什么序列化</p>\n<p>序列化与单例模式</p>\n<p>google序列化protobuf</p>\n</blockquote>\n<h3 id=\"1-2-9-_虚引用，弱引用，软引用\">1.2.9. 虚引用，弱引用，软引用</h3><blockquote>\n<p>java.lang.ref.*</p>\n<p>实验这些引用的回收</p>\n</blockquote>\n<h3 id=\"1-2-10-_熟悉Java系统属性\">1.2.10. 熟悉Java系统属性</h3><blockquote>\n<p>java.util.Properties</p>\n</blockquote>\n<h3 id=\"1-2-11-_熟悉Annotation用法\">1.2.11. 熟悉Annotation用法</h3><blockquote>\n<p>java.lang.annotation.*</p>\n</blockquote>\n<h3 id=\"1-2-12-_JMS\">1.2.12. JMS</h3><blockquote>\n<p>javax.jms.*</p>\n</blockquote>\n<h3 id=\"1-2-13-_JMX\">1.2.13. JMX</h3><blockquote>\n<p>java.lang.management.*</p>\n<p>javax.management.*</p>\n</blockquote>\n<h3 id=\"1-2-14-_泛型和继承，泛型和擦除\">1.2.14. 泛型和继承，泛型和擦除</h3><h3 id=\"1-2-15-_自动拆箱装箱与字节码\">1.2.15. 自动拆箱装箱与字节码</h3><h3 id=\"1-2-16-_实现Callback\">1.2.16. 实现Callback</h3><h3 id=\"1-2-17-_java-lang-Void类使用\">1.2.17. java.lang.Void类使用</h3><h3 id=\"1-2-18-_Java_Agent，premain函数\">1.2.18. Java Agent，premain函数</h3><blockquote>\n<p>java.lang.instrument</p>\n</blockquote>\n<h3 id=\"1-2-19-_单元测试\">1.2.19. 单元测试</h3><blockquote>\n<p>Junit，<a href=\"http://junit.org/\" target=\"_blank\" rel=\"external\">http://junit.org/</a></p>\n<p>Jmockit，<a href=\"https://code.google.com/p/jmockit/\" target=\"_blank\" rel=\"external\">https://code.google.com/p/jmockit/</a></p>\n<p>djUnit，<a href=\"http://works.dgic.co.jp/djunit/\" target=\"_blank\" rel=\"external\">http://works.dgic.co.jp/djunit/</a></p>\n</blockquote>\n<h3 id=\"1-2-20-_Java实现通过正则表达式提取一段文本中的电子邮件，并将@替换为#输出\">1.2.20. Java实现通过正则表达式提取一段文本中的电子邮件，并将@替换为#输出</h3><blockquote>\n<p>java.lang.util.regex.*</p>\n</blockquote>\n<h3 id=\"1-2-21-_学习使用常用的Java工具库\">1.2.21. 学习使用常用的Java工具库</h3><blockquote>\n<p>commons.lang, commons.*…</p>\n<p>guava-libraries</p>\n<p>netty</p>\n</blockquote>\n<h3 id=\"1-2-22-_什么是API&amp;SPI\">1.2.22. 什么是API&amp;SPI</h3><blockquote>\n<p><a href=\"http://en.wikipedia.org/wiki/Application_programming_interface\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Application_programming_interface</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Service_provider_interface\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Service_provider_interface</a></p>\n</blockquote>\n<h3 id=\"1-2-23-_参考资料\">1.2.23. 参考资料</h3><blockquote>\n<p>JDK src.zip 源代码</p>\n<p><a href=\"http://openjdk.java.net/\" target=\"_blank\" rel=\"external\">http://openjdk.java.net/</a></p>\n<p><a href=\"http://commons.apache.org/\" target=\"_blank\" rel=\"external\">http://commons.apache.org/</a></p>\n<p><a href=\"https://code.google.com/p/guava-libraries/\" target=\"_blank\" rel=\"external\">https://code.google.com/p/guava-libraries/</a></p>\n<p><a href=\"http://netty.io/\" target=\"_blank\" rel=\"external\">http://netty.io/</a></p>\n<p><a href=\"http://stackoverflow.com/questions/2954372/difference-between-spi-and-api\" target=\"_blank\" rel=\"external\">http://stackoverflow.com/questions/2954372/difference-between-spi-and-api</a></p>\n<p><a href=\"http://stackoverflow.com/questions/11404230/how-to-implement-the-api-spi-pattern-in-java\" target=\"_blank\" rel=\"external\">http://stackoverflow.com/questions/11404230/how-to-implement-the-api-spi-pattern-in-java</a></p>\n</blockquote>\n<h2 id=\"1-3-_Java并发编程\">1.3. Java并发编程</h2><h3 id=\"1-3-1-_阅读源代码，并学会使用\">1.3.1. 阅读源代码，并学会使用</h3><blockquote>\n<p>java.lang.Thread</p>\n<p>java.lang.Runnable</p>\n<p>java.util.concurrent.Callable</p>\n<p>java.util.concurrent.locks.ReentrantLock</p>\n<p>java.util.concurrent.locks.ReentrantReadWriteLock</p>\n<p>java.util.concurrent.atomic.Atomic*</p>\n<p>java.util.concurrent.Semaphore</p>\n<p>java.util.concurrent.CountDownLatch</p>\n<p>java.util.concurrent.CyclicBarrier</p>\n<p>java.util.concurrent.ConcurrentHashMap</p>\n<p>java.util.concurrent.Executors</p>\n</blockquote>\n<h3 id=\"1-3-2-_学习使用线程池，自己设计线程池需要注意什么\">1.3.2. 学习使用线程池，自己设计线程池需要注意什么</h3><h3 id=\"1-3-3-_锁\">1.3.3. 锁</h3><blockquote>\n<p>什么是锁，锁的种类有哪些，每种锁有什么特点，适用场景是什么</p>\n<p>在并发编程中锁的意义是什么</p>\n</blockquote>\n<h3 id=\"1-3-4-_synchronized的作用是什么，synchronized和lock\">1.3.4. synchronized的作用是什么，synchronized和lock</h3><h3 id=\"1-3-5-_sleep和wait\">1.3.5. sleep和wait</h3><h3 id=\"1-3-6-_wait和notify\">1.3.6. wait和notify</h3><h3 id=\"1-3-7-_写一个死锁的程序\">1.3.7. 写一个死锁的程序</h3><h3 id=\"1-3-8-_什么是守护线程，守护线程和非守护线程的区别以及用法\">1.3.8. 什么是守护线程，守护线程和非守护线程的区别以及用法</h3><h3 id=\"1-3-9-_volatile关键字的理解\">1.3.9. volatile关键字的理解</h3><blockquote>\n<p>C++ volatile关键字和Java volatile关键字</p>\n<p>happens-before语义<br>编译器指令重排和CPU指令重排<br><a href=\"http://en.wikipedia.org/wiki/Memory_ordering\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Memory_ordering</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Volatile_variable\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Volatile_variable</a></p>\n<p><a href=\"http://preshing.com/20130702/the-happens-before-relation/\" target=\"_blank\" rel=\"external\">http://preshing.com/20130702/the-happens-before-relation/</a></p>\n</blockquote>\n<h3 id=\"1-3-10-_以下代码是不是线程安全？为什么？如果为count加上volatile修饰是否能够做到线程安全？你觉得该怎么做是线程安全的？\">1.3.10. 以下代码是不是线程安全？为什么？如果为count加上volatile修饰是否能够做到线程安全？你觉得该怎么做是线程安全的？</h3><blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sample</span> </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> count = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">increment</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">count++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"1-3-11-_解释一下下面两段代码的差别\">1.3.11. 解释一下下面两段代码的差别</h3><blockquote>\n<p>代码1<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;<span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sample</span> </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> count = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">synchronized</span> <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">increment</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">count++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>代码2</p>\n<blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sample</span> </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> AtomicInteger count = <span class=\"keyword\">new</span> AtomicInteger(<span class=\"number\">0</span>);</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">increment</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">count.getAndIncrement();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"1-3-12-_参考资料\">1.3.12. 参考资料</h3><blockquote>\n<p><a href=\"http://book.douban.com/subject/10484692/\" target=\"_blank\" rel=\"external\">http://book.douban.com/subject/10484692/</a></p>\n<p><a href=\"http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html\" target=\"_blank\" rel=\"external\">http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html</a></p>\n<h1 id=\"二、_进阶篇\">二、 进阶篇</h1></blockquote>\n<h2 id=\"2-1-_Java底层知识\">2.1. Java底层知识</h2><h3 id=\"2-1-1-_学习了解字节码、class文件格式\">2.1.1. 学习了解字节码、class文件格式</h3><blockquote>\n<p><a href=\"http://en.wikipedia.org/wiki/Java_class_file\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Java_class_file</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Java_bytecode\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Java_bytecode</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings</a></p>\n<p><a href=\"http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/\" target=\"_blank\" rel=\"external\">http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/</a></p>\n<p><a href=\"http://asm.ow2.org/\" target=\"_blank\" rel=\"external\">http://asm.ow2.org/</a></p>\n</blockquote>\n<h3 id=\"2-1-2-_写一个程序要求实现javap的功能（手工完成，不借助ASM等工具）\">2.1.2. 写一个程序要求实现javap的功能（手工完成，不借助ASM等工具）</h3><blockquote>\n<p>如Java源代码：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">i += <span class=\"number\">1</span>;</span><br><span class=\"line\">i *= <span class=\"number\">1</span>;</span><br><span class=\"line\">System.out.println(i);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>编译后读取class文件输出以下代码：</p>\n<blockquote>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void main(java.lang.String[]);</span><br><span class=\"line\">Code:</span><br><span class=\"line\">Stack=2, Locals=2, Args_size=1</span><br><span class=\"line\">0: iconst_0</span><br><span class=\"line\">1: istore_1</span><br><span class=\"line\">2: iinc 1, 1</span><br><span class=\"line\">5: iload_1</span><br><span class=\"line\">6: iconst_1</span><br><span class=\"line\">7: imul</span><br><span class=\"line\">8: istore_1</span><br><span class=\"line\">9: getstatic #2; //Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class=\"line\">12: iload_1</span><br><span class=\"line\">13: invokevirtual #3; //Method java/io/PrintStream.println:(I)V</span><br><span class=\"line\">16: return</span><br><span class=\"line\">LineNumberTable:</span><br><span class=\"line\">line 4: 0</span><br><span class=\"line\">line 5: 2</span><br><span class=\"line\">line 6: 5</span><br><span class=\"line\">line 7: 9</span><br><span class=\"line\">line 8: 16</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"2-1-3-_CPU缓存，L1，L2，L3和伪共享\">2.1.3. CPU缓存，L1，L2，L3和伪共享</h3><blockquote>\n<p><a href=\"http://duartes.org/gustavo/blog/post/intel-cpu-caches/\" target=\"_blank\" rel=\"external\">http://duartes.org/gustavo/blog/post/intel-cpu-caches/</a></p>\n<p><a href=\"http://mechanical-sympathy.blogspot.com/2011/07/false-sharing.html\" target=\"_blank\" rel=\"external\">http://mechanical-sympathy.blogspot.com/2011/07/false-sharing.html</a></p>\n<h3 id=\"2-1-4-_什么是尾递归\">2.1.4. 什么是尾递归</h3><h3 id=\"2-1-5-_熟悉位运算\">2.1.5. 熟悉位运算</h3><p>用位运算实现加、减、乘、除、取余</p>\n<h3 id=\"2-1-6-_参考资料\">2.1.6. 参考资料</h3><p><a href=\"http://book.douban.com/subject/1138768/\" target=\"_blank\" rel=\"external\">http://book.douban.com/subject/1138768/</a></p>\n<p><a href=\"http://book.douban.com/subject/6522893/\" target=\"_blank\" rel=\"external\">http://book.douban.com/subject/6522893/</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Java_class_file\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Java_class_file</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Java_bytecode\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Java_bytecode</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings</a></p>\n<h2 id=\"2-2-_设计模式\">2.2. 设计模式</h2></blockquote>\n<h3 id=\"2-2-1-_实现AOP\">2.2.1. 实现AOP</h3><blockquote>\n<h4 id=\"CGLIB和InvocationHandler的区别\">CGLIB和InvocationHandler的区别</h4><blockquote>\n<p><a href=\"http://cglib.sourceforge.net/\" target=\"_blank\" rel=\"external\">http://cglib.sourceforge.net/</a></p>\n</blockquote>\n<h4 id=\"动态代理模式\">动态代理模式</h4><h4 id=\"Javassist实现AOP\">Javassist实现AOP</h4><blockquote>\n<p><a href=\"http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/\" target=\"_blank\" rel=\"external\">http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/</a></p>\n<h4 id=\"ASM实现AOP\">ASM实现AOP</h4><p><a href=\"http://asm.ow2.org/\" target=\"_blank\" rel=\"external\">http://asm.ow2.org/</a></p>\n</blockquote>\n</blockquote>\n<h3 id=\"2-2-2-_使用模板方法设计模式和策略设计模式实现IOC\">2.2.2. 使用模板方法设计模式和策略设计模式实现IOC</h3><h3 id=\"2-2-3-_不用synchronized和lock，实现线程安全的单例模式\">2.2.3. 不用synchronized和lock，实现线程安全的单例模式</h3><h3 id=\"2-2-4-_nio和reactor设计模式\">2.2.4. nio和reactor设计模式</h3><h3 id=\"2-2-5-_参考资料\">2.2.5. 参考资料</h3><blockquote>\n<p><a href=\"http://asm.ow2.org/\" target=\"_blank\" rel=\"external\">http://asm.ow2.org/</a></p>\n<p><a href=\"http://cglib.sourceforge.net/\" target=\"_blank\" rel=\"external\">http://cglib.sourceforge.net/</a></p>\n<p><a href=\"http://www.javassist.org/\" target=\"_blank\" rel=\"external\">http://www.javassist.org/</a></p>\n</blockquote>\n<h2 id=\"2-3-_网络编程知识\">2.3. 网络编程知识</h2><h3 id=\"2-3-1-_Java_RMI，Socket，HttpClient\">2.3.1. Java RMI，Socket，HttpClient</h3><h3 id=\"2-3-2-_用Java写一个简单的静态文件的HTTP服务器\">2.3.2. 用Java写一个简单的静态文件的HTTP服务器</h3><blockquote>\n<p>实现客户端缓存功能，支持返回304</p>\n<p>实现可并发下载一个文件</p>\n<p>使用线程池处理客户端请求</p>\n<p>使用nio处理客户端请求</p>\n<p>支持简单的rewrite规则</p>\n<p>上述功能在实现的时候需要满足“开闭原则”</p>\n<h3 id=\"2-3-3-_了解nginx和apache服务器的特性并搭建一个对应的服务器\">2.3.3. 了解nginx和apache服务器的特性并搭建一个对应的服务器</h3><p><a href=\"http://nginx.org/\" target=\"_blank\" rel=\"external\">http://nginx.org/</a></p>\n<p><a href=\"http://httpd.apache.org/\" target=\"_blank\" rel=\"external\">http://httpd.apache.org/</a></p>\n<h3 id=\"2-3-4-_用Java实现FTP、SMTP协议\">2.3.4. 用Java实现FTP、SMTP协议</h3><h3 id=\"2-3-5-_什么是CDN？如果实现？DNS起到什么作用？\">2.3.5. 什么是CDN？如果实现？DNS起到什么作用？</h3><p>搭建一个DNS服务器</p>\n<p>搭建一个 Squid 或 Apache Traffic Server 服务器</p>\n<p><a href=\"http://www.squid-cache.org/\" target=\"_blank\" rel=\"external\">http://www.squid-cache.org/</a></p>\n<p><a href=\"http://trafficserver.apache.org/\" target=\"_blank\" rel=\"external\">http://trafficserver.apache.org/</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Domain_Name_System\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Domain_Name_System</a></p>\n<h3 id=\"2-3-6-_参考资料\">2.3.6. 参考资料</h3><p><a href=\"http://www.ietf.org/rfc/rfc2616.txt\" target=\"_blank\" rel=\"external\">http://www.ietf.org/rfc/rfc2616.txt</a></p>\n<p><a href=\"http://tools.ietf.org/rfc/rfc5321.txt\" target=\"_blank\" rel=\"external\">http://tools.ietf.org/rfc/rfc5321.txt</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Open/closed_principle\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Open/closed_principle</a></p>\n<h3 id=\"2-4-_框架知识\">2.4. 框架知识</h3><p>spring，spring mvc，阅读主要源码</p>\n<p>ibatis，阅读主要源码</p>\n<p>用spring和ibatis搭建java server</p>\n<h3 id=\"2-5-_应用服务器知识\">2.5. 应用服务器知识</h3><p>熟悉使用jboss，<a href=\"https://www.jboss.org/overview/\" target=\"_blank\" rel=\"external\">https://www.jboss.org/overview/</a></p>\n<p>熟悉使用tomcat，<a href=\"http://tomcat.apache.org/\" target=\"_blank\" rel=\"external\">http://tomcat.apache.org/</a></p>\n<p>熟悉使用jetty，<a href=\"http://www.eclipse.org/jetty/\" target=\"_blank\" rel=\"external\">http://www.eclipse.org/jetty/</a></p>\n<h1 id=\"三、_高级篇\">三、 高级篇</h1></blockquote>\n<h2 id=\"3-1-_编译原理知识\">3.1. 编译原理知识</h2><h3 id=\"3-1-1-_用Java实现以下表达式解析并返回结果（语法和Oracle中的select_sysdate-1_from_dual类似）\">3.1.1. 用Java实现以下表达式解析并返回结果（语法和Oracle中的select sysdate-1 from dual类似）</h3><blockquote>\n<p>sysdate<br>sysdate - 1<br>sysdate - 1/24<br>sysdate - 1/(12*2)</p>\n<h3 id=\"3-1-2-_实现对一个List通过DSL筛选\">3.1.2. 实现对一个List通过DSL筛选</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;QList&lt;Map&lt;String, Object&gt;&gt; mapList = <span class=\"keyword\">new</span> QList&lt;Map&lt;String, Object&gt;&gt;;</span><br><span class=\"line\">mapList.add(&#123;<span class=\"string\">\"name\"</span>: <span class=\"string\">\"hatter test\"</span>&#125;);</span><br><span class=\"line\">mapList.add(&#123;<span class=\"string\">\"id\"</span>: -<span class=\"number\">1</span>,<span class=\"string\">\"name\"</span>: <span class=\"string\">\"hatter test\"</span>&#125;);</span><br><span class=\"line\">mapList.add(&#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">0</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"hatter test\"</span>&#125;);</span><br><span class=\"line\">mapList.add(&#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">1</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"test test\"</span>&#125;);</span><br><span class=\"line\">mapList.add(&#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">2</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"hatter test\"</span>&#125;);</span><br><span class=\"line\">mapList.add(&#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">3</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"test hatter\"</span>&#125;);</span><br><span class=\"line\">mapList.query(<span class=\"string\">\"id is not null and id &gt; 0 and name like '%hatter%'\"</span>);</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>要求返回列表中匹配的对象，即最后两个对象；</p>\n<h3 id=\"3-1-3-_用Java实现以下程序（语法和变量作用域处理都和JavaScript类似）：\">3.1.3. 用Java实现以下程序（语法和变量作用域处理都和JavaScript类似）：</h3><blockquote>\n<p>代码：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> c = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">3</span>;</span><br><span class=\"line\">println(a);</span><br><span class=\"line\">println(b);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">c();</span><br><span class=\"line\">println(a);</span><br><span class=\"line\">println(b);</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>输出：</p>\n<blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"3-1-4-_参考资料\">3.1.4. 参考资料</h3><blockquote>\n<p><a href=\"http://en.wikipedia.org/wiki/Abstract_syntax_tree\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Abstract_syntax_tree</a></p>\n<p><a href=\"https://javacc.java.net/\" target=\"_blank\" rel=\"external\">https://javacc.java.net/</a></p>\n<p><a href=\"http://www.antlr.org/\" target=\"_blank\" rel=\"external\">http://www.antlr.org/</a></p>\n<h2 id=\"3-2-_操作系统知识\">3.2. 操作系统知识</h2><p>Ubuntu</p>\n<p>Centos</p>\n<p>使用linux，熟悉shell脚本</p>\n<h2 id=\"3-3-_数据存储知识\">3.3. 数据存储知识</h2></blockquote>\n<h3 id=\"3-3-1-_关系型数据库\">3.3.1. 关系型数据库</h3><blockquote>\n<p>MySQL</p>\n<p>如何看执行计划</p>\n<p>如何搭建MySQL主备</p>\n<p>binlog是什么</p>\n<p>Derby，H2，PostgreSQL</p>\n<p>SQLite</p>\n<h3 id=\"3-3-2-_NoSQL\">3.3.2. NoSQL</h3><p>Cache</p>\n<p>Redis</p>\n<p>Memcached</p>\n<p>Leveldb</p>\n<p>Bigtable</p>\n<p>HBase</p>\n<p>Cassandra</p>\n<p>Mongodb</p>\n<p>图数据库</p>\n<p>neo4j</p>\n<h3 id=\"3-3-3-_参考资料\">3.3.3. 参考资料</h3><p><a href=\"http://db-engines.com/en/ranking\" target=\"_blank\" rel=\"external\">http://db-engines.com/en/ranking</a></p>\n<p><a href=\"http://redis.io/\" target=\"_blank\" rel=\"external\">http://redis.io/</a></p>\n<p><a href=\"https://code.google.com/p/leveldb/\" target=\"_blank\" rel=\"external\">https://code.google.com/p/leveldb/</a></p>\n<p><a href=\"http://hbase.apache.org/\" target=\"_blank\" rel=\"external\">http://hbase.apache.org/</a></p>\n<p><a href=\"http://cassandra.apache.org/\" target=\"_blank\" rel=\"external\">http://cassandra.apache.org/</a></p>\n<p><a href=\"http://www.mongodb.org/\" target=\"_blank\" rel=\"external\">http://www.mongodb.org/</a></p>\n<p><a href=\"http://www.neo4j.org/\" target=\"_blank\" rel=\"external\">http://www.neo4j.org/</a></p>\n<h2 id=\"3-4-_大数据知识\">3.4. 大数据知识</h2></blockquote>\n<h3 id=\"3-4-1-_Zookeeper，在linux上部署zk\">3.4.1. Zookeeper，在linux上部署zk</h3><h3 id=\"3-4-2-_Solr，Lucene，ElasticSearch\">3.4.2. Solr，Lucene，ElasticSearch</h3><blockquote>\n<p>在linux上部署solr，solrcloud，，新增、删除、查询索引</p>\n<h3 id=\"3-4-3-_Storm，流式计算，了解Spark，S4\">3.4.3. Storm，流式计算，了解Spark，S4</h3><p>在linux上部署storm，用zookeeper做协调，运行storm hello world，local和remote模式运行调试storm topology。</p>\n<h3 id=\"3-4-4-_Hadoop，离线计算\">3.4.4. Hadoop，离线计算</h3><p>Hdfs：部署NameNode，SecondaryNameNode，DataNode，上传文件、打开文件、更改文件、删除文件</p>\n<p>MapReduce：部署JobTracker，TaskTracker，编写mr job</p>\n<p>Hive：部署hive，书写hive sql，得到结果</p>\n<p>Presto：类hive，不过比hive快，非常值得学习</p>\n<h3 id=\"3-4-5-_分布式日志收集flume，kafka，logstash\">3.4.5. 分布式日志收集flume，kafka，logstash</h3><h3 id=\"3-4-6-_数据挖掘，mahout\">3.4.6. 数据挖掘，mahout</h3><h3 id=\"3-4-7-_参考资料\">3.4.7. 参考资料</h3><p><a href=\"http://zookeeper.apache.org/\" target=\"_blank\" rel=\"external\">http://zookeeper.apache.org/</a></p>\n<p><a href=\"https://lucene.apache.org/solr/\" target=\"_blank\" rel=\"external\">https://lucene.apache.org/solr/</a></p>\n<p><a href=\"https://github.com/nathanmarz/storm/wiki\" target=\"_blank\" rel=\"external\">https://github.com/nathanmarz/storm/wiki</a></p>\n<p><a href=\"http://hadoop.apache.org/\" target=\"_blank\" rel=\"external\">http://hadoop.apache.org/</a></p>\n<p><a href=\"http://prestodb.io/\" target=\"_blank\" rel=\"external\">http://prestodb.io/</a></p>\n<p><a href=\"http://flume.apache.org/，http://logstash.net/，http://kafka.apache.org/\" target=\"_blank\" rel=\"external\">http://flume.apache.org/，http://logstash.net/，http://kafka.apache.org/</a></p>\n<p><a href=\"http://mahout.apache.org/\" target=\"_blank\" rel=\"external\">http://mahout.apache.org/</a></p>\n<h2 id=\"3-5-_网络安全知识\">3.5. 网络安全知识</h2></blockquote>\n<h3 id=\"3-5-1-_什么是DES、AES\">3.5.1. 什么是DES、AES</h3><h3 id=\"3-5-2-_什么是RSA、DSA\">3.5.2. 什么是RSA、DSA</h3><h3 id=\"3-5-3-_什么是MD5，SHA1\">3.5.3. 什么是MD5，SHA1</h3><h3 id=\"3-5-4-_什么是SSL、TLS，为什么HTTPS相对比较安全\">3.5.4. 什么是SSL、TLS，为什么HTTPS相对比较安全</h3><h3 id=\"3-5-5-_什么是中间人攻击、如果避免中间人攻击\">3.5.5. 什么是中间人攻击、如果避免中间人攻击</h3><h3 id=\"3-5-6-_什么是DOS、DDOS、CC攻击\">3.5.6. 什么是DOS、DDOS、CC攻击</h3><h3 id=\"3-5-7-_什么是CSRF攻击\">3.5.7. 什么是CSRF攻击</h3><h3 id=\"3-5-8-_什么是CSS攻击\">3.5.8. 什么是CSS攻击</h3><h3 id=\"3-5-9-_什么是SQL注入攻击\">3.5.9. 什么是SQL注入攻击</h3><h3 id=\"3-5-10-_什么是Hash碰撞拒绝服务攻击\">3.5.10. 什么是Hash碰撞拒绝服务攻击</h3><h3 id=\"3-5-11-_了解并学习下面几种增强安全的技术\">3.5.11. 了解并学习下面几种增强安全的技术</h3><blockquote>\n<p><a href=\"http://www.openauthentication.org/\" target=\"_blank\" rel=\"external\">http://www.openauthentication.org/</a></p>\n<p>HOTP <a href=\"http://www.ietf.org/rfc/rfc4226.txt\" target=\"_blank\" rel=\"external\">http://www.ietf.org/rfc/rfc4226.txt</a></p>\n<p>TOTP <a href=\"http://tools.ietf.org/rfc/rfc6238.txt\" target=\"_blank\" rel=\"external\">http://tools.ietf.org/rfc/rfc6238.txt</a></p>\n<p>OCRA <a href=\"http://tools.ietf.org/rfc/rfc6287.txt\" target=\"_blank\" rel=\"external\">http://tools.ietf.org/rfc/rfc6287.txt</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Salt_(cryptography\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Salt_(cryptography</a>)</p>\n<h3 id=\"3-5-12-_用openssl签一个证书部署到apache或nginx\">3.5.12. 用openssl签一个证书部署到apache或nginx</h3><h3 id=\"3-5-13-_参考资料\">3.5.13. 参考资料</h3><p><a href=\"http://en.wikipedia.org/wiki/Cryptographic_hash_function\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Cryptographic_hash_function</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Block_cipher\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Block_cipher</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Public-key_cryptography\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Public-key_cryptography</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Transport_Layer_Security\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Transport_Layer_Security</a></p>\n<p><a href=\"http://www.openssl.org/\" target=\"_blank\" rel=\"external\">http://www.openssl.org/</a></p>\n<p><a href=\"https://code.google.com/p/google-authenticator/\" target=\"_blank\" rel=\"external\">https://code.google.com/p/google-authenticator/</a></p>\n<h1 id=\"四、_扩展篇\">四、 扩展篇</h1></blockquote>\n<h2 id=\"4-1-_相关知识\">4.1. 相关知识</h2><h3 id=\"4-1-1-_云计算，分布式，高可用，可扩展\">4.1.1. 云计算，分布式，高可用，可扩展</h3><h3 id=\"4-1-2-_虚拟化\">4.1.2. 虚拟化</h3><blockquote>\n<p><a href=\"https://linuxcontainers.org/\" target=\"_blank\" rel=\"external\">https://linuxcontainers.org/</a></p>\n<p><a href=\"http://www.linux-kvm.org/page/Main_Page\" target=\"_blank\" rel=\"external\">http://www.linux-kvm.org/page/Main_Page</a></p>\n<p><a href=\"http://www.xenproject.org/\" target=\"_blank\" rel=\"external\">http://www.xenproject.org/</a></p>\n<p><a href=\"https://www.docker.io/\" target=\"_blank\" rel=\"external\">https://www.docker.io/</a></p>\n<h3 id=\"4-1-3-_监控\">4.1.3. 监控</h3><p><a href=\"http://www.nagios.org/\" target=\"_blank\" rel=\"external\">http://www.nagios.org/</a></p>\n<p><a href=\"http://ganglia.info/\" target=\"_blank\" rel=\"external\">http://ganglia.info/</a></p>\n<h3 id=\"4-1-4-_负载均衡\">4.1.4. 负载均衡</h3><p><a href=\"http://www.linuxvirtualserver.org/\" target=\"_blank\" rel=\"external\">http://www.linuxvirtualserver.org/</a></p>\n<h3 id=\"4-1-5-_学习使用git\">4.1.5. 学习使用git</h3><p><a href=\"https://github.com/\" target=\"_blank\" rel=\"external\">https://github.com/</a></p>\n<p><a href=\"https://git.oschina.net/\" target=\"_blank\" rel=\"external\">https://git.oschina.net/</a></p>\n<h3 id=\"4-1-6-_学习使用maven\">4.1.6. 学习使用maven</h3><p><a href=\"http://maven.apache.org/\" target=\"_blank\" rel=\"external\">http://maven.apache.org/</a></p>\n<h3 id=\"4-1-7-_学习使用gradle\">4.1.7. 学习使用gradle</h3><p><a href=\"http://www.gradle.org/\" target=\"_blank\" rel=\"external\">http://www.gradle.org/</a></p>\n<h3 id=\"4-1-8-_学习一个小语种语言\">4.1.8. 学习一个小语种语言</h3><p>Groovy</p>\n<p>Scala</p>\n<p>LISP, Common LISP, Schema, Clojure</p>\n<p>R</p>\n<p>Julia</p>\n<p>Lua</p>\n<p>Ruby</p>\n<h3 id=\"4-1-9-_尝试了解编码的本质\">4.1.9. 尝试了解编码的本质</h3><p>了解以下概念<br>ASCII, ISO-8859-1</p>\n<p>GB2312, GBK, GB18030</p>\n<p>Unicode, UTF-8</p>\n<p>不使用 String.getBytes() 等其他工具类/函数完成下面功能</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">String str = <span class=\"string\">\"Hello, 我们是中国人。\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">byte</span>[] utf8Bytes = toUTF8Bytes(str);</span><br><span class=\"line\">FileOutputStream fos = <span class=\"keyword\">new</span> FileOutputStream(<span class=\"string\">\"f.txt\"</span>);</span><br><span class=\"line\">fos.write(utf8Bytes);</span><br><span class=\"line\">fos.close();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">byte</span>[] toUTF8Bytes(String str) &#123;</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">null</span>; <span class=\"comment\">// TODO</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n<p>想一下上面的程序能不能写一个转GBK的？</p>\n<p>写个程序自动判断一个文件是哪种编码</p>\n<h3 id=\"4-1-10-_尝试了解时间的本质\">4.1.10. 尝试了解时间的本质</h3><p>时区 &amp; 冬令时、夏令时</p>\n<p><a href=\"http://en.wikipedia.org/wiki/Time_zone\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Time_zone</a></p>\n<p>ftp://ftp.iana.org/tz/data/asia</p>\n<p><a href=\"http://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9C%8B%E6%99%82%E5%8D%80\" target=\"_blank\" rel=\"external\">http://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9C%8B%E6%99%82%E5%8D%80</a></p>\n<p>闰年</p>\n<p><a href=\"http://en.wikipedia.org/wiki/Leap_year\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Leap_year</a></p>\n<p>闰秒</p>\n<p>ftp://ftp.iana.org/tz/data/leapseconds</p>\n<p>System.currentTimeMillis() 返回的时间是什么</p>\n<h3 id=\"4-1-11-_参考资料\">4.1.11. 参考资料</h3><p><a href=\"http://git-scm.com/\" target=\"_blank\" rel=\"external\">http://git-scm.com/</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/UTF-8\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/UTF-8</a></p>\n<p><a href=\"http://www.iana.org/time-zones\" target=\"_blank\" rel=\"external\">http://www.iana.org/time-zones</a></p>\n<h2 id=\"4-2-_扩展学习\">4.2. 扩展学习</h2><h3 id=\"4-2-1-_JavaScript知识\">4.2.1. JavaScript知识</h3><h3 id=\"4-2-1-1-_什么是prototype\">4.2.1.1. 什么是prototype</h3><p>修改代码，使程序输出“1 3 5”：</p>\n<p><a href=\"http://jsfiddle.net/Ts7Fk/\" target=\"_blank\" rel=\"external\">http://jsfiddle.net/Ts7Fk/</a></p>\n<h3 id=\"4-2-1-2-_什么是闭包\">4.2.1.2. 什么是闭包</h3><p>看一下这段代码，并解释一下为什么按Button1时没有alert出“This is button: 1”，如何修改：</p>\n<p><a href=\"http://jsfiddle.net/FDPj3/1/\" target=\"_blank\" rel=\"external\">http://jsfiddle.net/FDPj3/1/</a></p>\n<h3 id=\"4-2-1-3-_了解并学习一个JS框架\">4.2.1.3. 了解并学习一个JS框架</h3><p>jQuery</p>\n<p>ExtJS</p>\n<p>ArgularJS</p>\n<h3 id=\"4-2-1-4-_写一个Greasemonkey插件\">4.2.1.4. 写一个Greasemonkey插件</h3><p><a href=\"http://en.wikipedia.org/wiki/Greasemonkey\" target=\"_blank\" rel=\"external\">http://en.wikipedia.org/wiki/Greasemonkey</a></p>\n<h3 id=\"4-2-1-5-_学习node-js\">4.2.1.5. 学习node.js</h3><p><a href=\"http://nodejs.org/\" target=\"_blank\" rel=\"external\">http://nodejs.org/</a></p>\n<h3 id=\"4-2-2-_学习html5\">4.2.2. 学习html5</h3><p>ArgularJS，<a href=\"https://docs.angularjs.org/api\" target=\"_blank\" rel=\"external\">https://docs.angularjs.org/api</a></p>\n<h3 id=\"4-2-3-_参考资料\">4.2.3. 参考资料</h3><p><a href=\"http://www.ecmascript.org/\" target=\"_blank\" rel=\"external\">http://www.ecmascript.org/</a></p>\n<p><a href=\"http://jsfiddle.net/\" target=\"_blank\" rel=\"external\">http://jsfiddle.net/</a></p>\n<p><a href=\"http://jsbin.com/\" target=\"_blank\" rel=\"external\">http://jsbin.com/</a></p>\n<p><a href=\"http://runjs.cn/\" target=\"_blank\" rel=\"external\">http://runjs.cn/</a></p>\n<p><a href=\"http://userscripts.org/\" target=\"_blank\" rel=\"external\">http://userscripts.org/</a></p>\n<h1 id=\"五、_推荐书籍\">五、 推荐书籍</h1><p>《深入Java虚拟机》</p>\n<p>《深入理解Java虚拟机》</p>\n<p>《Effective Java》</p>\n<p>《七周七语言》</p>\n<p>《七周七数据》</p>\n<p>《Hadoop技术内幕》</p>\n<p>《Hbase In Action》</p>\n<p>《Mahout In Action》</p>\n<p>《这就是搜索引擎》</p>\n<p>《Solr In Action》</p>\n<p>《深入分析Java Web技术内幕》</p>\n<p>《大型网站技术架构》</p>\n<p>《高性能MySQL》</p>\n<p>《算法导论》</p>\n<p>《计算机程序设计艺术》</p>\n<p>《代码大全》</p>\n<p>《JavaScript权威指南》</p>\n</blockquote>\n","excerpt":"","more":"<blockquote>\n<p>来自：HollisChuang’s Blog</p>\n<p>链接：<a href=\"http://www.hollischuang.com/archives/489\">http://www.hollischuang.com/archives/489</a></p>\n</blockquote>\n<h1 id=\"一、基础篇\">一、基础篇</h1><h2 id=\"1-1_JVM\">1.1 JVM</h2><h3 id=\"1-1-1-_Java内存模型，Java内存管理，Java堆和栈，垃圾回收\">1.1.1. Java内存模型，Java内存管理，Java堆和栈，垃圾回收</h3><blockquote>\n<p><a href=\"http://www.jcp.org/en/jsr/detail?id=133\">http://www.jcp.org/en/jsr/detail?id=133</a></p>\n<p><a href=\"http://ifeve.com/jmm-faq/\">http://ifeve.com/jmm-faq/</a></p>\n</blockquote>\n<h3 id=\"1-1-2-_了解JVM各种参数及调优\">1.1.2. 了解JVM各种参数及调优</h3><h3 id=\"1-1-3-_学习使用Java工具\">1.1.3. 学习使用Java工具</h3><blockquote>\n<p>jps, jstack, jmap, jconsole, jinfo, jhat, javap, …</p>\n<p><a href=\"http://kenai.com/projects/btrace\">http://kenai.com/projects/btrace</a></p>\n<p><a href=\"http://www.crashub.org/\">http://www.crashub.org/</a></p>\n<p><a href=\"https://github.com/taobao/TProfiler\">https://github.com/taobao/TProfiler</a></p>\n<p><a href=\"https://github.com/CSUG/HouseMD\">https://github.com/CSUG/HouseMD</a></p>\n<p><a href=\"http://wiki.cyclopsgroup.org/jmxterm\">http://wiki.cyclopsgroup.org/jmxterm</a></p>\n<p><a href=\"https://github.com/jlusdy/TBJMap\">https://github.com/jlusdy/TBJMap</a></p>\n</blockquote>\n<h3 id=\"1-1-4-_学习Java诊断工具\">1.1.4. 学习Java诊断工具</h3><blockquote>\n<p><a href=\"http://www.eclipse.org/mat/\">http://www.eclipse.org/mat/</a></p>\n<p><a href=\"http://visualvm.java.net/oqlhelp.html\">http://visualvm.java.net/oqlhelp.html</a></p>\n</blockquote>\n<h3 id=\"1-1-5-_自己编写各种outofmemory，stackoverflow程序\">1.1.5. 自己编写各种outofmemory，stackoverflow程序</h3><blockquote>\n<p>HeapOutOfMemory</p>\n<p>Young OutOfMemory</p>\n<p>MethodArea OutOfMemory</p>\n<p>ConstantPool OutOfMemory</p>\n<p>DirectMemory OutOfMemory</p>\n<p>Stack OutOfMemory</p>\n<p>Stack OverFlow</p>\n</blockquote>\n<h3 id=\"1-1-6-_使用工具尝试解决以下问题，并写下总结\">1.1.6. 使用工具尝试解决以下问题，并写下总结</h3><blockquote>\n<p>当一个Java程序响应很慢时如何查找问题</p>\n<p>当一个Java程序频繁FullGC时如何解决问题，如何查看垃圾回收日志</p>\n<p>当一个Java应用发生OutOfMemory时该如何解决，年轻代、年老代、永久代解决办法不同，导致原因也不同</p>\n</blockquote>\n<h3 id=\"1-1-7-_参考资料\">1.1.7. 参考资料</h3><blockquote>\n<p><a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/\">http://docs.oracle.com/javase/specs/jvms/se7/html/</a></p>\n<p><a href=\"http://www.cs.umd.edu/~pugh/java/memoryModel/\">http://www.cs.umd.edu/~pugh/java/memoryModel/</a></p>\n<p><a href=\"http://gee.cs.oswego.edu/dl/jmm/cookbook.html\">http://gee.cs.oswego.edu/dl/jmm/cookbook.html</a></p>\n</blockquote>\n<h2 id=\"1-2-_Java基础知识\">1.2. Java基础知识</h2><h3 id=\"1-2-1-_阅读源代码\">1.2.1. 阅读源代码</h3><blockquote>\n<p>java.lang.String</p>\n<p>java.lang.Integer</p>\n<p>java.lang.Long</p>\n<p>java.lang.Enum</p>\n<p>java.math.BigDecimal</p>\n<p>java.lang.ThreadLocal</p>\n<p>java.lang.ClassLoader &amp; java.net.URLClassLoader</p>\n<p>java.util.ArrayList &amp; java.util.LinkedList</p>\n<p>java.util.HashMap &amp; java.util.LinkedHashMap &amp; java.util.TreeMap</p>\n<p>java.util.HashSet &amp; java.util.LinkedHashSet &amp; java.util.TreeSet</p>\n</blockquote>\n<h3 id=\"1-2-2-_熟悉Java中各种变量类型\">1.2.2. 熟悉Java中各种变量类型</h3><h3 id=\"1-2-3-_熟悉Java_String的使用，熟悉String的各种函数\">1.2.3. 熟悉Java String的使用，熟悉String的各种函数</h3><h3 id=\"1-2-4-_熟悉Java中各种关键字\">1.2.4. 熟悉Java中各种关键字</h3><h3 id=\"1-2-5-_学会使用List，Map，Stack，Queue，Set\">1.2.5. 学会使用List，Map，Stack，Queue，Set</h3><blockquote>\n<p>上述数据结构的遍历</p>\n<p>上述数据结构的使用场景</p>\n<p>Java实现对Array/List排序</p>\n<p>java.uti.Arrays.sort()</p>\n<p>java.util.Collections.sort()</p>\n<p>Java实现对List去重</p>\n<p>Java实现对List去重，并且需要保留数据原始的出现顺序</p>\n<p>Java实现最近最少使用cache，用LinkedHashMap</p>\n</blockquote>\n<h3 id=\"1-2-6-_Java_IO&amp;Java_NIO，并学会使用\">1.2.6. Java IO&amp;Java NIO，并学会使用</h3><blockquote>\n<p>java.io.*</p>\n<p>java.nio.*</p>\n<p>nio和reactor设计模式</p>\n<p>文件编码，字符集</p>\n</blockquote>\n<h3 id=\"1-2-7-_Java反射与javassist\">1.2.7. Java反射与javassist</h3><blockquote>\n<p>反射与工厂模式</p>\n<p>java.lang.reflect.*</p>\n</blockquote>\n<h3 id=\"1-2-8-_Java序列化\">1.2.8. Java序列化</h3><blockquote>\n<p>java.io. Serializable</p>\n<p>什么是序列化，为什么序列化</p>\n<p>序列化与单例模式</p>\n<p>google序列化protobuf</p>\n</blockquote>\n<h3 id=\"1-2-9-_虚引用，弱引用，软引用\">1.2.9. 虚引用，弱引用，软引用</h3><blockquote>\n<p>java.lang.ref.*</p>\n<p>实验这些引用的回收</p>\n</blockquote>\n<h3 id=\"1-2-10-_熟悉Java系统属性\">1.2.10. 熟悉Java系统属性</h3><blockquote>\n<p>java.util.Properties</p>\n</blockquote>\n<h3 id=\"1-2-11-_熟悉Annotation用法\">1.2.11. 熟悉Annotation用法</h3><blockquote>\n<p>java.lang.annotation.*</p>\n</blockquote>\n<h3 id=\"1-2-12-_JMS\">1.2.12. JMS</h3><blockquote>\n<p>javax.jms.*</p>\n</blockquote>\n<h3 id=\"1-2-13-_JMX\">1.2.13. JMX</h3><blockquote>\n<p>java.lang.management.*</p>\n<p>javax.management.*</p>\n</blockquote>\n<h3 id=\"1-2-14-_泛型和继承，泛型和擦除\">1.2.14. 泛型和继承，泛型和擦除</h3><h3 id=\"1-2-15-_自动拆箱装箱与字节码\">1.2.15. 自动拆箱装箱与字节码</h3><h3 id=\"1-2-16-_实现Callback\">1.2.16. 实现Callback</h3><h3 id=\"1-2-17-_java-lang-Void类使用\">1.2.17. java.lang.Void类使用</h3><h3 id=\"1-2-18-_Java_Agent，premain函数\">1.2.18. Java Agent，premain函数</h3><blockquote>\n<p>java.lang.instrument</p>\n</blockquote>\n<h3 id=\"1-2-19-_单元测试\">1.2.19. 单元测试</h3><blockquote>\n<p>Junit，<a href=\"http://junit.org/\">http://junit.org/</a></p>\n<p>Jmockit，<a href=\"https://code.google.com/p/jmockit/\">https://code.google.com/p/jmockit/</a></p>\n<p>djUnit，<a href=\"http://works.dgic.co.jp/djunit/\">http://works.dgic.co.jp/djunit/</a></p>\n</blockquote>\n<h3 id=\"1-2-20-_Java实现通过正则表达式提取一段文本中的电子邮件，并将@替换为#输出\">1.2.20. Java实现通过正则表达式提取一段文本中的电子邮件，并将@替换为#输出</h3><blockquote>\n<p>java.lang.util.regex.*</p>\n</blockquote>\n<h3 id=\"1-2-21-_学习使用常用的Java工具库\">1.2.21. 学习使用常用的Java工具库</h3><blockquote>\n<p>commons.lang, commons.*…</p>\n<p>guava-libraries</p>\n<p>netty</p>\n</blockquote>\n<h3 id=\"1-2-22-_什么是API&amp;SPI\">1.2.22. 什么是API&amp;SPI</h3><blockquote>\n<p><a href=\"http://en.wikipedia.org/wiki/Application_programming_interface\">http://en.wikipedia.org/wiki/Application_programming_interface</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Service_provider_interface\">http://en.wikipedia.org/wiki/Service_provider_interface</a></p>\n</blockquote>\n<h3 id=\"1-2-23-_参考资料\">1.2.23. 参考资料</h3><blockquote>\n<p>JDK src.zip 源代码</p>\n<p><a href=\"http://openjdk.java.net/\">http://openjdk.java.net/</a></p>\n<p><a href=\"http://commons.apache.org/\">http://commons.apache.org/</a></p>\n<p><a href=\"https://code.google.com/p/guava-libraries/\">https://code.google.com/p/guava-libraries/</a></p>\n<p><a href=\"http://netty.io/\">http://netty.io/</a></p>\n<p><a href=\"http://stackoverflow.com/questions/2954372/difference-between-spi-and-api\">http://stackoverflow.com/questions/2954372/difference-between-spi-and-api</a></p>\n<p><a href=\"http://stackoverflow.com/questions/11404230/how-to-implement-the-api-spi-pattern-in-java\">http://stackoverflow.com/questions/11404230/how-to-implement-the-api-spi-pattern-in-java</a></p>\n</blockquote>\n<h2 id=\"1-3-_Java并发编程\">1.3. Java并发编程</h2><h3 id=\"1-3-1-_阅读源代码，并学会使用\">1.3.1. 阅读源代码，并学会使用</h3><blockquote>\n<p>java.lang.Thread</p>\n<p>java.lang.Runnable</p>\n<p>java.util.concurrent.Callable</p>\n<p>java.util.concurrent.locks.ReentrantLock</p>\n<p>java.util.concurrent.locks.ReentrantReadWriteLock</p>\n<p>java.util.concurrent.atomic.Atomic*</p>\n<p>java.util.concurrent.Semaphore</p>\n<p>java.util.concurrent.CountDownLatch</p>\n<p>java.util.concurrent.CyclicBarrier</p>\n<p>java.util.concurrent.ConcurrentHashMap</p>\n<p>java.util.concurrent.Executors</p>\n</blockquote>\n<h3 id=\"1-3-2-_学习使用线程池，自己设计线程池需要注意什么\">1.3.2. 学习使用线程池，自己设计线程池需要注意什么</h3><h3 id=\"1-3-3-_锁\">1.3.3. 锁</h3><blockquote>\n<p>什么是锁，锁的种类有哪些，每种锁有什么特点，适用场景是什么</p>\n<p>在并发编程中锁的意义是什么</p>\n</blockquote>\n<h3 id=\"1-3-4-_synchronized的作用是什么，synchronized和lock\">1.3.4. synchronized的作用是什么，synchronized和lock</h3><h3 id=\"1-3-5-_sleep和wait\">1.3.5. sleep和wait</h3><h3 id=\"1-3-6-_wait和notify\">1.3.6. wait和notify</h3><h3 id=\"1-3-7-_写一个死锁的程序\">1.3.7. 写一个死锁的程序</h3><h3 id=\"1-3-8-_什么是守护线程，守护线程和非守护线程的区别以及用法\">1.3.8. 什么是守护线程，守护线程和非守护线程的区别以及用法</h3><h3 id=\"1-3-9-_volatile关键字的理解\">1.3.9. volatile关键字的理解</h3><blockquote>\n<p>C++ volatile关键字和Java volatile关键字</p>\n<p>happens-before语义<br>编译器指令重排和CPU指令重排<br><a href=\"http://en.wikipedia.org/wiki/Memory_ordering\">http://en.wikipedia.org/wiki/Memory_ordering</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Volatile_variable\">http://en.wikipedia.org/wiki/Volatile_variable</a></p>\n<p><a href=\"http://preshing.com/20130702/the-happens-before-relation/\">http://preshing.com/20130702/the-happens-before-relation/</a></p>\n</blockquote>\n<h3 id=\"1-3-10-_以下代码是不是线程安全？为什么？如果为count加上volatile修饰是否能够做到线程安全？你觉得该怎么做是线程安全的？\">1.3.10. 以下代码是不是线程安全？为什么？如果为count加上volatile修饰是否能够做到线程安全？你觉得该怎么做是线程安全的？</h3><blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sample</span> </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> count = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">increment</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">count++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"1-3-11-_解释一下下面两段代码的差别\">1.3.11. 解释一下下面两段代码的差别</h3><blockquote>\n<p>代码1<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;<span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sample</span> </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> count = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">synchronized</span> <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">increment</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">count++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>代码2</p>\n<blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sample</span> </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> AtomicInteger count = <span class=\"keyword\">new</span> AtomicInteger(<span class=\"number\">0</span>);</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">increment</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">count.getAndIncrement();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"1-3-12-_参考资料\">1.3.12. 参考资料</h3><blockquote>\n<p><a href=\"http://book.douban.com/subject/10484692/\">http://book.douban.com/subject/10484692/</a></p>\n<p><a href=\"http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html\">http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html</a></p>\n<h1 id=\"二、_进阶篇\">二、 进阶篇</h1></blockquote>\n<h2 id=\"2-1-_Java底层知识\">2.1. Java底层知识</h2><h3 id=\"2-1-1-_学习了解字节码、class文件格式\">2.1.1. 学习了解字节码、class文件格式</h3><blockquote>\n<p><a href=\"http://en.wikipedia.org/wiki/Java_class_file\">http://en.wikipedia.org/wiki/Java_class_file</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Java_bytecode\">http://en.wikipedia.org/wiki/Java_bytecode</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings\">http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings</a></p>\n<p><a href=\"http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/\">http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/</a></p>\n<p><a href=\"http://asm.ow2.org/\">http://asm.ow2.org/</a></p>\n</blockquote>\n<h3 id=\"2-1-2-_写一个程序要求实现javap的功能（手工完成，不借助ASM等工具）\">2.1.2. 写一个程序要求实现javap的功能（手工完成，不借助ASM等工具）</h3><blockquote>\n<p>如Java源代码：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">i += <span class=\"number\">1</span>;</span><br><span class=\"line\">i *= <span class=\"number\">1</span>;</span><br><span class=\"line\">System.out.println(i);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>编译后读取class文件输出以下代码：</p>\n<blockquote>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void main(java.lang.String[]);</span><br><span class=\"line\">Code:</span><br><span class=\"line\">Stack=2, Locals=2, Args_size=1</span><br><span class=\"line\">0: iconst_0</span><br><span class=\"line\">1: istore_1</span><br><span class=\"line\">2: iinc 1, 1</span><br><span class=\"line\">5: iload_1</span><br><span class=\"line\">6: iconst_1</span><br><span class=\"line\">7: imul</span><br><span class=\"line\">8: istore_1</span><br><span class=\"line\">9: getstatic #2; //Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class=\"line\">12: iload_1</span><br><span class=\"line\">13: invokevirtual #3; //Method java/io/PrintStream.println:(I)V</span><br><span class=\"line\">16: return</span><br><span class=\"line\">LineNumberTable:</span><br><span class=\"line\">line 4: 0</span><br><span class=\"line\">line 5: 2</span><br><span class=\"line\">line 6: 5</span><br><span class=\"line\">line 7: 9</span><br><span class=\"line\">line 8: 16</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"2-1-3-_CPU缓存，L1，L2，L3和伪共享\">2.1.3. CPU缓存，L1，L2，L3和伪共享</h3><blockquote>\n<p><a href=\"http://duartes.org/gustavo/blog/post/intel-cpu-caches/\">http://duartes.org/gustavo/blog/post/intel-cpu-caches/</a></p>\n<p><a href=\"http://mechanical-sympathy.blogspot.com/2011/07/false-sharing.html\">http://mechanical-sympathy.blogspot.com/2011/07/false-sharing.html</a></p>\n<h3 id=\"2-1-4-_什么是尾递归\">2.1.4. 什么是尾递归</h3><h3 id=\"2-1-5-_熟悉位运算\">2.1.5. 熟悉位运算</h3><p>用位运算实现加、减、乘、除、取余</p>\n<h3 id=\"2-1-6-_参考资料\">2.1.6. 参考资料</h3><p><a href=\"http://book.douban.com/subject/1138768/\">http://book.douban.com/subject/1138768/</a></p>\n<p><a href=\"http://book.douban.com/subject/6522893/\">http://book.douban.com/subject/6522893/</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Java_class_file\">http://en.wikipedia.org/wiki/Java_class_file</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Java_bytecode\">http://en.wikipedia.org/wiki/Java_bytecode</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings\">http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings</a></p>\n<h2 id=\"2-2-_设计模式\">2.2. 设计模式</h2></blockquote>\n<h3 id=\"2-2-1-_实现AOP\">2.2.1. 实现AOP</h3><blockquote>\n<h4 id=\"CGLIB和InvocationHandler的区别\">CGLIB和InvocationHandler的区别</h4><blockquote>\n<p><a href=\"http://cglib.sourceforge.net/\">http://cglib.sourceforge.net/</a></p>\n</blockquote>\n<h4 id=\"动态代理模式\">动态代理模式</h4><h4 id=\"Javassist实现AOP\">Javassist实现AOP</h4><blockquote>\n<p><a href=\"http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/\">http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/</a></p>\n<h4 id=\"ASM实现AOP\">ASM实现AOP</h4><p><a href=\"http://asm.ow2.org/\">http://asm.ow2.org/</a></p>\n</blockquote>\n</blockquote>\n<h3 id=\"2-2-2-_使用模板方法设计模式和策略设计模式实现IOC\">2.2.2. 使用模板方法设计模式和策略设计模式实现IOC</h3><h3 id=\"2-2-3-_不用synchronized和lock，实现线程安全的单例模式\">2.2.3. 不用synchronized和lock，实现线程安全的单例模式</h3><h3 id=\"2-2-4-_nio和reactor设计模式\">2.2.4. nio和reactor设计模式</h3><h3 id=\"2-2-5-_参考资料\">2.2.5. 参考资料</h3><blockquote>\n<p><a href=\"http://asm.ow2.org/\">http://asm.ow2.org/</a></p>\n<p><a href=\"http://cglib.sourceforge.net/\">http://cglib.sourceforge.net/</a></p>\n<p><a href=\"http://www.javassist.org/\">http://www.javassist.org/</a></p>\n</blockquote>\n<h2 id=\"2-3-_网络编程知识\">2.3. 网络编程知识</h2><h3 id=\"2-3-1-_Java_RMI，Socket，HttpClient\">2.3.1. Java RMI，Socket，HttpClient</h3><h3 id=\"2-3-2-_用Java写一个简单的静态文件的HTTP服务器\">2.3.2. 用Java写一个简单的静态文件的HTTP服务器</h3><blockquote>\n<p>实现客户端缓存功能，支持返回304</p>\n<p>实现可并发下载一个文件</p>\n<p>使用线程池处理客户端请求</p>\n<p>使用nio处理客户端请求</p>\n<p>支持简单的rewrite规则</p>\n<p>上述功能在实现的时候需要满足“开闭原则”</p>\n<h3 id=\"2-3-3-_了解nginx和apache服务器的特性并搭建一个对应的服务器\">2.3.3. 了解nginx和apache服务器的特性并搭建一个对应的服务器</h3><p><a href=\"http://nginx.org/\">http://nginx.org/</a></p>\n<p><a href=\"http://httpd.apache.org/\">http://httpd.apache.org/</a></p>\n<h3 id=\"2-3-4-_用Java实现FTP、SMTP协议\">2.3.4. 用Java实现FTP、SMTP协议</h3><h3 id=\"2-3-5-_什么是CDN？如果实现？DNS起到什么作用？\">2.3.5. 什么是CDN？如果实现？DNS起到什么作用？</h3><p>搭建一个DNS服务器</p>\n<p>搭建一个 Squid 或 Apache Traffic Server 服务器</p>\n<p><a href=\"http://www.squid-cache.org/\">http://www.squid-cache.org/</a></p>\n<p><a href=\"http://trafficserver.apache.org/\">http://trafficserver.apache.org/</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Domain_Name_System\">http://en.wikipedia.org/wiki/Domain_Name_System</a></p>\n<h3 id=\"2-3-6-_参考资料\">2.3.6. 参考资料</h3><p><a href=\"http://www.ietf.org/rfc/rfc2616.txt\">http://www.ietf.org/rfc/rfc2616.txt</a></p>\n<p><a href=\"http://tools.ietf.org/rfc/rfc5321.txt\">http://tools.ietf.org/rfc/rfc5321.txt</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Open/closed_principle\">http://en.wikipedia.org/wiki/Open/closed_principle</a></p>\n<h3 id=\"2-4-_框架知识\">2.4. 框架知识</h3><p>spring，spring mvc，阅读主要源码</p>\n<p>ibatis，阅读主要源码</p>\n<p>用spring和ibatis搭建java server</p>\n<h3 id=\"2-5-_应用服务器知识\">2.5. 应用服务器知识</h3><p>熟悉使用jboss，<a href=\"https://www.jboss.org/overview/\">https://www.jboss.org/overview/</a></p>\n<p>熟悉使用tomcat，<a href=\"http://tomcat.apache.org/\">http://tomcat.apache.org/</a></p>\n<p>熟悉使用jetty，<a href=\"http://www.eclipse.org/jetty/\">http://www.eclipse.org/jetty/</a></p>\n<h1 id=\"三、_高级篇\">三、 高级篇</h1></blockquote>\n<h2 id=\"3-1-_编译原理知识\">3.1. 编译原理知识</h2><h3 id=\"3-1-1-_用Java实现以下表达式解析并返回结果（语法和Oracle中的select_sysdate-1_from_dual类似）\">3.1.1. 用Java实现以下表达式解析并返回结果（语法和Oracle中的select sysdate-1 from dual类似）</h3><blockquote>\n<p>sysdate<br>sysdate - 1<br>sysdate - 1/24<br>sysdate - 1/(12*2)</p>\n<h3 id=\"3-1-2-_实现对一个List通过DSL筛选\">3.1.2. 实现对一个List通过DSL筛选</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;QList&lt;Map&lt;String, Object&gt;&gt; mapList = <span class=\"keyword\">new</span> QList&lt;Map&lt;String, Object&gt;&gt;;</span><br><span class=\"line\">mapList.add(&#123;<span class=\"string\">\"name\"</span>: <span class=\"string\">\"hatter test\"</span>&#125;);</span><br><span class=\"line\">mapList.add(&#123;<span class=\"string\">\"id\"</span>: -<span class=\"number\">1</span>,<span class=\"string\">\"name\"</span>: <span class=\"string\">\"hatter test\"</span>&#125;);</span><br><span class=\"line\">mapList.add(&#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">0</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"hatter test\"</span>&#125;);</span><br><span class=\"line\">mapList.add(&#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">1</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"test test\"</span>&#125;);</span><br><span class=\"line\">mapList.add(&#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">2</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"hatter test\"</span>&#125;);</span><br><span class=\"line\">mapList.add(&#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">3</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"test hatter\"</span>&#125;);</span><br><span class=\"line\">mapList.query(<span class=\"string\">\"id is not null and id &gt; 0 and name like '%hatter%'\"</span>);</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>要求返回列表中匹配的对象，即最后两个对象；</p>\n<h3 id=\"3-1-3-_用Java实现以下程序（语法和变量作用域处理都和JavaScript类似）：\">3.1.3. 用Java实现以下程序（语法和变量作用域处理都和JavaScript类似）：</h3><blockquote>\n<p>代码：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> c = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">3</span>;</span><br><span class=\"line\">println(a);</span><br><span class=\"line\">println(b);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">c();</span><br><span class=\"line\">println(a);</span><br><span class=\"line\">println(b);</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>输出：</p>\n<blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"3-1-4-_参考资料\">3.1.4. 参考资料</h3><blockquote>\n<p><a href=\"http://en.wikipedia.org/wiki/Abstract_syntax_tree\">http://en.wikipedia.org/wiki/Abstract_syntax_tree</a></p>\n<p><a href=\"https://javacc.java.net/\">https://javacc.java.net/</a></p>\n<p><a href=\"http://www.antlr.org/\">http://www.antlr.org/</a></p>\n<h2 id=\"3-2-_操作系统知识\">3.2. 操作系统知识</h2><p>Ubuntu</p>\n<p>Centos</p>\n<p>使用linux，熟悉shell脚本</p>\n<h2 id=\"3-3-_数据存储知识\">3.3. 数据存储知识</h2></blockquote>\n<h3 id=\"3-3-1-_关系型数据库\">3.3.1. 关系型数据库</h3><blockquote>\n<p>MySQL</p>\n<p>如何看执行计划</p>\n<p>如何搭建MySQL主备</p>\n<p>binlog是什么</p>\n<p>Derby，H2，PostgreSQL</p>\n<p>SQLite</p>\n<h3 id=\"3-3-2-_NoSQL\">3.3.2. NoSQL</h3><p>Cache</p>\n<p>Redis</p>\n<p>Memcached</p>\n<p>Leveldb</p>\n<p>Bigtable</p>\n<p>HBase</p>\n<p>Cassandra</p>\n<p>Mongodb</p>\n<p>图数据库</p>\n<p>neo4j</p>\n<h3 id=\"3-3-3-_参考资料\">3.3.3. 参考资料</h3><p><a href=\"http://db-engines.com/en/ranking\">http://db-engines.com/en/ranking</a></p>\n<p><a href=\"http://redis.io/\">http://redis.io/</a></p>\n<p><a href=\"https://code.google.com/p/leveldb/\">https://code.google.com/p/leveldb/</a></p>\n<p><a href=\"http://hbase.apache.org/\">http://hbase.apache.org/</a></p>\n<p><a href=\"http://cassandra.apache.org/\">http://cassandra.apache.org/</a></p>\n<p><a href=\"http://www.mongodb.org/\">http://www.mongodb.org/</a></p>\n<p><a href=\"http://www.neo4j.org/\">http://www.neo4j.org/</a></p>\n<h2 id=\"3-4-_大数据知识\">3.4. 大数据知识</h2></blockquote>\n<h3 id=\"3-4-1-_Zookeeper，在linux上部署zk\">3.4.1. Zookeeper，在linux上部署zk</h3><h3 id=\"3-4-2-_Solr，Lucene，ElasticSearch\">3.4.2. Solr，Lucene，ElasticSearch</h3><blockquote>\n<p>在linux上部署solr，solrcloud，，新增、删除、查询索引</p>\n<h3 id=\"3-4-3-_Storm，流式计算，了解Spark，S4\">3.4.3. Storm，流式计算，了解Spark，S4</h3><p>在linux上部署storm，用zookeeper做协调，运行storm hello world，local和remote模式运行调试storm topology。</p>\n<h3 id=\"3-4-4-_Hadoop，离线计算\">3.4.4. Hadoop，离线计算</h3><p>Hdfs：部署NameNode，SecondaryNameNode，DataNode，上传文件、打开文件、更改文件、删除文件</p>\n<p>MapReduce：部署JobTracker，TaskTracker，编写mr job</p>\n<p>Hive：部署hive，书写hive sql，得到结果</p>\n<p>Presto：类hive，不过比hive快，非常值得学习</p>\n<h3 id=\"3-4-5-_分布式日志收集flume，kafka，logstash\">3.4.5. 分布式日志收集flume，kafka，logstash</h3><h3 id=\"3-4-6-_数据挖掘，mahout\">3.4.6. 数据挖掘，mahout</h3><h3 id=\"3-4-7-_参考资料\">3.4.7. 参考资料</h3><p><a href=\"http://zookeeper.apache.org/\">http://zookeeper.apache.org/</a></p>\n<p><a href=\"https://lucene.apache.org/solr/\">https://lucene.apache.org/solr/</a></p>\n<p><a href=\"https://github.com/nathanmarz/storm/wiki\">https://github.com/nathanmarz/storm/wiki</a></p>\n<p><a href=\"http://hadoop.apache.org/\">http://hadoop.apache.org/</a></p>\n<p><a href=\"http://prestodb.io/\">http://prestodb.io/</a></p>\n<p><a href=\"http://flume.apache.org/，http://logstash.net/，http://kafka.apache.org/\">http://flume.apache.org/，http://logstash.net/，http://kafka.apache.org/</a></p>\n<p><a href=\"http://mahout.apache.org/\">http://mahout.apache.org/</a></p>\n<h2 id=\"3-5-_网络安全知识\">3.5. 网络安全知识</h2></blockquote>\n<h3 id=\"3-5-1-_什么是DES、AES\">3.5.1. 什么是DES、AES</h3><h3 id=\"3-5-2-_什么是RSA、DSA\">3.5.2. 什么是RSA、DSA</h3><h3 id=\"3-5-3-_什么是MD5，SHA1\">3.5.3. 什么是MD5，SHA1</h3><h3 id=\"3-5-4-_什么是SSL、TLS，为什么HTTPS相对比较安全\">3.5.4. 什么是SSL、TLS，为什么HTTPS相对比较安全</h3><h3 id=\"3-5-5-_什么是中间人攻击、如果避免中间人攻击\">3.5.5. 什么是中间人攻击、如果避免中间人攻击</h3><h3 id=\"3-5-6-_什么是DOS、DDOS、CC攻击\">3.5.6. 什么是DOS、DDOS、CC攻击</h3><h3 id=\"3-5-7-_什么是CSRF攻击\">3.5.7. 什么是CSRF攻击</h3><h3 id=\"3-5-8-_什么是CSS攻击\">3.5.8. 什么是CSS攻击</h3><h3 id=\"3-5-9-_什么是SQL注入攻击\">3.5.9. 什么是SQL注入攻击</h3><h3 id=\"3-5-10-_什么是Hash碰撞拒绝服务攻击\">3.5.10. 什么是Hash碰撞拒绝服务攻击</h3><h3 id=\"3-5-11-_了解并学习下面几种增强安全的技术\">3.5.11. 了解并学习下面几种增强安全的技术</h3><blockquote>\n<p><a href=\"http://www.openauthentication.org/\">http://www.openauthentication.org/</a></p>\n<p>HOTP <a href=\"http://www.ietf.org/rfc/rfc4226.txt\">http://www.ietf.org/rfc/rfc4226.txt</a></p>\n<p>TOTP <a href=\"http://tools.ietf.org/rfc/rfc6238.txt\">http://tools.ietf.org/rfc/rfc6238.txt</a></p>\n<p>OCRA <a href=\"http://tools.ietf.org/rfc/rfc6287.txt\">http://tools.ietf.org/rfc/rfc6287.txt</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Salt_(cryptography\">http://en.wikipedia.org/wiki/Salt_(cryptography</a>)</p>\n<h3 id=\"3-5-12-_用openssl签一个证书部署到apache或nginx\">3.5.12. 用openssl签一个证书部署到apache或nginx</h3><h3 id=\"3-5-13-_参考资料\">3.5.13. 参考资料</h3><p><a href=\"http://en.wikipedia.org/wiki/Cryptographic_hash_function\">http://en.wikipedia.org/wiki/Cryptographic_hash_function</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Block_cipher\">http://en.wikipedia.org/wiki/Block_cipher</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Public-key_cryptography\">http://en.wikipedia.org/wiki/Public-key_cryptography</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/Transport_Layer_Security\">http://en.wikipedia.org/wiki/Transport_Layer_Security</a></p>\n<p><a href=\"http://www.openssl.org/\">http://www.openssl.org/</a></p>\n<p><a href=\"https://code.google.com/p/google-authenticator/\">https://code.google.com/p/google-authenticator/</a></p>\n<h1 id=\"四、_扩展篇\">四、 扩展篇</h1></blockquote>\n<h2 id=\"4-1-_相关知识\">4.1. 相关知识</h2><h3 id=\"4-1-1-_云计算，分布式，高可用，可扩展\">4.1.1. 云计算，分布式，高可用，可扩展</h3><h3 id=\"4-1-2-_虚拟化\">4.1.2. 虚拟化</h3><blockquote>\n<p><a href=\"https://linuxcontainers.org/\">https://linuxcontainers.org/</a></p>\n<p><a href=\"http://www.linux-kvm.org/page/Main_Page\">http://www.linux-kvm.org/page/Main_Page</a></p>\n<p><a href=\"http://www.xenproject.org/\">http://www.xenproject.org/</a></p>\n<p><a href=\"https://www.docker.io/\">https://www.docker.io/</a></p>\n<h3 id=\"4-1-3-_监控\">4.1.3. 监控</h3><p><a href=\"http://www.nagios.org/\">http://www.nagios.org/</a></p>\n<p><a href=\"http://ganglia.info/\">http://ganglia.info/</a></p>\n<h3 id=\"4-1-4-_负载均衡\">4.1.4. 负载均衡</h3><p><a href=\"http://www.linuxvirtualserver.org/\">http://www.linuxvirtualserver.org/</a></p>\n<h3 id=\"4-1-5-_学习使用git\">4.1.5. 学习使用git</h3><p><a href=\"https://github.com/\">https://github.com/</a></p>\n<p><a href=\"https://git.oschina.net/\">https://git.oschina.net/</a></p>\n<h3 id=\"4-1-6-_学习使用maven\">4.1.6. 学习使用maven</h3><p><a href=\"http://maven.apache.org/\">http://maven.apache.org/</a></p>\n<h3 id=\"4-1-7-_学习使用gradle\">4.1.7. 学习使用gradle</h3><p><a href=\"http://www.gradle.org/\">http://www.gradle.org/</a></p>\n<h3 id=\"4-1-8-_学习一个小语种语言\">4.1.8. 学习一个小语种语言</h3><p>Groovy</p>\n<p>Scala</p>\n<p>LISP, Common LISP, Schema, Clojure</p>\n<p>R</p>\n<p>Julia</p>\n<p>Lua</p>\n<p>Ruby</p>\n<h3 id=\"4-1-9-_尝试了解编码的本质\">4.1.9. 尝试了解编码的本质</h3><p>了解以下概念<br>ASCII, ISO-8859-1</p>\n<p>GB2312, GBK, GB18030</p>\n<p>Unicode, UTF-8</p>\n<p>不使用 String.getBytes() 等其他工具类/函数完成下面功能</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">String str = <span class=\"string\">\"Hello, 我们是中国人。\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">byte</span>[] utf8Bytes = toUTF8Bytes(str);</span><br><span class=\"line\">FileOutputStream fos = <span class=\"keyword\">new</span> FileOutputStream(<span class=\"string\">\"f.txt\"</span>);</span><br><span class=\"line\">fos.write(utf8Bytes);</span><br><span class=\"line\">fos.close();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">byte</span>[] toUTF8Bytes(String str) &#123;</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">null</span>; <span class=\"comment\">// TODO</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n<p>想一下上面的程序能不能写一个转GBK的？</p>\n<p>写个程序自动判断一个文件是哪种编码</p>\n<h3 id=\"4-1-10-_尝试了解时间的本质\">4.1.10. 尝试了解时间的本质</h3><p>时区 &amp; 冬令时、夏令时</p>\n<p><a href=\"http://en.wikipedia.org/wiki/Time_zone\">http://en.wikipedia.org/wiki/Time_zone</a></p>\n<p>ftp://ftp.iana.org/tz/data/asia</p>\n<p><a href=\"http://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9C%8B%E6%99%82%E5%8D%80\">http://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9C%8B%E6%99%82%E5%8D%80</a></p>\n<p>闰年</p>\n<p><a href=\"http://en.wikipedia.org/wiki/Leap_year\">http://en.wikipedia.org/wiki/Leap_year</a></p>\n<p>闰秒</p>\n<p>ftp://ftp.iana.org/tz/data/leapseconds</p>\n<p>System.currentTimeMillis() 返回的时间是什么</p>\n<h3 id=\"4-1-11-_参考资料\">4.1.11. 参考资料</h3><p><a href=\"http://git-scm.com/\">http://git-scm.com/</a></p>\n<p><a href=\"http://en.wikipedia.org/wiki/UTF-8\">http://en.wikipedia.org/wiki/UTF-8</a></p>\n<p><a href=\"http://www.iana.org/time-zones\">http://www.iana.org/time-zones</a></p>\n<h2 id=\"4-2-_扩展学习\">4.2. 扩展学习</h2><h3 id=\"4-2-1-_JavaScript知识\">4.2.1. JavaScript知识</h3><h3 id=\"4-2-1-1-_什么是prototype\">4.2.1.1. 什么是prototype</h3><p>修改代码，使程序输出“1 3 5”：</p>\n<p><a href=\"http://jsfiddle.net/Ts7Fk/\">http://jsfiddle.net/Ts7Fk/</a></p>\n<h3 id=\"4-2-1-2-_什么是闭包\">4.2.1.2. 什么是闭包</h3><p>看一下这段代码，并解释一下为什么按Button1时没有alert出“This is button: 1”，如何修改：</p>\n<p><a href=\"http://jsfiddle.net/FDPj3/1/\">http://jsfiddle.net/FDPj3/1/</a></p>\n<h3 id=\"4-2-1-3-_了解并学习一个JS框架\">4.2.1.3. 了解并学习一个JS框架</h3><p>jQuery</p>\n<p>ExtJS</p>\n<p>ArgularJS</p>\n<h3 id=\"4-2-1-4-_写一个Greasemonkey插件\">4.2.1.4. 写一个Greasemonkey插件</h3><p><a href=\"http://en.wikipedia.org/wiki/Greasemonkey\">http://en.wikipedia.org/wiki/Greasemonkey</a></p>\n<h3 id=\"4-2-1-5-_学习node-js\">4.2.1.5. 学习node.js</h3><p><a href=\"http://nodejs.org/\">http://nodejs.org/</a></p>\n<h3 id=\"4-2-2-_学习html5\">4.2.2. 学习html5</h3><p>ArgularJS，<a href=\"https://docs.angularjs.org/api\">https://docs.angularjs.org/api</a></p>\n<h3 id=\"4-2-3-_参考资料\">4.2.3. 参考资料</h3><p><a href=\"http://www.ecmascript.org/\">http://www.ecmascript.org/</a></p>\n<p><a href=\"http://jsfiddle.net/\">http://jsfiddle.net/</a></p>\n<p><a href=\"http://jsbin.com/\">http://jsbin.com/</a></p>\n<p><a href=\"http://runjs.cn/\">http://runjs.cn/</a></p>\n<p><a href=\"http://userscripts.org/\">http://userscripts.org/</a></p>\n<h1 id=\"五、_推荐书籍\">五、 推荐书籍</h1><p>《深入Java虚拟机》</p>\n<p>《深入理解Java虚拟机》</p>\n<p>《Effective Java》</p>\n<p>《七周七语言》</p>\n<p>《七周七数据》</p>\n<p>《Hadoop技术内幕》</p>\n<p>《Hbase In Action》</p>\n<p>《Mahout In Action》</p>\n<p>《这就是搜索引擎》</p>\n<p>《Solr In Action》</p>\n<p>《深入分析Java Web技术内幕》</p>\n<p>《大型网站技术架构》</p>\n<p>《高性能MySQL》</p>\n<p>《算法导论》</p>\n<p>《计算机程序设计艺术》</p>\n<p>《代码大全》</p>\n<p>《JavaScript权威指南》</p>\n</blockquote>\n"},{"title":"开发第一个Spring Boot项目","date":"2016-08-04T07:48:44.000Z","_content":"\n\n> 让我们用Spring Boot结合Maven开发一个简单的“Hello World“Java Web应用。\n\n### 搭建Maven项目，创建pom.xml文件\n\n创建一个普通的Maven项目，如下图所示：\n![](/images/spring-boot-one/1.png)\n修改pom.xml文件内容：\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n   <modelVersion>4.0.0</modelVersion>\n\n   <groupId>com.example</groupId>\n   <artifactId>demo</artifactId>\n   <version>0.0.1-SNAPSHOT</version>\n   <packaging>jar</packaging>\n\n   <name>demo</name>\n   <description>Demo project for Spring Boot</description>\n\n   <parent>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-starter-parent</artifactId>\n      <version>1.4.0.RELEASE</version>\n      <relativePath/> <!-- lookup parent from repository -->\n   </parent>\n\n   <properties>\n      <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n      <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n      <java.version>1.8</java.version>\n   </properties>\n\n   <dependencies>\n      <dependency>\n         <groupId>org.springframework.boot</groupId>\n         <artifactId>spring-boot-starter-web</artifactId>\n      </dependency>\n   </dependencies>\n\n   <build>\n      <plugins>\n         <plugin>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-maven-plugin</artifactId>\n         </plugin>\n      </plugins>\n   </build>\n</project>\n```\n\npom.xml文件主要为：\n\n```xml\n<parent>\n   <groupId>org.springframework.boot</groupId>\n   <artifactId>spring-boot-starter-parent</artifactId>\n   <version>1.4.0.RELEASE</version>\n   <relativePath/> <!-- lookup parent from repository -->\n</parent>\n<dependency>\n   <groupId>org.springframework.boot</groupId>\n   <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n```\n\n### 编写代码\n\n要启动Spring Boot 项目，我们要创建一个包含main方法的启动类，代码如下：\n这里demo项目例子是一个Java Web 项目，所以一些Spring MVC的代码也写在一起了。\n```java\npackage com.example;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@SpringBootApplication\n@RestController\npublic class DemoApplication {\n\n   @RequestMapping(\"/\")\n   public String index(){\n      return \"Hello World!\";\n   }\n\n   public static void main(String[] args) {\n      SpringApplication.run(DemoApplication.class, args);\n   }\n}\n```\n### 启动程序\n \n可以直接运行main方法启动项目，也可以通过Spring Boot的maven插件启动： `mvn spring-boot:run` \n项目启动效果如下：\n![](/images/spring-boot-one/2.png)\n\n打来浏览器输入  `localhost:8080` 即可看到下面的输出：\n>Hello World!\n\n\nSpring Boot项目的其中一个好处就是可以打包成Jar包直接运行，下面我们来创建并运行SpringBoot项目的Jar包。\n\n### 打包程序\n首先在pom.xml文件中添加  `spring-boot-maven-plugin` ，代码如下：\n```xml\n<build>\n   <plugins>\n      <plugin>\n         <groupId>org.springframework.boot</groupId>\n         <artifactId>spring-boot-maven-plugin</artifactId>\n      </plugin>\n   </plugins>\n</build>\n```\n\n然后执行maven打包命令 `mvn package`即可，打包完即可在target文件夹下看到项目的Jar包。\n\n![](/images/spring-boot-one/3.png)\n\n在命令行输入java 启动Jar包命令`java -jar`即可启动项目，\t`ctrl-c`即可关闭项目。\n\n>到此，第一个Spring Boot 项目开发完成！=_=\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/开发第一个Spring Boot项目.md","raw":"title: 开发第一个Spring Boot项目\ndate: 2016-08-04 15:48:44\npermalink: Spring-Boot-1\ntags:\n- Spring Boot\ncategories:\n- Spring Boot\n\n---\n\n\n> 让我们用Spring Boot结合Maven开发一个简单的“Hello World“Java Web应用。\n\n### 搭建Maven项目，创建pom.xml文件\n\n创建一个普通的Maven项目，如下图所示：\n![](/images/spring-boot-one/1.png)\n修改pom.xml文件内容：\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n   <modelVersion>4.0.0</modelVersion>\n\n   <groupId>com.example</groupId>\n   <artifactId>demo</artifactId>\n   <version>0.0.1-SNAPSHOT</version>\n   <packaging>jar</packaging>\n\n   <name>demo</name>\n   <description>Demo project for Spring Boot</description>\n\n   <parent>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-starter-parent</artifactId>\n      <version>1.4.0.RELEASE</version>\n      <relativePath/> <!-- lookup parent from repository -->\n   </parent>\n\n   <properties>\n      <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n      <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n      <java.version>1.8</java.version>\n   </properties>\n\n   <dependencies>\n      <dependency>\n         <groupId>org.springframework.boot</groupId>\n         <artifactId>spring-boot-starter-web</artifactId>\n      </dependency>\n   </dependencies>\n\n   <build>\n      <plugins>\n         <plugin>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-maven-plugin</artifactId>\n         </plugin>\n      </plugins>\n   </build>\n</project>\n```\n\npom.xml文件主要为：\n\n```xml\n<parent>\n   <groupId>org.springframework.boot</groupId>\n   <artifactId>spring-boot-starter-parent</artifactId>\n   <version>1.4.0.RELEASE</version>\n   <relativePath/> <!-- lookup parent from repository -->\n</parent>\n<dependency>\n   <groupId>org.springframework.boot</groupId>\n   <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n```\n\n### 编写代码\n\n要启动Spring Boot 项目，我们要创建一个包含main方法的启动类，代码如下：\n这里demo项目例子是一个Java Web 项目，所以一些Spring MVC的代码也写在一起了。\n```java\npackage com.example;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@SpringBootApplication\n@RestController\npublic class DemoApplication {\n\n   @RequestMapping(\"/\")\n   public String index(){\n      return \"Hello World!\";\n   }\n\n   public static void main(String[] args) {\n      SpringApplication.run(DemoApplication.class, args);\n   }\n}\n```\n### 启动程序\n \n可以直接运行main方法启动项目，也可以通过Spring Boot的maven插件启动： `mvn spring-boot:run` \n项目启动效果如下：\n![](/images/spring-boot-one/2.png)\n\n打来浏览器输入  `localhost:8080` 即可看到下面的输出：\n>Hello World!\n\n\nSpring Boot项目的其中一个好处就是可以打包成Jar包直接运行，下面我们来创建并运行SpringBoot项目的Jar包。\n\n### 打包程序\n首先在pom.xml文件中添加  `spring-boot-maven-plugin` ，代码如下：\n```xml\n<build>\n   <plugins>\n      <plugin>\n         <groupId>org.springframework.boot</groupId>\n         <artifactId>spring-boot-maven-plugin</artifactId>\n      </plugin>\n   </plugins>\n</build>\n```\n\n然后执行maven打包命令 `mvn package`即可，打包完即可在target文件夹下看到项目的Jar包。\n\n![](/images/spring-boot-one/3.png)\n\n在命令行输入java 启动Jar包命令`java -jar`即可启动项目，\t`ctrl-c`即可关闭项目。\n\n>到此，第一个Spring Boot 项目开发完成！=_=\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"Spring-Boot-1","published":1,"updated":"2016-08-04T08:23:38.612Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431om50015uco0xavt7ck1","content":"<blockquote>\n<p>让我们用Spring Boot结合Maven开发一个简单的“Hello World“Java Web应用。</p>\n</blockquote>\n<h3 id=\"搭建Maven项目，创建pom-xml文件\">搭建Maven项目，创建pom.xml文件</h3><p>创建一个普通的Maven项目，如下图所示：<br><img src=\"/images/spring-boot-one/1.png\" alt=\"\"><br>修改pom.xml文件内容：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0\"</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">   <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.example<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>demo<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>0.0.1-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">packaging</span>&gt;</span>jar<span class=\"tag\">&lt;/<span class=\"name\">packaging</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>demo<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span>Demo project for Spring Boot<span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-parent<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.4.0.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">relativePath</span>/&gt;</span> <span class=\"comment\">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.reporting.outputEncoding</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">java.version</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">java.version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>pom.xml文件主要为：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-parent<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.4.0.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">relativePath</span>/&gt;</span> <span class=\"comment\">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"编写代码\">编写代码</h3><p>要启动Spring Boot 项目，我们要创建一个包含main方法的启动类，代码如下：<br>这里demo项目例子是一个Java Web 项目，所以一些Spring MVC的代码也写在一起了。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.SpringApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoApplication</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"/\"</span>)</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">index</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">\"Hello World!\"</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">      SpringApplication.run(DemoApplication.class, args);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"启动程序\">启动程序</h3><p>可以直接运行main方法启动项目，也可以通过Spring Boot的maven插件启动： <code>mvn spring-boot:run</code><br>项目启动效果如下：<br><img src=\"/images/spring-boot-one/2.png\" alt=\"\"></p>\n<p>打来浏览器输入  <code>localhost:8080</code> 即可看到下面的输出：</p>\n<blockquote>\n<p>Hello World!</p>\n</blockquote>\n<p>Spring Boot项目的其中一个好处就是可以打包成Jar包直接运行，下面我们来创建并运行SpringBoot项目的Jar包。</p>\n<h3 id=\"打包程序\">打包程序</h3><p>首先在pom.xml文件中添加  <code>spring-boot-maven-plugin</code> ，代码如下：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>然后执行maven打包命令 <code>mvn package</code>即可，打包完即可在target文件夹下看到项目的Jar包。</p>\n<p><img src=\"/images/spring-boot-one/3.png\" alt=\"\"></p>\n<p>在命令行输入java 启动Jar包命令<code>java -jar</code>即可启动项目，    <code>ctrl-c</code>即可关闭项目。</p>\n<blockquote>\n<p>到此，第一个Spring Boot 项目开发完成！=_=</p>\n</blockquote>\n","excerpt":"","more":"<blockquote>\n<p>让我们用Spring Boot结合Maven开发一个简单的“Hello World“Java Web应用。</p>\n</blockquote>\n<h3 id=\"搭建Maven项目，创建pom-xml文件\">搭建Maven项目，创建pom.xml文件</h3><p>创建一个普通的Maven项目，如下图所示：<br><img src=\"/images/spring-boot-one/1.png\" alt=\"\"><br>修改pom.xml文件内容：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0\"</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">   <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.example<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>demo<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>0.0.1-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">packaging</span>&gt;</span>jar<span class=\"tag\">&lt;/<span class=\"name\">packaging</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>demo<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span>Demo project for Spring Boot<span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-parent<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.4.0.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">relativePath</span>/&gt;</span> <span class=\"comment\">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.reporting.outputEncoding</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">java.version</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">java.version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>pom.xml文件主要为：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-parent<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.4.0.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">relativePath</span>/&gt;</span> <span class=\"comment\">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"编写代码\">编写代码</h3><p>要启动Spring Boot 项目，我们要创建一个包含main方法的启动类，代码如下：<br>这里demo项目例子是一个Java Web 项目，所以一些Spring MVC的代码也写在一起了。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.SpringApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoApplication</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"/\"</span>)</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">index</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">\"Hello World!\"</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">      SpringApplication.run(DemoApplication.class, args);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"启动程序\">启动程序</h3><p>可以直接运行main方法启动项目，也可以通过Spring Boot的maven插件启动： <code>mvn spring-boot:run</code><br>项目启动效果如下：<br><img src=\"/images/spring-boot-one/2.png\" alt=\"\"></p>\n<p>打来浏览器输入  <code>localhost:8080</code> 即可看到下面的输出：</p>\n<blockquote>\n<p>Hello World!</p>\n</blockquote>\n<p>Spring Boot项目的其中一个好处就是可以打包成Jar包直接运行，下面我们来创建并运行SpringBoot项目的Jar包。</p>\n<h3 id=\"打包程序\">打包程序</h3><p>首先在pom.xml文件中添加  <code>spring-boot-maven-plugin</code> ，代码如下：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>然后执行maven打包命令 <code>mvn package</code>即可，打包完即可在target文件夹下看到项目的Jar包。</p>\n<p><img src=\"/images/spring-boot-one/3.png\" alt=\"\"></p>\n<p>在命令行输入java 启动Jar包命令<code>java -jar</code>即可启动项目，    <code>ctrl-c</code>即可关闭项目。</p>\n<blockquote>\n<p>到此，第一个Spring Boot 项目开发完成！=_=</p>\n</blockquote>\n"},{"title":"Markdown写作常用语法","date":"2015-08-14T16:04:12.000Z","_content":"这是**新的开始**，我用hexo创建了第一篇文章。\n\n\n# 标题\n+ 使用 # 表示标题，一级标题使用一个 # ，二级标题使用两个 ## ，以此类推，共有六级标题。\n+ 使用 ===== 表示高阶标题，使用 --------- 表示次阶标题。\n\n  示例：\n<pre><code># 这是一级标题  \n## 这是二级标题  \n### 这是三级标题  \n###### 这是六级标题  \n这是一级标题  \n========  \n这是二级标题  \n--------------</code></pre>\n\n  页面显示：\n> # 这是一级标题\n## 这是二级标题\n### 这是三级标题\n###### 这是六级标题\n这是一级标题\n========\n这是二级标题\n\n  注意：\n\t+ #和标题之间加一个空格。\n\t+ ==== 和 ---- 表示标题时，大于等于2个都可以表示。\n\n\n\n\n\n------------------------------\n\n------------------------------\n\n------------------------------\n\n------------------------------\n\n\n\n\n\n\n\n\n\n\n\n\n# 引用\n    使用 > 表示引用， >> 表示引用里面再套一层引用，依次类推。\n**示例**：\n<pre><code> > 这是一级引用\n>> 这是二级引用\n>>> 这是三级引用\n\n>这是一级引用</code></pre>\n\t\n**页面显示**：\n> 这是一级引用\n>> 这是二级引用\n>>> 这是三级引用\n\n>这是一级引用\n\n**注意**：\n+ 如果 > 和 >> 嵌套使用的话，从 >> 退到 > 时，必须之间要加一个空格或者 > 作为过渡，否则默认为下一行和上一行是同一级别的引用。\n+ 引用标记里可以使用其他标记，如：有序列表或无序列表标记，代码标记等。\n------------------------------\n# 代码块\n　　使用\\`\\`\\`表示代码块。\n\n　　**示例**：\n　　\\`\\`\\`javascript\n　　var canvas = document.getElementById(\"canvas\");\n　　var context = canvas.getContext(\"2d\");\n　　\\`\\`\\`</code></pre>\n\n　　**页面显示**：\n　　```javascript\n　　var canvas = document.getElementById(\"canvas\");\n　　var context = canvas.getContext(\"2d\");\n　　```\n\n　　**示例**：\n　　　　这是\\`javascript\\`代码\n　　**页面显示**：\n　　　　这是`javascript`代码\n\n　　**注意**：\n+ \\`这个符号是在 Esc 键下面，切换到英文下即可。\n+ \\`\\`\\`后面的 javascript 表示此段代码为javascript代码，Markdown会自行使用javascript代码颜色渲染。\n\n## **Code Block**\n在文章中插入代码。\n  \n### **快捷方式**：code\n\n{% codeblock [title] [lang:language] [url] [link text] %}\ncode snippet\n{% endcodeblock %}\n### **普通的代码块**\n{% codeblock %}\n{% codeblock %}\n{% endcodeblock %}\n\n{% codeblock %}\nalert('Hello World!');\n{% endcodeblock %}\n\n{% codeblock %}\n{% endcodeblock %}\n{% endcodeblock %}\n\n{% codeblock %}\nalert('Hello World!');\n{% endcodeblock %}\n指定语言\n\n{% codeblock lang:objc %}\n[rectangle setX: 10 y: 10 width: 20 height: 20];\n{% endcodeblock %}\n[rectangle setX: 10 y: 10 width: 20 height: 20];\n附加说明\n\n{% codeblock Array.map %}\narray.map(callback[, thisArg])\n{% endcodeblock %}\nArray.map\narray.map(callback[, thisArg])\n附加说明和网址\n\n{% codeblock _.compact http://underscorejs.org/#compact Underscore.js %}\n_.compact([0, 1, false, 2, '', 3]);\n=> [1, 2, 3]\n{% endcodeblock %}\n_.compactUnderscore.js\n_.compact([0, 1, false, 2, '', 3]);\n=> [1, 2, 3]\n\n\n------------------------------\n# 列表\n　　使用`1. 2. 3. `表示有序列表，使用`*`或`-`或`+`表示无序列表。\n　　**示例1**：\n　　有序列表：\n\n　　1\\. 第一点\n　　2\\. 第二点\n　　4\\. 第三点\n\n　　**页面显示**：\n1. 第一点\n2. 第二点\n4. 第三点\n\n　　**示例2**：\n　　无序列表：\n\\+ 呵呵\n  　　\\* 嘉嘉\n  　　\\- 嘻嘻\n 　　 \\- 吼吼\n   　　　　 \\- 嘎嘎\n   　　　　 \\+ 桀桀\n\\* 哈哈\n　　**页面显示**：\n+ 呵呵\n  * 嘉嘉\n  - 嘻嘻\n  - 吼吼\n    - 嘎嘎\n    + 桀桀\n* 哈哈\n\n　　**注意**：\n+ 无序列表或有序列表标记和后面的文字之间要有一个空格隔开。\n+ 有序列表标记不是按照你写的数字进行显示的，而是根据当前有序列表标记所在位置显示的，如示例1所示。\n+ 无序列表的项目符号是按照实心圆、空心圆、实心方格的层级关系递进的，如例2所示。通常情况下，同一层级使用同一种标记表示，便于自己查看和管理。\n------------------------------\n# 粗体和斜体\n　　使用 `**` 或者 `__` 表示粗体。\n　　使用 `*` 或者 `_` 表示斜体。\n\n　　**示例**：\n　　　　\\*\\*粗体1\\*\\*　　\\_\\_粗体2\\_\\_\n　　　　\\*斜体1\\*　　\\_斜体2\\_\n\t\n　　**页面显示**：\n　　　　**粗体1**　　__粗体2__\n　　　　*斜体1*　　_斜体2_\n\n　　**注意**：\n　　前后的 * 或 _ 与要 加粗或倾斜 的字体之间不能有空格。\n\n------------------------------\n# 表格\n+ ------: 为右对齐。\n+ :------ 为左对齐。\n+ :------: 为居中对齐。\n+ ------- 为使用默认居中对齐。\n\n　　**示例**：\n\n\n\n\n\n```\n|         序号    |    交易名    |    交易说明    |    备注    |\n|    ------: |    :-------:    |    :---------   |    ------    |\n|    1    |    prfcfg    |    菜单配置    |    可以通过此交易查询到所有交易码和菜单的对应关系    |\n|    2    |    gentmo    |    编译所有交易    |    |\n|    100000    |    sysdba    |    数据库表模型汇总    |    |\n```\t\n　　**页面显示**：\n\n\n|         序号    |    交易名    |    交易说明    |    备注    |\n|------:|:-------:|:---------|------|\n|    1    |    prfcfg    |    菜单配置    |    可以通过此交易查询到所有交易码和菜单的对应关系    |\n|    2    |    gentmo    |    编译所有交易    |    |\n|    100000    |    sysdba    |    数据库表模型汇总    |    |\n\n　　**注意**：\n+ 每个Markdown解析器都不一样，可能左右居中对齐方式的表示方式不一样。\n+ 可以使用`<table>`标签\n\n---\n# 分割线\n　　使用 `---` 或者 `***` 或者 `* * *` 表示水平分割线。\n　　**示例**：\n\n\n\\-\\-\\-\n 　　\n\n\\*\\*\\*\n 　　\n\n\\* \\* \\*\n\n　　**页面显示**：\n\n\n\n---\n 　　\n\n***\n 　　\n\n* * *\n　　**注意**：\n+ 只要 * 或者 - 大于等于三个就可组成一条平行线。\n+ 使用 --- 作为水平分割线时，要在它的前后都空一行，防止 --- 被当成标题标记的表示方式。\n* * *\n# 链接\n　　使用 `[](link \"Optional title\")` 表示行内链接。其中：\n* [] 内的内容为要添加链接的文字。\n* link 为链接地址。\n* Optional title 为显示标题。显示效果为在你将鼠标放到链接上后，会显示一个小框提示，提示的内容就是 Optional title 里的内容。\n\n　　**示例**：\n\n　　`这是我的博客地址：[Hello World](http://www.dongxiaoxia.xyz \"Hello World\" )`\n\n　　`这是我的博客地址：[Hello World][1]`\n\n　　`[1]:http://www.dongxiaoxia.xyz \"Hello World\" `\n\n　　**页面显示**：\n\n　　这是我的博客地址：[Hello World](http://www.dongxiaoxia.xyz \"Hello World\" )\n\n　　这是我的博客地址：[Hello World][1]\n[1]:http://www.dongxiaoxia.xyz \"Hello World\" \n　　**注意**：\n+ 参考式链接和行内链接的效果是一样的，各有利弊。行内连接清晰易懂，可以清楚的知道链接的地址，但是不便于多次利用。参考式链接可以重复使用，但不能即刻知道链接的地址。\n+ 是在本窗口打开链接还是新建一个窗口还待研究。\n+ Markdown是支持HTML语法的，所以可以直接使用`<a>`标签,例如`<a href=\"http://www.dongxiaoxia.xyz\">Hello World</a>`，显示<a href=\"http://www.dongxiaoxia.xyz\">Hello World</a>。\n+ 如果想直接显示链接地址，可以使用`<http://www.dongxiaoxia.xyz>`写法，显示<http://www.dongxiaoxia.xyz>\n+ 还可以连`<>`都省略，直接使用http://www.dongxiaoxia.xyz 写法，显示http://www.dongxiaoxia.xyz ，注意链接后面接一个空格。\n------------------------------\n# 导入图片\n　　使用 `![Alt text](/path/to/img.jpg \"Optional title\")` 导入图片。其中：\n+ Alt text 为如果图片无法显示时显示的文字；\n+ /path/to/img.jpg 为图片所在路径；\n+ Optional title 为显示标题。显示效果为在你将鼠标放到图片上后，会显示一个小框提示，提示的内容就是 Optional title 里的内容。\n\n　　**示例**：\n\n![Markdown](/img/touxiang.jpg \"这是我的头像，帅不帅\")\n\n　　**注意**：\n+ 导入的图片路径可以使用绝对路径也可以使用相对路径，建议使用相对路径。\n+ 我通常的做法是Markdown文档的同级目录下建立一个pictures文件夹，里面放置所有所需的图片，如果图片多的话，你也可以在pictures文件夹里建立子文件夹归类\n***\n# 反斜杠\n　　使用` \\ `表示反斜杠。在你不想显示Markdown标记时可以使用反斜杠。\n　　**示例**：\n　　　　\\\\\\*这里不会显示斜体\\\\\\*\n\n　　**页面显示**：\n　　　　\\*这里不会显示斜体\\*\n***\n# 空格\n　　Markdown语法会忽略首行开头的空格，如果要体现出首行开头空两个的效果，可以使用**全角符号下的空格**，windows下使用`shift+空格`切换。\n***\n# 删除线\n　　使用`~~`表示删除线。\n　　**示例**：\n　　　　\\~\\~这是一条删除线\\~\\~\n\n　　**页面显示**：\n　　　　~~这是一条删除线~~\n***\n# 页内跳转\n　　使用html代码实现页内跳转。在要跳转到的位置定义个锚`<span id = \"jump\">hehe</span>`，然后使用`[你好](#jump)`将`你好`设置为一单击即跳转到`hehe`所在位置的效果。\n　　**示例**：\n　　　　`[你好](#jump)`\n　　　　`<span id = \"jump\">hehe</span>`\n\n　　**页面显示**：\n　　　　[你好](#jump)\n　　　　<span id = \"jump\">hehe</span>\n***\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% post_path slug %}\nhttp://www.cnblogs.com/crazyant007/p/4220066.html?utm_source=tuicool\n{% post_link slug [title] %}\n\n\n***\n参考http://www.cnblogs.com/crazyant007/p/4220066.html?utm_source=tuicool 改写","source":"_posts/新的开始.md","raw":"title: Markdown写作常用语法\ndate: 2015-08-15 00:04:12\npermalink: hexo-writing\ntags:\n- hexo\ncategories:\n- hexo\n---\n这是**新的开始**，我用hexo创建了第一篇文章。\n\n\n# 标题\n+ 使用 # 表示标题，一级标题使用一个 # ，二级标题使用两个 ## ，以此类推，共有六级标题。\n+ 使用 ===== 表示高阶标题，使用 --------- 表示次阶标题。\n\n  示例：\n<pre><code># 这是一级标题  \n## 这是二级标题  \n### 这是三级标题  \n###### 这是六级标题  \n这是一级标题  \n========  \n这是二级标题  \n--------------</code></pre>\n\n  页面显示：\n> # 这是一级标题\n## 这是二级标题\n### 这是三级标题\n###### 这是六级标题\n这是一级标题\n========\n这是二级标题\n\n  注意：\n\t+ #和标题之间加一个空格。\n\t+ ==== 和 ---- 表示标题时，大于等于2个都可以表示。\n\n\n\n\n\n------------------------------\n\n------------------------------\n\n------------------------------\n\n------------------------------\n\n\n\n\n\n\n\n\n\n\n\n\n# 引用\n    使用 > 表示引用， >> 表示引用里面再套一层引用，依次类推。\n**示例**：\n<pre><code> > 这是一级引用\n>> 这是二级引用\n>>> 这是三级引用\n\n>这是一级引用</code></pre>\n\t\n**页面显示**：\n> 这是一级引用\n>> 这是二级引用\n>>> 这是三级引用\n\n>这是一级引用\n\n**注意**：\n+ 如果 > 和 >> 嵌套使用的话，从 >> 退到 > 时，必须之间要加一个空格或者 > 作为过渡，否则默认为下一行和上一行是同一级别的引用。\n+ 引用标记里可以使用其他标记，如：有序列表或无序列表标记，代码标记等。\n------------------------------\n# 代码块\n　　使用\\`\\`\\`表示代码块。\n\n　　**示例**：\n　　\\`\\`\\`javascript\n　　var canvas = document.getElementById(\"canvas\");\n　　var context = canvas.getContext(\"2d\");\n　　\\`\\`\\`</code></pre>\n\n　　**页面显示**：\n　　```javascript\n　　var canvas = document.getElementById(\"canvas\");\n　　var context = canvas.getContext(\"2d\");\n　　```\n\n　　**示例**：\n　　　　这是\\`javascript\\`代码\n　　**页面显示**：\n　　　　这是`javascript`代码\n\n　　**注意**：\n+ \\`这个符号是在 Esc 键下面，切换到英文下即可。\n+ \\`\\`\\`后面的 javascript 表示此段代码为javascript代码，Markdown会自行使用javascript代码颜色渲染。\n\n## **Code Block**\n在文章中插入代码。\n  \n### **快捷方式**：code\n\n{% codeblock [title] [lang:language] [url] [link text] %}\ncode snippet\n{% endcodeblock %}\n### **普通的代码块**\n{% codeblock %}\n{% codeblock %}\n{% endcodeblock %}\n\n{% codeblock %}\nalert('Hello World!');\n{% endcodeblock %}\n\n{% codeblock %}\n{% endcodeblock %}\n{% endcodeblock %}\n\n{% codeblock %}\nalert('Hello World!');\n{% endcodeblock %}\n指定语言\n\n{% codeblock lang:objc %}\n[rectangle setX: 10 y: 10 width: 20 height: 20];\n{% endcodeblock %}\n[rectangle setX: 10 y: 10 width: 20 height: 20];\n附加说明\n\n{% codeblock Array.map %}\narray.map(callback[, thisArg])\n{% endcodeblock %}\nArray.map\narray.map(callback[, thisArg])\n附加说明和网址\n\n{% codeblock _.compact http://underscorejs.org/#compact Underscore.js %}\n_.compact([0, 1, false, 2, '', 3]);\n=> [1, 2, 3]\n{% endcodeblock %}\n_.compactUnderscore.js\n_.compact([0, 1, false, 2, '', 3]);\n=> [1, 2, 3]\n\n\n------------------------------\n# 列表\n　　使用`1. 2. 3. `表示有序列表，使用`*`或`-`或`+`表示无序列表。\n　　**示例1**：\n　　有序列表：\n\n　　1\\. 第一点\n　　2\\. 第二点\n　　4\\. 第三点\n\n　　**页面显示**：\n1. 第一点\n2. 第二点\n4. 第三点\n\n　　**示例2**：\n　　无序列表：\n\\+ 呵呵\n  　　\\* 嘉嘉\n  　　\\- 嘻嘻\n 　　 \\- 吼吼\n   　　　　 \\- 嘎嘎\n   　　　　 \\+ 桀桀\n\\* 哈哈\n　　**页面显示**：\n+ 呵呵\n  * 嘉嘉\n  - 嘻嘻\n  - 吼吼\n    - 嘎嘎\n    + 桀桀\n* 哈哈\n\n　　**注意**：\n+ 无序列表或有序列表标记和后面的文字之间要有一个空格隔开。\n+ 有序列表标记不是按照你写的数字进行显示的，而是根据当前有序列表标记所在位置显示的，如示例1所示。\n+ 无序列表的项目符号是按照实心圆、空心圆、实心方格的层级关系递进的，如例2所示。通常情况下，同一层级使用同一种标记表示，便于自己查看和管理。\n------------------------------\n# 粗体和斜体\n　　使用 `**` 或者 `__` 表示粗体。\n　　使用 `*` 或者 `_` 表示斜体。\n\n　　**示例**：\n　　　　\\*\\*粗体1\\*\\*　　\\_\\_粗体2\\_\\_\n　　　　\\*斜体1\\*　　\\_斜体2\\_\n\t\n　　**页面显示**：\n　　　　**粗体1**　　__粗体2__\n　　　　*斜体1*　　_斜体2_\n\n　　**注意**：\n　　前后的 * 或 _ 与要 加粗或倾斜 的字体之间不能有空格。\n\n------------------------------\n# 表格\n+ ------: 为右对齐。\n+ :------ 为左对齐。\n+ :------: 为居中对齐。\n+ ------- 为使用默认居中对齐。\n\n　　**示例**：\n\n\n\n\n\n```\n|         序号    |    交易名    |    交易说明    |    备注    |\n|    ------: |    :-------:    |    :---------   |    ------    |\n|    1    |    prfcfg    |    菜单配置    |    可以通过此交易查询到所有交易码和菜单的对应关系    |\n|    2    |    gentmo    |    编译所有交易    |    |\n|    100000    |    sysdba    |    数据库表模型汇总    |    |\n```\t\n　　**页面显示**：\n\n\n|         序号    |    交易名    |    交易说明    |    备注    |\n|------:|:-------:|:---------|------|\n|    1    |    prfcfg    |    菜单配置    |    可以通过此交易查询到所有交易码和菜单的对应关系    |\n|    2    |    gentmo    |    编译所有交易    |    |\n|    100000    |    sysdba    |    数据库表模型汇总    |    |\n\n　　**注意**：\n+ 每个Markdown解析器都不一样，可能左右居中对齐方式的表示方式不一样。\n+ 可以使用`<table>`标签\n\n---\n# 分割线\n　　使用 `---` 或者 `***` 或者 `* * *` 表示水平分割线。\n　　**示例**：\n\n\n\\-\\-\\-\n 　　\n\n\\*\\*\\*\n 　　\n\n\\* \\* \\*\n\n　　**页面显示**：\n\n\n\n---\n 　　\n\n***\n 　　\n\n* * *\n　　**注意**：\n+ 只要 * 或者 - 大于等于三个就可组成一条平行线。\n+ 使用 --- 作为水平分割线时，要在它的前后都空一行，防止 --- 被当成标题标记的表示方式。\n* * *\n# 链接\n　　使用 `[](link \"Optional title\")` 表示行内链接。其中：\n* [] 内的内容为要添加链接的文字。\n* link 为链接地址。\n* Optional title 为显示标题。显示效果为在你将鼠标放到链接上后，会显示一个小框提示，提示的内容就是 Optional title 里的内容。\n\n　　**示例**：\n\n　　`这是我的博客地址：[Hello World](http://www.dongxiaoxia.xyz \"Hello World\" )`\n\n　　`这是我的博客地址：[Hello World][1]`\n\n　　`[1]:http://www.dongxiaoxia.xyz \"Hello World\" `\n\n　　**页面显示**：\n\n　　这是我的博客地址：[Hello World](http://www.dongxiaoxia.xyz \"Hello World\" )\n\n　　这是我的博客地址：[Hello World][1]\n[1]:http://www.dongxiaoxia.xyz \"Hello World\" \n　　**注意**：\n+ 参考式链接和行内链接的效果是一样的，各有利弊。行内连接清晰易懂，可以清楚的知道链接的地址，但是不便于多次利用。参考式链接可以重复使用，但不能即刻知道链接的地址。\n+ 是在本窗口打开链接还是新建一个窗口还待研究。\n+ Markdown是支持HTML语法的，所以可以直接使用`<a>`标签,例如`<a href=\"http://www.dongxiaoxia.xyz\">Hello World</a>`，显示<a href=\"http://www.dongxiaoxia.xyz\">Hello World</a>。\n+ 如果想直接显示链接地址，可以使用`<http://www.dongxiaoxia.xyz>`写法，显示<http://www.dongxiaoxia.xyz>\n+ 还可以连`<>`都省略，直接使用http://www.dongxiaoxia.xyz 写法，显示http://www.dongxiaoxia.xyz ，注意链接后面接一个空格。\n------------------------------\n# 导入图片\n　　使用 `![Alt text](/path/to/img.jpg \"Optional title\")` 导入图片。其中：\n+ Alt text 为如果图片无法显示时显示的文字；\n+ /path/to/img.jpg 为图片所在路径；\n+ Optional title 为显示标题。显示效果为在你将鼠标放到图片上后，会显示一个小框提示，提示的内容就是 Optional title 里的内容。\n\n　　**示例**：\n\n![Markdown](/img/touxiang.jpg \"这是我的头像，帅不帅\")\n\n　　**注意**：\n+ 导入的图片路径可以使用绝对路径也可以使用相对路径，建议使用相对路径。\n+ 我通常的做法是Markdown文档的同级目录下建立一个pictures文件夹，里面放置所有所需的图片，如果图片多的话，你也可以在pictures文件夹里建立子文件夹归类\n***\n# 反斜杠\n　　使用` \\ `表示反斜杠。在你不想显示Markdown标记时可以使用反斜杠。\n　　**示例**：\n　　　　\\\\\\*这里不会显示斜体\\\\\\*\n\n　　**页面显示**：\n　　　　\\*这里不会显示斜体\\*\n***\n# 空格\n　　Markdown语法会忽略首行开头的空格，如果要体现出首行开头空两个的效果，可以使用**全角符号下的空格**，windows下使用`shift+空格`切换。\n***\n# 删除线\n　　使用`~~`表示删除线。\n　　**示例**：\n　　　　\\~\\~这是一条删除线\\~\\~\n\n　　**页面显示**：\n　　　　~~这是一条删除线~~\n***\n# 页内跳转\n　　使用html代码实现页内跳转。在要跳转到的位置定义个锚`<span id = \"jump\">hehe</span>`，然后使用`[你好](#jump)`将`你好`设置为一单击即跳转到`hehe`所在位置的效果。\n　　**示例**：\n　　　　`[你好](#jump)`\n　　　　`<span id = \"jump\">hehe</span>`\n\n　　**页面显示**：\n　　　　[你好](#jump)\n　　　　<span id = \"jump\">hehe</span>\n***\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% post_path slug %}\nhttp://www.cnblogs.com/crazyant007/p/4220066.html?utm_source=tuicool\n{% post_link slug [title] %}\n\n\n***\n参考http://www.cnblogs.com/crazyant007/p/4220066.html?utm_source=tuicool 改写","slug":"hexo-writing","published":1,"updated":"2016-05-10T04:46:54.283Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431om70017uco0d36l57fa","content":"<p>这是<strong>新的开始</strong>，我用hexo创建了第一篇文章。</p>\n<h1 id=\"标题\">标题</h1><ul>\n<li>使用 # 表示标题，一级标题使用一个 # ，二级标题使用两个 ## ，以此类推，共有六级标题。</li>\n<li><p>使用 ===== 表示高阶标题，使用 ——— 表示次阶标题。</p>\n<p>示例：</p>\n<pre><code># 这是一级标题  \n## 这是二级标题  \n### 这是三级标题  \n###### 这是六级标题  \n这是一级标题  \n========  \n这是二级标题  \n--------------</code></pre>\n\n<p>页面显示：</p>\n<blockquote>\n<h1 id=\"这是一级标题\">这是一级标题</h1><h2 id=\"这是二级标题\">这是二级标题</h2><h3 id=\"这是三级标题\">这是三级标题</h3><h6 id=\"这是六级标题\">这是六级标题</h6><h1 id=\"这是一级标题-1\">这是一级标题</h1><p>这是二级标题</p>\n</blockquote>\n<p>注意：</p>\n<ul>\n<li>#和标题之间加一个空格。</li>\n<li>==== 和 —- 表示标题时，大于等于2个都可以表示。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<hr>\n<hr>\n<hr>\n<h1 id=\"引用\">引用</h1><pre><code>使用 &gt; 表示引用， <span class=\"prompt\">&gt;&gt; </span>表示引用里面再套一层引用，依次类推。\n</code></pre><p><strong>示例</strong>：</p>\n<pre><code> > 这是一级引用\n>> 这是二级引用\n>>> 这是三级引用\n\n>这是一级引用</code></pre>\n\n<p><strong>页面显示</strong>：</p>\n<blockquote>\n<p>这是一级引用</p>\n<blockquote>\n<p>这是二级引用</p>\n<blockquote>\n<p>这是三级引用</p>\n</blockquote>\n</blockquote>\n<p>这是一级引用</p>\n</blockquote>\n<p><strong>注意</strong>：</p>\n<ul>\n<li>如果 &gt; 和 &gt;&gt; 嵌套使用的话，从 &gt;&gt; 退到 &gt; 时，必须之间要加一个空格或者 &gt; 作为过渡，否则默认为下一行和上一行是同一级别的引用。</li>\n<li>引用标记里可以使用其他标记，如：有序列表或无序列表标记，代码标记等。</li>\n</ul>\n<hr>\n<h1 id=\"代码块\">代码块</h1><p>　　使用```表示代码块。</p>\n<p>　　<strong>示例</strong>：<br>　　```javascript<br>　　var canvas = document.getElementById(“canvas”);<br>　　var context = canvas.getContext(“2d”);<br>　　```</p>\n<p>　　<strong>页面显示</strong>：<br>　　<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">　　<span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"canvas\"</span>);</span><br><span class=\"line\">　　<span class=\"keyword\">var</span> context = canvas.getContext(<span class=\"string\">\"2d\"</span>);</span><br></pre></td></tr></table></figure></p>\n<p>　　<strong>示例</strong>：<br>　　　　这是`javascript`代码<br>　　<strong>页面显示</strong>：<br>　　　　这是<code>javascript</code>代码</p>\n<p>　　<strong>注意</strong>：</p>\n<ul>\n<li>`这个符号是在 Esc 键下面，切换到英文下即可。</li>\n<li>```后面的 javascript 表示此段代码为javascript代码，Markdown会自行使用javascript代码颜色渲染。</li>\n</ul>\n<h2 id=\"Code_Block\"><strong>Code Block</strong></h2><p>在文章中插入代码。</p>\n<h3 id=\"快捷方式：code\"><strong>快捷方式</strong>：code</h3><figure class=\"highlight plain\"><figcaption><span>[title] [] [url] [link text]</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">code snippet</span><br></pre></td></tr></table></figure>\n<h3 id=\"普通的代码块\"><strong>普通的代码块</strong></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</span><br><span class=\"line\">&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;alert(&amp;apos;Hello World!&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</span><br><span class=\"line\">&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alert(&apos;Hello World!&apos;);</span><br></pre></td></tr></table></figure>\n<p>指定语言</p>\n<figure class=\"highlight objc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[rectangle setX: <span class=\"number\">10</span> y: <span class=\"number\">10</span> width: <span class=\"number\">20</span> height: <span class=\"number\">20</span>];</span><br></pre></td></tr></table></figure>\n<p>[rectangle setX: 10 y: 10 width: 20 height: 20];<br>附加说明</p>\n<figure class=\"highlight plain\"><figcaption><span>Array.map</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.map(callback[, thisArg])</span><br></pre></td></tr></table></figure>\n<p>Array.map<br>array.map(callback[, thisArg])<br>附加说明和网址</p>\n<figure class=\"highlight plain\"><figcaption><span>_.compact</span><a href=\"http://underscorejs.org/#compact\" target=\"_blank\" rel=\"external\">Underscore.js</a></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_.compact([0, 1, false, 2, &apos;&apos;, 3]);</span><br><span class=\"line\">=&gt; [1, 2, 3]</span><br></pre></td></tr></table></figure>\n<p><em>.compactUnderscore.js\n</em>.compact([0, 1, false, 2, ‘’, 3]);<br>=&gt; [1, 2, 3]</p>\n<hr>\n<h1 id=\"列表\">列表</h1><p>　　使用<code>1. 2. 3.</code>表示有序列表，使用<code>*</code>或<code>-</code>或<code>+</code>表示无序列表。<br>　　<strong>示例1</strong>：<br>　　有序列表：</p>\n<p>　　1. 第一点<br>　　2. 第二点<br>　　4. 第三点</p>\n<p>　　<strong>页面显示</strong>：</p>\n<ol>\n<li>第一点</li>\n<li>第二点</li>\n<li>第三点</li>\n</ol>\n<p>　　<strong>示例2</strong>：<br>　　无序列表：<br>+ 呵呵<br>  　　* 嘉嘉<br>  　　- 嘻嘻<br> 　　 - 吼吼<br>   　　　　 - 嘎嘎<br>   　　　　 + 桀桀<br>* 哈哈<br>　　<strong>页面显示</strong>：</p>\n<ul>\n<li>呵呵<ul>\n<li>嘉嘉</li>\n</ul>\n<ul>\n<li>嘻嘻</li>\n<li>吼吼<ul>\n<li>嘎嘎</li>\n</ul>\n<ul>\n<li>桀桀</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>哈哈</li>\n</ul>\n<p>　　<strong>注意</strong>：</p>\n<ul>\n<li>无序列表或有序列表标记和后面的文字之间要有一个空格隔开。</li>\n<li>有序列表标记不是按照你写的数字进行显示的，而是根据当前有序列表标记所在位置显示的，如示例1所示。</li>\n<li>无序列表的项目符号是按照实心圆、空心圆、实心方格的层级关系递进的，如例2所示。通常情况下，同一层级使用同一种标记表示，便于自己查看和管理。</li>\n</ul>\n<hr>\n<h1 id=\"粗体和斜体\">粗体和斜体</h1><p>　　使用 <code>**</code> 或者 <code>__</code> 表示粗体。<br>　　使用 <code>*</code> 或者 <code>_</code> 表示斜体。</p>\n<p>　　<strong>示例</strong>：<br>　　　　**粗体1**　　__粗体2__<br>　　　　*斜体1*　　_斜体2_</p>\n<p>　　<strong>页面显示</strong>：<br>　　　　<strong>粗体1</strong>　　<strong>粗体2</strong><br>　　　　<em>斜体1</em>　　<em>斜体2</em></p>\n<p>　　<strong>注意</strong>：<br>　　前后的 * 或 _ 与要 加粗或倾斜 的字体之间不能有空格。</p>\n<hr>\n<h1 id=\"表格\">表格</h1><ul>\n<li>——: 为右对齐。</li>\n<li>:—— 为左对齐。</li>\n<li>:——: 为居中对齐。</li>\n<li>——- 为使用默认居中对齐。</li>\n</ul>\n<p>　　<strong>示例</strong>：</p>\n<pre><code>|<span class=\"string\">         序号    </span>|<span class=\"string\">    交易名    </span>|<span class=\"string\">    交易说明    </span>|<span class=\"string\">    备注    </span>|\n|<span class=\"string\">    ------: </span>|<span class=\"string\">    :-------:    </span>|<span class=\"string\">    :---------   </span>|<span class=\"string\">    ------    </span>|\n|<span class=\"string\">    1    </span>|<span class=\"string\">    prfcfg    </span>|<span class=\"string\">    菜单配置    </span>|<span class=\"string\">    可以通过此交易查询到所有交易码和菜单的对应关系    </span>|\n|<span class=\"string\">    2    </span>|<span class=\"string\">    gentmo    </span>|<span class=\"string\">    编译所有交易    </span>|<span class=\"string\">    </span>|\n|<span class=\"string\">    100000    </span>|<span class=\"string\">    sysdba    </span>|<span class=\"string\">    数据库表模型汇总    </span>|<span class=\"string\">    </span>|\n</code></pre><p>　　<strong>页面显示</strong>：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:right\">序号</th>\n<th style=\"text-align:center\">交易名</th>\n<th style=\"text-align:left\">交易说明</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:right\">1</td>\n<td style=\"text-align:center\">prfcfg</td>\n<td style=\"text-align:left\">菜单配置</td>\n<td>可以通过此交易查询到所有交易码和菜单的对应关系</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">2</td>\n<td style=\"text-align:center\">gentmo</td>\n<td style=\"text-align:left\">编译所有交易</td>\n<td></td>\n</tr>\n<tr>\n<td style=\"text-align:right\">100000</td>\n<td style=\"text-align:center\">sysdba</td>\n<td style=\"text-align:left\">数据库表模型汇总</td>\n</tr>\n</tbody>\n</table>\n<p>　　<strong>注意</strong>：</p>\n<ul>\n<li>每个Markdown解析器都不一样，可能左右居中对齐方式的表示方式不一样。</li>\n<li>可以使用<code>&lt;table&gt;</code>标签</li>\n</ul>\n<hr>\n<h1 id=\"分割线\">分割线</h1><p>　　使用 <code>---</code> 或者 <code>***</code> 或者 <code>* * *</code> 表示水平分割线。<br>　　<strong>示例</strong>：</p>\n<p>---\n 　　</p>\n<p>***\n 　　</p>\n<p>* * *</p>\n<p>　　<strong>页面显示</strong>：</p>\n<hr>\n<p> 　　</p>\n<hr>\n<p> 　　</p>\n<hr>\n<p>　　<strong>注意</strong>：</p>\n<ul>\n<li>只要 * 或者 - 大于等于三个就可组成一条平行线。</li>\n<li>使用 — 作为水平分割线时，要在它的前后都空一行，防止 — 被当成标题标记的表示方式。</li>\n</ul>\n<hr>\n<h1 id=\"链接\">链接</h1><p>　　使用 <code>[](link &quot;Optional title&quot;)</code> 表示行内链接。其中：</p>\n<ul>\n<li>[] 内的内容为要添加链接的文字。</li>\n<li>link 为链接地址。</li>\n<li>Optional title 为显示标题。显示效果为在你将鼠标放到链接上后，会显示一个小框提示，提示的内容就是 Optional title 里的内容。</li>\n</ul>\n<p>　　<strong>示例</strong>：</p>\n<p>　　<code>这是我的博客地址：[Hello World](http://www.dongxiaoxia.xyz &quot;Hello World&quot; )</code></p>\n<p>　　<code>这是我的博客地址：[Hello World][1]</code></p>\n<p>　　<code>[1]:http://www.dongxiaoxia.xyz &quot;Hello World&quot;</code></p>\n<p>　　<strong>页面显示</strong>：</p>\n<p>　　这是我的博客地址：<a href=\"http://www.dongxiaoxia.xyz\" title=\"Hello World\">Hello World</a></p>\n<p>　　这是我的博客地址：<a href=\"http://www.dongxiaoxia.xyz\" title=\"Hello World\">Hello World</a></p>\n<p>　　<strong>注意</strong>：</p>\n<ul>\n<li>参考式链接和行内链接的效果是一样的，各有利弊。行内连接清晰易懂，可以清楚的知道链接的地址，但是不便于多次利用。参考式链接可以重复使用，但不能即刻知道链接的地址。</li>\n<li>是在本窗口打开链接还是新建一个窗口还待研究。</li>\n<li>Markdown是支持HTML语法的，所以可以直接使用<code>&lt;a&gt;</code>标签,例如<code>&lt;a href=&quot;http://www.dongxiaoxia.xyz&quot;&gt;Hello World&lt;/a&gt;</code>，显示<a href=\"http://www.dongxiaoxia.xyz\">Hello World</a>。</li>\n<li>如果想直接显示链接地址，可以使用<code>&lt;http://www.dongxiaoxia.xyz&gt;</code>写法，显示<a href=\"http://www.dongxiaoxia.xyz\">http://www.dongxiaoxia.xyz</a></li>\n<li>还可以连<code>&lt;&gt;</code>都省略，直接使用<a href=\"http://www.dongxiaoxia.xyz\">http://www.dongxiaoxia.xyz</a> 写法，显示<a href=\"http://www.dongxiaoxia.xyz\">http://www.dongxiaoxia.xyz</a> ，注意链接后面接一个空格。</li>\n</ul>\n<hr>\n<h1 id=\"导入图片\">导入图片</h1><p>　　使用 <code>![Alt text](/path/to/img.jpg &quot;Optional title&quot;)</code> 导入图片。其中：</p>\n<ul>\n<li>Alt text 为如果图片无法显示时显示的文字；</li>\n<li>/path/to/img.jpg 为图片所在路径；</li>\n<li>Optional title 为显示标题。显示效果为在你将鼠标放到图片上后，会显示一个小框提示，提示的内容就是 Optional title 里的内容。</li>\n</ul>\n<p>　　<strong>示例</strong>：</p>\n<p><img src=\"/img/touxiang.jpg\" alt=\"Markdown\" title=\"这是我的头像，帅不帅\"></p>\n<p>　　<strong>注意</strong>：</p>\n<ul>\n<li>导入的图片路径可以使用绝对路径也可以使用相对路径，建议使用相对路径。</li>\n<li>我通常的做法是Markdown文档的同级目录下建立一个pictures文件夹，里面放置所有所需的图片，如果图片多的话，你也可以在pictures文件夹里建立子文件夹归类</li>\n</ul>\n<hr>\n<h1 id=\"反斜杠\">反斜杠</h1><p>　　使用<code>\\</code>表示反斜杠。在你不想显示Markdown标记时可以使用反斜杠。<br>　　<strong>示例</strong>：<br>　　　　\\*这里不会显示斜体\\*</p>\n<p>　　<strong>页面显示</strong>：<br>　　　　*这里不会显示斜体*</p>\n<hr>\n<h1 id=\"空格\">空格</h1><p>　　Markdown语法会忽略首行开头的空格，如果要体现出首行开头空两个的效果，可以使用<strong>全角符号下的空格</strong>，windows下使用<code>shift+空格</code>切换。</p>\n<hr>\n<h1 id=\"删除线\">删除线</h1><p>　　使用<code>~~</code>表示删除线。<br>　　<strong>示例</strong>：<br>　　　　~~这是一条删除线~~</p>\n<p>　　<strong>页面显示</strong>：<br>　　　　<del>这是一条删除线</del></p>\n<hr>\n<h1 id=\"页内跳转\">页内跳转</h1><p>　　使用html代码实现页内跳转。在要跳转到的位置定义个锚<code>&lt;span id = &quot;jump&quot;&gt;hehe&lt;/span&gt;</code>，然后使用<code>[你好](#jump)</code>将<code>你好</code>设置为一单击即跳转到<code>hehe</code>所在位置的效果。<br>　　<strong>示例</strong>：<br>　　　　<code>[你好](#jump)</code><br>　　　　<code>&lt;span id = &quot;jump&quot;&gt;hehe&lt;/span&gt;</code></p>\n<p>　　<strong>页面显示</strong>：<br>　　　　<a href=\"#jump\">你好</a><br>　　　　<span id=\"jump\">hehe</span></p>\n<hr>\n\n<p><a href=\"http://www.cnblogs.com/crazyant007/p/4220066.html?utm_source=tuicool\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/crazyant007/p/4220066.html?utm_source=tuicool</a><br></p>\n<hr>\n<p>参考<a href=\"http://www.cnblogs.com/crazyant007/p/4220066.html?utm_source=tuicool\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/crazyant007/p/4220066.html?utm_source=tuicool</a> 改写</p>\n","excerpt":"","more":"<p>这是<strong>新的开始</strong>，我用hexo创建了第一篇文章。</p>\n<h1 id=\"标题\">标题</h1><ul>\n<li>使用 # 表示标题，一级标题使用一个 # ，二级标题使用两个 ## ，以此类推，共有六级标题。</li>\n<li><p>使用 ===== 表示高阶标题，使用 ——— 表示次阶标题。</p>\n<p>示例：</p>\n<pre><code># 这是一级标题  \n## 这是二级标题  \n### 这是三级标题  \n###### 这是六级标题  \n这是一级标题  \n========  \n这是二级标题  \n--------------</code></pre>\n\n<p>页面显示：</p>\n<blockquote>\n<h1 id=\"这是一级标题\">这是一级标题</h1><h2 id=\"这是二级标题\">这是二级标题</h2><h3 id=\"这是三级标题\">这是三级标题</h3><h6 id=\"这是六级标题\">这是六级标题</h6><h1 id=\"这是一级标题-1\">这是一级标题</h1><p>这是二级标题</p>\n</blockquote>\n<p>注意：</p>\n<ul>\n<li>#和标题之间加一个空格。</li>\n<li>==== 和 —- 表示标题时，大于等于2个都可以表示。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<hr>\n<hr>\n<hr>\n<h1 id=\"引用\">引用</h1><pre><code>使用 &gt; 表示引用， <span class=\"prompt\">&gt;&gt; </span>表示引用里面再套一层引用，依次类推。\n</code></pre><p><strong>示例</strong>：</p>\n<pre><code> > 这是一级引用\n>> 这是二级引用\n>>> 这是三级引用\n\n>这是一级引用</code></pre>\n\n<p><strong>页面显示</strong>：</p>\n<blockquote>\n<p>这是一级引用</p>\n<blockquote>\n<p>这是二级引用</p>\n<blockquote>\n<p>这是三级引用</p>\n</blockquote>\n</blockquote>\n<p>这是一级引用</p>\n</blockquote>\n<p><strong>注意</strong>：</p>\n<ul>\n<li>如果 &gt; 和 &gt;&gt; 嵌套使用的话，从 &gt;&gt; 退到 &gt; 时，必须之间要加一个空格或者 &gt; 作为过渡，否则默认为下一行和上一行是同一级别的引用。</li>\n<li>引用标记里可以使用其他标记，如：有序列表或无序列表标记，代码标记等。</li>\n</ul>\n<hr>\n<h1 id=\"代码块\">代码块</h1><p>　　使用```表示代码块。</p>\n<p>　　<strong>示例</strong>：<br>　　```javascript<br>　　var canvas = document.getElementById(“canvas”);<br>　　var context = canvas.getContext(“2d”);<br>　　```</code></pre></p>\n<p>　　<strong>页面显示</strong>：<br>　　<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">　　<span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"canvas\"</span>);</span><br><span class=\"line\">　　<span class=\"keyword\">var</span> context = canvas.getContext(<span class=\"string\">\"2d\"</span>);</span><br></pre></td></tr></table></figure></p>\n<p>　　<strong>示例</strong>：<br>　　　　这是`javascript`代码<br>　　<strong>页面显示</strong>：<br>　　　　这是<code>javascript</code>代码</p>\n<p>　　<strong>注意</strong>：</p>\n<ul>\n<li>`这个符号是在 Esc 键下面，切换到英文下即可。</li>\n<li>```后面的 javascript 表示此段代码为javascript代码，Markdown会自行使用javascript代码颜色渲染。</li>\n</ul>\n<h2 id=\"Code_Block\"><strong>Code Block</strong></h2><p>在文章中插入代码。</p>\n<h3 id=\"快捷方式：code\"><strong>快捷方式</strong>：code</h3><figure class=\"highlight plain\"><figcaption><span>[title] [] [url] [link text]</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">code snippet</span><br></pre></td></tr></table></figure>\n<h3 id=\"普通的代码块\"><strong>普通的代码块</strong></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</span><br><span class=\"line\">&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;alert(&amp;apos;Hello World!&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</span><br><span class=\"line\">&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alert(&apos;Hello World!&apos;);</span><br></pre></td></tr></table></figure>\n<p>指定语言</p>\n<figure class=\"highlight objc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[rectangle setX: <span class=\"number\">10</span> y: <span class=\"number\">10</span> width: <span class=\"number\">20</span> height: <span class=\"number\">20</span>];</span><br></pre></td></tr></table></figure>\n<p>[rectangle setX: 10 y: 10 width: 20 height: 20];<br>附加说明</p>\n<figure class=\"highlight plain\"><figcaption><span>Array.map</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.map(callback[, thisArg])</span><br></pre></td></tr></table></figure>\n<p>Array.map<br>array.map(callback[, thisArg])<br>附加说明和网址</p>\n<figure class=\"highlight plain\"><figcaption><span>_.compact</span><a href=\"http://underscorejs.org/#compact\">Underscore.js</a></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_.compact([0, 1, false, 2, &apos;&apos;, 3]);</span><br><span class=\"line\">=&gt; [1, 2, 3]</span><br></pre></td></tr></table></figure>\n<p><em>.compactUnderscore.js\n</em>.compact([0, 1, false, 2, ‘’, 3]);<br>=&gt; [1, 2, 3]</p>\n<hr>\n<h1 id=\"列表\">列表</h1><p>　　使用<code>1. 2. 3.</code>表示有序列表，使用<code>*</code>或<code>-</code>或<code>+</code>表示无序列表。<br>　　<strong>示例1</strong>：<br>　　有序列表：</p>\n<p>　　1. 第一点<br>　　2. 第二点<br>　　4. 第三点</p>\n<p>　　<strong>页面显示</strong>：</p>\n<ol>\n<li>第一点</li>\n<li>第二点</li>\n<li>第三点</li>\n</ol>\n<p>　　<strong>示例2</strong>：<br>　　无序列表：<br>+ 呵呵<br>  　　* 嘉嘉<br>  　　- 嘻嘻<br> 　　 - 吼吼<br>   　　　　 - 嘎嘎<br>   　　　　 + 桀桀<br>* 哈哈<br>　　<strong>页面显示</strong>：</p>\n<ul>\n<li>呵呵<ul>\n<li>嘉嘉</li>\n</ul>\n<ul>\n<li>嘻嘻</li>\n<li>吼吼<ul>\n<li>嘎嘎</li>\n</ul>\n<ul>\n<li>桀桀</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>哈哈</li>\n</ul>\n<p>　　<strong>注意</strong>：</p>\n<ul>\n<li>无序列表或有序列表标记和后面的文字之间要有一个空格隔开。</li>\n<li>有序列表标记不是按照你写的数字进行显示的，而是根据当前有序列表标记所在位置显示的，如示例1所示。</li>\n<li>无序列表的项目符号是按照实心圆、空心圆、实心方格的层级关系递进的，如例2所示。通常情况下，同一层级使用同一种标记表示，便于自己查看和管理。</li>\n</ul>\n<hr>\n<h1 id=\"粗体和斜体\">粗体和斜体</h1><p>　　使用 <code>**</code> 或者 <code>__</code> 表示粗体。<br>　　使用 <code>*</code> 或者 <code>_</code> 表示斜体。</p>\n<p>　　<strong>示例</strong>：<br>　　　　**粗体1**　　__粗体2__<br>　　　　*斜体1*　　_斜体2_</p>\n<p>　　<strong>页面显示</strong>：<br>　　　　<strong>粗体1</strong>　　<strong>粗体2</strong><br>　　　　<em>斜体1</em>　　<em>斜体2</em></p>\n<p>　　<strong>注意</strong>：<br>　　前后的 * 或 _ 与要 加粗或倾斜 的字体之间不能有空格。</p>\n<hr>\n<h1 id=\"表格\">表格</h1><ul>\n<li>——: 为右对齐。</li>\n<li>:—— 为左对齐。</li>\n<li>:——: 为居中对齐。</li>\n<li>——- 为使用默认居中对齐。</li>\n</ul>\n<p>　　<strong>示例</strong>：</p>\n<pre><code>|<span class=\"string\">         序号    </span>|<span class=\"string\">    交易名    </span>|<span class=\"string\">    交易说明    </span>|<span class=\"string\">    备注    </span>|\n|<span class=\"string\">    ------: </span>|<span class=\"string\">    :-------:    </span>|<span class=\"string\">    :---------   </span>|<span class=\"string\">    ------    </span>|\n|<span class=\"string\">    1    </span>|<span class=\"string\">    prfcfg    </span>|<span class=\"string\">    菜单配置    </span>|<span class=\"string\">    可以通过此交易查询到所有交易码和菜单的对应关系    </span>|\n|<span class=\"string\">    2    </span>|<span class=\"string\">    gentmo    </span>|<span class=\"string\">    编译所有交易    </span>|<span class=\"string\">    </span>|\n|<span class=\"string\">    100000    </span>|<span class=\"string\">    sysdba    </span>|<span class=\"string\">    数据库表模型汇总    </span>|<span class=\"string\">    </span>|\n</code></pre><p>　　<strong>页面显示</strong>：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:right\">序号</th>\n<th style=\"text-align:center\">交易名</th>\n<th style=\"text-align:left\">交易说明</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:right\">1</td>\n<td style=\"text-align:center\">prfcfg</td>\n<td style=\"text-align:left\">菜单配置</td>\n<td>可以通过此交易查询到所有交易码和菜单的对应关系</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">2</td>\n<td style=\"text-align:center\">gentmo</td>\n<td style=\"text-align:left\">编译所有交易</td>\n<td></td>\n</tr>\n<tr>\n<td style=\"text-align:right\">100000</td>\n<td style=\"text-align:center\">sysdba</td>\n<td style=\"text-align:left\">数据库表模型汇总</td>\n</tr>\n</tbody>\n</table>\n<p>　　<strong>注意</strong>：</p>\n<ul>\n<li>每个Markdown解析器都不一样，可能左右居中对齐方式的表示方式不一样。</li>\n<li>可以使用<code>&lt;table&gt;</code>标签</li>\n</ul>\n<hr>\n<h1 id=\"分割线\">分割线</h1><p>　　使用 <code>---</code> 或者 <code>***</code> 或者 <code>* * *</code> 表示水平分割线。<br>　　<strong>示例</strong>：</p>\n<p>---\n 　　</p>\n<p>***\n 　　</p>\n<p>* * *</p>\n<p>　　<strong>页面显示</strong>：</p>\n<hr>\n<p> 　　</p>\n<hr>\n<p> 　　</p>\n<hr>\n<p>　　<strong>注意</strong>：</p>\n<ul>\n<li>只要 * 或者 - 大于等于三个就可组成一条平行线。</li>\n<li>使用 — 作为水平分割线时，要在它的前后都空一行，防止 — 被当成标题标记的表示方式。</li>\n</ul>\n<hr>\n<h1 id=\"链接\">链接</h1><p>　　使用 <code>[](link &quot;Optional title&quot;)</code> 表示行内链接。其中：</p>\n<ul>\n<li>[] 内的内容为要添加链接的文字。</li>\n<li>link 为链接地址。</li>\n<li>Optional title 为显示标题。显示效果为在你将鼠标放到链接上后，会显示一个小框提示，提示的内容就是 Optional title 里的内容。</li>\n</ul>\n<p>　　<strong>示例</strong>：</p>\n<p>　　<code>这是我的博客地址：[Hello World](http://www.dongxiaoxia.xyz &quot;Hello World&quot; )</code></p>\n<p>　　<code>这是我的博客地址：[Hello World][1]</code></p>\n<p>　　<code>[1]:http://www.dongxiaoxia.xyz &quot;Hello World&quot;</code></p>\n<p>　　<strong>页面显示</strong>：</p>\n<p>　　这是我的博客地址：<a href=\"http://www.dongxiaoxia.xyz\" title=\"Hello World\">Hello World</a></p>\n<p>　　这是我的博客地址：<a href=\"http://www.dongxiaoxia.xyz\" title=\"Hello World\">Hello World</a></p>\n<p>　　<strong>注意</strong>：</p>\n<ul>\n<li>参考式链接和行内链接的效果是一样的，各有利弊。行内连接清晰易懂，可以清楚的知道链接的地址，但是不便于多次利用。参考式链接可以重复使用，但不能即刻知道链接的地址。</li>\n<li>是在本窗口打开链接还是新建一个窗口还待研究。</li>\n<li>Markdown是支持HTML语法的，所以可以直接使用<code>&lt;a&gt;</code>标签,例如<code>&lt;a href=&quot;http://www.dongxiaoxia.xyz&quot;&gt;Hello World&lt;/a&gt;</code>，显示<a href=\"http://www.dongxiaoxia.xyz\">Hello World</a>。</li>\n<li>如果想直接显示链接地址，可以使用<code>&lt;http://www.dongxiaoxia.xyz&gt;</code>写法，显示<a href=\"http://www.dongxiaoxia.xyz\">http://www.dongxiaoxia.xyz</a></li>\n<li>还可以连<code>&lt;&gt;</code>都省略，直接使用<a href=\"http://www.dongxiaoxia.xyz\">http://www.dongxiaoxia.xyz</a> 写法，显示<a href=\"http://www.dongxiaoxia.xyz\">http://www.dongxiaoxia.xyz</a> ，注意链接后面接一个空格。</li>\n</ul>\n<hr>\n<h1 id=\"导入图片\">导入图片</h1><p>　　使用 <code>![Alt text](/path/to/img.jpg &quot;Optional title&quot;)</code> 导入图片。其中：</p>\n<ul>\n<li>Alt text 为如果图片无法显示时显示的文字；</li>\n<li>/path/to/img.jpg 为图片所在路径；</li>\n<li>Optional title 为显示标题。显示效果为在你将鼠标放到图片上后，会显示一个小框提示，提示的内容就是 Optional title 里的内容。</li>\n</ul>\n<p>　　<strong>示例</strong>：</p>\n<p><img src=\"/img/touxiang.jpg\" alt=\"Markdown\" title=\"这是我的头像，帅不帅\"></p>\n<p>　　<strong>注意</strong>：</p>\n<ul>\n<li>导入的图片路径可以使用绝对路径也可以使用相对路径，建议使用相对路径。</li>\n<li>我通常的做法是Markdown文档的同级目录下建立一个pictures文件夹，里面放置所有所需的图片，如果图片多的话，你也可以在pictures文件夹里建立子文件夹归类</li>\n</ul>\n<hr>\n<h1 id=\"反斜杠\">反斜杠</h1><p>　　使用<code>\\</code>表示反斜杠。在你不想显示Markdown标记时可以使用反斜杠。<br>　　<strong>示例</strong>：<br>　　　　\\*这里不会显示斜体\\*</p>\n<p>　　<strong>页面显示</strong>：<br>　　　　*这里不会显示斜体*</p>\n<hr>\n<h1 id=\"空格\">空格</h1><p>　　Markdown语法会忽略首行开头的空格，如果要体现出首行开头空两个的效果，可以使用<strong>全角符号下的空格</strong>，windows下使用<code>shift+空格</code>切换。</p>\n<hr>\n<h1 id=\"删除线\">删除线</h1><p>　　使用<code>~~</code>表示删除线。<br>　　<strong>示例</strong>：<br>　　　　~~这是一条删除线~~</p>\n<p>　　<strong>页面显示</strong>：<br>　　　　<del>这是一条删除线</del></p>\n<hr>\n<h1 id=\"页内跳转\">页内跳转</h1><p>　　使用html代码实现页内跳转。在要跳转到的位置定义个锚<code>&lt;span id = &quot;jump&quot;&gt;hehe&lt;/span&gt;</code>，然后使用<code>[你好](#jump)</code>将<code>你好</code>设置为一单击即跳转到<code>hehe</code>所在位置的效果。<br>　　<strong>示例</strong>：<br>　　　　<code>[你好](#jump)</code><br>　　　　<code>&lt;span id = &quot;jump&quot;&gt;hehe&lt;/span&gt;</code></p>\n<p>　　<strong>页面显示</strong>：<br>　　　　<a href=\"#jump\">你好</a><br>　　　　<span id = \"jump\">hehe</span></p>\n<hr>\n\n<p><a href=\"http://www.cnblogs.com/crazyant007/p/4220066.html?utm_source=tuicool\">http://www.cnblogs.com/crazyant007/p/4220066.html?utm_source=tuicool</a><br></p>\n<hr>\n<p>参考<a href=\"http://www.cnblogs.com/crazyant007/p/4220066.html?utm_source=tuicool\">http://www.cnblogs.com/crazyant007/p/4220066.html?utm_source=tuicool</a> 改写</p>\n"},{"title":"用Hexo与Github打造属于自己的博客","date":"2015-08-02T12:22:44.000Z","_content":"根据转载：{% link 粉丝日志 http://blog.fens.me/hexo-blog-github/ true 粉丝日志 %}修改\n## Hexo介绍\n\n&emsp;&emsp;Hexo是一个简单的、轻量的、基于Node的一个静态博客框架。通过Hexo我们可以快速创建自己的博客，仅需要几条命令就可以完成。发布时，Hexo可以部署在自己的Node服务器上面，也可以部署github上面。对于个人用户来说，部署在github上好处颇多，不仅可以省去服务器的成本，还可以减少各种系统运维的麻烦事(系统管理、备份、网络)。所以，基于github的个人站点，正在开始流行起来….\n&emsp;&emsp;Hexo的官方网站：http://hexo.io/\n## Hexo安装\n### 安装Git\n&emsp;&emsp;自行百度\n### 安装node.js\n&emsp;&emsp;node.js官网https://nodejs.org/\n### 安装Hexo\n&emsp;&emsp;命令行输入*npm install -g hexo*，等待安装完成。\n\n&emsp;&emsp;可能会出现下载不了的问题，可以设置npm国内镜像。镜像使用方法（三种办法任意一种都能解决问题，建议使用第三种，将配置写死，下次用的时候配置还在）:\n1. 通过config命令\nnpm config set registry https://registry.npm.taobao.org \nnpm info underscore （如果上面配置正确这个命令会有字符串response）\n2. 命令行指定\nnpm --registry https://registry.npm.taobao.org info underscore \n3. 编辑 ~/.npmrc 加入下面内容\nregistry = https://registry.npm.taobao.org\n搜索镜像: https://npm.taobao.org\n\n&emsp;&emsp;建立或使用镜像,参考: https://github.com/cnpm/cnpmjs.org\n\n&emsp;&emsp;安装成功后在命令行输入hexo可以查看hexo的命令。\n\n## Hexo使用\n&emsp;&emsp;hexo使用超级简单，仅仅几个命令还就可以运行博客的各种操作。下面列出了hexo使用的一个简单流程与命令。\n1. 创建项目主目录\n&emsp;&emsp;可以在电脑上任意创建作为hexo博客项目的文件夹，以后所有的hexo操作都要cd到项目文件夹根目录下运行。\n3. 运行命令hexo init\n&emsp;&emsp;我们看到当前在目录下，出现项目的各个文件夹与文。\n4. 运行命令hexo g\n&emsp;&emsp;在本地目录下，会生成一个public的目录，里面包括了所有静态化的文件。\n&emsp;&emsp;要说明的一点是hexo的静态博客框架，那什么是静态博客呢？静态博客，是只包含html, javascript, css文件的网站，没有动态的脚本。虽然我们是用Node进行的开发，但博客的发布后就与Node无关了。在发布之前，我们要通过一条命令，把所有的文章都做静态化处理，就是生成对应的html, javascript, css，使得所有的文章都是由静态文件组成的。\n5. 运行命令npm install\n&emsp;&emsp;注意不要漏了运行*npm install*命令，否则hexo s命令将报错。\n6. 运行命令hexo s\n&emsp;&emsp;在命令行窗口会提示：Hexo is running iat http://localhost:4000 Press Ctrl+C to stop.。这时我们就可以打开连接访问我们的博客了。\n\n&emsp;&emsp;是不是很简单呢！接下来，我们要对Hexo做更全面的了解，才能做出个性化的博客。\n\n## 部署Hexo到github\n### 配置Git\n&emsp;&emsp;Git是分布式的代码管理工具，远程的代码管理是基于SSH的，所以要使用远程的Git则需要SSH的配置。github的SSH配置如下：\n1. 设置Git的user name和email：\n$ git config --global user.name \"dongxiaoxia\"\n$ git config --global user.email \"dongxiaoxia@example.com\"\n2. 生成SSH密钥过程：\n查看是否已经有了ssh密钥：cd ~/.ssh\n如果没有密钥则不会有此文件夹，有则备份删除\n2. 生成密钥：\n运行命令$ ssh-keygen -t rsa -C “dongxiaoxia@example.com”\n文件夹默认，输入两次密码即可。\nYour identification has been saved in /home/tekkub/.ssh/id_rsa.\nYour public key has been saved in /home/tekkub/.ssh/id_rsa.pub.\nThe key fingerprint is:\n………………\n最后得到了两个文件：id_rsa和id_rsa.pub\n4. 在github上添加ssh密钥：\n这要添加的是“id_rsa.pub”里面的公钥。登录github，打开项目主页，在setting页面上找到SSH KEY设置，然后添加ssh，标题随意。\n5. 接着打开git ，输入命令*$ ssh -T git@github.com*测试连接是否成功。\n\n### 部署到github\n&emsp;&emsp;首先在github上创建一个项目dongxiaoxia.github.io，项目地址为https://github.com/dongxiaoxia.dongxiaoxia.github.io 。这里dongxiaoxia为用户名，项目名称必须为username.github.io.\n&emsp;&emsp;编辑全局配置文件：_config.yml，找到deploy的部分，设置github的项目地址。\n+ deploy:\n  type: git\n  repository: https://github.com/dongxiaoxia/dongxiaoxia.github.io.git\n  branch: master\n  \n&emsp;&emsp;然后通过命令hexo d部署\n&emsp;&emsp;如果提示count not find github，则deploy的type改成git，然后运行命令npm install hexo-deployer-git --save 再 hexo d。\n\n&emsp;&emsp;就这样这个静态的web网站就被部署到了github,点击”Settings”，找到GitHub Pages，提示“Your site is published at http://dongxiaoxia.github.io ”，打开网页http://dongxiaoxia.github.io ，就是我们刚刚发布的站点。\n## 绑定域名\n&emsp;&emsp;首先得有一个自己的域名，如果没有则可以跳过这步。\n1. 在域名解析页面设置主机记录，类型为CNAME，到dongxiaoxia.github.io。\n2. 在项目根目录上新建一个文件CNAME，文件内容为域名如www.dongxiaoxia.xyz。\n3. 然后通过浏览器打开www.dongxiaoxia.xyz就可以直接访问博客站点了。\n\n&emsp;&emsp;到这里为止，博客的搭建与Hexo的基本操作都已经掌握啦！剩下的就是怎么去搭建自己独一无二的博客了。\n\n\n\n\n\n","source":"_posts/用Hexo与GitHub打造属于自己的博客.md","raw":"title: 用Hexo与Github打造属于自己的博客\ndate: 2015-08-02 20:22:44\npermalink: hexo001\ntags:\n- Hexo\ncategories:\n- Hexo\n\n---\n根据转载：{% link 粉丝日志 http://blog.fens.me/hexo-blog-github/ true 粉丝日志 %}修改\n## Hexo介绍\n\n&emsp;&emsp;Hexo是一个简单的、轻量的、基于Node的一个静态博客框架。通过Hexo我们可以快速创建自己的博客，仅需要几条命令就可以完成。发布时，Hexo可以部署在自己的Node服务器上面，也可以部署github上面。对于个人用户来说，部署在github上好处颇多，不仅可以省去服务器的成本，还可以减少各种系统运维的麻烦事(系统管理、备份、网络)。所以，基于github的个人站点，正在开始流行起来….\n&emsp;&emsp;Hexo的官方网站：http://hexo.io/\n## Hexo安装\n### 安装Git\n&emsp;&emsp;自行百度\n### 安装node.js\n&emsp;&emsp;node.js官网https://nodejs.org/\n### 安装Hexo\n&emsp;&emsp;命令行输入*npm install -g hexo*，等待安装完成。\n\n&emsp;&emsp;可能会出现下载不了的问题，可以设置npm国内镜像。镜像使用方法（三种办法任意一种都能解决问题，建议使用第三种，将配置写死，下次用的时候配置还在）:\n1. 通过config命令\nnpm config set registry https://registry.npm.taobao.org \nnpm info underscore （如果上面配置正确这个命令会有字符串response）\n2. 命令行指定\nnpm --registry https://registry.npm.taobao.org info underscore \n3. 编辑 ~/.npmrc 加入下面内容\nregistry = https://registry.npm.taobao.org\n搜索镜像: https://npm.taobao.org\n\n&emsp;&emsp;建立或使用镜像,参考: https://github.com/cnpm/cnpmjs.org\n\n&emsp;&emsp;安装成功后在命令行输入hexo可以查看hexo的命令。\n\n## Hexo使用\n&emsp;&emsp;hexo使用超级简单，仅仅几个命令还就可以运行博客的各种操作。下面列出了hexo使用的一个简单流程与命令。\n1. 创建项目主目录\n&emsp;&emsp;可以在电脑上任意创建作为hexo博客项目的文件夹，以后所有的hexo操作都要cd到项目文件夹根目录下运行。\n3. 运行命令hexo init\n&emsp;&emsp;我们看到当前在目录下，出现项目的各个文件夹与文。\n4. 运行命令hexo g\n&emsp;&emsp;在本地目录下，会生成一个public的目录，里面包括了所有静态化的文件。\n&emsp;&emsp;要说明的一点是hexo的静态博客框架，那什么是静态博客呢？静态博客，是只包含html, javascript, css文件的网站，没有动态的脚本。虽然我们是用Node进行的开发，但博客的发布后就与Node无关了。在发布之前，我们要通过一条命令，把所有的文章都做静态化处理，就是生成对应的html, javascript, css，使得所有的文章都是由静态文件组成的。\n5. 运行命令npm install\n&emsp;&emsp;注意不要漏了运行*npm install*命令，否则hexo s命令将报错。\n6. 运行命令hexo s\n&emsp;&emsp;在命令行窗口会提示：Hexo is running iat http://localhost:4000 Press Ctrl+C to stop.。这时我们就可以打开连接访问我们的博客了。\n\n&emsp;&emsp;是不是很简单呢！接下来，我们要对Hexo做更全面的了解，才能做出个性化的博客。\n\n## 部署Hexo到github\n### 配置Git\n&emsp;&emsp;Git是分布式的代码管理工具，远程的代码管理是基于SSH的，所以要使用远程的Git则需要SSH的配置。github的SSH配置如下：\n1. 设置Git的user name和email：\n$ git config --global user.name \"dongxiaoxia\"\n$ git config --global user.email \"dongxiaoxia@example.com\"\n2. 生成SSH密钥过程：\n查看是否已经有了ssh密钥：cd ~/.ssh\n如果没有密钥则不会有此文件夹，有则备份删除\n2. 生成密钥：\n运行命令$ ssh-keygen -t rsa -C “dongxiaoxia@example.com”\n文件夹默认，输入两次密码即可。\nYour identification has been saved in /home/tekkub/.ssh/id_rsa.\nYour public key has been saved in /home/tekkub/.ssh/id_rsa.pub.\nThe key fingerprint is:\n………………\n最后得到了两个文件：id_rsa和id_rsa.pub\n4. 在github上添加ssh密钥：\n这要添加的是“id_rsa.pub”里面的公钥。登录github，打开项目主页，在setting页面上找到SSH KEY设置，然后添加ssh，标题随意。\n5. 接着打开git ，输入命令*$ ssh -T git@github.com*测试连接是否成功。\n\n### 部署到github\n&emsp;&emsp;首先在github上创建一个项目dongxiaoxia.github.io，项目地址为https://github.com/dongxiaoxia.dongxiaoxia.github.io 。这里dongxiaoxia为用户名，项目名称必须为username.github.io.\n&emsp;&emsp;编辑全局配置文件：_config.yml，找到deploy的部分，设置github的项目地址。\n+ deploy:\n  type: git\n  repository: https://github.com/dongxiaoxia/dongxiaoxia.github.io.git\n  branch: master\n  \n&emsp;&emsp;然后通过命令hexo d部署\n&emsp;&emsp;如果提示count not find github，则deploy的type改成git，然后运行命令npm install hexo-deployer-git --save 再 hexo d。\n\n&emsp;&emsp;就这样这个静态的web网站就被部署到了github,点击”Settings”，找到GitHub Pages，提示“Your site is published at http://dongxiaoxia.github.io ”，打开网页http://dongxiaoxia.github.io ，就是我们刚刚发布的站点。\n## 绑定域名\n&emsp;&emsp;首先得有一个自己的域名，如果没有则可以跳过这步。\n1. 在域名解析页面设置主机记录，类型为CNAME，到dongxiaoxia.github.io。\n2. 在项目根目录上新建一个文件CNAME，文件内容为域名如www.dongxiaoxia.xyz。\n3. 然后通过浏览器打开www.dongxiaoxia.xyz就可以直接访问博客站点了。\n\n&emsp;&emsp;到这里为止，博客的搭建与Hexo的基本操作都已经掌握啦！剩下的就是怎么去搭建自己独一无二的博客了。\n\n\n\n\n\n","slug":"hexo001","published":1,"updated":"2016-05-10T04:46:54.283Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431oma001buco0zewpuvw7","content":"<p>根据转载：<a href=\"http://blog.fens.me/hexo-blog-github/\" title=\"粉丝日志\" target=\"_blank\">粉丝日志</a>修改</p>\n<h2 id=\"Hexo介绍\">Hexo介绍</h2><p>&emsp;&emsp;Hexo是一个简单的、轻量的、基于Node的一个静态博客框架。通过Hexo我们可以快速创建自己的博客，仅需要几条命令就可以完成。发布时，Hexo可以部署在自己的Node服务器上面，也可以部署github上面。对于个人用户来说，部署在github上好处颇多，不仅可以省去服务器的成本，还可以减少各种系统运维的麻烦事(系统管理、备份、网络)。所以，基于github的个人站点，正在开始流行起来….<br>&emsp;&emsp;Hexo的官方网站：<a href=\"http://hexo.io/\" target=\"_blank\" rel=\"external\">http://hexo.io/</a></p>\n<h2 id=\"Hexo安装\">Hexo安装</h2><h3 id=\"安装Git\">安装Git</h3><p>&emsp;&emsp;自行百度</p>\n<h3 id=\"安装node-js\">安装node.js</h3><p>&emsp;&emsp;node.js官网<a href=\"https://nodejs.org/\" target=\"_blank\" rel=\"external\">https://nodejs.org/</a></p>\n<h3 id=\"安装Hexo\">安装Hexo</h3><p>&emsp;&emsp;命令行输入<em>npm install -g hexo</em>，等待安装完成。</p>\n<p>&emsp;&emsp;可能会出现下载不了的问题，可以设置npm国内镜像。镜像使用方法（三种办法任意一种都能解决问题，建议使用第三种，将配置写死，下次用的时候配置还在）:</p>\n<ol>\n<li>通过config命令<br>npm config set registry <a href=\"https://registry.npm.taobao.org\" target=\"_blank\" rel=\"external\">https://registry.npm.taobao.org</a><br>npm info underscore （如果上面配置正确这个命令会有字符串response）</li>\n<li>命令行指定<br>npm –registry <a href=\"https://registry.npm.taobao.org\" target=\"_blank\" rel=\"external\">https://registry.npm.taobao.org</a> info underscore </li>\n<li>编辑 ~/.npmrc 加入下面内容<br>registry = <a href=\"https://registry.npm.taobao.org\" target=\"_blank\" rel=\"external\">https://registry.npm.taobao.org</a><br>搜索镜像: <a href=\"https://npm.taobao.org\" target=\"_blank\" rel=\"external\">https://npm.taobao.org</a></li>\n</ol>\n<p>&emsp;&emsp;建立或使用镜像,参考: <a href=\"https://github.com/cnpm/cnpmjs.org\" target=\"_blank\" rel=\"external\">https://github.com/cnpm/cnpmjs.org</a></p>\n<p>&emsp;&emsp;安装成功后在命令行输入hexo可以查看hexo的命令。</p>\n<h2 id=\"Hexo使用\">Hexo使用</h2><p>&emsp;&emsp;hexo使用超级简单，仅仅几个命令还就可以运行博客的各种操作。下面列出了hexo使用的一个简单流程与命令。</p>\n<ol>\n<li>创建项目主目录<br>&emsp;&emsp;可以在电脑上任意创建作为hexo博客项目的文件夹，以后所有的hexo操作都要cd到项目文件夹根目录下运行。</li>\n<li>运行命令hexo init<br>&emsp;&emsp;我们看到当前在目录下，出现项目的各个文件夹与文。</li>\n<li>运行命令hexo g<br>&emsp;&emsp;在本地目录下，会生成一个public的目录，里面包括了所有静态化的文件。<br>&emsp;&emsp;要说明的一点是hexo的静态博客框架，那什么是静态博客呢？静态博客，是只包含html, javascript, css文件的网站，没有动态的脚本。虽然我们是用Node进行的开发，但博客的发布后就与Node无关了。在发布之前，我们要通过一条命令，把所有的文章都做静态化处理，就是生成对应的html, javascript, css，使得所有的文章都是由静态文件组成的。</li>\n<li>运行命令npm install<br>&emsp;&emsp;注意不要漏了运行<em>npm install</em>命令，否则hexo s命令将报错。</li>\n<li>运行命令hexo s<br>&emsp;&emsp;在命令行窗口会提示：Hexo is running iat <a href=\"http://localhost:4000\" target=\"_blank\" rel=\"external\">http://localhost:4000</a> Press Ctrl+C to stop.。这时我们就可以打开连接访问我们的博客了。</li>\n</ol>\n<p>&emsp;&emsp;是不是很简单呢！接下来，我们要对Hexo做更全面的了解，才能做出个性化的博客。</p>\n<h2 id=\"部署Hexo到github\">部署Hexo到github</h2><h3 id=\"配置Git\">配置Git</h3><p>&emsp;&emsp;Git是分布式的代码管理工具，远程的代码管理是基于SSH的，所以要使用远程的Git则需要SSH的配置。github的SSH配置如下：</p>\n<ol>\n<li>设置Git的user name和email：<br>$ git config –global user.name “dongxiaoxia”<br>$ git config –global user.email “dongxiaoxia@example.com”</li>\n<li>生成SSH密钥过程：<br>查看是否已经有了ssh密钥：cd ~/.ssh<br>如果没有密钥则不会有此文件夹，有则备份删除</li>\n<li>生成密钥：<br>运行命令$ ssh-keygen -t rsa -C “dongxiaoxia@example.com”<br>文件夹默认，输入两次密码即可。<br>Your identification has been saved in /home/tekkub/.ssh/id_rsa.<br>Your public key has been saved in /home/tekkub/.ssh/id_rsa.pub.<br>The key fingerprint is:<br>………………<br>最后得到了两个文件：id_rsa和id_rsa.pub</li>\n<li>在github上添加ssh密钥：<br>这要添加的是“id_rsa.pub”里面的公钥。登录github，打开项目主页，在setting页面上找到SSH KEY设置，然后添加ssh，标题随意。</li>\n<li>接着打开git ，输入命令<em>$ ssh -T git@github.com</em>测试连接是否成功。</li>\n</ol>\n<h3 id=\"部署到github\">部署到github</h3><p>&emsp;&emsp;首先在github上创建一个项目dongxiaoxia.github.io，项目地址为<a href=\"https://github.com/dongxiaoxia.dongxiaoxia.github.io\" target=\"_blank\" rel=\"external\">https://github.com/dongxiaoxia.dongxiaoxia.github.io</a> 。这里dongxiaoxia为用户名，项目名称必须为username.github.io.<br>&emsp;&emsp;编辑全局配置文件：_config.yml，找到deploy的部分，设置github的项目地址。</p>\n<ul>\n<li>deploy:<br>type: git<br>repository: <a href=\"https://github.com/dongxiaoxia/dongxiaoxia.github.io.git\" target=\"_blank\" rel=\"external\">https://github.com/dongxiaoxia/dongxiaoxia.github.io.git</a><br>branch: master</li>\n</ul>\n<p>&emsp;&emsp;然后通过命令hexo d部署<br>&emsp;&emsp;如果提示count not find github，则deploy的type改成git，然后运行命令npm install hexo-deployer-git –save 再 hexo d。</p>\n<p>&emsp;&emsp;就这样这个静态的web网站就被部署到了github,点击”Settings”，找到GitHub Pages，提示“Your site is published at <a href=\"http://dongxiaoxia.github.io\" target=\"_blank\" rel=\"external\">http://dongxiaoxia.github.io</a> ”，打开网页<a href=\"http://dongxiaoxia.github.io\" target=\"_blank\" rel=\"external\">http://dongxiaoxia.github.io</a> ，就是我们刚刚发布的站点。</p>\n<h2 id=\"绑定域名\">绑定域名</h2><p>&emsp;&emsp;首先得有一个自己的域名，如果没有则可以跳过这步。</p>\n<ol>\n<li>在域名解析页面设置主机记录，类型为CNAME，到dongxiaoxia.github.io。</li>\n<li>在项目根目录上新建一个文件CNAME，文件内容为域名如www.dongxiaoxia.xyz。</li>\n<li>然后通过浏览器打开www.dongxiaoxia.xyz就可以直接访问博客站点了。</li>\n</ol>\n<p>&emsp;&emsp;到这里为止，博客的搭建与Hexo的基本操作都已经掌握啦！剩下的就是怎么去搭建自己独一无二的博客了。</p>\n","excerpt":"","more":"<p>根据转载：<a href=\"http://blog.fens.me/hexo-blog-github/\" title=\"粉丝日志\" target=\"_blank\">粉丝日志</a>修改</p>\n<h2 id=\"Hexo介绍\">Hexo介绍</h2><p>&emsp;&emsp;Hexo是一个简单的、轻量的、基于Node的一个静态博客框架。通过Hexo我们可以快速创建自己的博客，仅需要几条命令就可以完成。发布时，Hexo可以部署在自己的Node服务器上面，也可以部署github上面。对于个人用户来说，部署在github上好处颇多，不仅可以省去服务器的成本，还可以减少各种系统运维的麻烦事(系统管理、备份、网络)。所以，基于github的个人站点，正在开始流行起来….<br>&emsp;&emsp;Hexo的官方网站：<a href=\"http://hexo.io/\">http://hexo.io/</a></p>\n<h2 id=\"Hexo安装\">Hexo安装</h2><h3 id=\"安装Git\">安装Git</h3><p>&emsp;&emsp;自行百度</p>\n<h3 id=\"安装node-js\">安装node.js</h3><p>&emsp;&emsp;node.js官网<a href=\"https://nodejs.org/\">https://nodejs.org/</a></p>\n<h3 id=\"安装Hexo\">安装Hexo</h3><p>&emsp;&emsp;命令行输入<em>npm install -g hexo</em>，等待安装完成。</p>\n<p>&emsp;&emsp;可能会出现下载不了的问题，可以设置npm国内镜像。镜像使用方法（三种办法任意一种都能解决问题，建议使用第三种，将配置写死，下次用的时候配置还在）:</p>\n<ol>\n<li>通过config命令<br>npm config set registry <a href=\"https://registry.npm.taobao.org\">https://registry.npm.taobao.org</a><br>npm info underscore （如果上面配置正确这个命令会有字符串response）</li>\n<li>命令行指定<br>npm –registry <a href=\"https://registry.npm.taobao.org\">https://registry.npm.taobao.org</a> info underscore </li>\n<li>编辑 ~/.npmrc 加入下面内容<br>registry = <a href=\"https://registry.npm.taobao.org\">https://registry.npm.taobao.org</a><br>搜索镜像: <a href=\"https://npm.taobao.org\">https://npm.taobao.org</a></li>\n</ol>\n<p>&emsp;&emsp;建立或使用镜像,参考: <a href=\"https://github.com/cnpm/cnpmjs.org\">https://github.com/cnpm/cnpmjs.org</a></p>\n<p>&emsp;&emsp;安装成功后在命令行输入hexo可以查看hexo的命令。</p>\n<h2 id=\"Hexo使用\">Hexo使用</h2><p>&emsp;&emsp;hexo使用超级简单，仅仅几个命令还就可以运行博客的各种操作。下面列出了hexo使用的一个简单流程与命令。</p>\n<ol>\n<li>创建项目主目录<br>&emsp;&emsp;可以在电脑上任意创建作为hexo博客项目的文件夹，以后所有的hexo操作都要cd到项目文件夹根目录下运行。</li>\n<li>运行命令hexo init<br>&emsp;&emsp;我们看到当前在目录下，出现项目的各个文件夹与文。</li>\n<li>运行命令hexo g<br>&emsp;&emsp;在本地目录下，会生成一个public的目录，里面包括了所有静态化的文件。<br>&emsp;&emsp;要说明的一点是hexo的静态博客框架，那什么是静态博客呢？静态博客，是只包含html, javascript, css文件的网站，没有动态的脚本。虽然我们是用Node进行的开发，但博客的发布后就与Node无关了。在发布之前，我们要通过一条命令，把所有的文章都做静态化处理，就是生成对应的html, javascript, css，使得所有的文章都是由静态文件组成的。</li>\n<li>运行命令npm install<br>&emsp;&emsp;注意不要漏了运行<em>npm install</em>命令，否则hexo s命令将报错。</li>\n<li>运行命令hexo s<br>&emsp;&emsp;在命令行窗口会提示：Hexo is running iat <a href=\"http://localhost:4000\">http://localhost:4000</a> Press Ctrl+C to stop.。这时我们就可以打开连接访问我们的博客了。</li>\n</ol>\n<p>&emsp;&emsp;是不是很简单呢！接下来，我们要对Hexo做更全面的了解，才能做出个性化的博客。</p>\n<h2 id=\"部署Hexo到github\">部署Hexo到github</h2><h3 id=\"配置Git\">配置Git</h3><p>&emsp;&emsp;Git是分布式的代码管理工具，远程的代码管理是基于SSH的，所以要使用远程的Git则需要SSH的配置。github的SSH配置如下：</p>\n<ol>\n<li>设置Git的user name和email：<br>$ git config –global user.name “dongxiaoxia”<br>$ git config –global user.email “dongxiaoxia@example.com”</li>\n<li>生成SSH密钥过程：<br>查看是否已经有了ssh密钥：cd ~/.ssh<br>如果没有密钥则不会有此文件夹，有则备份删除</li>\n<li>生成密钥：<br>运行命令$ ssh-keygen -t rsa -C “dongxiaoxia@example.com”<br>文件夹默认，输入两次密码即可。<br>Your identification has been saved in /home/tekkub/.ssh/id_rsa.<br>Your public key has been saved in /home/tekkub/.ssh/id_rsa.pub.<br>The key fingerprint is:<br>………………<br>最后得到了两个文件：id_rsa和id_rsa.pub</li>\n<li>在github上添加ssh密钥：<br>这要添加的是“id_rsa.pub”里面的公钥。登录github，打开项目主页，在setting页面上找到SSH KEY设置，然后添加ssh，标题随意。</li>\n<li>接着打开git ，输入命令<em>$ ssh -T git@github.com</em>测试连接是否成功。</li>\n</ol>\n<h3 id=\"部署到github\">部署到github</h3><p>&emsp;&emsp;首先在github上创建一个项目dongxiaoxia.github.io，项目地址为<a href=\"https://github.com/dongxiaoxia.dongxiaoxia.github.io\">https://github.com/dongxiaoxia.dongxiaoxia.github.io</a> 。这里dongxiaoxia为用户名，项目名称必须为username.github.io.<br>&emsp;&emsp;编辑全局配置文件：_config.yml，找到deploy的部分，设置github的项目地址。</p>\n<ul>\n<li>deploy:<br>type: git<br>repository: <a href=\"https://github.com/dongxiaoxia/dongxiaoxia.github.io.git\">https://github.com/dongxiaoxia/dongxiaoxia.github.io.git</a><br>branch: master</li>\n</ul>\n<p>&emsp;&emsp;然后通过命令hexo d部署<br>&emsp;&emsp;如果提示count not find github，则deploy的type改成git，然后运行命令npm install hexo-deployer-git –save 再 hexo d。</p>\n<p>&emsp;&emsp;就这样这个静态的web网站就被部署到了github,点击”Settings”，找到GitHub Pages，提示“Your site is published at <a href=\"http://dongxiaoxia.github.io\">http://dongxiaoxia.github.io</a> ”，打开网页<a href=\"http://dongxiaoxia.github.io\">http://dongxiaoxia.github.io</a> ，就是我们刚刚发布的站点。</p>\n<h2 id=\"绑定域名\">绑定域名</h2><p>&emsp;&emsp;首先得有一个自己的域名，如果没有则可以跳过这步。</p>\n<ol>\n<li>在域名解析页面设置主机记录，类型为CNAME，到dongxiaoxia.github.io。</li>\n<li>在项目根目录上新建一个文件CNAME，文件内容为域名如www.dongxiaoxia.xyz。</li>\n<li>然后通过浏览器打开www.dongxiaoxia.xyz就可以直接访问博客站点了。</li>\n</ol>\n<p>&emsp;&emsp;到这里为止，博客的搭建与Hexo的基本操作都已经掌握啦！剩下的就是怎么去搭建自己独一无二的博客了。</p>\n"},{"title":"网站后台页面左侧收缩折叠效果","date":"2015-08-19T15:11:44.000Z","_content":"\n```\n<html>\n<head>\n<meta http-equiv=Content-Type content=\"text/html; charset=utf-8\">\n<title>网站后台页面左侧收缩折叠效果 - 源码之家</title>\n<style type=\"text/css\">\n*{margin:0;padding:0;list-style-type:none; font-size:12px}\n</style>\n<script type=\"text/javascript\">\nfunction switchSysBar(){\n\tif(switchPoint.innerText==3){\n\t\tswitchPoint.innerText=4\n\t\tdocument.all(\"frmtitle\").style.display=\"none\"\n\t}else{\n\t\tswitchPoint.innerText=3\n\t\tdocument.all(\"frmtitle\").style.display=\"\"\n\t}\n}\n\nfunction switchSysBarInfo(){\n\tswitchPoint.innerText=3\n\tdocument.all(\"frmtitle\").style.display=\"\"\n}\n</script>\n</head>\n<body>\n\n\t<table width=\"100%\" height=\"100%\" border=0 cellpadding=\"0\" cellSpacing=0 style=\"background:#000;\">\n\t\t<tr>\n\t\t\t<td height=\"80\" style=\"font-size:28px; color:#FFF;text-align:center;font-weight:800;\">顶部导航</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td height=\"100%\" bgcolor=\"#ffffff\">\n\t\t\t\t<table width=\"100%\" height=\"100%\" cellpadding=\"0\" cellSpacing=0 border=0 borderColor=\"#000\">\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr> \n\t\t\t\t\t\t\t<td width=\"200\" id=\"frmtitle\" style=\"font-size:28px;text-align:center;font-weight:800;\">左侧列表</td>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<td bgcolor=\"#000\" onClick=\"switchSysBar()\" style=\"height:100%;width:12px;text-align:center;cursor:pointer;\">\n\t\t\t\t\t\t\t\t<span id=\"switchPoint\" title=\"打开/关闭左边导航栏\" style=\"color:#666;cursor:hand;font-family:Webdings;font-size:12px;\">3</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<td style=\"font-size:28px;text-align:center;font-weight:800;\">\n\t\t\t\t\t\t     \n\t\t\t\t\t\t\t\t<h2 style=\"font-size:20px;color:#000;\">右侧正文部分</h2>\n                                \n       <div style=\"text-align:center;\">\n<p>来源：<a href=\"http://www.mycodes.net/\" target=\"_blank\">源码之家</a></p>\n</div>                         \n                                \n                                </td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n</body>\n</html>\n```","source":"_posts/网站后台页面左侧收缩折叠效果.md","raw":"title: 网站后台页面左侧收缩折叠效果\ndate: 2015-08-19 23:11:44\npermalink: hexo001\ntags:\n- html\ncategories:\n- html\n\n---\n\n```\n<html>\n<head>\n<meta http-equiv=Content-Type content=\"text/html; charset=utf-8\">\n<title>网站后台页面左侧收缩折叠效果 - 源码之家</title>\n<style type=\"text/css\">\n*{margin:0;padding:0;list-style-type:none; font-size:12px}\n</style>\n<script type=\"text/javascript\">\nfunction switchSysBar(){\n\tif(switchPoint.innerText==3){\n\t\tswitchPoint.innerText=4\n\t\tdocument.all(\"frmtitle\").style.display=\"none\"\n\t}else{\n\t\tswitchPoint.innerText=3\n\t\tdocument.all(\"frmtitle\").style.display=\"\"\n\t}\n}\n\nfunction switchSysBarInfo(){\n\tswitchPoint.innerText=3\n\tdocument.all(\"frmtitle\").style.display=\"\"\n}\n</script>\n</head>\n<body>\n\n\t<table width=\"100%\" height=\"100%\" border=0 cellpadding=\"0\" cellSpacing=0 style=\"background:#000;\">\n\t\t<tr>\n\t\t\t<td height=\"80\" style=\"font-size:28px; color:#FFF;text-align:center;font-weight:800;\">顶部导航</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td height=\"100%\" bgcolor=\"#ffffff\">\n\t\t\t\t<table width=\"100%\" height=\"100%\" cellpadding=\"0\" cellSpacing=0 border=0 borderColor=\"#000\">\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr> \n\t\t\t\t\t\t\t<td width=\"200\" id=\"frmtitle\" style=\"font-size:28px;text-align:center;font-weight:800;\">左侧列表</td>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<td bgcolor=\"#000\" onClick=\"switchSysBar()\" style=\"height:100%;width:12px;text-align:center;cursor:pointer;\">\n\t\t\t\t\t\t\t\t<span id=\"switchPoint\" title=\"打开/关闭左边导航栏\" style=\"color:#666;cursor:hand;font-family:Webdings;font-size:12px;\">3</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<td style=\"font-size:28px;text-align:center;font-weight:800;\">\n\t\t\t\t\t\t     \n\t\t\t\t\t\t\t\t<h2 style=\"font-size:20px;color:#000;\">右侧正文部分</h2>\n                                \n       <div style=\"text-align:center;\">\n<p>来源：<a href=\"http://www.mycodes.net/\" target=\"_blank\">源码之家</a></p>\n</div>                         \n                                \n                                </td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n</body>\n</html>\n```","slug":"hexo001","published":1,"updated":"2016-05-10T04:46:54.298Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431omc001fuco04wavbjgp","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta http-equiv=Content-Type content=&quot;text/html; charset=utf-8&quot;&gt;</span><br><span class=\"line\">&lt;title&gt;网站后台页面左侧收缩折叠效果 - 源码之家&lt;/title&gt;</span><br><span class=\"line\">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class=\"line\">*&#123;margin:0;padding:0;list-style-type:none; font-size:12px&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class=\"line\">function switchSysBar()&#123;</span><br><span class=\"line\">\tif(switchPoint.innerText==3)&#123;</span><br><span class=\"line\">\t\tswitchPoint.innerText=4</span><br><span class=\"line\">\t\tdocument.all(&quot;frmtitle&quot;).style.display=&quot;none&quot;</span><br><span class=\"line\">\t&#125;else&#123;</span><br><span class=\"line\">\t\tswitchPoint.innerText=3</span><br><span class=\"line\">\t\tdocument.all(&quot;frmtitle&quot;).style.display=&quot;&quot;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function switchSysBarInfo()&#123;</span><br><span class=\"line\">\tswitchPoint.innerText=3</span><br><span class=\"line\">\tdocument.all(&quot;frmtitle&quot;).style.display=&quot;&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">\t&lt;table width=&quot;100%&quot; height=&quot;100%&quot; border=0 cellpadding=&quot;0&quot; cellSpacing=0 style=&quot;background:#000;&quot;&gt;</span><br><span class=\"line\">\t\t&lt;tr&gt;</span><br><span class=\"line\">\t\t\t&lt;td height=&quot;80&quot; style=&quot;font-size:28px; color:#FFF;text-align:center;font-weight:800;&quot;&gt;顶部导航&lt;/td&gt;</span><br><span class=\"line\">\t\t&lt;/tr&gt;</span><br><span class=\"line\">\t\t&lt;tr&gt;</span><br><span class=\"line\">\t\t\t&lt;td height=&quot;100%&quot; bgcolor=&quot;#ffffff&quot;&gt;</span><br><span class=\"line\">\t\t\t\t&lt;table width=&quot;100%&quot; height=&quot;100%&quot; cellpadding=&quot;0&quot; cellSpacing=0 border=0 borderColor=&quot;#000&quot;&gt;</span><br><span class=\"line\">\t\t\t\t\t&lt;tbody&gt;</span><br><span class=\"line\">\t\t\t\t\t\t&lt;tr&gt; </span><br><span class=\"line\">\t\t\t\t\t\t\t&lt;td width=&quot;200&quot; id=&quot;frmtitle&quot; style=&quot;font-size:28px;text-align:center;font-weight:800;&quot;&gt;左侧列表&lt;/td&gt;</span><br><span class=\"line\">\t\t\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t\t\t\t&lt;td bgcolor=&quot;#000&quot; onClick=&quot;switchSysBar()&quot; style=&quot;height:100%;width:12px;text-align:center;cursor:pointer;&quot;&gt;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t&lt;span id=&quot;switchPoint&quot; title=&quot;打开/关闭左边导航栏&quot; style=&quot;color:#666;cursor:hand;font-family:Webdings;font-size:12px;&quot;&gt;3&lt;/span&gt;</span><br><span class=\"line\">\t\t\t\t\t\t\t&lt;/td&gt;</span><br><span class=\"line\">\t\t\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t\t\t\t&lt;td style=&quot;font-size:28px;text-align:center;font-weight:800;&quot;&gt;</span><br><span class=\"line\">\t\t\t\t\t\t     </span><br><span class=\"line\">\t\t\t\t\t\t\t\t&lt;h2 style=&quot;font-size:20px;color:#000;&quot;&gt;右侧正文部分&lt;/h2&gt;</span><br><span class=\"line\">                                </span><br><span class=\"line\">       &lt;div style=&quot;text-align:center;&quot;&gt;</span><br><span class=\"line\">&lt;p&gt;来源：&lt;a href=&quot;http://www.mycodes.net/&quot; target=&quot;_blank&quot;&gt;源码之家&lt;/a&gt;&lt;/p&gt;</span><br><span class=\"line\">&lt;/div&gt;                         </span><br><span class=\"line\">                                </span><br><span class=\"line\">                                &lt;/td&gt;</span><br><span class=\"line\">\t\t\t\t\t\t&lt;/tr&gt;</span><br><span class=\"line\">\t\t\t\t\t&lt;/tbody&gt;</span><br><span class=\"line\">\t\t\t\t&lt;/table&gt;</span><br><span class=\"line\">\t\t\t&lt;/td&gt;</span><br><span class=\"line\">\t\t&lt;/tr&gt;</span><br><span class=\"line\">\t&lt;/table&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>","excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta http-equiv=Content-Type content=&quot;text/html; charset=utf-8&quot;&gt;</span><br><span class=\"line\">&lt;title&gt;网站后台页面左侧收缩折叠效果 - 源码之家&lt;/title&gt;</span><br><span class=\"line\">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class=\"line\">*&#123;margin:0;padding:0;list-style-type:none; font-size:12px&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class=\"line\">function switchSysBar()&#123;</span><br><span class=\"line\">\tif(switchPoint.innerText==3)&#123;</span><br><span class=\"line\">\t\tswitchPoint.innerText=4</span><br><span class=\"line\">\t\tdocument.all(&quot;frmtitle&quot;).style.display=&quot;none&quot;</span><br><span class=\"line\">\t&#125;else&#123;</span><br><span class=\"line\">\t\tswitchPoint.innerText=3</span><br><span class=\"line\">\t\tdocument.all(&quot;frmtitle&quot;).style.display=&quot;&quot;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function switchSysBarInfo()&#123;</span><br><span class=\"line\">\tswitchPoint.innerText=3</span><br><span class=\"line\">\tdocument.all(&quot;frmtitle&quot;).style.display=&quot;&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">\t&lt;table width=&quot;100%&quot; height=&quot;100%&quot; border=0 cellpadding=&quot;0&quot; cellSpacing=0 style=&quot;background:#000;&quot;&gt;</span><br><span class=\"line\">\t\t&lt;tr&gt;</span><br><span class=\"line\">\t\t\t&lt;td height=&quot;80&quot; style=&quot;font-size:28px; color:#FFF;text-align:center;font-weight:800;&quot;&gt;顶部导航&lt;/td&gt;</span><br><span class=\"line\">\t\t&lt;/tr&gt;</span><br><span class=\"line\">\t\t&lt;tr&gt;</span><br><span class=\"line\">\t\t\t&lt;td height=&quot;100%&quot; bgcolor=&quot;#ffffff&quot;&gt;</span><br><span class=\"line\">\t\t\t\t&lt;table width=&quot;100%&quot; height=&quot;100%&quot; cellpadding=&quot;0&quot; cellSpacing=0 border=0 borderColor=&quot;#000&quot;&gt;</span><br><span class=\"line\">\t\t\t\t\t&lt;tbody&gt;</span><br><span class=\"line\">\t\t\t\t\t\t&lt;tr&gt; </span><br><span class=\"line\">\t\t\t\t\t\t\t&lt;td width=&quot;200&quot; id=&quot;frmtitle&quot; style=&quot;font-size:28px;text-align:center;font-weight:800;&quot;&gt;左侧列表&lt;/td&gt;</span><br><span class=\"line\">\t\t\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t\t\t\t&lt;td bgcolor=&quot;#000&quot; onClick=&quot;switchSysBar()&quot; style=&quot;height:100%;width:12px;text-align:center;cursor:pointer;&quot;&gt;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t&lt;span id=&quot;switchPoint&quot; title=&quot;打开/关闭左边导航栏&quot; style=&quot;color:#666;cursor:hand;font-family:Webdings;font-size:12px;&quot;&gt;3&lt;/span&gt;</span><br><span class=\"line\">\t\t\t\t\t\t\t&lt;/td&gt;</span><br><span class=\"line\">\t\t\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t\t\t\t&lt;td style=&quot;font-size:28px;text-align:center;font-weight:800;&quot;&gt;</span><br><span class=\"line\">\t\t\t\t\t\t     </span><br><span class=\"line\">\t\t\t\t\t\t\t\t&lt;h2 style=&quot;font-size:20px;color:#000;&quot;&gt;右侧正文部分&lt;/h2&gt;</span><br><span class=\"line\">                                </span><br><span class=\"line\">       &lt;div style=&quot;text-align:center;&quot;&gt;</span><br><span class=\"line\">&lt;p&gt;来源：&lt;a href=&quot;http://www.mycodes.net/&quot; target=&quot;_blank&quot;&gt;源码之家&lt;/a&gt;&lt;/p&gt;</span><br><span class=\"line\">&lt;/div&gt;                         </span><br><span class=\"line\">                                </span><br><span class=\"line\">                                &lt;/td&gt;</span><br><span class=\"line\">\t\t\t\t\t\t&lt;/tr&gt;</span><br><span class=\"line\">\t\t\t\t\t&lt;/tbody&gt;</span><br><span class=\"line\">\t\t\t\t&lt;/table&gt;</span><br><span class=\"line\">\t\t\t&lt;/td&gt;</span><br><span class=\"line\">\t\t&lt;/tr&gt;</span><br><span class=\"line\">\t&lt;/table&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>"},{"title":"软件推荐","date":"2016-05-20T06:50:12.000Z","_content":"# 软件推荐\n\n> 记录下自己最常用的并且好用的电脑软件，顺便与大家分享一下。或许你真的没发现这么好用的软件呢。    —— [东小侠](http://www.dongxiaoxia.xyz)\n\n\n\n- **[Chrome](http://www.google.cn/intl/zh-CN/chrome)** ：最喜欢的浏览器，加上Evernote就是我的整个互联网，但是翻墙才是正确的打开方式。\n- **[Evernote(印象笔记)](https://www.yinxiang.com)** ：现代生活喧嚣繁杂，印象笔记帮你轻松简化一切，让生活更美好，让工作更省力。广泛的信息收集途径，无论是微信，网页，都能一键收藏。\n- **[Intellij IDEA](https://www.jetbrains.com/idea/)** ：IDEA，我的揾食工具 ，是java语言开发的集成环境，被公认为最好的java开发工具之一。\n- **[MINGW64](http://mingw-w64.org/)** ：对我来说最大的好处就是在Windows下用Linux命令操作Windows系统，我一般用来配合Git使用。\n- **[Git](https://git-scm.com/)** ：Git是一个免费开源的分布式版本控制系统设计。玩Github得用到。\n- **[Github Desktop](https://desktop.github.com/)** ：GitHub桌面客户端，不懂git命令可以试试这个。\n- **[NotePad++](https://notepad-plus-plus.org/)** ：替代Windows自带的文本编辑器，不用IDE打开编辑文件时这个是很方便的替代工具。\n- **[Xsheel](https://www.netsarang.com/products/xsh_overview.html)** ：一直在使用的终端模拟软件，用来连接线上的linux服务器。\n- **[FileZilla](https://www.filezilla.cn/)** ：FTP工具，可以连上linux服务器进行文件传输。\n- **[Navicat](https://www.navicat.com.cn/)** ：数据库管理工具。\n- **[Fiddler](http://www.telerik.com/fiddler)** ：HTTP抓包工具\n- **[Google Drive](https://www.google.com/intl/zh-TW/drive/)** ：无论身在何处，都能立即存取文件，拒绝使用国内网盘。\n- **[Splashtop streamer](http://www.splashtop.com/)** ：手机远程操作电脑的工具。\n- **[马克飞象](https://maxiang.io/)** ：是一款专为印象笔记（Evernote）打造的Markdown编辑器。\n","source":"_posts/软件推荐.md","raw":"title: 软件推荐\ndate: 2016-05-20 14:50:12\npermalink: soft-1\ntags:\n- 软件推荐\ncategories:\n- 软件\n---\n# 软件推荐\n\n> 记录下自己最常用的并且好用的电脑软件，顺便与大家分享一下。或许你真的没发现这么好用的软件呢。    —— [东小侠](http://www.dongxiaoxia.xyz)\n\n\n\n- **[Chrome](http://www.google.cn/intl/zh-CN/chrome)** ：最喜欢的浏览器，加上Evernote就是我的整个互联网，但是翻墙才是正确的打开方式。\n- **[Evernote(印象笔记)](https://www.yinxiang.com)** ：现代生活喧嚣繁杂，印象笔记帮你轻松简化一切，让生活更美好，让工作更省力。广泛的信息收集途径，无论是微信，网页，都能一键收藏。\n- **[Intellij IDEA](https://www.jetbrains.com/idea/)** ：IDEA，我的揾食工具 ，是java语言开发的集成环境，被公认为最好的java开发工具之一。\n- **[MINGW64](http://mingw-w64.org/)** ：对我来说最大的好处就是在Windows下用Linux命令操作Windows系统，我一般用来配合Git使用。\n- **[Git](https://git-scm.com/)** ：Git是一个免费开源的分布式版本控制系统设计。玩Github得用到。\n- **[Github Desktop](https://desktop.github.com/)** ：GitHub桌面客户端，不懂git命令可以试试这个。\n- **[NotePad++](https://notepad-plus-plus.org/)** ：替代Windows自带的文本编辑器，不用IDE打开编辑文件时这个是很方便的替代工具。\n- **[Xsheel](https://www.netsarang.com/products/xsh_overview.html)** ：一直在使用的终端模拟软件，用来连接线上的linux服务器。\n- **[FileZilla](https://www.filezilla.cn/)** ：FTP工具，可以连上linux服务器进行文件传输。\n- **[Navicat](https://www.navicat.com.cn/)** ：数据库管理工具。\n- **[Fiddler](http://www.telerik.com/fiddler)** ：HTTP抓包工具\n- **[Google Drive](https://www.google.com/intl/zh-TW/drive/)** ：无论身在何处，都能立即存取文件，拒绝使用国内网盘。\n- **[Splashtop streamer](http://www.splashtop.com/)** ：手机远程操作电脑的工具。\n- **[马克飞象](https://maxiang.io/)** ：是一款专为印象笔记（Evernote）打造的Markdown编辑器。\n","slug":"soft-1","published":1,"updated":"2016-05-20T07:07:42.237Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431omg001iuco00w5qqjmr","content":"<h1 id=\"软件推荐\">软件推荐</h1><blockquote>\n<p>记录下自己最常用的并且好用的电脑软件，顺便与大家分享一下。或许你真的没发现这么好用的软件呢。    —— <a href=\"http://www.dongxiaoxia.xyz\">东小侠</a></p>\n</blockquote>\n<ul>\n<li><strong><a href=\"http://www.google.cn/intl/zh-CN/chrome\" target=\"_blank\" rel=\"external\">Chrome</a></strong> ：最喜欢的浏览器，加上Evernote就是我的整个互联网，但是翻墙才是正确的打开方式。</li>\n<li><strong><a href=\"https://www.yinxiang.com\" target=\"_blank\" rel=\"external\">Evernote(印象笔记)</a></strong> ：现代生活喧嚣繁杂，印象笔记帮你轻松简化一切，让生活更美好，让工作更省力。广泛的信息收集途径，无论是微信，网页，都能一键收藏。</li>\n<li><strong><a href=\"https://www.jetbrains.com/idea/\" target=\"_blank\" rel=\"external\">Intellij IDEA</a></strong> ：IDEA，我的揾食工具 ，是java语言开发的集成环境，被公认为最好的java开发工具之一。</li>\n<li><strong><a href=\"http://mingw-w64.org/\" target=\"_blank\" rel=\"external\">MINGW64</a></strong> ：对我来说最大的好处就是在Windows下用Linux命令操作Windows系统，我一般用来配合Git使用。</li>\n<li><strong><a href=\"https://git-scm.com/\" target=\"_blank\" rel=\"external\">Git</a></strong> ：Git是一个免费开源的分布式版本控制系统设计。玩Github得用到。</li>\n<li><strong><a href=\"https://desktop.github.com/\" target=\"_blank\" rel=\"external\">Github Desktop</a></strong> ：GitHub桌面客户端，不懂git命令可以试试这个。</li>\n<li><strong><a href=\"https://notepad-plus-plus.org/\" target=\"_blank\" rel=\"external\">NotePad++</a></strong> ：替代Windows自带的文本编辑器，不用IDE打开编辑文件时这个是很方便的替代工具。</li>\n<li><strong><a href=\"https://www.netsarang.com/products/xsh_overview.html\" target=\"_blank\" rel=\"external\">Xsheel</a></strong> ：一直在使用的终端模拟软件，用来连接线上的linux服务器。</li>\n<li><strong><a href=\"https://www.filezilla.cn/\" target=\"_blank\" rel=\"external\">FileZilla</a></strong> ：FTP工具，可以连上linux服务器进行文件传输。</li>\n<li><strong><a href=\"https://www.navicat.com.cn/\" target=\"_blank\" rel=\"external\">Navicat</a></strong> ：数据库管理工具。</li>\n<li><strong><a href=\"http://www.telerik.com/fiddler\" target=\"_blank\" rel=\"external\">Fiddler</a></strong> ：HTTP抓包工具</li>\n<li><strong><a href=\"https://www.google.com/intl/zh-TW/drive/\" target=\"_blank\" rel=\"external\">Google Drive</a></strong> ：无论身在何处，都能立即存取文件，拒绝使用国内网盘。</li>\n<li><strong><a href=\"http://www.splashtop.com/\" target=\"_blank\" rel=\"external\">Splashtop streamer</a></strong> ：手机远程操作电脑的工具。</li>\n<li><strong><a href=\"https://maxiang.io/\" target=\"_blank\" rel=\"external\">马克飞象</a></strong> ：是一款专为印象笔记（Evernote）打造的Markdown编辑器。</li>\n</ul>\n","excerpt":"","more":"<h1 id=\"软件推荐\">软件推荐</h1><blockquote>\n<p>记录下自己最常用的并且好用的电脑软件，顺便与大家分享一下。或许你真的没发现这么好用的软件呢。    —— <a href=\"http://www.dongxiaoxia.xyz\">东小侠</a></p>\n</blockquote>\n<ul>\n<li><strong><a href=\"http://www.google.cn/intl/zh-CN/chrome\">Chrome</a></strong> ：最喜欢的浏览器，加上Evernote就是我的整个互联网，但是翻墙才是正确的打开方式。</li>\n<li><strong><a href=\"https://www.yinxiang.com\">Evernote(印象笔记)</a></strong> ：现代生活喧嚣繁杂，印象笔记帮你轻松简化一切，让生活更美好，让工作更省力。广泛的信息收集途径，无论是微信，网页，都能一键收藏。</li>\n<li><strong><a href=\"https://www.jetbrains.com/idea/\">Intellij IDEA</a></strong> ：IDEA，我的揾食工具 ，是java语言开发的集成环境，被公认为最好的java开发工具之一。</li>\n<li><strong><a href=\"http://mingw-w64.org/\">MINGW64</a></strong> ：对我来说最大的好处就是在Windows下用Linux命令操作Windows系统，我一般用来配合Git使用。</li>\n<li><strong><a href=\"https://git-scm.com/\">Git</a></strong> ：Git是一个免费开源的分布式版本控制系统设计。玩Github得用到。</li>\n<li><strong><a href=\"https://desktop.github.com/\">Github Desktop</a></strong> ：GitHub桌面客户端，不懂git命令可以试试这个。</li>\n<li><strong><a href=\"https://notepad-plus-plus.org/\">NotePad++</a></strong> ：替代Windows自带的文本编辑器，不用IDE打开编辑文件时这个是很方便的替代工具。</li>\n<li><strong><a href=\"https://www.netsarang.com/products/xsh_overview.html\">Xsheel</a></strong> ：一直在使用的终端模拟软件，用来连接线上的linux服务器。</li>\n<li><strong><a href=\"https://www.filezilla.cn/\">FileZilla</a></strong> ：FTP工具，可以连上linux服务器进行文件传输。</li>\n<li><strong><a href=\"https://www.navicat.com.cn/\">Navicat</a></strong> ：数据库管理工具。</li>\n<li><strong><a href=\"http://www.telerik.com/fiddler\">Fiddler</a></strong> ：HTTP抓包工具</li>\n<li><strong><a href=\"https://www.google.com/intl/zh-TW/drive/\">Google Drive</a></strong> ：无论身在何处，都能立即存取文件，拒绝使用国内网盘。</li>\n<li><strong><a href=\"http://www.splashtop.com/\">Splashtop streamer</a></strong> ：手机远程操作电脑的工具。</li>\n<li><strong><a href=\"https://maxiang.io/\">马克飞象</a></strong> ：是一款专为印象笔记（Evernote）打造的Markdown编辑器。</li>\n</ul>\n"},{"title":"服务器 JDK + Tomcat + Nginx 部署环境整体搭建及自动化部署的具体实现","date":"2017-01-19T03:39:44.000Z","_content":"本篇文章主要围绕一个问题：本地开发完项目后如何简单部署到服务器？\n这个问题太宽泛了，因此，提出了以下几个要点：\n1. 第一次怎么部署\n2. 增量开发后怎么`简单`部署?\n3. 服务器环境整体如何规划？各个项目怎么存放，日志是否集中存放 ？项目各个项目运行环境与部署怎么分开？。。。\n4. 如何用脚本自动化部署？\n5. 如何用几句话归纳部署？\n\n经过整篇文章，我想会有一定的答案。\n\n\n文章的各个章节并不是按照解决问题的顺序写的，而是按照环境部署、项目配置、自动化部署一步步递进的，完成服务器 JDK + Tomcat + Nginx 部署环境整体搭建及自动化部署的具体实现。\n\n## 1.服务器环境整体规划\n在本篇文章的部署方式中，会涉及以下4个总目录\n\n\t1. 项目目录 /opt/web\n\t2. 日志目录 /opt/log\n\t3. JDK/Tomcat/Nginx等安装环境的父目录  /opt/soft\n\t4. 项目应用war包上传到服务器的目录 /root/deploy\n\n## 2.运行环境安装\n### 2.1 JDK\n1. 官网下载 JDK8，解压到/opt/soft ，解压文件夹为jdk1.8.0_11\n2. 配置 JDK 环境变量\n 在`/etc/profile`文件末尾添加以下配置 ：\n```bash\n#jdk enviroment\nJAVA_HOME=/opt/soft/jdk1.8.0_11/\nPATH=$JAVA_HOME/bin:$PATH\nCLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nexport JAVA_HOME\nexport PATH\nexport CLASSPATH \n```\n 保存退出。终端执行命令` source /etc/profile`  使配置生效  \n3. 验证 JDK 配置\n 终端执行命令：`java -version`\n```bash\nubuntu# java -version\njava version \"1.8.0_111\"\nJava(TM) SE Runtime Environment (build 1.8.0_111-b14)\nJava HotSpot(TM) 64-Bit Server VM (build 25.111-b14, mixed mode)\n```\n> **JDK 配置成功！！！**\n\n### 2.2 Tomcat\n1. 官网下载tomcat，我这里下载的是apache-tomcat-7.0.73，解压到/opt/soft ，解压文件夹为apache-tomcat-7.0.73\n2. 进入tomcat目录下的bin目录下，执行tomcat启动脚本（tomcat依赖jdk，应先确定jdk已经安装）\n```bash\nubuntu# sh startup.sh \nUsing CATALINA_BASE:   /opt/soft/apache-tomcat-7.0.73\nUsing CATALINA_HOME:   /opt/soft/apache-tomcat-7.0.73\nUsing CATALINA_TMPDIR: /opt/soft/apache-tomcat-7.0.73/temp\nUsing JRE_HOME:        /opt/soft/jdk1.8.0_11/\nUsing CLASSPATH:       /opt/soft/apache-tomcat-7.0.73/bin/bootstrap.jar:/opt/soft/apache-tomcat-7.0.73/bin/tomcat-juli.jar\nTomcat started.\nubuntu# \n\n```\n出现以上信息证明tomcat已经成功启动，打开 http://ip:8080 或 [http:/localhost:8080](http://localhost:8080),如果能看到tomcat系统界面，说明已经安装成功，可以进行下一步了。\n \n **常见命令**\n>启动tomcat ：sh startup.sh\n关闭tomcat  ：sh shutdown.sh\n查看tomcat运行进程 ： ps aux | grep tomcat 或 ps aux | grep java 或ps -ef | grep java  或 ps -ef | grep tomcat\n查看端口使用情况   netstat –apn 或 netstat -tunlp  ，可以结合 grep ，如 netstat -apn | grep (端口号)  或 netstat -apn | grep java\n其中最后一下为pid/program name ，如果端口被占用， 可以进一步使用命令：ps -ef  | grep (pid) 查看，可以查出是哪个进程占用了端口号，可以kill portId 杀死进程。\n\n### 2.3 Nginx\n 这里演示的系统为`Ubuntu`\n\nUbuntu平台编译环境安装\n```bash\napt-get install build-essentail\napt-get install libtool\n```\n安装Nginx依赖包 OpenSSL、zlib、 pcre\n这三个包可以直接在终端下载，如果网速慢，建议在本地下载再上传到服务器。\n安装Nginx依赖包\n```bash\napt-get install libpcre3 libpcre3-dev zlib1g-dev libssl-dev build-essential\n```\n选择下载保存目录 cd /opt/soft\n下载OpenSSL\n```bash\nwget ftp://ftp.openssl.org/source/openssl-1.1.0c.tar.gz\n```\n下载zlib\n```bash\nwget http://zlib.net/zlib128.zip\n```\n下载pcre\n```bash\nwget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.39.tar.gz\n```\n安装OpenSSL\n```bash\ntar zxvf openssl-1.0.0c.tar.gz\ncd openssl-1.0.0c/\n./config --prefix=/opt/soft --openssldir=/opt/soft/ssl\nmake && make install\n\n./config shared --prefix=/opt/soft --openssldir=/opt/soft/ssl\nmake clean\nmake && make install\n```\n安装zlib库\n```bash\nunzip zlib128.zip\ncd zlib128/\n./configure --prefix=/opt/soft\nmake && make install\n```\n安装pcre库\n```bash\n tar zxvf pcre-8.39.tar.gz\ncd pcre-8.39/\n./configure --prefix=/opt/soft\nmake && make install\n```\n 查看pcre版本\n```bash\npcre-config --version\n```\n安装Nginx\n1下载 Nginx，下载地址：[http://nginx.org/download/nginx-1.6.2.tar.gz](http://nginx.org/download/nginx-1.6.2.tar.gz)\n```bash\nwget http://nginx.org/download/nginx-1.6.2.tar.gz\n```\n2解压安装包 \n```bash\ntar zxvf nginx-1.6.2.tar.gz\n```\n3进入安装包目录\n```bash\ncd nginx-1.6.2\n```\n4编译安装\n```bash\n[root@bogon nginx-1.6.2]# ./configure --prefix=/opt/soft/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/opt/soft/src/pcre-8.39\n[root@bogon nginx-1.6.2]# make\n[root@bogon nginx-1.6.2]# make install\n```\n5查看Nginx版本\n```bash\n/opt/soft/nginx/sbin/nginx -v\nnginx version: nginx/1.6.2\n```\n\n6启动nginx\n```bash\n/opt/soft/nginx/sbin/nginx\n```\n>到此，nginx安装成功\n\n**Nginx常用命令**\n>/opt/soft/nginx/sbin/nginx -v                   #查看 Nginx版本\n/opt/soft/nginx/sbin/nginx                       #启动 Nginx\n/opt/soft/nginx/sbin/nginx -t                   # 检查配置文件ngnix.conf的正确性\n/opt/soft/nginx/sbin/nginx -s reload        #重新载入配置文件\n/opt/soft/nginx/sbin/nginx -s reopen       #重启 Nginx\n/opt/soft/nginx/sbin/nginx -s stop           #停止 Nginx\n\n\n\tjdk\\tomcat\\nginx 安装完毕，查看服务器目录\n/opt/soft 目录下文件结构\n```bash\n ➜  apache-tomcat-7.0.73 ll /opt/soft       \n总用量 8.4M\ndrwxr-xr-x  9 root root 4.0K 12月 27 09:25 apache-tomcat-7.0.73\ndrwxr-xr-x  2 root root 4.0K 12月 28 15:44 bin\ndrwxr-xr-x  3 root root 4.0K 12月 28 15:38 include\ndrwxr-xr-x  8 uucp  143 4.0K 6月  17  2014 jdk1.8.0_11\ndrwxr-xr-x  4 root root 4.0K 12月 28 15:44 lib\ndrwxr-xr-x 11 root root 4.0K 12月 28 16:22 nginx\ndrwxr-xr-x  9 1001 1001 4.0K 12月 28 16:14 nginx-1.6.2\n-rwxr-xr-x  1 root root 786K 12月 28 16:13 nginx-1.6.2.tar.gz\ndrwxr-xr-x 19 root root 4.0K 12月 28 16:05 openssl-1.1.0c\n-rwxr-xr-x  1 root root 5.0M 12月 28 15:34 openssl-1.1.0c.tar.gz\ndrwxr-xr-x  9 1169 1169  12K 12月 28 16:15 pcre-8.39\n-rwxr-xr-x  1 root root 2.0M 12月 28 15:23 pcre-8.39.tar.gz\ndrwxr-xr-x  4 root root 4.0K 12月 28 15:32 share\ndrwxr-xr-x  5 root root 4.0K 12月 28 15:44 ssl\ndrwxr-xr-x 14 root root 4.0K 12月 28 15:30 zlib-1.2.8\n-rwxr-xr-x  1 root root 679K 12月 28 15:28 zlib128.zip\n```\n\n## 3. Tomcat多实例多应用部署\n### 3.1. 部署应用分类\n`单实例单应用`：一个tomcat目录，webapps目录下只跑一个war包，最基本的部署方式。\n`单实例多应用`：一个tomcat目录，webapps目录下跑多个war包。 启动、关闭 tomcat对所有war包起作用。\n`多实例单应用`：多个tomcat目录，每个tomcat只跑一个应用，并且是同一个应用。通过修改tomcat端口配合nginx进行负载均衡。\n`多实例多应用`：把一个tomcat分为2部分，一部分为公用的bin目录与lib目录，其余文件夹作为第二部分，可以复制多次，因此tomcat只有一个，但是实例可以有多个，每个实例在单独部署，与单实例多应用相似。\n\n>1. 一个tomcat，充分利用资源，对tomcat的更新维护也很方便\n>2. 多个实例，各个实例互不影响\n>3. 各个项目相互独立，启动关闭不影响\n>4. 部署容易，启动快速\n### 3.2 目录结构认识\n 一个刚解压出来的tomcat打包文件应该有以下几个目录\n bin:主要存放脚本文件，例如比较常用的windows和linux系统中启动和关闭脚本\n conf:主要存放配置文件，其中最重要的两个配置文件是server.xml和web.xml\n lib:主要存放tomcat运行所依赖的包\n logs:主要存放运行时产生的日志文件，例如catalina.{date}.log等\n temp:存放tomcat运行时产生的临时文件，例如开启了hibernate缓存的应用程序，会在该目录下生成一些文件\n webapps:部署web应用程序的默认目录\n work:主要存放由JSP文件生成的servlet（java文件以及最终编译生成的class文件）\n### 3.3 多实例原理\ntomcat中两个比较重要的概念（通常也是两个系统变量）——CATALINA_HOME和CATALINA_BASE：\n * CATALINA_HOME：即指向Tomcat安装路径的系统变量\n * CATALINA_BASE：即指向活跃配置路径的系统变量\n\n通过设置这两个变量，就可以将tomcat的安装目录和工作目录分离，从而实现tomcat多实例的部署。\n\nTomcat官方文档指出，CATALINA_HOME路径的路径下只需要包含bin和lib目录，这也就是支持tomcat软件运行的目录，而CATALINA_BASE设置的路径可以包括上述所有目录，不过其中bin和lib目录并不是必需的，缺省时会使用CATALINA_HOME中的bin和conf。如此，我们就可以使用一个tomcat安装目录部署多个tomcat实例，这样的好处在于方便升级，就可以在不影响tomcat实例的前提下，替换掉CATALINA_HOME指定的tomcat安装目录。\n\n简而言之：\n* CATALINA_HOME：bin      lib\n* CATALINA_BASE：conf      webapps      temp      logs      work\n\n> **server.xml**\n\n这里部署多实例要修改的两个端口：\n* Server Port：该端口用于监听关闭tomcat的shutdown命令，默认为8005\n* Connector Port：该端口用于监听HTTP的请求，默认为8080\n\n简单的多实例只需要保证多实例中的Server Port和Connect Port不同即可。\n\n另外要修改的是Host配置，Host就是所谓的虚拟主机，对应包含了一个或者多个web应用程序。其中：\n\n* name： 虚拟主机的名称，一台主机表示了完全限定的域名或IP地址，默认为localhost，同时也是唯一的host，进入tomcat的所有http请求都会映射到该主机上\n* appBase：web应用程序目录的路径，可以是CATALINA_HOME的相对路径，也可以写成绝对路径，默认情况下为$CATALINA_HOME/webapps\n* unpackWARs： 表示是否自动解压war包\n* autoDeploy：所谓的热部署，即在tomcat正在运行的情况下，如果有新的war加入，则会立即执行部署操作\n* 另外再介绍一个Host中的属性—deployOnStartup：表示tomcat启动时是否自动部署appBase目录下所有的Web应用程序，默认为true。这个属性和autoDeploy会产生两次部署的“副作用”：一次是tomcat启动时就开始部署，第二次就是autoDeploy引起的热部署。因此最好将autoDeploy置为false\n\n最后再说明一下Context的配置，它出现在Host配置内，一个Context的配置就代表了一个web应用程序，如果配置多应用程序，就需要在Host下配置多个Context。其中：\n\n* path：表示访问入口，例如，path=”/abc”，则访问localhost:8080/abc时，就可以访问该Context对应的应用程序。如果path=””，则直接用localhost:8080就可以访问。\n* docBase：表示应用程序的解包目录或者war文件路径，是Host的appBase配置目录的相对路径，也可以是直接写成绝对路径，但是不要将appBase的值，作为docBase配置路径的前缀，例如appBase=”somedir”，docBase=”somedir-someapp.war”，这样的配置会导致部署错误。\n\n### 3.4 多实例多应用部署\n假设一个完好的可以运行的web应用程序已经打包成test.war，放在/root/deploy/test目录下，其中包含一个简单的index.jsp\n```xml\n<html>\n<body>\n<h2>Hello World!</h2>\n</body>\n</html>\n```\n#### 创建tomcat实例\n之前我们已经在/opt/soft/下成功安装了tomcat\n```bash\nubuntu# ls /opt/soft/apache-tomcat-7.0.73\nbin  conf  lib    LICENSE  logs  NOTICE  RELEASE-NOTES  RUNNING.txt  temp  webapps  work\n```\n\n我们的实例目录放在/opt/web/test 下\n复制相关实例文件夹到该目录下\n```bash\nubuntu# ls /opt/web/test\nconf  debug.sh\tlogs  restart.sh  run.sh  stop.sh  webapps  work\n```\n其中run.sh 、stop.sh、debug.sh、restart.sh 脚本文件本不属于tomcat实例的，是为了方便启动、停止tomcat实例而创建的脚本\n\n#### 创建启停脚本\nrun.sh 脚本文件内容：\n```bash\n#!/bin/sh\nTOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73\nCATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)\nCATALINA_PID=$CATALINA_BASE/tomcat.pid\nJAVA_HOME=/opt/soft/jdk1.8.0_11/\nCLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib\nLD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib\nPATH=$PATH:$JAVA_HOME/bin\n\n#路径为【/opt/web/xxx】时，项目名则为【xxx】\nPROJECT_NAME=`echo $CATALINA_BASE | awk -F \"/\" '{print $NF}'`\n\n#检测temp目录是否存在，不存在则创建\nif [ ! -d \"$CATALINA_BASE/temp\" ]; then\n    mkdir \"$CATALINA_BASE/temp\"\nfi\n\n#日志目录名\nPROJECT_LOG=/opt/log/$PROJECT_NAME/catalina.out\n\nJAVA_OPTS=\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"\n\nexport TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH\n\nproj_dir=$CATALINA_BASE\nif [ -n \"$proj_dir\" ]\nthen\n        ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" > /dev/null\n        status=$?\n\n        if  [ $status -eq 0 ] && [ -s $CATALINA_PID  ]\n        then\n                echo \"The $proj_dir tomcat is running and the pid_file is exist !\"\n                exit 1\n        elif [ $status -eq 0 ] || [ -s $CATALINA_PID  ]\n        then\n                echo \"kill one\"\n                ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" | awk '{print $2}' | xargs -i kill -9 {}\n                > $CATALINA_PID\n                $TOMCAT_HOME/bin/catalina.sh start\n        else\n                $TOMCAT_HOME/bin/catalina.sh start\n        fi\n\nelse\n        echo \"start failt!!!\"\n        exit 1\nfi\n```\n\nstop.sh脚本内容\n```bash\n#!/bin/sh\nTOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73\n#CATALINA_BASE=/opt/web/test\nCATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)\nCATALINA_PID=$CATALINA_BASE/tomcat.pid\nJAVA_HOME=/opt/soft/jdk1.8.0_11/\nCLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib\nPATH=$PATH:$JAVA_HOME/bin\n\n#路径为【/opt/web/xxx】时，项目名则为【xxx】\nPROJECT_NAME=`echo $CATALINA_BASE | awk -F \"/\" '{print $NF}'`\necho $PROJECT_NAME\n\n#日志目录名\nPROJECT_LOG=/opt/log/$PROJECT_NAME/\n\nexport TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG\n\nproj_dir=$CATALINA_BASE\n$TOMCAT_HOME/bin/catalina.sh stop\nsleep 5\nif [ -n \"$proj_dir\" ]\nthen\n        ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" > /dev/null\n        status=$?\n        if [ $status -eq 0 ] || [ -s $CATALINA_PID  ]\n        then\n                echo \"kill it\"\n                ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" |  awk '{print $2}' | xargs -i kill -9 {}\n                > $CATALINA_PID\n        fi\nelse\n        echo \"stop failt!!!\"\n        exit 1\nfi\n```\ndebug.sh 脚本内容\n```bash\n#!/bin/sh\nTOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73\nCATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)\nCATALINA_PID=$CATALINA_BASE/tomcat.pid\nJAVA_HOME=/opt/soft/jdk1.8.0_11/\nCLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib\nLD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib\nPATH=$PATH:$JAVA_HOME/bin\n\n#路径为【/opt/web/xxx】时，项目名则为【xxx】\nPROJECT_NAME=`echo $CATALINA_BASE | awk -F \"/\" '{print $NF}'`\n\n#日志目录名\nPROJECT_LOG=/opt/log/$PROJECT_NAME/catalina.out\n\nJAVA_OPTS=\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"\n\nexport TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH\n\nproj_dir=$CATALINA_BASE\nif [[ -n \"$proj_dir\" ]]\nthen\n        ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" > /dev/null\n        status=$?\n\n        if  [[ $status -eq 0 ]] && [[ -s $CATALINA_PID  ]]\n        then\n                echo \"The $proj_dir tomcat is running and the pid_file is exist !\"\n                exit 1\n        elif [[ $status -eq 0 ]] || [[ -s $CATALINA_PID  ]]\n        then\n                echo \"kill one\"\n                ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" | awk '{print $2}' | xargs -i kill -9 {}\n                > $CATALINA_PID\n                $TOMCAT_HOME/bin/catalina.sh jpda start\n        else\n                $TOMCAT_HOME/bin/catalina.sh jpda start\n        fi\nelse\n        echo \"start failt!!!\"\n        exit 1\nfi\n```\n\nrestart.sh 脚本内容\n```bash\n#!/bin/sh\nTOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73\nCATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)\nCATALINA_PID=$CATALINA_BASE/tomcat.pid\nJAVA_HOME=/opt/soft/jdk/1.8.11/jdk1.8.0_11\nCLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib\nPATH=$PATH:$JAVA_HOME/bin\nJAVA_OPTS=\"-server -Xms1g -Xmx1g -Xmn512m -Xss1024K -XX:PermSize=256m -XX:MaxPermSize=512m -XX:ParallelGCThreads=8 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"\n\n#路径为【/opt/web/xxx】时，项目名则为【xxx】\nPROJECT_NAME=`echo $CATALINA_BASE | awk -F \"/\" '{print $NF}'`\n\n#日志目录名\nPROJECT_LOG=/opt/log/$PROJECT_NAME/catalina.out\n\nexport TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG\n\nsh $CATALINA_BASE/stop.sh\nsh $CATALINA_BASE/start.sh\n```\n\n#### 修改conf文件夹下的server.xml\n把对应的Host节点修改为下面的内容，并修改相关的路径\n```xml\n<Host name=\"localhost\"  appBase=\"/opt/web/test/webapps\" autoDeploy=\"false\" deployOnStartup=\"false\">\n     <Context path=\"\" docBase=\"/opt/web/test/webapps\" crossContext=\"true\" allowLinking=\"true\"reloadable=\"false\">\n         <JarScanner scanAllDirectories=\"true\" />\n         <Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"/opt/web/test/logs/\" prefix=\"gh_access_log.\" suffix=\".log\" pattern=\"%a %A %t %S %b %r %s %{Referer}i %{User-Agent}i %D\" resolveHosts=\"false\" />\n     </Context>\n</Host>\n```\n\n除此之外，可选的修改Server的端口号以及Connector的端口号。\n一个实例就这样完成，以后每次想要部署一个项目，就可以简单的复制这个实例文件夹，修改一下配置，就行了。\n\n注意：复制tomcat实例的时候webapps下面可能已经存在其他项目的文件，我们要清空webapps，然后把test.war解压到webapps下面，而不是直接放war包。\n\n我们再创建一个项目为test1\n#### 现在我们的目录结构如下:\n```bash\nubuntu# ls test test1\ntest:\nconf  debug.sh\tlogs  restart.sh  run.sh  stop.sh  webapps  work\n\ntest1:\nconf  debug.sh\tlogs  restart.sh  run.sh  stop.sh  webapps  work\n```\n\n#### 启动tomcat多实例\n```bash\nubuntu# test/run.sh\nUsing CATALINA_BASE:   /opt/web/test\nUsing CATALINA_HOME:   /opt/soft/apache-tomcat-7.0.73\nUsing CATALINA_TMPDIR: /opt/web/test/temp\nUsing JRE_HOME:        /opt/soft/jdk1.8.0_11/\nUsing CLASSPATH:       /opt/soft/apache-tomcat-7.0.73/bin/bootstrap.jar:/opt/soft/apache-tomcat-7.0.73/bin/tomcat-juli.jar\nUsing CATALINA_PID:    /opt/web/test/tomcat.pid\nTomcat started.\nubuntu# test1/run.sh\nUsing CATALINA_BASE:   /opt/web/test1\nUsing CATALINA_HOME:   /opt/soft/apache-tomcat-7.0.73\nUsing CATALINA_TMPDIR: /opt/web/test1/temp\nUsing JRE_HOME:        /opt/soft/jdk1.8.0_11/\nUsing CLASSPATH:       /opt/soft/apache-tomcat-7.0.73/bin/bootstrap.jar:/opt/soft/apache-tomcat-7.0.73/bin/tomcat-juli.jar\nUsing CATALINA_PID:    /opt/web/test1/tomcat.pid\nTomcat started.\nubuntu# netstat -tunlp\n激活Internet连接 (仅服务器)\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name\ntcp        0      0 127.0.1.1:53            0.0.0.0:*               LISTEN      7237/dnsmasq   \ntcp6       0      0 :::8080                 :::*                    LISTEN      10182/java     \ntcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      10258/java     \ntcp6       0      0 :::8070                 :::*                    LISTEN      10258/java     \ntcp6       0      0 127.0.0.1:8006          :::*                    LISTEN      10182/java     \ntcp6       0      0 :::8009                 :::*                    LISTEN      10182/java     \nudp        0      0 0.0.0.0:57782           0.0.0.0:*                           7062/avahi-daemon:\nudp        0      0 0.0.0.0:49141           0.0.0.0:*                           7237/dnsmasq   \nudp        0      0 0.0.0.0:41976           0.0.0.0:*                           7237/dnsmasq   \nudp        0      0 127.0.1.1:53            0.0.0.0:*                           7237/dnsmasq   \nudp        0      0 0.0.0.0:68              0.0.0.0:*                           9541/dhclient   \nudp        0      0 0.0.0.0:48730           0.0.0.0:*                           7237/dnsmasq   \nudp        0      0 0.0.0.0:631             0.0.0.0:*                           7120/cups-browsed\nudp        0      0 0.0.0.0:47809           0.0.0.0:*                           7237/dnsmasq   \nudp        0      0 0.0.0.0:5353            0.0.0.0:*                           7062/avahi-daemon:\nudp        0      0 0.0.0.0:36600           0.0.0.0:*                           7237/dnsmasq   \nudp6       0      0 :::46484                :::*                                7062/avahi-daemon:\nudp6       0      0 :::5353                 :::*                                7062/avahi-daemon:\nubuntu#\n```\n\n可以看到8081，8082，8083等其他端口都已经启动，现在可以使用curl命令进行访问\n```bash\nubuntu# curl localhost:8080\n\n<html>\n<head>\n    <meta charset=\"utf-8\">\n</head>\n<body>\n<h2>Hello World!</h2>\n<h2>Test 项目!</h2>\n</body>\n</html>\nubuntu# curl localhost:8070\n\n<html>\n<head>\n    <meta charset=\"utf-8\">\n</head>\n<body>\n<h2>Hello World!</h2>\n<h2>Test 项目!</h2>\n</body>\n</html>\nubuntu#\n```\n多实例部署成功，以后可以简单的复制其中一个实例，修改相关配置即可。\n\n## 4. Nginx配置\n本篇文章重点不在Nginx,简单带过。\n\n在配置文件nginx.conf下的http节点中，引入了两行代码\n\n```profile\nhttp\n        {\n                include       mime.types;\n                default_type  application/octet-stream;\n\n\t            ......\n\t            ......\n\t            ......\n\n                #在以下两个文件具体配置\n                include /usr/local/nginx/conf/conf.d/upstream.conf;\n                include /usr/local/nginx/conf/conf.d/ld.conf;\n}\n```\n因此每个项目站点的具体配置是在`upstream.conf `与`ld.conf`中配置的。\n\n其中`ld.conf`下配置的是具体站点的server 站点映射关系\n```profile\n\n......\nother server\n......\n\nserver  {\n    listen  80;\n    server_name  www.dongxiaoxia.xyz;\n    server_name_in_redirect off;\n    client_header_timeout  30;\n    client_body_timeout  30;\n    charset  UTF-8;\n    client_max_body_size  10000k;\n    allow  all;\n\n  location / {\n        index   index.html index.php index.jsp index.htm;\n        proxy_pass      http://test_pool;\n        proxy_redirect  off;\n        proxy_set_header Host $host;\n        proxy_set_header CURRENT_URL http://$Host$request_uri;\n        proxy_set_header X-USER_IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n  access_log  /opt/web/test/logs/test.log  main;\n}\n\n......\n......\n```\n\n其中`upstream.conf`下配置的是具体站点的 pool 映射关系\n\n```profile\n\n......\nother pool\n......\n\nupstream test_pool {\n        server 127.0.0.1:8303 weight=15 max_fails=2 fail_timeout=30s;\n}\n\n......\n......\n```\n需要注意的是，在修改了Nginx配置文件后，一定要执行`/opt/soft/nginx/sbin/nginx -s reload `重新加载配置 \n\n\n## 5. 自动化部署脚本\n 服务器每次部署都要拷贝war包到服务器，停止服务器，再开启服务器，不太方便；而且服务器的配置文件应该相对于开发环境不太容易变动，或者开发人员根本无法得知服务器配置信息，因此带来另两个不好的原因，war包整体覆盖会有问题，war包体积太大。因此本地打包war包时要去掉相应文件， 服务器也要相应处理。 \n\n假设场景：本地编译打包项目war包。假如项目名为test，war包为test.war，部署时要求去除日志文件、项目配置文件、以及依赖的外部jar包。\n\n因此在项目根目录下创建`deploy.bat` 脚本，内容为：\n```bash\n@echo off\n\necho ...............................................................................................................................................................\necho This shell script does not put lib directory into package. If you want to, please just upload 'test.war' in target directory.\necho ...............................................................................................................................................................\n\nset SVN_ROOT=D:\\svn\\test\nset TARGET_PATH=%SVN_ROOT%\\target\\test\nset DEPLOY=%SVN_ROOT%\\deploy\n\nrd /s /q %DEPLOY%\nmd %DEPLOY%\necho %TARGET_PATH%\nxcopy %TARGET_PATH%\\* %DEPLOY%\\ /s /e\nrd /s /q %DEPLOY%\\WEB-INF\\lib\ndel /f /s /q %DEPLOY%\\WEB-INF\\classes\\test.properties\ndel /f /s /q %DEPLOY%\\WEB-INF\\classes\\log4j.properties\n\ncd /d %DEPLOY%\n\njar -cvf test.war *\n\nrd /s /q %DEPLOY%\\META-INF\nrd /s /q %DEPLOY%\\WEB-INF\nrd /s /q %DEPLOY%\\static\ndel /s /q %DEPLOY%\\index.jsp\n\npause\n```\n\n这个脚本用来去掉lib下依赖的jar包，test.proterties，log4j.properties,再重新压缩为war包，去掉lib下的jar包，是因为项目的依赖包太大了，传输时很费时间，而jar包在部署过后很可能不会变动。\n test.properties与log4j.properties 为项目的配置文件，开发环境与服务器的配置肯定是不一样的，因此不能直接覆盖掉，而是全量部署时放在项目上，以后增量部署的时候不覆盖即可。\n\n1.本地install为test.war，如果为增量部署还要执行一下deploy脚本。\n2.把deploy过的war包通过Filezilla等传输到服务器指定的部署目录，我们这里服务器的下项目部署文件夹为/root/deploy，根据项目名创建一个文件夹test，因此我们的test项目的部署路径为/root/deploy/test，文件夹下有我们的test.war文件。\n3.在/root/deploy/test文件夹下，会创建一个`deploy.sh` 脚本文件，与客户端的deploy.bat 相呼应。\n```bash\n#!/bin/sh\ndeploy_file_dir=/root/deploy/test\ndeploy_dir=/opt/web/test\ncd ${deploy_dir}/deploy\nrm -rf ./*\njar xvf ${deploy_file_dir}/test.war\ncp -rf ./* ${deploy_dir}/webapps/\ncd ../\nsh stop.sh\nsh run.sh\n```\n\n查看脚本内容，我们可以得知deploy.sh 脚本的功能\n1.由于客户端传送过来的可能不会是全量test.war包，因此不能简单的把test.war包直接放到、opt/web/test/webapps目录下，这样会覆盖掉服务器的项目配置，也会导致部分文件丢失。只能解压test.war包 把全部内容复制到webapps下，存在就覆盖，而不存在的也不会删掉webapps下存在的。\n2.执行stop.sh 停止test项目，因为test项目之前可能已经启动了。\n3.执行run.sh 启动项目。\n\n\n到此为止，我们已经用了脚本代替一部分手动操作，但还是不够完善，比如项目实例还是要自己手动搭建，启动脚本也要手动编写，下面提供了一键部署tomcat实例项目环境的脚本`build.sh`，最大化利用脚本，减少手动操作。(这里没有添加Nginx配置，所以有关Nginx的配置还要手动添加，并且重新加载！)\n```bash\n#!/bin/sh\n#一键部署Tomcat实例项目环境\n\n#项目名称\nPROJECT_NAME=www.dongxiaoxia.xyz\n#tomcat关闭端口\nSERVER_PORT=8006\n#Http监听端口\nHTTP_PORT=8080\n##################以上三个参数需要修改############################\n#项目基础路径\nPROJECT_BASE_PATH=/opt/web/\n#日志基础路径\nLOG_BASE_PATH=/opt/log/\n#部署基础路径\nDEPLOY_BASE_PATH=/root/deploy/\n#Java安装路径\nJAVA_HOME=/opt/soft/jdk1.8.0_11/\n#Tomcat安装路径\nCATALINA_HOME=/opt/soft/apache-tomcat-7.0.73\n#Tomcat活跃配置路径,也就是项目部署路径\nCATALINA_BASE=$PROJECT_BASE_PATH$PROJECT_NAME\n#tomcat server.xml配置文件路径\nSERVER_XML=$CATALINA_BASE/conf/server.xml\n#########################################################################################\necho 'Java安装路径:'$JAVA_HOME\necho 'Tomcat安装路径:'$CATALINA_HOME\necho 'Tomcat项目实例路径:'$CATALINA_BASE\necho '项目war包部署上传路径:'$DEPLOY_BASE_PATH$PROJECT_NAME\necho 'tomcat server.xml配置文件路径:'$SERVER_XML\necho '项目日志路径:'$LOG_BASE_PATH$PROJECT_NAME\necho 'tomcat关闭端口:'$SERVER_PORT\necho 'Http监听端口:'$HTTP_PORT\n\n#################创建tomcat实例 修改server.xml配置##########################\n\n#复制tomcat实例所需文件夹\necho '复制tomcat实例所需文件夹'\n\nif [ ! -d \"$CATALINA_BASE\" ]; then\nmkdir -p \"$CATALINA_BASE\"\nfi\n\ncd $CATALINA_HOME\ncp -r conf $CATALINA_BASE\nmkdir $CATALINA_BASE/webapps\nmkdir $CATALINA_BASE/work\nmkdir $CATALINA_BASE/logs\n\necho '修改server.xml配置'\n# 修改tomcat关闭端口\nsed -i 22s@8005@${SERVER_PORT}@ $SERVER_XML\n# 修改Http监听端口\nsed -i 71s@8080@${HTTP_PORT}@ $SERVER_XML\n# 统一web应用程序的路径\nsed -i '125s@appBase=\"webapps\"@appBase=\"'$CATALINA_BASE'/webapps\"@' $SERVER_XML\n# 关闭自动部署\n#sed -i '126s@autoDeploy=\"true\"@autoDeploy=\"false\"@' $SERVER_XML\nsed -i '141a<Host name=\"localhost\"  appBase=\"'$CATALINA_BASE'/webapps\" autoDeploy=\"false\" deployOnStartup=\"false\">\\n     <Context path=\"\" docBase=\"'$CATALINA_BASE'/webapps\" crossContext=\"true\" allowLinking=\"true\" reloadable=\"false\">\\n         <JarScanner scanAllDirectories=\"true\" />\\n         <Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"'$CATALINA_BASE'/logs/\" prefix=\"gh_access_log.\" suffix=\".log\" pattern=\"%a %A %t %S %b %r %s %{Referer}i %{User-Agent}i %D\" resolveHosts=\"false\" />\\n     </Context>\\n</Host>\n' $SERVER_XML\n\nsed -i '125,141d' $SERVER_XML\n\n#######################创建run.sh脚本文件###################################\necho '创建run.sh脚本文件'\ncd $CATALINA_BASE\ntouch run.sh\necho '#!/bin/sh' >> run.sh\necho 'TOMCAT_HOME='$CATALINA_HOME >> run.sh\n#echo 'CATALINA_BASE='$CATALINA_BASE >> run.sh\necho 'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)' >> run.sh\necho 'CATALINA_PID=$CATALINA_BASE/tomcat.pid' >> run.sh\necho 'JAVA_HOME='$JAVA_HOME >> run.sh\necho 'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib' >> run.sh\necho 'LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib' >> run.sh\necho 'PATH=$PATH:$JAVA_HOME/bin' >> run.sh\necho '' >> run.sh\necho '#路径为【/opt/web/xxx】时，项目名则为【xxx】' >> run.sh\necho \"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '{print \\$NF}'\\`\" >> run.sh\necho '' >> run.sh\necho '#检测temp目录是否存在，不存在则创建' >> run.sh\necho 'if [ ! -d \"$CATALINA_BASE/temp\" ]; then' >> run.sh\necho '    mkdir \"$CATALINA_BASE/temp\"' >> run.sh\necho 'fi' >> run.sh\necho '' >> run.sh\necho '#日志目录名' >> run.sh\necho 'PROJECT_LOG='$LOG_BASE_PATH'$PROJECT_NAME/catalina.out' >> run.sh\necho '' >> run.sh\necho 'JAVA_OPTS=\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"' >> run.sh\necho '' >> run.sh\necho 'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH' >> run.sh\necho '' >> run.sh\necho 'proj_dir=$CATALINA_BASE' >> run.sh\necho 'if [ -n \"$proj_dir\" ]' >> run.sh\necho 'then' >> run.sh\necho \"        ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" > /dev/null\" >> run.sh\necho '        status=$?' >> run.sh\necho '' >> run.sh\necho '        if  [ $status -eq 0 ] && [ -s $CATALINA_PID  ]' >> run.sh\necho '        then' >> run.sh\necho '                echo \"The $proj_dir tomcat is running and the pid_file is exist !\"' >> run.sh\necho '                exit 1' >> run.sh\necho '        elif [ $status -eq 0 ] || [ -s $CATALINA_PID  ]' >> run.sh\necho '        then' >> run.sh\necho '                echo \"kill one\"' >> run.sh\necho \"                ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" | awk '{print \\$2}' | xargs -i kill -9 {}\" >> run.sh\necho '                > $CATALINA_PID' >> run.sh\necho '                $TOMCAT_HOME/bin/catalina.sh start' >> run.sh\necho '        else' >> run.sh\necho '                $TOMCAT_HOME/bin/catalina.sh start' >> run.sh\necho '        fi' >> run.sh\necho '' >> run.sh\necho 'else' >> run.sh\necho '        echo \"start failt!!!\"' >> run.sh\necho '        exit 1' >> run.sh\necho 'fi' >> run.sh\n\n#######################创建stop.sh脚本文件###################################\necho '创建stop.sh脚本文件'\ncd $CATALINA_BASE\ntouch stop.sh\n\necho '#!/bin/sh' >> stop.sh\necho 'TOMCAT_HOME='$CATALINA_HOME >> stop.sh\necho '#CATALINA_BASE='$CATALINA_BASE >> stop.sh\necho 'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)' >> stop.sh\necho 'CATALINA_PID=$CATALINA_BASE/tomcat.pid' >> stop.sh\necho 'JAVA_HOME='$JAVA_HOME >> stop.sh\necho 'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib' >> stop.sh\necho 'PATH=$PATH:$JAVA_HOME/bin' >> stop.sh\necho '' >> stop.sh\necho '#路径为【/opt/web/xxx】时，项目名则为【xxx】' >> stop.sh\necho \"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '{print \\$NF}'\\`\" >> stop.sh\necho 'echo $PROJECT_NAME' >> stop.sh\necho '' >> stop.sh\necho '#日志目录名' >> stop.sh\necho 'PROJECT_LOG='$LOG_BASE_PATH'$PROJECT_NAME/' >> stop.sh\necho '' >> stop.sh\necho 'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG' >> stop.sh\necho '' >> stop.sh\necho 'proj_dir=$CATALINA_BASE' >> stop.sh\necho '$TOMCAT_HOME/bin/catalina.sh stop' >> stop.sh\necho 'sleep 5' >> stop.sh\necho 'if [ -n \"$proj_dir\" ]' >> stop.sh\necho 'then' >> stop.sh\necho \"        ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" > /dev/null\" >> stop.sh\necho '        status=$?' >> stop.sh\necho '        if [ $status -eq 0 ] || [ -s $CATALINA_PID  ]' >> stop.sh\necho '        then' >> stop.sh\necho '                echo \"kill it\"' >> stop.sh\necho \"                ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" |  awk '{print \\$2}' | xargs -i kill -9 {}\" >> stop.sh\necho '                > $CATALINA_PID' >> stop.sh\necho '        fi' >> stop.sh\necho 'else' >> stop.sh\necho '        echo \"stop failt!!!\"' >> stop.sh\necho '        exit 1' >> stop.sh\necho 'fi' >> stop.sh\n\n#######################创建debug.sh脚本文件###################################\necho '创建debug.sh脚本文件'\ncd $CATALINA_BASE\ntouch debug.sh\n\necho '#!/bin/sh' >> debug.sh\necho 'TOMCAT_HOME='$CATALINA_HOME >> debug.sh\necho 'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)' >> debug.sh\necho 'CATALINA_PID=$CATALINA_BASE/tomcat.pid' >> debug.sh\necho 'JAVA_HOME='$JAVA_HOME >> debug.sh\necho 'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib' >> debug.sh\necho 'LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib' >> debug.sh\necho 'PATH=$PATH:$JAVA_HOME/bin' >> debug.sh\necho '' >> debug.sh\necho '#路径为【/opt/web/xxx】时，项目名则为【xxx】' >> debug.sh\necho \"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '{print \\$NF}'\\`\" >> debug.sh\necho '' >> debug.sh\necho '#日志目录名' >> debug.sh\necho 'PROJECT_LOG='$LOG_BASE_PATH'$PROJECT_NAME/catalina.out' >> debug.sh\necho '' >> debug.sh\necho 'JAVA_OPTS=\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"' >> debug.sh\necho '' >> debug.sh\necho 'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH' >> debug.sh\necho '' >> debug.sh\necho 'proj_dir=$CATALINA_BASE' >> debug.sh\necho 'if [[ -n \"$proj_dir\" ]]' >> debug.sh\necho 'then' >> debug.sh\necho '        ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" > /dev/null' >> debug.sh\necho '        status=$?' >> debug.sh\necho '' >> debug.sh\necho '        if  [[ $status -eq 0 ]] && [[ -s $CATALINA_PID  ]]' >> debug.sh\necho '        then' >> debug.sh\necho '                echo \"The $proj_dir tomcat is running and the pid_file is exist !\"' >> debug.sh\necho '                exit 1' >> debug.sh\necho '        elif [[ $status -eq 0 ]] || [[ -s $CATALINA_PID  ]]' >> debug.sh\necho '        then' >> debug.sh\necho '                echo \"kill one\"' >> debug.sh\necho \"                ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" | awk '{print \\$2}' | xargs -i kill -9 {}\" >> debug.sh\necho '                > $CATALINA_PID' >> debug.sh\necho '                $TOMCAT_HOME/bin/catalina.sh jpda start' >> debug.sh\necho '        else' >> debug.sh\necho '                $TOMCAT_HOME/bin/catalina.sh jpda start' >> debug.sh\necho '        fi' >> debug.sh\necho 'else' >> debug.sh\necho '        echo \"start failt!!!\"' >> debug.sh\necho '        exit 1' >> debug.sh\necho 'fi' >> debug.sh\n\n#######################创建restart.sh脚本文件###################################\necho '创建restart.sh脚本文件'\ncd $CATALINA_BASE\ntouch restart.sh\n\necho '#!/bin/sh' >> restart.sh\necho 'TOMCAT_HOME='$CATALINA_HOME >> restart.sh\necho 'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)' >> restart.sh\necho 'CATALINA_PID=$CATALINA_BASE/tomcat.pid' >> restart.sh\necho 'JAVA_HOME=/opt/soft/jdk/1.8.11/jdk1.8.0_11' >> restart.sh\necho 'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib' >> restart.sh\necho 'PATH=$PATH:$JAVA_HOME/bin' >> restart.sh\necho 'JAVA_OPTS=\"-server -Xms1g -Xmx1g -Xmn512m -Xss1024K -XX:PermSize=256m -XX:MaxPermSize=512m -XX:ParallelGCThreads=8 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"' >> restart.sh\necho '' >> restart.sh\necho '#路径为【/opt/web/xxx】时，项目名则为【xxx】' >> restart.sh\necho \"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '{print \\$NF}'\\`\" >> restart.sh\necho '' >> restart.sh\necho '#日志目录名' >> restart.sh\necho 'PROJECT_LOG='$LOG_BASE_PATH'$PROJECT_NAME/catalina.out' >> restart.sh\necho '' >> restart.sh\necho 'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG' >> restart.sh\necho '' >> restart.sh\necho 'sh $CATALINA_BASE/stop.sh' >> restart.sh\necho 'sh $CATALINA_BASE/start.sh' >> restart.sh\n#######################创建deploy.sh脚本文件###################################\necho '创建deploy.sh脚本文件'\n\nif [ ! -d \"$DEPLOY_BASE_PATH$PROJECT_NAME\" ]; then\n  mkdir -p \"$DEPLOY_BASE_PATH$PROJECT_NAME\"\nfi\n\ncd $DEPLOY_BASE_PATH$PROJECT_NAME\ntouch deploy.sh\n\necho '#!/bin/sh' >> deploy.sh\necho \"deploy_file_dir=$DEPLOY_BASE_PATH$PROJECT_NAME\" >> deploy.sh\necho \"deploy_dir=$CATALINA_BASE\" >> deploy.sh\necho \"if [ ! -d \"\\${deploy_dir}/deploy\" ]; then\" >> deploy.sh\necho \"  mkdir -p \"\\${deploy_dir}/deploy\"\" >> deploy.sh\necho \"fi\" >> deploy.sh\necho 'cd ${deploy_dir}/deploy' >> deploy.sh\necho 'rm -rf ./*' >> deploy.sh\necho 'jar xvf ${deploy_file_dir}/'$PROJECT_NAME'.war' >> deploy.sh\necho 'cp -rf ./* ${deploy_dir}/webapps/' >> deploy.sh\necho 'cd ../' >> deploy.sh\necho 'sh stop.sh' >> deploy.sh\necho 'sh run.sh' >> deploy.sh\n#########################################################################################\necho 'tomcat项目实例创建成功!'\necho \"请把war包放置到$DEPLOY_BASE_PATH$PROJECT_NAME目录下，执行$DEPLOY_BASE_PATH$PROJECT_NAME/deploy脚本启动项目.\"\necho \"或者直接解压war包到$CATALINA_BASE/webapps下。执行$CATALINA_BASE/run脚本启动项目.\"\n```\n\n## 6. 部署总结\n### 为什么\n本篇文章都是为了解决文章开头的问题及后续问题：本地开发完项目后如何简单部署到服务器？\n\n### 怎么做\n1. 服务器项目部署规范化，相关软件规范化，统一部署，集中管理。\n2. 用脚本替代手动操作。\n3. 部署文档清晰易懂。\n\n### 怎么样\n**优点**\n1. tomcat多实例部署，启动、关闭一个项目站点不影响其他站点，没有耦合。\n2. 对添加开放，对删除关闭。\n要添加一个新的项目站点，只需简单的执行一下脚本就能够实现，不会影响其他站点配置。\n3. 第一次部署及后续增量部署都极其简单、容易操作、全程脚本化。\n4. 整个服务器规范化，各个项目部署路径、相关软件路径、日志路径清晰明了。\n5. 项目日志集中管理，方便后续统计分析。 \n\n**劣势**\n 1. 要求部署人员具备一定的脚本语法基础，能够理解相关的脚本原理。\n 2. 脚本的创建是直接添加内容，如果之前已经存在相关的文件，没有采取替换而是追加，因此要确定相关路径上的文件是否正确。\n\n### 几句话说明白部署\n\n**部署环境整体规划**\n1.  项目目录 /opt/web\n2.  日志目录 /opt/log\n3.  jdk/tomcat/nginx等目录 安装环境 /opt/soft\n4.  项目应用war包上传到服务器的目录 /root/deploy\n\n假设现在有3个项目 test test1 test2\n```bash\nubuntu# ls /opt/web /root/deploy/ /opt/soft /opt/log\n/opt/log:\ntest  test1  test2\n\n/opt/soft:\napache-tomcat-7.0.73  include\t   lib\t  nginx-1.6.2\t      openssl-1.1.0c\t     pcre-8.39\t       share  zlib-1.2.8\nbin\t\t      jdk1.8.0_11  nginx  nginx-1.6.2.tar.gz  openssl-1.1.0c.tar.gz  pcre-8.39.tar.gz  ssl    zlib128.zip\n\n/opt/web:\nbuild.sh  test\ttest1  test2\n\n/root/deploy/:\ntest  test1  test2\nubuntu# \n```\n\n**全量部署(第一次部署)**\n1. **执行`build.sh`脚本一键部署项目**\n2. 配置并重新加载Nginx代理配置\n3. 开发环境install打包war包传输到服务器deploy目录\n4. 执行`deploy.sh`脚本，打开项目日志查看启动情况\n                          \n**增量部署**\n1. 开发环境install打包war包,**执行开发环境`deploy.sh(mac)/deploy.bat(windows)`脚本**，传输到服务器deploy目录 \n4. 执行`deploy.sh`脚本，打开项目日志查看启动情况\n","source":"_posts/服务器 JDK + Tomcat + Nginx 部署环境整体搭建及自动化部署的具体实现.md","raw":"title: 服务器 JDK + Tomcat + Nginx 部署环境整体搭建及自动化部署的具体实现\ndate: 2017-01-19 11:39:44\npermalink: linux\ntags:\n- linux\n- 部署\n- 服务器\ncategories:\n- linux\n\n---\n本篇文章主要围绕一个问题：本地开发完项目后如何简单部署到服务器？\n这个问题太宽泛了，因此，提出了以下几个要点：\n1. 第一次怎么部署\n2. 增量开发后怎么`简单`部署?\n3. 服务器环境整体如何规划？各个项目怎么存放，日志是否集中存放 ？项目各个项目运行环境与部署怎么分开？。。。\n4. 如何用脚本自动化部署？\n5. 如何用几句话归纳部署？\n\n经过整篇文章，我想会有一定的答案。\n\n\n文章的各个章节并不是按照解决问题的顺序写的，而是按照环境部署、项目配置、自动化部署一步步递进的，完成服务器 JDK + Tomcat + Nginx 部署环境整体搭建及自动化部署的具体实现。\n\n## 1.服务器环境整体规划\n在本篇文章的部署方式中，会涉及以下4个总目录\n\n\t1. 项目目录 /opt/web\n\t2. 日志目录 /opt/log\n\t3. JDK/Tomcat/Nginx等安装环境的父目录  /opt/soft\n\t4. 项目应用war包上传到服务器的目录 /root/deploy\n\n## 2.运行环境安装\n### 2.1 JDK\n1. 官网下载 JDK8，解压到/opt/soft ，解压文件夹为jdk1.8.0_11\n2. 配置 JDK 环境变量\n 在`/etc/profile`文件末尾添加以下配置 ：\n```bash\n#jdk enviroment\nJAVA_HOME=/opt/soft/jdk1.8.0_11/\nPATH=$JAVA_HOME/bin:$PATH\nCLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nexport JAVA_HOME\nexport PATH\nexport CLASSPATH \n```\n 保存退出。终端执行命令` source /etc/profile`  使配置生效  \n3. 验证 JDK 配置\n 终端执行命令：`java -version`\n```bash\nubuntu# java -version\njava version \"1.8.0_111\"\nJava(TM) SE Runtime Environment (build 1.8.0_111-b14)\nJava HotSpot(TM) 64-Bit Server VM (build 25.111-b14, mixed mode)\n```\n> **JDK 配置成功！！！**\n\n### 2.2 Tomcat\n1. 官网下载tomcat，我这里下载的是apache-tomcat-7.0.73，解压到/opt/soft ，解压文件夹为apache-tomcat-7.0.73\n2. 进入tomcat目录下的bin目录下，执行tomcat启动脚本（tomcat依赖jdk，应先确定jdk已经安装）\n```bash\nubuntu# sh startup.sh \nUsing CATALINA_BASE:   /opt/soft/apache-tomcat-7.0.73\nUsing CATALINA_HOME:   /opt/soft/apache-tomcat-7.0.73\nUsing CATALINA_TMPDIR: /opt/soft/apache-tomcat-7.0.73/temp\nUsing JRE_HOME:        /opt/soft/jdk1.8.0_11/\nUsing CLASSPATH:       /opt/soft/apache-tomcat-7.0.73/bin/bootstrap.jar:/opt/soft/apache-tomcat-7.0.73/bin/tomcat-juli.jar\nTomcat started.\nubuntu# \n\n```\n出现以上信息证明tomcat已经成功启动，打开 http://ip:8080 或 [http:/localhost:8080](http://localhost:8080),如果能看到tomcat系统界面，说明已经安装成功，可以进行下一步了。\n \n **常见命令**\n>启动tomcat ：sh startup.sh\n关闭tomcat  ：sh shutdown.sh\n查看tomcat运行进程 ： ps aux | grep tomcat 或 ps aux | grep java 或ps -ef | grep java  或 ps -ef | grep tomcat\n查看端口使用情况   netstat –apn 或 netstat -tunlp  ，可以结合 grep ，如 netstat -apn | grep (端口号)  或 netstat -apn | grep java\n其中最后一下为pid/program name ，如果端口被占用， 可以进一步使用命令：ps -ef  | grep (pid) 查看，可以查出是哪个进程占用了端口号，可以kill portId 杀死进程。\n\n### 2.3 Nginx\n 这里演示的系统为`Ubuntu`\n\nUbuntu平台编译环境安装\n```bash\napt-get install build-essentail\napt-get install libtool\n```\n安装Nginx依赖包 OpenSSL、zlib、 pcre\n这三个包可以直接在终端下载，如果网速慢，建议在本地下载再上传到服务器。\n安装Nginx依赖包\n```bash\napt-get install libpcre3 libpcre3-dev zlib1g-dev libssl-dev build-essential\n```\n选择下载保存目录 cd /opt/soft\n下载OpenSSL\n```bash\nwget ftp://ftp.openssl.org/source/openssl-1.1.0c.tar.gz\n```\n下载zlib\n```bash\nwget http://zlib.net/zlib128.zip\n```\n下载pcre\n```bash\nwget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.39.tar.gz\n```\n安装OpenSSL\n```bash\ntar zxvf openssl-1.0.0c.tar.gz\ncd openssl-1.0.0c/\n./config --prefix=/opt/soft --openssldir=/opt/soft/ssl\nmake && make install\n\n./config shared --prefix=/opt/soft --openssldir=/opt/soft/ssl\nmake clean\nmake && make install\n```\n安装zlib库\n```bash\nunzip zlib128.zip\ncd zlib128/\n./configure --prefix=/opt/soft\nmake && make install\n```\n安装pcre库\n```bash\n tar zxvf pcre-8.39.tar.gz\ncd pcre-8.39/\n./configure --prefix=/opt/soft\nmake && make install\n```\n 查看pcre版本\n```bash\npcre-config --version\n```\n安装Nginx\n1下载 Nginx，下载地址：[http://nginx.org/download/nginx-1.6.2.tar.gz](http://nginx.org/download/nginx-1.6.2.tar.gz)\n```bash\nwget http://nginx.org/download/nginx-1.6.2.tar.gz\n```\n2解压安装包 \n```bash\ntar zxvf nginx-1.6.2.tar.gz\n```\n3进入安装包目录\n```bash\ncd nginx-1.6.2\n```\n4编译安装\n```bash\n[root@bogon nginx-1.6.2]# ./configure --prefix=/opt/soft/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/opt/soft/src/pcre-8.39\n[root@bogon nginx-1.6.2]# make\n[root@bogon nginx-1.6.2]# make install\n```\n5查看Nginx版本\n```bash\n/opt/soft/nginx/sbin/nginx -v\nnginx version: nginx/1.6.2\n```\n\n6启动nginx\n```bash\n/opt/soft/nginx/sbin/nginx\n```\n>到此，nginx安装成功\n\n**Nginx常用命令**\n>/opt/soft/nginx/sbin/nginx -v                   #查看 Nginx版本\n/opt/soft/nginx/sbin/nginx                       #启动 Nginx\n/opt/soft/nginx/sbin/nginx -t                   # 检查配置文件ngnix.conf的正确性\n/opt/soft/nginx/sbin/nginx -s reload        #重新载入配置文件\n/opt/soft/nginx/sbin/nginx -s reopen       #重启 Nginx\n/opt/soft/nginx/sbin/nginx -s stop           #停止 Nginx\n\n\n\tjdk\\tomcat\\nginx 安装完毕，查看服务器目录\n/opt/soft 目录下文件结构\n```bash\n ➜  apache-tomcat-7.0.73 ll /opt/soft       \n总用量 8.4M\ndrwxr-xr-x  9 root root 4.0K 12月 27 09:25 apache-tomcat-7.0.73\ndrwxr-xr-x  2 root root 4.0K 12月 28 15:44 bin\ndrwxr-xr-x  3 root root 4.0K 12月 28 15:38 include\ndrwxr-xr-x  8 uucp  143 4.0K 6月  17  2014 jdk1.8.0_11\ndrwxr-xr-x  4 root root 4.0K 12月 28 15:44 lib\ndrwxr-xr-x 11 root root 4.0K 12月 28 16:22 nginx\ndrwxr-xr-x  9 1001 1001 4.0K 12月 28 16:14 nginx-1.6.2\n-rwxr-xr-x  1 root root 786K 12月 28 16:13 nginx-1.6.2.tar.gz\ndrwxr-xr-x 19 root root 4.0K 12月 28 16:05 openssl-1.1.0c\n-rwxr-xr-x  1 root root 5.0M 12月 28 15:34 openssl-1.1.0c.tar.gz\ndrwxr-xr-x  9 1169 1169  12K 12月 28 16:15 pcre-8.39\n-rwxr-xr-x  1 root root 2.0M 12月 28 15:23 pcre-8.39.tar.gz\ndrwxr-xr-x  4 root root 4.0K 12月 28 15:32 share\ndrwxr-xr-x  5 root root 4.0K 12月 28 15:44 ssl\ndrwxr-xr-x 14 root root 4.0K 12月 28 15:30 zlib-1.2.8\n-rwxr-xr-x  1 root root 679K 12月 28 15:28 zlib128.zip\n```\n\n## 3. Tomcat多实例多应用部署\n### 3.1. 部署应用分类\n`单实例单应用`：一个tomcat目录，webapps目录下只跑一个war包，最基本的部署方式。\n`单实例多应用`：一个tomcat目录，webapps目录下跑多个war包。 启动、关闭 tomcat对所有war包起作用。\n`多实例单应用`：多个tomcat目录，每个tomcat只跑一个应用，并且是同一个应用。通过修改tomcat端口配合nginx进行负载均衡。\n`多实例多应用`：把一个tomcat分为2部分，一部分为公用的bin目录与lib目录，其余文件夹作为第二部分，可以复制多次，因此tomcat只有一个，但是实例可以有多个，每个实例在单独部署，与单实例多应用相似。\n\n>1. 一个tomcat，充分利用资源，对tomcat的更新维护也很方便\n>2. 多个实例，各个实例互不影响\n>3. 各个项目相互独立，启动关闭不影响\n>4. 部署容易，启动快速\n### 3.2 目录结构认识\n 一个刚解压出来的tomcat打包文件应该有以下几个目录\n bin:主要存放脚本文件，例如比较常用的windows和linux系统中启动和关闭脚本\n conf:主要存放配置文件，其中最重要的两个配置文件是server.xml和web.xml\n lib:主要存放tomcat运行所依赖的包\n logs:主要存放运行时产生的日志文件，例如catalina.{date}.log等\n temp:存放tomcat运行时产生的临时文件，例如开启了hibernate缓存的应用程序，会在该目录下生成一些文件\n webapps:部署web应用程序的默认目录\n work:主要存放由JSP文件生成的servlet（java文件以及最终编译生成的class文件）\n### 3.3 多实例原理\ntomcat中两个比较重要的概念（通常也是两个系统变量）——CATALINA_HOME和CATALINA_BASE：\n * CATALINA_HOME：即指向Tomcat安装路径的系统变量\n * CATALINA_BASE：即指向活跃配置路径的系统变量\n\n通过设置这两个变量，就可以将tomcat的安装目录和工作目录分离，从而实现tomcat多实例的部署。\n\nTomcat官方文档指出，CATALINA_HOME路径的路径下只需要包含bin和lib目录，这也就是支持tomcat软件运行的目录，而CATALINA_BASE设置的路径可以包括上述所有目录，不过其中bin和lib目录并不是必需的，缺省时会使用CATALINA_HOME中的bin和conf。如此，我们就可以使用一个tomcat安装目录部署多个tomcat实例，这样的好处在于方便升级，就可以在不影响tomcat实例的前提下，替换掉CATALINA_HOME指定的tomcat安装目录。\n\n简而言之：\n* CATALINA_HOME：bin      lib\n* CATALINA_BASE：conf      webapps      temp      logs      work\n\n> **server.xml**\n\n这里部署多实例要修改的两个端口：\n* Server Port：该端口用于监听关闭tomcat的shutdown命令，默认为8005\n* Connector Port：该端口用于监听HTTP的请求，默认为8080\n\n简单的多实例只需要保证多实例中的Server Port和Connect Port不同即可。\n\n另外要修改的是Host配置，Host就是所谓的虚拟主机，对应包含了一个或者多个web应用程序。其中：\n\n* name： 虚拟主机的名称，一台主机表示了完全限定的域名或IP地址，默认为localhost，同时也是唯一的host，进入tomcat的所有http请求都会映射到该主机上\n* appBase：web应用程序目录的路径，可以是CATALINA_HOME的相对路径，也可以写成绝对路径，默认情况下为$CATALINA_HOME/webapps\n* unpackWARs： 表示是否自动解压war包\n* autoDeploy：所谓的热部署，即在tomcat正在运行的情况下，如果有新的war加入，则会立即执行部署操作\n* 另外再介绍一个Host中的属性—deployOnStartup：表示tomcat启动时是否自动部署appBase目录下所有的Web应用程序，默认为true。这个属性和autoDeploy会产生两次部署的“副作用”：一次是tomcat启动时就开始部署，第二次就是autoDeploy引起的热部署。因此最好将autoDeploy置为false\n\n最后再说明一下Context的配置，它出现在Host配置内，一个Context的配置就代表了一个web应用程序，如果配置多应用程序，就需要在Host下配置多个Context。其中：\n\n* path：表示访问入口，例如，path=”/abc”，则访问localhost:8080/abc时，就可以访问该Context对应的应用程序。如果path=””，则直接用localhost:8080就可以访问。\n* docBase：表示应用程序的解包目录或者war文件路径，是Host的appBase配置目录的相对路径，也可以是直接写成绝对路径，但是不要将appBase的值，作为docBase配置路径的前缀，例如appBase=”somedir”，docBase=”somedir-someapp.war”，这样的配置会导致部署错误。\n\n### 3.4 多实例多应用部署\n假设一个完好的可以运行的web应用程序已经打包成test.war，放在/root/deploy/test目录下，其中包含一个简单的index.jsp\n```xml\n<html>\n<body>\n<h2>Hello World!</h2>\n</body>\n</html>\n```\n#### 创建tomcat实例\n之前我们已经在/opt/soft/下成功安装了tomcat\n```bash\nubuntu# ls /opt/soft/apache-tomcat-7.0.73\nbin  conf  lib    LICENSE  logs  NOTICE  RELEASE-NOTES  RUNNING.txt  temp  webapps  work\n```\n\n我们的实例目录放在/opt/web/test 下\n复制相关实例文件夹到该目录下\n```bash\nubuntu# ls /opt/web/test\nconf  debug.sh\tlogs  restart.sh  run.sh  stop.sh  webapps  work\n```\n其中run.sh 、stop.sh、debug.sh、restart.sh 脚本文件本不属于tomcat实例的，是为了方便启动、停止tomcat实例而创建的脚本\n\n#### 创建启停脚本\nrun.sh 脚本文件内容：\n```bash\n#!/bin/sh\nTOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73\nCATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)\nCATALINA_PID=$CATALINA_BASE/tomcat.pid\nJAVA_HOME=/opt/soft/jdk1.8.0_11/\nCLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib\nLD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib\nPATH=$PATH:$JAVA_HOME/bin\n\n#路径为【/opt/web/xxx】时，项目名则为【xxx】\nPROJECT_NAME=`echo $CATALINA_BASE | awk -F \"/\" '{print $NF}'`\n\n#检测temp目录是否存在，不存在则创建\nif [ ! -d \"$CATALINA_BASE/temp\" ]; then\n    mkdir \"$CATALINA_BASE/temp\"\nfi\n\n#日志目录名\nPROJECT_LOG=/opt/log/$PROJECT_NAME/catalina.out\n\nJAVA_OPTS=\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"\n\nexport TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH\n\nproj_dir=$CATALINA_BASE\nif [ -n \"$proj_dir\" ]\nthen\n        ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" > /dev/null\n        status=$?\n\n        if  [ $status -eq 0 ] && [ -s $CATALINA_PID  ]\n        then\n                echo \"The $proj_dir tomcat is running and the pid_file is exist !\"\n                exit 1\n        elif [ $status -eq 0 ] || [ -s $CATALINA_PID  ]\n        then\n                echo \"kill one\"\n                ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" | awk '{print $2}' | xargs -i kill -9 {}\n                > $CATALINA_PID\n                $TOMCAT_HOME/bin/catalina.sh start\n        else\n                $TOMCAT_HOME/bin/catalina.sh start\n        fi\n\nelse\n        echo \"start failt!!!\"\n        exit 1\nfi\n```\n\nstop.sh脚本内容\n```bash\n#!/bin/sh\nTOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73\n#CATALINA_BASE=/opt/web/test\nCATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)\nCATALINA_PID=$CATALINA_BASE/tomcat.pid\nJAVA_HOME=/opt/soft/jdk1.8.0_11/\nCLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib\nPATH=$PATH:$JAVA_HOME/bin\n\n#路径为【/opt/web/xxx】时，项目名则为【xxx】\nPROJECT_NAME=`echo $CATALINA_BASE | awk -F \"/\" '{print $NF}'`\necho $PROJECT_NAME\n\n#日志目录名\nPROJECT_LOG=/opt/log/$PROJECT_NAME/\n\nexport TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG\n\nproj_dir=$CATALINA_BASE\n$TOMCAT_HOME/bin/catalina.sh stop\nsleep 5\nif [ -n \"$proj_dir\" ]\nthen\n        ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" > /dev/null\n        status=$?\n        if [ $status -eq 0 ] || [ -s $CATALINA_PID  ]\n        then\n                echo \"kill it\"\n                ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" |  awk '{print $2}' | xargs -i kill -9 {}\n                > $CATALINA_PID\n        fi\nelse\n        echo \"stop failt!!!\"\n        exit 1\nfi\n```\ndebug.sh 脚本内容\n```bash\n#!/bin/sh\nTOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73\nCATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)\nCATALINA_PID=$CATALINA_BASE/tomcat.pid\nJAVA_HOME=/opt/soft/jdk1.8.0_11/\nCLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib\nLD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib\nPATH=$PATH:$JAVA_HOME/bin\n\n#路径为【/opt/web/xxx】时，项目名则为【xxx】\nPROJECT_NAME=`echo $CATALINA_BASE | awk -F \"/\" '{print $NF}'`\n\n#日志目录名\nPROJECT_LOG=/opt/log/$PROJECT_NAME/catalina.out\n\nJAVA_OPTS=\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"\n\nexport TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH\n\nproj_dir=$CATALINA_BASE\nif [[ -n \"$proj_dir\" ]]\nthen\n        ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" > /dev/null\n        status=$?\n\n        if  [[ $status -eq 0 ]] && [[ -s $CATALINA_PID  ]]\n        then\n                echo \"The $proj_dir tomcat is running and the pid_file is exist !\"\n                exit 1\n        elif [[ $status -eq 0 ]] || [[ -s $CATALINA_PID  ]]\n        then\n                echo \"kill one\"\n                ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" | awk '{print $2}' | xargs -i kill -9 {}\n                > $CATALINA_PID\n                $TOMCAT_HOME/bin/catalina.sh jpda start\n        else\n                $TOMCAT_HOME/bin/catalina.sh jpda start\n        fi\nelse\n        echo \"start failt!!!\"\n        exit 1\nfi\n```\n\nrestart.sh 脚本内容\n```bash\n#!/bin/sh\nTOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73\nCATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)\nCATALINA_PID=$CATALINA_BASE/tomcat.pid\nJAVA_HOME=/opt/soft/jdk/1.8.11/jdk1.8.0_11\nCLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib\nPATH=$PATH:$JAVA_HOME/bin\nJAVA_OPTS=\"-server -Xms1g -Xmx1g -Xmn512m -Xss1024K -XX:PermSize=256m -XX:MaxPermSize=512m -XX:ParallelGCThreads=8 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"\n\n#路径为【/opt/web/xxx】时，项目名则为【xxx】\nPROJECT_NAME=`echo $CATALINA_BASE | awk -F \"/\" '{print $NF}'`\n\n#日志目录名\nPROJECT_LOG=/opt/log/$PROJECT_NAME/catalina.out\n\nexport TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG\n\nsh $CATALINA_BASE/stop.sh\nsh $CATALINA_BASE/start.sh\n```\n\n#### 修改conf文件夹下的server.xml\n把对应的Host节点修改为下面的内容，并修改相关的路径\n```xml\n<Host name=\"localhost\"  appBase=\"/opt/web/test/webapps\" autoDeploy=\"false\" deployOnStartup=\"false\">\n     <Context path=\"\" docBase=\"/opt/web/test/webapps\" crossContext=\"true\" allowLinking=\"true\"reloadable=\"false\">\n         <JarScanner scanAllDirectories=\"true\" />\n         <Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"/opt/web/test/logs/\" prefix=\"gh_access_log.\" suffix=\".log\" pattern=\"%a %A %t %S %b %r %s %{Referer}i %{User-Agent}i %D\" resolveHosts=\"false\" />\n     </Context>\n</Host>\n```\n\n除此之外，可选的修改Server的端口号以及Connector的端口号。\n一个实例就这样完成，以后每次想要部署一个项目，就可以简单的复制这个实例文件夹，修改一下配置，就行了。\n\n注意：复制tomcat实例的时候webapps下面可能已经存在其他项目的文件，我们要清空webapps，然后把test.war解压到webapps下面，而不是直接放war包。\n\n我们再创建一个项目为test1\n#### 现在我们的目录结构如下:\n```bash\nubuntu# ls test test1\ntest:\nconf  debug.sh\tlogs  restart.sh  run.sh  stop.sh  webapps  work\n\ntest1:\nconf  debug.sh\tlogs  restart.sh  run.sh  stop.sh  webapps  work\n```\n\n#### 启动tomcat多实例\n```bash\nubuntu# test/run.sh\nUsing CATALINA_BASE:   /opt/web/test\nUsing CATALINA_HOME:   /opt/soft/apache-tomcat-7.0.73\nUsing CATALINA_TMPDIR: /opt/web/test/temp\nUsing JRE_HOME:        /opt/soft/jdk1.8.0_11/\nUsing CLASSPATH:       /opt/soft/apache-tomcat-7.0.73/bin/bootstrap.jar:/opt/soft/apache-tomcat-7.0.73/bin/tomcat-juli.jar\nUsing CATALINA_PID:    /opt/web/test/tomcat.pid\nTomcat started.\nubuntu# test1/run.sh\nUsing CATALINA_BASE:   /opt/web/test1\nUsing CATALINA_HOME:   /opt/soft/apache-tomcat-7.0.73\nUsing CATALINA_TMPDIR: /opt/web/test1/temp\nUsing JRE_HOME:        /opt/soft/jdk1.8.0_11/\nUsing CLASSPATH:       /opt/soft/apache-tomcat-7.0.73/bin/bootstrap.jar:/opt/soft/apache-tomcat-7.0.73/bin/tomcat-juli.jar\nUsing CATALINA_PID:    /opt/web/test1/tomcat.pid\nTomcat started.\nubuntu# netstat -tunlp\n激活Internet连接 (仅服务器)\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name\ntcp        0      0 127.0.1.1:53            0.0.0.0:*               LISTEN      7237/dnsmasq   \ntcp6       0      0 :::8080                 :::*                    LISTEN      10182/java     \ntcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      10258/java     \ntcp6       0      0 :::8070                 :::*                    LISTEN      10258/java     \ntcp6       0      0 127.0.0.1:8006          :::*                    LISTEN      10182/java     \ntcp6       0      0 :::8009                 :::*                    LISTEN      10182/java     \nudp        0      0 0.0.0.0:57782           0.0.0.0:*                           7062/avahi-daemon:\nudp        0      0 0.0.0.0:49141           0.0.0.0:*                           7237/dnsmasq   \nudp        0      0 0.0.0.0:41976           0.0.0.0:*                           7237/dnsmasq   \nudp        0      0 127.0.1.1:53            0.0.0.0:*                           7237/dnsmasq   \nudp        0      0 0.0.0.0:68              0.0.0.0:*                           9541/dhclient   \nudp        0      0 0.0.0.0:48730           0.0.0.0:*                           7237/dnsmasq   \nudp        0      0 0.0.0.0:631             0.0.0.0:*                           7120/cups-browsed\nudp        0      0 0.0.0.0:47809           0.0.0.0:*                           7237/dnsmasq   \nudp        0      0 0.0.0.0:5353            0.0.0.0:*                           7062/avahi-daemon:\nudp        0      0 0.0.0.0:36600           0.0.0.0:*                           7237/dnsmasq   \nudp6       0      0 :::46484                :::*                                7062/avahi-daemon:\nudp6       0      0 :::5353                 :::*                                7062/avahi-daemon:\nubuntu#\n```\n\n可以看到8081，8082，8083等其他端口都已经启动，现在可以使用curl命令进行访问\n```bash\nubuntu# curl localhost:8080\n\n<html>\n<head>\n    <meta charset=\"utf-8\">\n</head>\n<body>\n<h2>Hello World!</h2>\n<h2>Test 项目!</h2>\n</body>\n</html>\nubuntu# curl localhost:8070\n\n<html>\n<head>\n    <meta charset=\"utf-8\">\n</head>\n<body>\n<h2>Hello World!</h2>\n<h2>Test 项目!</h2>\n</body>\n</html>\nubuntu#\n```\n多实例部署成功，以后可以简单的复制其中一个实例，修改相关配置即可。\n\n## 4. Nginx配置\n本篇文章重点不在Nginx,简单带过。\n\n在配置文件nginx.conf下的http节点中，引入了两行代码\n\n```profile\nhttp\n        {\n                include       mime.types;\n                default_type  application/octet-stream;\n\n\t            ......\n\t            ......\n\t            ......\n\n                #在以下两个文件具体配置\n                include /usr/local/nginx/conf/conf.d/upstream.conf;\n                include /usr/local/nginx/conf/conf.d/ld.conf;\n}\n```\n因此每个项目站点的具体配置是在`upstream.conf `与`ld.conf`中配置的。\n\n其中`ld.conf`下配置的是具体站点的server 站点映射关系\n```profile\n\n......\nother server\n......\n\nserver  {\n    listen  80;\n    server_name  www.dongxiaoxia.xyz;\n    server_name_in_redirect off;\n    client_header_timeout  30;\n    client_body_timeout  30;\n    charset  UTF-8;\n    client_max_body_size  10000k;\n    allow  all;\n\n  location / {\n        index   index.html index.php index.jsp index.htm;\n        proxy_pass      http://test_pool;\n        proxy_redirect  off;\n        proxy_set_header Host $host;\n        proxy_set_header CURRENT_URL http://$Host$request_uri;\n        proxy_set_header X-USER_IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n  access_log  /opt/web/test/logs/test.log  main;\n}\n\n......\n......\n```\n\n其中`upstream.conf`下配置的是具体站点的 pool 映射关系\n\n```profile\n\n......\nother pool\n......\n\nupstream test_pool {\n        server 127.0.0.1:8303 weight=15 max_fails=2 fail_timeout=30s;\n}\n\n......\n......\n```\n需要注意的是，在修改了Nginx配置文件后，一定要执行`/opt/soft/nginx/sbin/nginx -s reload `重新加载配置 \n\n\n## 5. 自动化部署脚本\n 服务器每次部署都要拷贝war包到服务器，停止服务器，再开启服务器，不太方便；而且服务器的配置文件应该相对于开发环境不太容易变动，或者开发人员根本无法得知服务器配置信息，因此带来另两个不好的原因，war包整体覆盖会有问题，war包体积太大。因此本地打包war包时要去掉相应文件， 服务器也要相应处理。 \n\n假设场景：本地编译打包项目war包。假如项目名为test，war包为test.war，部署时要求去除日志文件、项目配置文件、以及依赖的外部jar包。\n\n因此在项目根目录下创建`deploy.bat` 脚本，内容为：\n```bash\n@echo off\n\necho ...............................................................................................................................................................\necho This shell script does not put lib directory into package. If you want to, please just upload 'test.war' in target directory.\necho ...............................................................................................................................................................\n\nset SVN_ROOT=D:\\svn\\test\nset TARGET_PATH=%SVN_ROOT%\\target\\test\nset DEPLOY=%SVN_ROOT%\\deploy\n\nrd /s /q %DEPLOY%\nmd %DEPLOY%\necho %TARGET_PATH%\nxcopy %TARGET_PATH%\\* %DEPLOY%\\ /s /e\nrd /s /q %DEPLOY%\\WEB-INF\\lib\ndel /f /s /q %DEPLOY%\\WEB-INF\\classes\\test.properties\ndel /f /s /q %DEPLOY%\\WEB-INF\\classes\\log4j.properties\n\ncd /d %DEPLOY%\n\njar -cvf test.war *\n\nrd /s /q %DEPLOY%\\META-INF\nrd /s /q %DEPLOY%\\WEB-INF\nrd /s /q %DEPLOY%\\static\ndel /s /q %DEPLOY%\\index.jsp\n\npause\n```\n\n这个脚本用来去掉lib下依赖的jar包，test.proterties，log4j.properties,再重新压缩为war包，去掉lib下的jar包，是因为项目的依赖包太大了，传输时很费时间，而jar包在部署过后很可能不会变动。\n test.properties与log4j.properties 为项目的配置文件，开发环境与服务器的配置肯定是不一样的，因此不能直接覆盖掉，而是全量部署时放在项目上，以后增量部署的时候不覆盖即可。\n\n1.本地install为test.war，如果为增量部署还要执行一下deploy脚本。\n2.把deploy过的war包通过Filezilla等传输到服务器指定的部署目录，我们这里服务器的下项目部署文件夹为/root/deploy，根据项目名创建一个文件夹test，因此我们的test项目的部署路径为/root/deploy/test，文件夹下有我们的test.war文件。\n3.在/root/deploy/test文件夹下，会创建一个`deploy.sh` 脚本文件，与客户端的deploy.bat 相呼应。\n```bash\n#!/bin/sh\ndeploy_file_dir=/root/deploy/test\ndeploy_dir=/opt/web/test\ncd ${deploy_dir}/deploy\nrm -rf ./*\njar xvf ${deploy_file_dir}/test.war\ncp -rf ./* ${deploy_dir}/webapps/\ncd ../\nsh stop.sh\nsh run.sh\n```\n\n查看脚本内容，我们可以得知deploy.sh 脚本的功能\n1.由于客户端传送过来的可能不会是全量test.war包，因此不能简单的把test.war包直接放到、opt/web/test/webapps目录下，这样会覆盖掉服务器的项目配置，也会导致部分文件丢失。只能解压test.war包 把全部内容复制到webapps下，存在就覆盖，而不存在的也不会删掉webapps下存在的。\n2.执行stop.sh 停止test项目，因为test项目之前可能已经启动了。\n3.执行run.sh 启动项目。\n\n\n到此为止，我们已经用了脚本代替一部分手动操作，但还是不够完善，比如项目实例还是要自己手动搭建，启动脚本也要手动编写，下面提供了一键部署tomcat实例项目环境的脚本`build.sh`，最大化利用脚本，减少手动操作。(这里没有添加Nginx配置，所以有关Nginx的配置还要手动添加，并且重新加载！)\n```bash\n#!/bin/sh\n#一键部署Tomcat实例项目环境\n\n#项目名称\nPROJECT_NAME=www.dongxiaoxia.xyz\n#tomcat关闭端口\nSERVER_PORT=8006\n#Http监听端口\nHTTP_PORT=8080\n##################以上三个参数需要修改############################\n#项目基础路径\nPROJECT_BASE_PATH=/opt/web/\n#日志基础路径\nLOG_BASE_PATH=/opt/log/\n#部署基础路径\nDEPLOY_BASE_PATH=/root/deploy/\n#Java安装路径\nJAVA_HOME=/opt/soft/jdk1.8.0_11/\n#Tomcat安装路径\nCATALINA_HOME=/opt/soft/apache-tomcat-7.0.73\n#Tomcat活跃配置路径,也就是项目部署路径\nCATALINA_BASE=$PROJECT_BASE_PATH$PROJECT_NAME\n#tomcat server.xml配置文件路径\nSERVER_XML=$CATALINA_BASE/conf/server.xml\n#########################################################################################\necho 'Java安装路径:'$JAVA_HOME\necho 'Tomcat安装路径:'$CATALINA_HOME\necho 'Tomcat项目实例路径:'$CATALINA_BASE\necho '项目war包部署上传路径:'$DEPLOY_BASE_PATH$PROJECT_NAME\necho 'tomcat server.xml配置文件路径:'$SERVER_XML\necho '项目日志路径:'$LOG_BASE_PATH$PROJECT_NAME\necho 'tomcat关闭端口:'$SERVER_PORT\necho 'Http监听端口:'$HTTP_PORT\n\n#################创建tomcat实例 修改server.xml配置##########################\n\n#复制tomcat实例所需文件夹\necho '复制tomcat实例所需文件夹'\n\nif [ ! -d \"$CATALINA_BASE\" ]; then\nmkdir -p \"$CATALINA_BASE\"\nfi\n\ncd $CATALINA_HOME\ncp -r conf $CATALINA_BASE\nmkdir $CATALINA_BASE/webapps\nmkdir $CATALINA_BASE/work\nmkdir $CATALINA_BASE/logs\n\necho '修改server.xml配置'\n# 修改tomcat关闭端口\nsed -i 22s@8005@${SERVER_PORT}@ $SERVER_XML\n# 修改Http监听端口\nsed -i 71s@8080@${HTTP_PORT}@ $SERVER_XML\n# 统一web应用程序的路径\nsed -i '125s@appBase=\"webapps\"@appBase=\"'$CATALINA_BASE'/webapps\"@' $SERVER_XML\n# 关闭自动部署\n#sed -i '126s@autoDeploy=\"true\"@autoDeploy=\"false\"@' $SERVER_XML\nsed -i '141a<Host name=\"localhost\"  appBase=\"'$CATALINA_BASE'/webapps\" autoDeploy=\"false\" deployOnStartup=\"false\">\\n     <Context path=\"\" docBase=\"'$CATALINA_BASE'/webapps\" crossContext=\"true\" allowLinking=\"true\" reloadable=\"false\">\\n         <JarScanner scanAllDirectories=\"true\" />\\n         <Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"'$CATALINA_BASE'/logs/\" prefix=\"gh_access_log.\" suffix=\".log\" pattern=\"%a %A %t %S %b %r %s %{Referer}i %{User-Agent}i %D\" resolveHosts=\"false\" />\\n     </Context>\\n</Host>\n' $SERVER_XML\n\nsed -i '125,141d' $SERVER_XML\n\n#######################创建run.sh脚本文件###################################\necho '创建run.sh脚本文件'\ncd $CATALINA_BASE\ntouch run.sh\necho '#!/bin/sh' >> run.sh\necho 'TOMCAT_HOME='$CATALINA_HOME >> run.sh\n#echo 'CATALINA_BASE='$CATALINA_BASE >> run.sh\necho 'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)' >> run.sh\necho 'CATALINA_PID=$CATALINA_BASE/tomcat.pid' >> run.sh\necho 'JAVA_HOME='$JAVA_HOME >> run.sh\necho 'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib' >> run.sh\necho 'LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib' >> run.sh\necho 'PATH=$PATH:$JAVA_HOME/bin' >> run.sh\necho '' >> run.sh\necho '#路径为【/opt/web/xxx】时，项目名则为【xxx】' >> run.sh\necho \"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '{print \\$NF}'\\`\" >> run.sh\necho '' >> run.sh\necho '#检测temp目录是否存在，不存在则创建' >> run.sh\necho 'if [ ! -d \"$CATALINA_BASE/temp\" ]; then' >> run.sh\necho '    mkdir \"$CATALINA_BASE/temp\"' >> run.sh\necho 'fi' >> run.sh\necho '' >> run.sh\necho '#日志目录名' >> run.sh\necho 'PROJECT_LOG='$LOG_BASE_PATH'$PROJECT_NAME/catalina.out' >> run.sh\necho '' >> run.sh\necho 'JAVA_OPTS=\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"' >> run.sh\necho '' >> run.sh\necho 'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH' >> run.sh\necho '' >> run.sh\necho 'proj_dir=$CATALINA_BASE' >> run.sh\necho 'if [ -n \"$proj_dir\" ]' >> run.sh\necho 'then' >> run.sh\necho \"        ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" > /dev/null\" >> run.sh\necho '        status=$?' >> run.sh\necho '' >> run.sh\necho '        if  [ $status -eq 0 ] && [ -s $CATALINA_PID  ]' >> run.sh\necho '        then' >> run.sh\necho '                echo \"The $proj_dir tomcat is running and the pid_file is exist !\"' >> run.sh\necho '                exit 1' >> run.sh\necho '        elif [ $status -eq 0 ] || [ -s $CATALINA_PID  ]' >> run.sh\necho '        then' >> run.sh\necho '                echo \"kill one\"' >> run.sh\necho \"                ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" | awk '{print \\$2}' | xargs -i kill -9 {}\" >> run.sh\necho '                > $CATALINA_PID' >> run.sh\necho '                $TOMCAT_HOME/bin/catalina.sh start' >> run.sh\necho '        else' >> run.sh\necho '                $TOMCAT_HOME/bin/catalina.sh start' >> run.sh\necho '        fi' >> run.sh\necho '' >> run.sh\necho 'else' >> run.sh\necho '        echo \"start failt!!!\"' >> run.sh\necho '        exit 1' >> run.sh\necho 'fi' >> run.sh\n\n#######################创建stop.sh脚本文件###################################\necho '创建stop.sh脚本文件'\ncd $CATALINA_BASE\ntouch stop.sh\n\necho '#!/bin/sh' >> stop.sh\necho 'TOMCAT_HOME='$CATALINA_HOME >> stop.sh\necho '#CATALINA_BASE='$CATALINA_BASE >> stop.sh\necho 'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)' >> stop.sh\necho 'CATALINA_PID=$CATALINA_BASE/tomcat.pid' >> stop.sh\necho 'JAVA_HOME='$JAVA_HOME >> stop.sh\necho 'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib' >> stop.sh\necho 'PATH=$PATH:$JAVA_HOME/bin' >> stop.sh\necho '' >> stop.sh\necho '#路径为【/opt/web/xxx】时，项目名则为【xxx】' >> stop.sh\necho \"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '{print \\$NF}'\\`\" >> stop.sh\necho 'echo $PROJECT_NAME' >> stop.sh\necho '' >> stop.sh\necho '#日志目录名' >> stop.sh\necho 'PROJECT_LOG='$LOG_BASE_PATH'$PROJECT_NAME/' >> stop.sh\necho '' >> stop.sh\necho 'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG' >> stop.sh\necho '' >> stop.sh\necho 'proj_dir=$CATALINA_BASE' >> stop.sh\necho '$TOMCAT_HOME/bin/catalina.sh stop' >> stop.sh\necho 'sleep 5' >> stop.sh\necho 'if [ -n \"$proj_dir\" ]' >> stop.sh\necho 'then' >> stop.sh\necho \"        ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" > /dev/null\" >> stop.sh\necho '        status=$?' >> stop.sh\necho '        if [ $status -eq 0 ] || [ -s $CATALINA_PID  ]' >> stop.sh\necho '        then' >> stop.sh\necho '                echo \"kill it\"' >> stop.sh\necho \"                ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" |  awk '{print \\$2}' | xargs -i kill -9 {}\" >> stop.sh\necho '                > $CATALINA_PID' >> stop.sh\necho '        fi' >> stop.sh\necho 'else' >> stop.sh\necho '        echo \"stop failt!!!\"' >> stop.sh\necho '        exit 1' >> stop.sh\necho 'fi' >> stop.sh\n\n#######################创建debug.sh脚本文件###################################\necho '创建debug.sh脚本文件'\ncd $CATALINA_BASE\ntouch debug.sh\n\necho '#!/bin/sh' >> debug.sh\necho 'TOMCAT_HOME='$CATALINA_HOME >> debug.sh\necho 'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)' >> debug.sh\necho 'CATALINA_PID=$CATALINA_BASE/tomcat.pid' >> debug.sh\necho 'JAVA_HOME='$JAVA_HOME >> debug.sh\necho 'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib' >> debug.sh\necho 'LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib' >> debug.sh\necho 'PATH=$PATH:$JAVA_HOME/bin' >> debug.sh\necho '' >> debug.sh\necho '#路径为【/opt/web/xxx】时，项目名则为【xxx】' >> debug.sh\necho \"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '{print \\$NF}'\\`\" >> debug.sh\necho '' >> debug.sh\necho '#日志目录名' >> debug.sh\necho 'PROJECT_LOG='$LOG_BASE_PATH'$PROJECT_NAME/catalina.out' >> debug.sh\necho '' >> debug.sh\necho 'JAVA_OPTS=\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"' >> debug.sh\necho '' >> debug.sh\necho 'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH' >> debug.sh\necho '' >> debug.sh\necho 'proj_dir=$CATALINA_BASE' >> debug.sh\necho 'if [[ -n \"$proj_dir\" ]]' >> debug.sh\necho 'then' >> debug.sh\necho '        ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" > /dev/null' >> debug.sh\necho '        status=$?' >> debug.sh\necho '' >> debug.sh\necho '        if  [[ $status -eq 0 ]] && [[ -s $CATALINA_PID  ]]' >> debug.sh\necho '        then' >> debug.sh\necho '                echo \"The $proj_dir tomcat is running and the pid_file is exist !\"' >> debug.sh\necho '                exit 1' >> debug.sh\necho '        elif [[ $status -eq 0 ]] || [[ -s $CATALINA_PID  ]]' >> debug.sh\necho '        then' >> debug.sh\necho '                echo \"kill one\"' >> debug.sh\necho \"                ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" | awk '{print \\$2}' | xargs -i kill -9 {}\" >> debug.sh\necho '                > $CATALINA_PID' >> debug.sh\necho '                $TOMCAT_HOME/bin/catalina.sh jpda start' >> debug.sh\necho '        else' >> debug.sh\necho '                $TOMCAT_HOME/bin/catalina.sh jpda start' >> debug.sh\necho '        fi' >> debug.sh\necho 'else' >> debug.sh\necho '        echo \"start failt!!!\"' >> debug.sh\necho '        exit 1' >> debug.sh\necho 'fi' >> debug.sh\n\n#######################创建restart.sh脚本文件###################################\necho '创建restart.sh脚本文件'\ncd $CATALINA_BASE\ntouch restart.sh\n\necho '#!/bin/sh' >> restart.sh\necho 'TOMCAT_HOME='$CATALINA_HOME >> restart.sh\necho 'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)' >> restart.sh\necho 'CATALINA_PID=$CATALINA_BASE/tomcat.pid' >> restart.sh\necho 'JAVA_HOME=/opt/soft/jdk/1.8.11/jdk1.8.0_11' >> restart.sh\necho 'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib' >> restart.sh\necho 'PATH=$PATH:$JAVA_HOME/bin' >> restart.sh\necho 'JAVA_OPTS=\"-server -Xms1g -Xmx1g -Xmn512m -Xss1024K -XX:PermSize=256m -XX:MaxPermSize=512m -XX:ParallelGCThreads=8 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"' >> restart.sh\necho '' >> restart.sh\necho '#路径为【/opt/web/xxx】时，项目名则为【xxx】' >> restart.sh\necho \"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '{print \\$NF}'\\`\" >> restart.sh\necho '' >> restart.sh\necho '#日志目录名' >> restart.sh\necho 'PROJECT_LOG='$LOG_BASE_PATH'$PROJECT_NAME/catalina.out' >> restart.sh\necho '' >> restart.sh\necho 'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG' >> restart.sh\necho '' >> restart.sh\necho 'sh $CATALINA_BASE/stop.sh' >> restart.sh\necho 'sh $CATALINA_BASE/start.sh' >> restart.sh\n#######################创建deploy.sh脚本文件###################################\necho '创建deploy.sh脚本文件'\n\nif [ ! -d \"$DEPLOY_BASE_PATH$PROJECT_NAME\" ]; then\n  mkdir -p \"$DEPLOY_BASE_PATH$PROJECT_NAME\"\nfi\n\ncd $DEPLOY_BASE_PATH$PROJECT_NAME\ntouch deploy.sh\n\necho '#!/bin/sh' >> deploy.sh\necho \"deploy_file_dir=$DEPLOY_BASE_PATH$PROJECT_NAME\" >> deploy.sh\necho \"deploy_dir=$CATALINA_BASE\" >> deploy.sh\necho \"if [ ! -d \"\\${deploy_dir}/deploy\" ]; then\" >> deploy.sh\necho \"  mkdir -p \"\\${deploy_dir}/deploy\"\" >> deploy.sh\necho \"fi\" >> deploy.sh\necho 'cd ${deploy_dir}/deploy' >> deploy.sh\necho 'rm -rf ./*' >> deploy.sh\necho 'jar xvf ${deploy_file_dir}/'$PROJECT_NAME'.war' >> deploy.sh\necho 'cp -rf ./* ${deploy_dir}/webapps/' >> deploy.sh\necho 'cd ../' >> deploy.sh\necho 'sh stop.sh' >> deploy.sh\necho 'sh run.sh' >> deploy.sh\n#########################################################################################\necho 'tomcat项目实例创建成功!'\necho \"请把war包放置到$DEPLOY_BASE_PATH$PROJECT_NAME目录下，执行$DEPLOY_BASE_PATH$PROJECT_NAME/deploy脚本启动项目.\"\necho \"或者直接解压war包到$CATALINA_BASE/webapps下。执行$CATALINA_BASE/run脚本启动项目.\"\n```\n\n## 6. 部署总结\n### 为什么\n本篇文章都是为了解决文章开头的问题及后续问题：本地开发完项目后如何简单部署到服务器？\n\n### 怎么做\n1. 服务器项目部署规范化，相关软件规范化，统一部署，集中管理。\n2. 用脚本替代手动操作。\n3. 部署文档清晰易懂。\n\n### 怎么样\n**优点**\n1. tomcat多实例部署，启动、关闭一个项目站点不影响其他站点，没有耦合。\n2. 对添加开放，对删除关闭。\n要添加一个新的项目站点，只需简单的执行一下脚本就能够实现，不会影响其他站点配置。\n3. 第一次部署及后续增量部署都极其简单、容易操作、全程脚本化。\n4. 整个服务器规范化，各个项目部署路径、相关软件路径、日志路径清晰明了。\n5. 项目日志集中管理，方便后续统计分析。 \n\n**劣势**\n 1. 要求部署人员具备一定的脚本语法基础，能够理解相关的脚本原理。\n 2. 脚本的创建是直接添加内容，如果之前已经存在相关的文件，没有采取替换而是追加，因此要确定相关路径上的文件是否正确。\n\n### 几句话说明白部署\n\n**部署环境整体规划**\n1.  项目目录 /opt/web\n2.  日志目录 /opt/log\n3.  jdk/tomcat/nginx等目录 安装环境 /opt/soft\n4.  项目应用war包上传到服务器的目录 /root/deploy\n\n假设现在有3个项目 test test1 test2\n```bash\nubuntu# ls /opt/web /root/deploy/ /opt/soft /opt/log\n/opt/log:\ntest  test1  test2\n\n/opt/soft:\napache-tomcat-7.0.73  include\t   lib\t  nginx-1.6.2\t      openssl-1.1.0c\t     pcre-8.39\t       share  zlib-1.2.8\nbin\t\t      jdk1.8.0_11  nginx  nginx-1.6.2.tar.gz  openssl-1.1.0c.tar.gz  pcre-8.39.tar.gz  ssl    zlib128.zip\n\n/opt/web:\nbuild.sh  test\ttest1  test2\n\n/root/deploy/:\ntest  test1  test2\nubuntu# \n```\n\n**全量部署(第一次部署)**\n1. **执行`build.sh`脚本一键部署项目**\n2. 配置并重新加载Nginx代理配置\n3. 开发环境install打包war包传输到服务器deploy目录\n4. 执行`deploy.sh`脚本，打开项目日志查看启动情况\n                          \n**增量部署**\n1. 开发环境install打包war包,**执行开发环境`deploy.sh(mac)/deploy.bat(windows)`脚本**，传输到服务器deploy目录 \n4. 执行`deploy.sh`脚本，打开项目日志查看启动情况\n","slug":"linux","published":1,"updated":"2017-01-19T07:54:12.794Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciy431omk001nuco0jwp3w3lj","content":"<p>本篇文章主要围绕一个问题：本地开发完项目后如何简单部署到服务器？<br>这个问题太宽泛了，因此，提出了以下几个要点：</p>\n<ol>\n<li>第一次怎么部署</li>\n<li>增量开发后怎么<code>简单</code>部署?</li>\n<li>服务器环境整体如何规划？各个项目怎么存放，日志是否集中存放 ？项目各个项目运行环境与部署怎么分开？。。。</li>\n<li>如何用脚本自动化部署？</li>\n<li>如何用几句话归纳部署？</li>\n</ol>\n<p>经过整篇文章，我想会有一定的答案。</p>\n<p>文章的各个章节并不是按照解决问题的顺序写的，而是按照环境部署、项目配置、自动化部署一步步递进的，完成服务器 JDK + Tomcat + Nginx 部署环境整体搭建及自动化部署的具体实现。</p>\n<h2 id=\"1-服务器环境整体规划\">1.服务器环境整体规划</h2><p>在本篇文章的部署方式中，会涉及以下4个总目录</p>\n<pre><code><span class=\"number\">1.</span> 项目目录 /opt/web\n<span class=\"number\">2.</span> 日志目录 /opt/<span class=\"built_in\">log</span>\n<span class=\"number\">3.</span> JDK/Tomcat/Nginx等安装环境的父目录  /opt/soft\n<span class=\"number\">4.</span> 项目应用war包上传到服务器的目录 /root/deploy\n</code></pre><h2 id=\"2-运行环境安装\">2.运行环境安装</h2><h3 id=\"2-1_JDK\">2.1 JDK</h3><ol>\n<li>官网下载 JDK8，解压到/opt/soft ，解压文件夹为jdk1.8.0_11</li>\n<li><p>配置 JDK 环境变量<br>在<code>/etc/profile</code>文件末尾添加以下配置 ：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#jdk enviroment</span></span><br><span class=\"line\">JAVA_HOME=/opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">PATH=<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$PATH</span></span><br><span class=\"line\">CLASSPATH=.:<span class=\"variable\">$JAVA_HOME</span>/lib/dt.jar:<span class=\"variable\">$JAVA_HOME</span>/lib/tools.jar</span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH</span><br><span class=\"line\"><span class=\"built_in\">export</span> CLASSPATH</span><br></pre></td></tr></table></figure>\n<p>保存退出。终端执行命令<code>source /etc/profile</code>  使配置生效  </p>\n</li>\n<li>验证 JDK 配置<br>终端执行命令：<code>java -version</code><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># java -version</span></span><br><span class=\"line\">java version <span class=\"string\">\"1.8.0_111\"</span></span><br><span class=\"line\">Java(TM) SE Runtime Environment (build 1.8.0_111-b14)</span><br><span class=\"line\">Java HotSpot(TM) 64-Bit Server VM (build 25.111-b14, mixed mode)</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<blockquote>\n<p><strong>JDK 配置成功！！！</strong></p>\n</blockquote>\n<h3 id=\"2-2_Tomcat\">2.2 Tomcat</h3><ol>\n<li>官网下载tomcat，我这里下载的是apache-tomcat-7.0.73，解压到/opt/soft ，解压文件夹为apache-tomcat-7.0.73</li>\n<li>进入tomcat目录下的bin目录下，执行tomcat启动脚本（tomcat依赖jdk，应先确定jdk已经安装）<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># sh startup.sh </span></span><br><span class=\"line\">Using CATALINA_BASE:   /opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">Using CATALINA_HOME:   /opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">Using CATALINA_TMPDIR: /opt/soft/apache-tomcat-7.0.73/temp</span><br><span class=\"line\">Using JRE_HOME:        /opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">Using CLASSPATH:       /opt/soft/apache-tomcat-7.0.73/bin/bootstrap.jar:/opt/soft/apache-tomcat-7.0.73/bin/tomcat-juli.jar</span><br><span class=\"line\">Tomcat started.</span><br><span class=\"line\">ubuntu<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>出现以上信息证明tomcat已经成功启动，打开 <a href=\"http://ip:8080\" target=\"_blank\" rel=\"external\">http://ip:8080</a> 或 <a href=\"http://localhost:8080\" target=\"_blank\" rel=\"external\">http:/localhost:8080</a>,如果能看到tomcat系统界面，说明已经安装成功，可以进行下一步了。</p>\n<p> <strong>常见命令</strong></p>\n<blockquote>\n<p>启动tomcat ：sh startup.sh<br>关闭tomcat  ：sh shutdown.sh<br>查看tomcat运行进程 ： ps aux | grep tomcat 或 ps aux | grep java 或ps -ef | grep java  或 ps -ef | grep tomcat<br>查看端口使用情况   netstat –apn 或 netstat -tunlp  ，可以结合 grep ，如 netstat -apn | grep (端口号)  或 netstat -apn | grep java<br>其中最后一下为pid/program name ，如果端口被占用， 可以进一步使用命令：ps -ef  | grep (pid) 查看，可以查出是哪个进程占用了端口号，可以kill portId 杀死进程。</p>\n</blockquote>\n<h3 id=\"2-3_Nginx\">2.3 Nginx</h3><p> 这里演示的系统为<code>Ubuntu</code></p>\n<p>Ubuntu平台编译环境安装<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install build-essentail</span><br><span class=\"line\">apt-get install libtool</span><br></pre></td></tr></table></figure></p>\n<p>安装Nginx依赖包 OpenSSL、zlib、 pcre<br>这三个包可以直接在终端下载，如果网速慢，建议在本地下载再上传到服务器。<br>安装Nginx依赖包<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install libpcre3 libpcre3-dev zlib1g-dev libssl-dev build-essential</span><br></pre></td></tr></table></figure></p>\n<p>选择下载保存目录 cd /opt/soft<br>下载OpenSSL<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget ftp://ftp.openssl.org/<span class=\"built_in\">source</span>/openssl-1.1.0c.tar.gz</span><br></pre></td></tr></table></figure></p>\n<p>下载zlib<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://zlib.net/zlib128.zip</span><br></pre></td></tr></table></figure></p>\n<p>下载pcre<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.39.tar.gz</span><br></pre></td></tr></table></figure></p>\n<p>安装OpenSSL<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxvf openssl-1.0.0c.tar.gz</span><br><span class=\"line\"><span class=\"built_in\">cd</span> openssl-1.0.0c/</span><br><span class=\"line\">./config --prefix=/opt/soft --openssldir=/opt/soft/ssl</span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\"></span><br><span class=\"line\">./config shared --prefix=/opt/soft --openssldir=/opt/soft/ssl</span><br><span class=\"line\">make clean</span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p>\n<p>安装zlib库<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unzip zlib128.zip</span><br><span class=\"line\"><span class=\"built_in\">cd</span> zlib128/</span><br><span class=\"line\">./configure --prefix=/opt/soft</span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p>\n<p>安装pcre库<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> tar zxvf pcre-8.39.tar.gz</span><br><span class=\"line\"><span class=\"built_in\">cd</span> pcre-8.39/</span><br><span class=\"line\">./configure --prefix=/opt/soft</span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p>\n<p> 查看pcre版本<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pcre-config --version</span><br></pre></td></tr></table></figure></p>\n<p>安装Nginx<br>1下载 Nginx，下载地址：<a href=\"http://nginx.org/download/nginx-1.6.2.tar.gz\" target=\"_blank\" rel=\"external\">http://nginx.org/download/nginx-1.6.2.tar.gz</a><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://nginx.org/download/nginx-1.6.2.tar.gz</span><br></pre></td></tr></table></figure></p>\n<p>2解压安装包<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxvf nginx-1.6.2.tar.gz</span><br></pre></td></tr></table></figure></p>\n<p>3进入安装包目录<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> nginx-1.6.2</span><br></pre></td></tr></table></figure></p>\n<p>4编译安装<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@bogon nginx-1.6.2]<span class=\"comment\"># ./configure --prefix=/opt/soft/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/opt/soft/src/pcre-8.39</span></span><br><span class=\"line\">[root@bogon nginx-1.6.2]<span class=\"comment\"># make</span></span><br><span class=\"line\">[root@bogon nginx-1.6.2]<span class=\"comment\"># make install</span></span><br></pre></td></tr></table></figure></p>\n<p>5查看Nginx版本<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/opt/soft/nginx/sbin/nginx -v</span><br><span class=\"line\">nginx version: nginx/1.6.2</span><br></pre></td></tr></table></figure></p>\n<p>6启动nginx<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/opt/soft/nginx/sbin/nginx</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>到此，nginx安装成功</p>\n</blockquote>\n<p><strong>Nginx常用命令</strong></p>\n<blockquote>\n<p>/opt/soft/nginx/sbin/nginx -v                   #查看 Nginx版本<br>/opt/soft/nginx/sbin/nginx                       #启动 Nginx<br>/opt/soft/nginx/sbin/nginx -t                   # 检查配置文件ngnix.conf的正确性<br>/opt/soft/nginx/sbin/nginx -s reload        #重新载入配置文件<br>/opt/soft/nginx/sbin/nginx -s reopen       #重启 Nginx<br>/opt/soft/nginx/sbin/nginx -s stop           #停止 Nginx</p>\n</blockquote>\n<pre><code>jdk<span class=\"command\">\\tomcat</span><span class=\"command\">\\nginx</span> 安装完毕，查看服务器目录\n</code></pre><p>/opt/soft 目录下文件结构<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> ➜  apache-tomcat-7.0.73 ll /opt/soft       </span><br><span class=\"line\">总用量 8.4M</span><br><span class=\"line\">drwxr-xr-x  9 root root 4.0K 12月 27 09:25 apache-tomcat-7.0.73</span><br><span class=\"line\">drwxr-xr-x  2 root root 4.0K 12月 28 15:44 bin</span><br><span class=\"line\">drwxr-xr-x  3 root root 4.0K 12月 28 15:38 include</span><br><span class=\"line\">drwxr-xr-x  8 uucp  143 4.0K 6月  17  2014 jdk1.8.0_11</span><br><span class=\"line\">drwxr-xr-x  4 root root 4.0K 12月 28 15:44 lib</span><br><span class=\"line\">drwxr-xr-x 11 root root 4.0K 12月 28 16:22 nginx</span><br><span class=\"line\">drwxr-xr-x  9 1001 1001 4.0K 12月 28 16:14 nginx-1.6.2</span><br><span class=\"line\">-rwxr-xr-x  1 root root 786K 12月 28 16:13 nginx-1.6.2.tar.gz</span><br><span class=\"line\">drwxr-xr-x 19 root root 4.0K 12月 28 16:05 openssl-1.1.0c</span><br><span class=\"line\">-rwxr-xr-x  1 root root 5.0M 12月 28 15:34 openssl-1.1.0c.tar.gz</span><br><span class=\"line\">drwxr-xr-x  9 1169 1169  12K 12月 28 16:15 pcre-8.39</span><br><span class=\"line\">-rwxr-xr-x  1 root root 2.0M 12月 28 15:23 pcre-8.39.tar.gz</span><br><span class=\"line\">drwxr-xr-x  4 root root 4.0K 12月 28 15:32 share</span><br><span class=\"line\">drwxr-xr-x  5 root root 4.0K 12月 28 15:44 ssl</span><br><span class=\"line\">drwxr-xr-x 14 root root 4.0K 12月 28 15:30 zlib-1.2.8</span><br><span class=\"line\">-rwxr-xr-x  1 root root 679K 12月 28 15:28 zlib128.zip</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"3-_Tomcat多实例多应用部署\">3. Tomcat多实例多应用部署</h2><h3 id=\"3-1-_部署应用分类\">3.1. 部署应用分类</h3><p><code>单实例单应用</code>：一个tomcat目录，webapps目录下只跑一个war包，最基本的部署方式。<br><code>单实例多应用</code>：一个tomcat目录，webapps目录下跑多个war包。 启动、关闭 tomcat对所有war包起作用。<br><code>多实例单应用</code>：多个tomcat目录，每个tomcat只跑一个应用，并且是同一个应用。通过修改tomcat端口配合nginx进行负载均衡。<br><code>多实例多应用</code>：把一个tomcat分为2部分，一部分为公用的bin目录与lib目录，其余文件夹作为第二部分，可以复制多次，因此tomcat只有一个，但是实例可以有多个，每个实例在单独部署，与单实例多应用相似。</p>\n<blockquote>\n<ol>\n<li>一个tomcat，充分利用资源，对tomcat的更新维护也很方便</li>\n<li>多个实例，各个实例互不影响</li>\n<li>各个项目相互独立，启动关闭不影响</li>\n<li>部署容易，启动快速<h3 id=\"3-2_目录结构认识\">3.2 目录结构认识</h3>一个刚解压出来的tomcat打包文件应该有以下几个目录<br>bin:主要存放脚本文件，例如比较常用的windows和linux系统中启动和关闭脚本<br>conf:主要存放配置文件，其中最重要的两个配置文件是server.xml和web.xml<br>lib:主要存放tomcat运行所依赖的包<br>logs:主要存放运行时产生的日志文件，例如catalina.{date}.log等<br>temp:存放tomcat运行时产生的临时文件，例如开启了hibernate缓存的应用程序，会在该目录下生成一些文件<br>webapps:部署web应用程序的默认目录<br>work:主要存放由JSP文件生成的servlet（java文件以及最终编译生成的class文件）<h3 id=\"3-3_多实例原理\">3.3 多实例原理</h3>tomcat中两个比较重要的概念（通常也是两个系统变量）——CATALINA_HOME和CATALINA_BASE：<ul>\n<li>CATALINA_HOME：即指向Tomcat安装路径的系统变量</li>\n<li>CATALINA_BASE：即指向活跃配置路径的系统变量</li>\n</ul>\n</li>\n</ol>\n</blockquote>\n<p>通过设置这两个变量，就可以将tomcat的安装目录和工作目录分离，从而实现tomcat多实例的部署。</p>\n<p>Tomcat官方文档指出，CATALINA_HOME路径的路径下只需要包含bin和lib目录，这也就是支持tomcat软件运行的目录，而CATALINA_BASE设置的路径可以包括上述所有目录，不过其中bin和lib目录并不是必需的，缺省时会使用CATALINA_HOME中的bin和conf。如此，我们就可以使用一个tomcat安装目录部署多个tomcat实例，这样的好处在于方便升级，就可以在不影响tomcat实例的前提下，替换掉CATALINA_HOME指定的tomcat安装目录。</p>\n<p>简而言之：</p>\n<ul>\n<li>CATALINA_HOME：bin      lib</li>\n<li>CATALINA_BASE：conf      webapps      temp      logs      work</li>\n</ul>\n<blockquote>\n<p><strong>server.xml</strong></p>\n</blockquote>\n<p>这里部署多实例要修改的两个端口：</p>\n<ul>\n<li>Server Port：该端口用于监听关闭tomcat的shutdown命令，默认为8005</li>\n<li>Connector Port：该端口用于监听HTTP的请求，默认为8080</li>\n</ul>\n<p>简单的多实例只需要保证多实例中的Server Port和Connect Port不同即可。</p>\n<p>另外要修改的是Host配置，Host就是所谓的虚拟主机，对应包含了一个或者多个web应用程序。其中：</p>\n<ul>\n<li>name： 虚拟主机的名称，一台主机表示了完全限定的域名或IP地址，默认为localhost，同时也是唯一的host，进入tomcat的所有http请求都会映射到该主机上</li>\n<li>appBase：web应用程序目录的路径，可以是CATALINA_HOME的相对路径，也可以写成绝对路径，默认情况下为$CATALINA_HOME/webapps</li>\n<li>unpackWARs： 表示是否自动解压war包</li>\n<li>autoDeploy：所谓的热部署，即在tomcat正在运行的情况下，如果有新的war加入，则会立即执行部署操作</li>\n<li>另外再介绍一个Host中的属性—deployOnStartup：表示tomcat启动时是否自动部署appBase目录下所有的Web应用程序，默认为true。这个属性和autoDeploy会产生两次部署的“副作用”：一次是tomcat启动时就开始部署，第二次就是autoDeploy引起的热部署。因此最好将autoDeploy置为false</li>\n</ul>\n<p>最后再说明一下Context的配置，它出现在Host配置内，一个Context的配置就代表了一个web应用程序，如果配置多应用程序，就需要在Host下配置多个Context。其中：</p>\n<ul>\n<li>path：表示访问入口，例如，path=”/abc”，则访问localhost:8080/abc时，就可以访问该Context对应的应用程序。如果path=””，则直接用localhost:8080就可以访问。</li>\n<li>docBase：表示应用程序的解包目录或者war文件路径，是Host的appBase配置目录的相对路径，也可以是直接写成绝对路径，但是不要将appBase的值，作为docBase配置路径的前缀，例如appBase=”somedir”，docBase=”somedir-someapp.war”，这样的配置会导致部署错误。</li>\n</ul>\n<h3 id=\"3-4_多实例多应用部署\">3.4 多实例多应用部署</h3><p>假设一个完好的可以运行的web应用程序已经打包成test.war，放在/root/deploy/test目录下，其中包含一个简单的index.jsp<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Hello World!<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"创建tomcat实例\">创建tomcat实例</h4><p>之前我们已经在/opt/soft/下成功安装了tomcat<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># ls /opt/soft/apache-tomcat-7.0.73</span></span><br><span class=\"line\">bin  conf  lib    LICENSE  logs  NOTICE  RELEASE-NOTES  RUNNING.txt  temp  webapps  work</span><br></pre></td></tr></table></figure></p>\n<p>我们的实例目录放在/opt/web/test 下<br>复制相关实例文件夹到该目录下<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># ls /opt/web/test</span></span><br><span class=\"line\">conf  debug.sh\tlogs  restart.sh  run.sh  stop.sh  webapps  work</span><br></pre></td></tr></table></figure></p>\n<p>其中run.sh 、stop.sh、debug.sh、restart.sh 脚本文件本不属于tomcat实例的，是为了方便启动、停止tomcat实例而创建的脚本</p>\n<h4 id=\"创建启停脚本\">创建启停脚本</h4><p>run.sh 脚本文件内容：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">TOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">CATALINA_BASE=$(<span class=\"built_in\">cd</span> <span class=\"string\">\"<span class=\"variable\">$(dirname $0)</span>\"</span>; <span class=\"built_in\">pwd</span>)</span><br><span class=\"line\">CATALINA_PID=<span class=\"variable\">$CATALINA_BASE</span>/tomcat.pid</span><br><span class=\"line\">JAVA_HOME=/opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">CLASSPATH=<span class=\"variable\">$CLASSPATH</span>:<span class=\"variable\">$JAVA_HOME</span>/lib:<span class=\"variable\">$JAVA_HOME</span>/jre/lib</span><br><span class=\"line\">LD_LIBRARY_PATH=<span class=\"variable\">$LD_LIBRARY_PATH</span>:/usr/<span class=\"built_in\">local</span>/apr/lib</span><br><span class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#路径为【/opt/web/xxx】时，项目名则为【xxx】</span></span><br><span class=\"line\">PROJECT_NAME=`<span class=\"built_in\">echo</span> <span class=\"variable\">$CATALINA_BASE</span> | awk -F <span class=\"string\">\"/\"</span> <span class=\"string\">'&#123;print $NF&#125;'</span>`</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#检测temp目录是否存在，不存在则创建</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ ! <span class=\"_\">-d</span> <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/temp\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    mkdir <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/temp\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#日志目录名</span></span><br><span class=\"line\">PROJECT_LOG=/opt/<span class=\"built_in\">log</span>/<span class=\"variable\">$PROJECT_NAME</span>/catalina.out</span><br><span class=\"line\"></span><br><span class=\"line\">JAVA_OPTS=<span class=\"string\">\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH</span><br><span class=\"line\"></span><br><span class=\"line\">proj_dir=<span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -n <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">        ps aux | grep <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> | grep -v <span class=\"string\">\"grep\"</span> | grep -v <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\"</span> &gt; /dev/null</span><br><span class=\"line\">        status=$?</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span>  [ <span class=\"variable\">$status</span> <span class=\"_\">-eq</span> 0 ] &amp;&amp; [ <span class=\"_\">-s</span> <span class=\"variable\">$CATALINA_PID</span>  ]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"The <span class=\"variable\">$proj_dir</span> tomcat is running and the pid_file is exist !\"</span></span><br><span class=\"line\">                <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">        <span class=\"keyword\">elif</span> [ <span class=\"variable\">$status</span> <span class=\"_\">-eq</span> 0 ] || [ <span class=\"_\">-s</span> <span class=\"variable\">$CATALINA_PID</span>  ]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"kill one\"</span></span><br><span class=\"line\">                ps aux | grep <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> | grep -v <span class=\"string\">\"grep\"</span> | grep -v <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\"</span> | awk <span class=\"string\">'&#123;print $2&#125;'</span> | xargs -i <span class=\"built_in\">kill</span> -9 &#123;&#125;</span><br><span class=\"line\">                &gt; <span class=\"variable\">$CATALINA_PID</span></span><br><span class=\"line\">                <span class=\"variable\">$TOMCAT_HOME</span>/bin/catalina.sh start</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">                <span class=\"variable\">$TOMCAT_HOME</span>/bin/catalina.sh start</span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"start failt!!!\"</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure></p>\n<p>stop.sh脚本内容<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">TOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\"><span class=\"comment\">#CATALINA_BASE=/opt/web/test</span></span><br><span class=\"line\">CATALINA_BASE=$(<span class=\"built_in\">cd</span> <span class=\"string\">\"<span class=\"variable\">$(dirname $0)</span>\"</span>; <span class=\"built_in\">pwd</span>)</span><br><span class=\"line\">CATALINA_PID=<span class=\"variable\">$CATALINA_BASE</span>/tomcat.pid</span><br><span class=\"line\">JAVA_HOME=/opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">CLASSPATH=<span class=\"variable\">$CLASSPATH</span>:<span class=\"variable\">$JAVA_HOME</span>/lib:<span class=\"variable\">$JAVA_HOME</span>/jre/lib</span><br><span class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#路径为【/opt/web/xxx】时，项目名则为【xxx】</span></span><br><span class=\"line\">PROJECT_NAME=`<span class=\"built_in\">echo</span> <span class=\"variable\">$CATALINA_BASE</span> | awk -F <span class=\"string\">\"/\"</span> <span class=\"string\">'&#123;print $NF&#125;'</span>`</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$PROJECT_NAME</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#日志目录名</span></span><br><span class=\"line\">PROJECT_LOG=/opt/<span class=\"built_in\">log</span>/<span class=\"variable\">$PROJECT_NAME</span>/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG</span><br><span class=\"line\"></span><br><span class=\"line\">proj_dir=<span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\"><span class=\"variable\">$TOMCAT_HOME</span>/bin/catalina.sh stop</span><br><span class=\"line\">sleep 5</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -n <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">        ps aux | grep <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> | grep -v <span class=\"string\">\"grep\"</span> | grep -v <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\"</span> &gt; /dev/null</span><br><span class=\"line\">        status=$?</span><br><span class=\"line\">        <span class=\"keyword\">if</span> [ <span class=\"variable\">$status</span> <span class=\"_\">-eq</span> 0 ] || [ <span class=\"_\">-s</span> <span class=\"variable\">$CATALINA_PID</span>  ]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"kill it\"</span></span><br><span class=\"line\">                ps aux | grep <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> | grep -v <span class=\"string\">\"grep\"</span> | grep -v <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\"</span> |  awk <span class=\"string\">'&#123;print $2&#125;'</span> | xargs -i <span class=\"built_in\">kill</span> -9 &#123;&#125;</span><br><span class=\"line\">                &gt; <span class=\"variable\">$CATALINA_PID</span></span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"stop failt!!!\"</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure></p>\n<p>debug.sh 脚本内容<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">TOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">CATALINA_BASE=$(<span class=\"built_in\">cd</span> <span class=\"string\">\"<span class=\"variable\">$(dirname $0)</span>\"</span>; <span class=\"built_in\">pwd</span>)</span><br><span class=\"line\">CATALINA_PID=<span class=\"variable\">$CATALINA_BASE</span>/tomcat.pid</span><br><span class=\"line\">JAVA_HOME=/opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">CLASSPATH=<span class=\"variable\">$CLASSPATH</span>:<span class=\"variable\">$JAVA_HOME</span>/lib:<span class=\"variable\">$JAVA_HOME</span>/jre/lib</span><br><span class=\"line\">LD_LIBRARY_PATH=<span class=\"variable\">$LD_LIBRARY_PATH</span>:/usr/<span class=\"built_in\">local</span>/apr/lib</span><br><span class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#路径为【/opt/web/xxx】时，项目名则为【xxx】</span></span><br><span class=\"line\">PROJECT_NAME=`<span class=\"built_in\">echo</span> <span class=\"variable\">$CATALINA_BASE</span> | awk -F <span class=\"string\">\"/\"</span> <span class=\"string\">'&#123;print $NF&#125;'</span>`</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#日志目录名</span></span><br><span class=\"line\">PROJECT_LOG=/opt/<span class=\"built_in\">log</span>/<span class=\"variable\">$PROJECT_NAME</span>/catalina.out</span><br><span class=\"line\"></span><br><span class=\"line\">JAVA_OPTS=<span class=\"string\">\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH</span><br><span class=\"line\"></span><br><span class=\"line\">proj_dir=<span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [[ -n <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> ]]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">        ps aux | grep <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> | grep -v <span class=\"string\">\"grep\"</span> | grep -v <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\"</span> &gt; /dev/null</span><br><span class=\"line\">        status=$?</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span>  [[ <span class=\"variable\">$status</span> <span class=\"_\">-eq</span> 0 ]] &amp;&amp; [[ <span class=\"_\">-s</span> <span class=\"variable\">$CATALINA_PID</span>  ]]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"The <span class=\"variable\">$proj_dir</span> tomcat is running and the pid_file is exist !\"</span></span><br><span class=\"line\">                <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">        <span class=\"keyword\">elif</span> [[ <span class=\"variable\">$status</span> <span class=\"_\">-eq</span> 0 ]] || [[ <span class=\"_\">-s</span> <span class=\"variable\">$CATALINA_PID</span>  ]]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"kill one\"</span></span><br><span class=\"line\">                ps aux | grep <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> | grep -v <span class=\"string\">\"grep\"</span> | grep -v <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\"</span> | awk <span class=\"string\">'&#123;print $2&#125;'</span> | xargs -i <span class=\"built_in\">kill</span> -9 &#123;&#125;</span><br><span class=\"line\">                &gt; <span class=\"variable\">$CATALINA_PID</span></span><br><span class=\"line\">                <span class=\"variable\">$TOMCAT_HOME</span>/bin/catalina.sh jpda start</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">                <span class=\"variable\">$TOMCAT_HOME</span>/bin/catalina.sh jpda start</span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"start failt!!!\"</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure></p>\n<p>restart.sh 脚本内容<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">TOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">CATALINA_BASE=$(<span class=\"built_in\">cd</span> <span class=\"string\">\"<span class=\"variable\">$(dirname $0)</span>\"</span>; <span class=\"built_in\">pwd</span>)</span><br><span class=\"line\">CATALINA_PID=<span class=\"variable\">$CATALINA_BASE</span>/tomcat.pid</span><br><span class=\"line\">JAVA_HOME=/opt/soft/jdk/1.8.11/jdk1.8.0_11</span><br><span class=\"line\">CLASSPATH=<span class=\"variable\">$CLASSPATH</span>:<span class=\"variable\">$JAVA_HOME</span>/lib:<span class=\"variable\">$JAVA_HOME</span>/jre/lib</span><br><span class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br><span class=\"line\">JAVA_OPTS=<span class=\"string\">\"-server -Xms1g -Xmx1g -Xmn512m -Xss1024K -XX:PermSize=256m -XX:MaxPermSize=512m -XX:ParallelGCThreads=8 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#路径为【/opt/web/xxx】时，项目名则为【xxx】</span></span><br><span class=\"line\">PROJECT_NAME=`<span class=\"built_in\">echo</span> <span class=\"variable\">$CATALINA_BASE</span> | awk -F <span class=\"string\">\"/\"</span> <span class=\"string\">'&#123;print $NF&#125;'</span>`</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#日志目录名</span></span><br><span class=\"line\">PROJECT_LOG=/opt/<span class=\"built_in\">log</span>/<span class=\"variable\">$PROJECT_NAME</span>/catalina.out</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG</span><br><span class=\"line\"></span><br><span class=\"line\">sh <span class=\"variable\">$CATALINA_BASE</span>/stop.sh</span><br><span class=\"line\">sh <span class=\"variable\">$CATALINA_BASE</span>/start.sh</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"修改conf文件夹下的server-xml\">修改conf文件夹下的server.xml</h4><p>把对应的Host节点修改为下面的内容，并修改相关的路径<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"localhost\"</span>  <span class=\"attr\">appBase</span>=<span class=\"string\">\"/opt/web/test/webapps\"</span> <span class=\"attr\">autoDeploy</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">deployOnStartup</span>=<span class=\"string\">\"false\"</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">Context</span> <span class=\"attr\">path</span>=<span class=\"string\">\"\"</span> <span class=\"attr\">docBase</span>=<span class=\"string\">\"/opt/web/test/webapps\"</span> <span class=\"attr\">crossContext</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">allowLinking</span>=<span class=\"string\">\"true\"</span><span class=\"attr\">reloadable</span>=<span class=\"string\">\"false\"</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">JarScanner</span> <span class=\"attr\">scanAllDirectories</span>=<span class=\"string\">\"true\"</span> /&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">Valve</span> <span class=\"attr\">className</span>=<span class=\"string\">\"org.apache.catalina.valves.AccessLogValve\"</span> <span class=\"attr\">directory</span>=<span class=\"string\">\"/opt/web/test/logs/\"</span> <span class=\"attr\">prefix</span>=<span class=\"string\">\"gh_access_log.\"</span> <span class=\"attr\">suffix</span>=<span class=\"string\">\".log\"</span> <span class=\"attr\">pattern</span>=<span class=\"string\">\"%a %A %t %S %b %r %s %&#123;Referer&#125;i %&#123;User-Agent&#125;i %D\"</span> <span class=\"attr\">resolveHosts</span>=<span class=\"string\">\"false\"</span> /&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;/<span class=\"name\">Context</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>除此之外，可选的修改Server的端口号以及Connector的端口号。<br>一个实例就这样完成，以后每次想要部署一个项目，就可以简单的复制这个实例文件夹，修改一下配置，就行了。</p>\n<p>注意：复制tomcat实例的时候webapps下面可能已经存在其他项目的文件，我们要清空webapps，然后把test.war解压到webapps下面，而不是直接放war包。</p>\n<p>我们再创建一个项目为test1</p>\n<h4 id=\"现在我们的目录结构如下:\">现在我们的目录结构如下:</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># ls test test1</span></span><br><span class=\"line\"><span class=\"built_in\">test</span>:</span><br><span class=\"line\">conf  debug.sh\tlogs  restart.sh  run.sh  stop.sh  webapps  work</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">test</span>1:</span><br><span class=\"line\">conf  debug.sh\tlogs  restart.sh  run.sh  stop.sh  webapps  work</span><br></pre></td></tr></table></figure>\n<h4 id=\"启动tomcat多实例\">启动tomcat多实例</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># test/run.sh</span></span><br><span class=\"line\">Using CATALINA_BASE:   /opt/web/<span class=\"built_in\">test</span></span><br><span class=\"line\">Using CATALINA_HOME:   /opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">Using CATALINA_TMPDIR: /opt/web/<span class=\"built_in\">test</span>/temp</span><br><span class=\"line\">Using JRE_HOME:        /opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">Using CLASSPATH:       /opt/soft/apache-tomcat-7.0.73/bin/bootstrap.jar:/opt/soft/apache-tomcat-7.0.73/bin/tomcat-juli.jar</span><br><span class=\"line\">Using CATALINA_PID:    /opt/web/<span class=\"built_in\">test</span>/tomcat.pid</span><br><span class=\"line\">Tomcat started.</span><br><span class=\"line\">ubuntu<span class=\"comment\"># test1/run.sh</span></span><br><span class=\"line\">Using CATALINA_BASE:   /opt/web/<span class=\"built_in\">test</span>1</span><br><span class=\"line\">Using CATALINA_HOME:   /opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">Using CATALINA_TMPDIR: /opt/web/<span class=\"built_in\">test</span>1/temp</span><br><span class=\"line\">Using JRE_HOME:        /opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">Using CLASSPATH:       /opt/soft/apache-tomcat-7.0.73/bin/bootstrap.jar:/opt/soft/apache-tomcat-7.0.73/bin/tomcat-juli.jar</span><br><span class=\"line\">Using CATALINA_PID:    /opt/web/<span class=\"built_in\">test</span>1/tomcat.pid</span><br><span class=\"line\">Tomcat started.</span><br><span class=\"line\">ubuntu<span class=\"comment\"># netstat -tunlp</span></span><br><span class=\"line\">激活Internet连接 (仅服务器)</span><br><span class=\"line\">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class=\"line\">tcp        0      0 127.0.1.1:53            0.0.0.0:*               LISTEN      7237/dnsmasq   </span><br><span class=\"line\">tcp6       0      0 :::8080                 :::*                    LISTEN      10182/java     </span><br><span class=\"line\">tcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      10258/java     </span><br><span class=\"line\">tcp6       0      0 :::8070                 :::*                    LISTEN      10258/java     </span><br><span class=\"line\">tcp6       0      0 127.0.0.1:8006          :::*                    LISTEN      10182/java     </span><br><span class=\"line\">tcp6       0      0 :::8009                 :::*                    LISTEN      10182/java     </span><br><span class=\"line\">udp        0      0 0.0.0.0:57782           0.0.0.0:*                           7062/avahi-daemon:</span><br><span class=\"line\">udp        0      0 0.0.0.0:49141           0.0.0.0:*                           7237/dnsmasq   </span><br><span class=\"line\">udp        0      0 0.0.0.0:41976           0.0.0.0:*                           7237/dnsmasq   </span><br><span class=\"line\">udp        0      0 127.0.1.1:53            0.0.0.0:*                           7237/dnsmasq   </span><br><span class=\"line\">udp        0      0 0.0.0.0:68              0.0.0.0:*                           9541/dhclient   </span><br><span class=\"line\">udp        0      0 0.0.0.0:48730           0.0.0.0:*                           7237/dnsmasq   </span><br><span class=\"line\">udp        0      0 0.0.0.0:631             0.0.0.0:*                           7120/cups-browsed</span><br><span class=\"line\">udp        0      0 0.0.0.0:47809           0.0.0.0:*                           7237/dnsmasq   </span><br><span class=\"line\">udp        0      0 0.0.0.0:5353            0.0.0.0:*                           7062/avahi-daemon:</span><br><span class=\"line\">udp        0      0 0.0.0.0:36600           0.0.0.0:*                           7237/dnsmasq   </span><br><span class=\"line\">udp6       0      0 :::46484                :::*                                7062/avahi-daemon:</span><br><span class=\"line\">udp6       0      0 :::5353                 :::*                                7062/avahi-daemon:</span><br><span class=\"line\">ubuntu<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n<p>可以看到8081，8082，8083等其他端口都已经启动，现在可以使用curl命令进行访问<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># curl localhost:8080</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"utf-8\"</span>&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h2&gt;Hello World!&lt;/h2&gt;</span><br><span class=\"line\">&lt;h2&gt;Test 项目!&lt;/h2&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br><span class=\"line\">ubuntu<span class=\"comment\"># curl localhost:8070</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"utf-8\"</span>&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h2&gt;Hello World!&lt;/h2&gt;</span><br><span class=\"line\">&lt;h2&gt;Test 项目!&lt;/h2&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br><span class=\"line\">ubuntu<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure></p>\n<p>多实例部署成功，以后可以简单的复制其中一个实例，修改相关配置即可。</p>\n<h2 id=\"4-_Nginx配置\">4. Nginx配置</h2><p>本篇文章重点不在Nginx,简单带过。</p>\n<p>在配置文件nginx.conf下的http节点中，引入了两行代码</p>\n<figure class=\"highlight profile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">                include       mime.types;</span><br><span class=\"line\">                default_type  application/octet-stream;</span><br><span class=\"line\"></span><br><span class=\"line\">\t            ......</span><br><span class=\"line\">\t            ......</span><br><span class=\"line\">\t            ......</span><br><span class=\"line\"></span><br><span class=\"line\">                #在以下两个文件具体配置</span><br><span class=\"line\">                include /usr/local/nginx/conf/conf.d/upstream.conf;</span><br><span class=\"line\">                include /usr/local/nginx/conf/conf.d/ld.conf;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>因此每个项目站点的具体配置是在<code>upstream.conf</code>与<code>ld.conf</code>中配置的。</p>\n<p>其中<code>ld.conf</code>下配置的是具体站点的server 站点映射关系<br><figure class=\"highlight profile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">......</span><br><span class=\"line\">other server</span><br><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\">server  &#123;</span><br><span class=\"line\">    listen  <span class=\"number\">80</span>;</span><br><span class=\"line\">    server_name  www.dongxiaoxia.xyz;</span><br><span class=\"line\">    server_name_in_redirect off;</span><br><span class=\"line\">    client_header_timeout  30;</span><br><span class=\"line\">    client_body_timeout  30;</span><br><span class=\"line\">    charset  UTF-8;</span><br><span class=\"line\">    client_max_body_size  10000k;</span><br><span class=\"line\">    allow  all;</span><br><span class=\"line\"></span><br><span class=\"line\">  location / &#123;</span><br><span class=\"line\">        index   index.html index.php index.jsp index.htm;</span><br><span class=\"line\">        proxy_pass      http://test_pool;</span><br><span class=\"line\">        proxy_redirect  off;</span><br><span class=\"line\">        proxy_set_header Host $host;</span><br><span class=\"line\">        proxy_set_header CURRENT_URL http://$Host$request_uri;</span><br><span class=\"line\">        proxy_set_header X-USER_IP $remote_addr;</span><br><span class=\"line\">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  access_log  /opt/web/test/logs/test.log  main;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">......</span><br><span class=\"line\">......</span><br></pre></td></tr></table></figure></p>\n<p>其中<code>upstream.conf</code>下配置的是具体站点的 pool 映射关系</p>\n<figure class=\"highlight profile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">......</span><br><span class=\"line\">other pool</span><br><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\">upstream test_pool &#123;</span><br><span class=\"line\">        server <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">8303</span> weight=<span class=\"number\">15</span> max_fails=<span class=\"number\">2</span> fail_timeout=<span class=\"number\">30</span>s;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">......</span><br><span class=\"line\">......</span><br></pre></td></tr></table></figure>\n<p>需要注意的是，在修改了Nginx配置文件后，一定要执行<code>/opt/soft/nginx/sbin/nginx -s reload</code>重新加载配置 </p>\n<h2 id=\"5-_自动化部署脚本\">5. 自动化部署脚本</h2><p> 服务器每次部署都要拷贝war包到服务器，停止服务器，再开启服务器，不太方便；而且服务器的配置文件应该相对于开发环境不太容易变动，或者开发人员根本无法得知服务器配置信息，因此带来另两个不好的原因，war包整体覆盖会有问题，war包体积太大。因此本地打包war包时要去掉相应文件， 服务器也要相应处理。 </p>\n<p>假设场景：本地编译打包项目war包。假如项目名为test，war包为test.war，部署时要求去除日志文件、项目配置文件、以及依赖的外部jar包。</p>\n<p>因此在项目根目录下创建<code>deploy.bat</code> 脚本，内容为：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@<span class=\"built_in\">echo</span> off</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> ...............................................................................................................................................................</span><br><span class=\"line\"><span class=\"built_in\">echo</span> This shell script does not put lib directory into package. If you want to, please just upload <span class=\"string\">'test.war'</span> <span class=\"keyword\">in</span> target directory.</span><br><span class=\"line\"><span class=\"built_in\">echo</span> ...............................................................................................................................................................</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">set</span> SVN_ROOT=D:\\svn\\<span class=\"built_in\">test</span></span><br><span class=\"line\"><span class=\"built_in\">set</span> TARGET_PATH=%SVN_ROOT%\\target\\<span class=\"built_in\">test</span></span><br><span class=\"line\"><span class=\"built_in\">set</span> DEPLOY=%SVN_ROOT%\\deploy</span><br><span class=\"line\"></span><br><span class=\"line\">rd /s /q %DEPLOY%</span><br><span class=\"line\">md %DEPLOY%</span><br><span class=\"line\"><span class=\"built_in\">echo</span> %TARGET_PATH%</span><br><span class=\"line\">xcopy %TARGET_PATH%\\* %DEPLOY%\\ /s /e</span><br><span class=\"line\">rd /s /q %DEPLOY%\\WEB-INF\\lib</span><br><span class=\"line\">del /f /s /q %DEPLOY%\\WEB-INF\\classes\\test.properties</span><br><span class=\"line\">del /f /s /q %DEPLOY%\\WEB-INF\\classes\\<span class=\"built_in\">log</span>4j.properties</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /d %DEPLOY%</span><br><span class=\"line\"></span><br><span class=\"line\">jar -cvf test.war *</span><br><span class=\"line\"></span><br><span class=\"line\">rd /s /q %DEPLOY%\\META-INF</span><br><span class=\"line\">rd /s /q %DEPLOY%\\WEB-INF</span><br><span class=\"line\">rd /s /q %DEPLOY%\\static</span><br><span class=\"line\">del /s /q %DEPLOY%\\index.jsp</span><br><span class=\"line\"></span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure></p>\n<p>这个脚本用来去掉lib下依赖的jar包，test.proterties，log4j.properties,再重新压缩为war包，去掉lib下的jar包，是因为项目的依赖包太大了，传输时很费时间，而jar包在部署过后很可能不会变动。<br> test.properties与log4j.properties 为项目的配置文件，开发环境与服务器的配置肯定是不一样的，因此不能直接覆盖掉，而是全量部署时放在项目上，以后增量部署的时候不覆盖即可。</p>\n<p>1.本地install为test.war，如果为增量部署还要执行一下deploy脚本。<br>2.把deploy过的war包通过Filezilla等传输到服务器指定的部署目录，我们这里服务器的下项目部署文件夹为/root/deploy，根据项目名创建一个文件夹test，因此我们的test项目的部署路径为/root/deploy/test，文件夹下有我们的test.war文件。<br>3.在/root/deploy/test文件夹下，会创建一个<code>deploy.sh</code> 脚本文件，与客户端的deploy.bat 相呼应。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">deploy_file_dir=/root/deploy/<span class=\"built_in\">test</span></span><br><span class=\"line\">deploy_dir=/opt/web/<span class=\"built_in\">test</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$&#123;deploy_dir&#125;</span>/deploy</span><br><span class=\"line\">rm -rf ./*</span><br><span class=\"line\">jar xvf <span class=\"variable\">$&#123;deploy_file_dir&#125;</span>/test.war</span><br><span class=\"line\">cp -rf ./* <span class=\"variable\">$&#123;deploy_dir&#125;</span>/webapps/</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ../</span><br><span class=\"line\">sh stop.sh</span><br><span class=\"line\">sh run.sh</span><br></pre></td></tr></table></figure></p>\n<p>查看脚本内容，我们可以得知deploy.sh 脚本的功能<br>1.由于客户端传送过来的可能不会是全量test.war包，因此不能简单的把test.war包直接放到、opt/web/test/webapps目录下，这样会覆盖掉服务器的项目配置，也会导致部分文件丢失。只能解压test.war包 把全部内容复制到webapps下，存在就覆盖，而不存在的也不会删掉webapps下存在的。<br>2.执行stop.sh 停止test项目，因为test项目之前可能已经启动了。<br>3.执行run.sh 启动项目。</p>\n<p>到此为止，我们已经用了脚本代替一部分手动操作，但还是不够完善，比如项目实例还是要自己手动搭建，启动脚本也要手动编写，下面提供了一键部署tomcat实例项目环境的脚本<code>build.sh</code>，最大化利用脚本，减少手动操作。(这里没有添加Nginx配置，所以有关Nginx的配置还要手动添加，并且重新加载！)<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\">#一键部署Tomcat实例项目环境</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#项目名称</span></span><br><span class=\"line\">PROJECT_NAME=www.dongxiaoxia.xyz</span><br><span class=\"line\"><span class=\"comment\">#tomcat关闭端口</span></span><br><span class=\"line\">SERVER_PORT=8006</span><br><span class=\"line\"><span class=\"comment\">#Http监听端口</span></span><br><span class=\"line\">HTTP_PORT=8080</span><br><span class=\"line\"><span class=\"comment\">##################以上三个参数需要修改############################</span></span><br><span class=\"line\"><span class=\"comment\">#项目基础路径</span></span><br><span class=\"line\">PROJECT_BASE_PATH=/opt/web/</span><br><span class=\"line\"><span class=\"comment\">#日志基础路径</span></span><br><span class=\"line\">LOG_BASE_PATH=/opt/<span class=\"built_in\">log</span>/</span><br><span class=\"line\"><span class=\"comment\">#部署基础路径</span></span><br><span class=\"line\">DEPLOY_BASE_PATH=/root/deploy/</span><br><span class=\"line\"><span class=\"comment\">#Java安装路径</span></span><br><span class=\"line\">JAVA_HOME=/opt/soft/jdk1.8.0_11/</span><br><span class=\"line\"><span class=\"comment\">#Tomcat安装路径</span></span><br><span class=\"line\">CATALINA_HOME=/opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\"><span class=\"comment\">#Tomcat活跃配置路径,也就是项目部署路径</span></span><br><span class=\"line\">CATALINA_BASE=<span class=\"variable\">$PROJECT_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span></span><br><span class=\"line\"><span class=\"comment\">#tomcat server.xml配置文件路径</span></span><br><span class=\"line\">SERVER_XML=<span class=\"variable\">$CATALINA_BASE</span>/conf/server.xml</span><br><span class=\"line\"><span class=\"comment\">#########################################################################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'Java安装路径:'</span><span class=\"variable\">$JAVA_HOME</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'Tomcat安装路径:'</span><span class=\"variable\">$CATALINA_HOME</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'Tomcat项目实例路径:'</span><span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'项目war包部署上传路径:'</span><span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'tomcat server.xml配置文件路径:'</span><span class=\"variable\">$SERVER_XML</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'项目日志路径:'</span><span class=\"variable\">$LOG_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'tomcat关闭端口:'</span><span class=\"variable\">$SERVER_PORT</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'Http监听端口:'</span><span class=\"variable\">$HTTP_PORT</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#################创建tomcat实例 修改server.xml配置##########################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#复制tomcat实例所需文件夹</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'复制tomcat实例所需文件夹'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ ! <span class=\"_\">-d</span> <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">mkdir -p <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$CATALINA_HOME</span></span><br><span class=\"line\">cp -r conf <span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\">mkdir <span class=\"variable\">$CATALINA_BASE</span>/webapps</span><br><span class=\"line\">mkdir <span class=\"variable\">$CATALINA_BASE</span>/work</span><br><span class=\"line\">mkdir <span class=\"variable\">$CATALINA_BASE</span>/logs</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'修改server.xml配置'</span></span><br><span class=\"line\"><span class=\"comment\"># 修改tomcat关闭端口</span></span><br><span class=\"line\">sed -i 22s@8005@<span class=\"variable\">$&#123;SERVER_PORT&#125;</span>@ <span class=\"variable\">$SERVER_XML</span></span><br><span class=\"line\"><span class=\"comment\"># 修改Http监听端口</span></span><br><span class=\"line\">sed -i 71s@8080@<span class=\"variable\">$&#123;HTTP_PORT&#125;</span>@ <span class=\"variable\">$SERVER_XML</span></span><br><span class=\"line\"><span class=\"comment\"># 统一web应用程序的路径</span></span><br><span class=\"line\">sed -i <span class=\"string\">'125s@appBase=\"webapps\"@appBase=\"'</span><span class=\"variable\">$CATALINA_BASE</span><span class=\"string\">'/webapps\"@'</span> <span class=\"variable\">$SERVER_XML</span></span><br><span class=\"line\"><span class=\"comment\"># 关闭自动部署</span></span><br><span class=\"line\"><span class=\"comment\">#sed -i '126s@autoDeploy=\"true\"@autoDeploy=\"false\"@' $SERVER_XML</span></span><br><span class=\"line\">sed -i <span class=\"string\">'141a&lt;Host name=\"localhost\"  appBase=\"'</span><span class=\"variable\">$CATALINA_BASE</span><span class=\"string\">'/webapps\" autoDeploy=\"false\" deployOnStartup=\"false\"&gt;\\n     &lt;Context path=\"\" docBase=\"'</span><span class=\"variable\">$CATALINA_BASE</span><span class=\"string\">'/webapps\" crossContext=\"true\" allowLinking=\"true\" reloadable=\"false\"&gt;\\n         &lt;JarScanner scanAllDirectories=\"true\" /&gt;\\n         &lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"'</span><span class=\"variable\">$CATALINA_BASE</span><span class=\"string\">'/logs/\" prefix=\"gh_access_log.\" suffix=\".log\" pattern=\"%a %A %t %S %b %r %s %&#123;Referer&#125;i %&#123;User-Agent&#125;i %D\" resolveHosts=\"false\" /&gt;\\n     &lt;/Context&gt;\\n&lt;/Host&gt;</span><br><span class=\"line\">'</span> <span class=\"variable\">$SERVER_XML</span></span><br><span class=\"line\"></span><br><span class=\"line\">sed -i <span class=\"string\">'125,141d'</span> <span class=\"variable\">$SERVER_XML</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#######################创建run.sh脚本文件###################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'创建run.sh脚本文件'</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\">touch run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#!/bin/sh'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'TOMCAT_HOME='</span><span class=\"variable\">$CATALINA_HOME</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"comment\">#echo 'CATALINA_BASE='$CATALINA_BASE &gt;&gt; run.sh</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_PID=$CATALINA_BASE/tomcat.pid'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_HOME='</span><span class=\"variable\">$JAVA_HOME</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PATH=$PATH:$JAVA_HOME/bin'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#路径为【/opt/web/xxx】时，项目名则为【xxx】'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '&#123;print \\$NF&#125;'\\`\"</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#检测temp目录是否存在，不存在则创建'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'if [ ! -d \"$CATALINA_BASE/temp\" ]; then'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'    mkdir \"$CATALINA_BASE/temp\"'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'fi'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#日志目录名'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PROJECT_LOG='</span><span class=\"variable\">$LOG_BASE_PATH</span><span class=\"string\">'$PROJECT_NAME/catalina.out'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_OPTS=\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'proj_dir=$CATALINA_BASE'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'if [ -n \"$proj_dir\" ]'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'then'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"        ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" &gt; /dev/null\"</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        status=$?'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        if  [ $status -eq 0 ] &amp;&amp; [ -s $CATALINA_PID  ]'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        then'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                echo \"The $proj_dir tomcat is running and the pid_file is exist !\"'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                exit 1'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        elif [ $status -eq 0 ] || [ -s $CATALINA_PID  ]'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        then'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                echo \"kill one\"'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"                ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" | awk '&#123;print \\$2&#125;' | xargs -i kill -9 &#123;&#125;\"</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                &gt; $CATALINA_PID'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                $TOMCAT_HOME/bin/catalina.sh start'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        else'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                $TOMCAT_HOME/bin/catalina.sh start'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        fi'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'else'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        echo \"start failt!!!\"'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        exit 1'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'fi'</span> &gt;&gt; run.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#######################创建stop.sh脚本文件###################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'创建stop.sh脚本文件'</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\">touch stop.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#!/bin/sh'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'TOMCAT_HOME='</span><span class=\"variable\">$CATALINA_HOME</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#CATALINA_BASE='</span><span class=\"variable\">$CATALINA_BASE</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_PID=$CATALINA_BASE/tomcat.pid'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_HOME='</span><span class=\"variable\">$JAVA_HOME</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PATH=$PATH:$JAVA_HOME/bin'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#路径为【/opt/web/xxx】时，项目名则为【xxx】'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '&#123;print \\$NF&#125;'\\`\"</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'echo $PROJECT_NAME'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#日志目录名'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PROJECT_LOG='</span><span class=\"variable\">$LOG_BASE_PATH</span><span class=\"string\">'$PROJECT_NAME/'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'proj_dir=$CATALINA_BASE'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'$TOMCAT_HOME/bin/catalina.sh stop'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'sleep 5'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'if [ -n \"$proj_dir\" ]'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'then'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"        ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" &gt; /dev/null\"</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        status=$?'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        if [ $status -eq 0 ] || [ -s $CATALINA_PID  ]'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        then'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                echo \"kill it\"'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"                ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" |  awk '&#123;print \\$2&#125;' | xargs -i kill -9 &#123;&#125;\"</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                &gt; $CATALINA_PID'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        fi'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'else'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        echo \"stop failt!!!\"'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        exit 1'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'fi'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#######################创建debug.sh脚本文件###################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'创建debug.sh脚本文件'</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\">touch debug.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#!/bin/sh'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'TOMCAT_HOME='</span><span class=\"variable\">$CATALINA_HOME</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_PID=$CATALINA_BASE/tomcat.pid'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_HOME='</span><span class=\"variable\">$JAVA_HOME</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PATH=$PATH:$JAVA_HOME/bin'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#路径为【/opt/web/xxx】时，项目名则为【xxx】'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '&#123;print \\$NF&#125;'\\`\"</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#日志目录名'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PROJECT_LOG='</span><span class=\"variable\">$LOG_BASE_PATH</span><span class=\"string\">'$PROJECT_NAME/catalina.out'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_OPTS=\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'proj_dir=$CATALINA_BASE'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'if [[ -n \"$proj_dir\" ]]'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'then'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" &gt; /dev/null'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        status=$?'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        if  [[ $status -eq 0 ]] &amp;&amp; [[ -s $CATALINA_PID  ]]'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        then'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                echo \"The $proj_dir tomcat is running and the pid_file is exist !\"'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                exit 1'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        elif [[ $status -eq 0 ]] || [[ -s $CATALINA_PID  ]]'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        then'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                echo \"kill one\"'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"                ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" | awk '&#123;print \\$2&#125;' | xargs -i kill -9 &#123;&#125;\"</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                &gt; $CATALINA_PID'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                $TOMCAT_HOME/bin/catalina.sh jpda start'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        else'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                $TOMCAT_HOME/bin/catalina.sh jpda start'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        fi'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'else'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        echo \"start failt!!!\"'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        exit 1'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'fi'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#######################创建restart.sh脚本文件###################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'创建restart.sh脚本文件'</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\">touch restart.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#!/bin/sh'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'TOMCAT_HOME='</span><span class=\"variable\">$CATALINA_HOME</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_PID=$CATALINA_BASE/tomcat.pid'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_HOME=/opt/soft/jdk/1.8.11/jdk1.8.0_11'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PATH=$PATH:$JAVA_HOME/bin'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_OPTS=\"-server -Xms1g -Xmx1g -Xmn512m -Xss1024K -XX:PermSize=256m -XX:MaxPermSize=512m -XX:ParallelGCThreads=8 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#路径为【/opt/web/xxx】时，项目名则为【xxx】'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '&#123;print \\$NF&#125;'\\`\"</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#日志目录名'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PROJECT_LOG='</span><span class=\"variable\">$LOG_BASE_PATH</span><span class=\"string\">'$PROJECT_NAME/catalina.out'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'sh $CATALINA_BASE/stop.sh'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'sh $CATALINA_BASE/start.sh'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"comment\">#######################创建deploy.sh脚本文件###################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'创建deploy.sh脚本文件'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ ! <span class=\"_\">-d</span> <span class=\"string\">\"<span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span>\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">  mkdir -p <span class=\"string\">\"<span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span></span><br><span class=\"line\">touch deploy.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#!/bin/sh'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"deploy_file_dir=<span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span>\"</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"deploy_dir=<span class=\"variable\">$CATALINA_BASE</span>\"</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"if [ ! -d \"</span>\\<span class=\"variable\">$&#123;deploy_dir&#125;</span>/deploy<span class=\"string\">\" ]; then\"</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"  mkdir -p \"</span>\\<span class=\"variable\">$&#123;deploy_dir&#125;</span>/deploy<span class=\"string\">\"\"</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"fi\"</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'cd $&#123;deploy_dir&#125;/deploy'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'rm -rf ./*'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'jar xvf $&#123;deploy_file_dir&#125;/'</span><span class=\"variable\">$PROJECT_NAME</span><span class=\"string\">'.war'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'cp -rf ./* $&#123;deploy_dir&#125;/webapps/'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'cd ../'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'sh stop.sh'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'sh run.sh'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"comment\">#########################################################################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'tomcat项目实例创建成功!'</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"请把war包放置到<span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span>目录下，执行<span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span>/deploy脚本启动项目.\"</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"或者直接解压war包到<span class=\"variable\">$CATALINA_BASE</span>/webapps下。执行<span class=\"variable\">$CATALINA_BASE</span>/run脚本启动项目.\"</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"6-_部署总结\">6. 部署总结</h2><h3 id=\"为什么\">为什么</h3><p>本篇文章都是为了解决文章开头的问题及后续问题：本地开发完项目后如何简单部署到服务器？</p>\n<h3 id=\"怎么做\">怎么做</h3><ol>\n<li>服务器项目部署规范化，相关软件规范化，统一部署，集中管理。</li>\n<li>用脚本替代手动操作。</li>\n<li>部署文档清晰易懂。</li>\n</ol>\n<h3 id=\"怎么样\">怎么样</h3><p><strong>优点</strong></p>\n<ol>\n<li>tomcat多实例部署，启动、关闭一个项目站点不影响其他站点，没有耦合。</li>\n<li>对添加开放，对删除关闭。<br>要添加一个新的项目站点，只需简单的执行一下脚本就能够实现，不会影响其他站点配置。</li>\n<li>第一次部署及后续增量部署都极其简单、容易操作、全程脚本化。</li>\n<li>整个服务器规范化，各个项目部署路径、相关软件路径、日志路径清晰明了。</li>\n<li>项目日志集中管理，方便后续统计分析。 </li>\n</ol>\n<p><strong>劣势</strong></p>\n<ol>\n<li>要求部署人员具备一定的脚本语法基础，能够理解相关的脚本原理。</li>\n<li>脚本的创建是直接添加内容，如果之前已经存在相关的文件，没有采取替换而是追加，因此要确定相关路径上的文件是否正确。</li>\n</ol>\n<h3 id=\"几句话说明白部署\">几句话说明白部署</h3><p><strong>部署环境整体规划</strong></p>\n<ol>\n<li>项目目录 /opt/web</li>\n<li>日志目录 /opt/log</li>\n<li>jdk/tomcat/nginx等目录 安装环境 /opt/soft</li>\n<li>项目应用war包上传到服务器的目录 /root/deploy</li>\n</ol>\n<p>假设现在有3个项目 test test1 test2<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># ls /opt/web /root/deploy/ /opt/soft /opt/log</span></span><br><span class=\"line\">/opt/<span class=\"built_in\">log</span>:</span><br><span class=\"line\"><span class=\"built_in\">test</span>  <span class=\"built_in\">test</span>1  <span class=\"built_in\">test</span>2</span><br><span class=\"line\"></span><br><span class=\"line\">/opt/soft:</span><br><span class=\"line\">apache-tomcat-7.0.73  include\t   lib\t  nginx-1.6.2\t      openssl-1.1.0c\t     pcre-8.39\t       share  zlib-1.2.8</span><br><span class=\"line\">bin\t\t      jdk1.8.0_11  nginx  nginx-1.6.2.tar.gz  openssl-1.1.0c.tar.gz  pcre-8.39.tar.gz  ssl    zlib128.zip</span><br><span class=\"line\"></span><br><span class=\"line\">/opt/web:</span><br><span class=\"line\">build.sh  <span class=\"built_in\">test</span>\t<span class=\"built_in\">test</span>1  <span class=\"built_in\">test</span>2</span><br><span class=\"line\"></span><br><span class=\"line\">/root/deploy/:</span><br><span class=\"line\"><span class=\"built_in\">test</span>  <span class=\"built_in\">test</span>1  <span class=\"built_in\">test</span>2</span><br><span class=\"line\">ubuntu<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure></p>\n<p><strong>全量部署(第一次部署)</strong></p>\n<ol>\n<li><strong>执行<code>build.sh</code>脚本一键部署项目</strong></li>\n<li>配置并重新加载Nginx代理配置</li>\n<li>开发环境install打包war包传输到服务器deploy目录</li>\n<li>执行<code>deploy.sh</code>脚本，打开项目日志查看启动情况</li>\n</ol>\n<p><strong>增量部署</strong></p>\n<ol>\n<li>开发环境install打包war包,<strong>执行开发环境<code>deploy.sh(mac)/deploy.bat(windows)</code>脚本</strong>，传输到服务器deploy目录 </li>\n<li>执行<code>deploy.sh</code>脚本，打开项目日志查看启动情况</li>\n</ol>\n","excerpt":"","more":"<p>本篇文章主要围绕一个问题：本地开发完项目后如何简单部署到服务器？<br>这个问题太宽泛了，因此，提出了以下几个要点：</p>\n<ol>\n<li>第一次怎么部署</li>\n<li>增量开发后怎么<code>简单</code>部署?</li>\n<li>服务器环境整体如何规划？各个项目怎么存放，日志是否集中存放 ？项目各个项目运行环境与部署怎么分开？。。。</li>\n<li>如何用脚本自动化部署？</li>\n<li>如何用几句话归纳部署？</li>\n</ol>\n<p>经过整篇文章，我想会有一定的答案。</p>\n<p>文章的各个章节并不是按照解决问题的顺序写的，而是按照环境部署、项目配置、自动化部署一步步递进的，完成服务器 JDK + Tomcat + Nginx 部署环境整体搭建及自动化部署的具体实现。</p>\n<h2 id=\"1-服务器环境整体规划\">1.服务器环境整体规划</h2><p>在本篇文章的部署方式中，会涉及以下4个总目录</p>\n<pre><code><span class=\"number\">1.</span> 项目目录 /opt/web\n<span class=\"number\">2.</span> 日志目录 /opt/<span class=\"built_in\">log</span>\n<span class=\"number\">3.</span> JDK/Tomcat/Nginx等安装环境的父目录  /opt/soft\n<span class=\"number\">4.</span> 项目应用war包上传到服务器的目录 /root/deploy\n</code></pre><h2 id=\"2-运行环境安装\">2.运行环境安装</h2><h3 id=\"2-1_JDK\">2.1 JDK</h3><ol>\n<li>官网下载 JDK8，解压到/opt/soft ，解压文件夹为jdk1.8.0_11</li>\n<li><p>配置 JDK 环境变量<br>在<code>/etc/profile</code>文件末尾添加以下配置 ：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#jdk enviroment</span></span><br><span class=\"line\">JAVA_HOME=/opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">PATH=<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$PATH</span></span><br><span class=\"line\">CLASSPATH=.:<span class=\"variable\">$JAVA_HOME</span>/lib/dt.jar:<span class=\"variable\">$JAVA_HOME</span>/lib/tools.jar</span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH</span><br><span class=\"line\"><span class=\"built_in\">export</span> CLASSPATH</span><br></pre></td></tr></table></figure>\n<p>保存退出。终端执行命令<code>source /etc/profile</code>  使配置生效  </p>\n</li>\n<li>验证 JDK 配置<br>终端执行命令：<code>java -version</code><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># java -version</span></span><br><span class=\"line\">java version <span class=\"string\">\"1.8.0_111\"</span></span><br><span class=\"line\">Java(TM) SE Runtime Environment (build 1.8.0_111-b14)</span><br><span class=\"line\">Java HotSpot(TM) 64-Bit Server VM (build 25.111-b14, mixed mode)</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<blockquote>\n<p><strong>JDK 配置成功！！！</strong></p>\n</blockquote>\n<h3 id=\"2-2_Tomcat\">2.2 Tomcat</h3><ol>\n<li>官网下载tomcat，我这里下载的是apache-tomcat-7.0.73，解压到/opt/soft ，解压文件夹为apache-tomcat-7.0.73</li>\n<li>进入tomcat目录下的bin目录下，执行tomcat启动脚本（tomcat依赖jdk，应先确定jdk已经安装）<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># sh startup.sh </span></span><br><span class=\"line\">Using CATALINA_BASE:   /opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">Using CATALINA_HOME:   /opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">Using CATALINA_TMPDIR: /opt/soft/apache-tomcat-7.0.73/temp</span><br><span class=\"line\">Using JRE_HOME:        /opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">Using CLASSPATH:       /opt/soft/apache-tomcat-7.0.73/bin/bootstrap.jar:/opt/soft/apache-tomcat-7.0.73/bin/tomcat-juli.jar</span><br><span class=\"line\">Tomcat started.</span><br><span class=\"line\">ubuntu<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>出现以上信息证明tomcat已经成功启动，打开 <a href=\"http://ip:8080\">http://ip:8080</a> 或 <a href=\"http://localhost:8080\">http:/localhost:8080</a>,如果能看到tomcat系统界面，说明已经安装成功，可以进行下一步了。</p>\n<p> <strong>常见命令</strong></p>\n<blockquote>\n<p>启动tomcat ：sh startup.sh<br>关闭tomcat  ：sh shutdown.sh<br>查看tomcat运行进程 ： ps aux | grep tomcat 或 ps aux | grep java 或ps -ef | grep java  或 ps -ef | grep tomcat<br>查看端口使用情况   netstat –apn 或 netstat -tunlp  ，可以结合 grep ，如 netstat -apn | grep (端口号)  或 netstat -apn | grep java<br>其中最后一下为pid/program name ，如果端口被占用， 可以进一步使用命令：ps -ef  | grep (pid) 查看，可以查出是哪个进程占用了端口号，可以kill portId 杀死进程。</p>\n</blockquote>\n<h3 id=\"2-3_Nginx\">2.3 Nginx</h3><p> 这里演示的系统为<code>Ubuntu</code></p>\n<p>Ubuntu平台编译环境安装<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install build-essentail</span><br><span class=\"line\">apt-get install libtool</span><br></pre></td></tr></table></figure></p>\n<p>安装Nginx依赖包 OpenSSL、zlib、 pcre<br>这三个包可以直接在终端下载，如果网速慢，建议在本地下载再上传到服务器。<br>安装Nginx依赖包<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install libpcre3 libpcre3-dev zlib1g-dev libssl-dev build-essential</span><br></pre></td></tr></table></figure></p>\n<p>选择下载保存目录 cd /opt/soft<br>下载OpenSSL<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget ftp://ftp.openssl.org/<span class=\"built_in\">source</span>/openssl-1.1.0c.tar.gz</span><br></pre></td></tr></table></figure></p>\n<p>下载zlib<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://zlib.net/zlib128.zip</span><br></pre></td></tr></table></figure></p>\n<p>下载pcre<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.39.tar.gz</span><br></pre></td></tr></table></figure></p>\n<p>安装OpenSSL<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxvf openssl-1.0.0c.tar.gz</span><br><span class=\"line\"><span class=\"built_in\">cd</span> openssl-1.0.0c/</span><br><span class=\"line\">./config --prefix=/opt/soft --openssldir=/opt/soft/ssl</span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\"></span><br><span class=\"line\">./config shared --prefix=/opt/soft --openssldir=/opt/soft/ssl</span><br><span class=\"line\">make clean</span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p>\n<p>安装zlib库<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unzip zlib128.zip</span><br><span class=\"line\"><span class=\"built_in\">cd</span> zlib128/</span><br><span class=\"line\">./configure --prefix=/opt/soft</span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p>\n<p>安装pcre库<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> tar zxvf pcre-8.39.tar.gz</span><br><span class=\"line\"><span class=\"built_in\">cd</span> pcre-8.39/</span><br><span class=\"line\">./configure --prefix=/opt/soft</span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p>\n<p> 查看pcre版本<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pcre-config --version</span><br></pre></td></tr></table></figure></p>\n<p>安装Nginx<br>1下载 Nginx，下载地址：<a href=\"http://nginx.org/download/nginx-1.6.2.tar.gz\">http://nginx.org/download/nginx-1.6.2.tar.gz</a><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://nginx.org/download/nginx-1.6.2.tar.gz</span><br></pre></td></tr></table></figure></p>\n<p>2解压安装包<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxvf nginx-1.6.2.tar.gz</span><br></pre></td></tr></table></figure></p>\n<p>3进入安装包目录<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> nginx-1.6.2</span><br></pre></td></tr></table></figure></p>\n<p>4编译安装<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@bogon nginx-1.6.2]<span class=\"comment\"># ./configure --prefix=/opt/soft/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/opt/soft/src/pcre-8.39</span></span><br><span class=\"line\">[root@bogon nginx-1.6.2]<span class=\"comment\"># make</span></span><br><span class=\"line\">[root@bogon nginx-1.6.2]<span class=\"comment\"># make install</span></span><br></pre></td></tr></table></figure></p>\n<p>5查看Nginx版本<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/opt/soft/nginx/sbin/nginx -v</span><br><span class=\"line\">nginx version: nginx/1.6.2</span><br></pre></td></tr></table></figure></p>\n<p>6启动nginx<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/opt/soft/nginx/sbin/nginx</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>到此，nginx安装成功</p>\n</blockquote>\n<p><strong>Nginx常用命令</strong></p>\n<blockquote>\n<p>/opt/soft/nginx/sbin/nginx -v                   #查看 Nginx版本<br>/opt/soft/nginx/sbin/nginx                       #启动 Nginx<br>/opt/soft/nginx/sbin/nginx -t                   # 检查配置文件ngnix.conf的正确性<br>/opt/soft/nginx/sbin/nginx -s reload        #重新载入配置文件<br>/opt/soft/nginx/sbin/nginx -s reopen       #重启 Nginx<br>/opt/soft/nginx/sbin/nginx -s stop           #停止 Nginx</p>\n</blockquote>\n<pre><code>jdk<span class=\"command\">\\tomcat</span><span class=\"command\">\\nginx</span> 安装完毕，查看服务器目录\n</code></pre><p>/opt/soft 目录下文件结构<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> ➜  apache-tomcat-7.0.73 ll /opt/soft       </span><br><span class=\"line\">总用量 8.4M</span><br><span class=\"line\">drwxr-xr-x  9 root root 4.0K 12月 27 09:25 apache-tomcat-7.0.73</span><br><span class=\"line\">drwxr-xr-x  2 root root 4.0K 12月 28 15:44 bin</span><br><span class=\"line\">drwxr-xr-x  3 root root 4.0K 12月 28 15:38 include</span><br><span class=\"line\">drwxr-xr-x  8 uucp  143 4.0K 6月  17  2014 jdk1.8.0_11</span><br><span class=\"line\">drwxr-xr-x  4 root root 4.0K 12月 28 15:44 lib</span><br><span class=\"line\">drwxr-xr-x 11 root root 4.0K 12月 28 16:22 nginx</span><br><span class=\"line\">drwxr-xr-x  9 1001 1001 4.0K 12月 28 16:14 nginx-1.6.2</span><br><span class=\"line\">-rwxr-xr-x  1 root root 786K 12月 28 16:13 nginx-1.6.2.tar.gz</span><br><span class=\"line\">drwxr-xr-x 19 root root 4.0K 12月 28 16:05 openssl-1.1.0c</span><br><span class=\"line\">-rwxr-xr-x  1 root root 5.0M 12月 28 15:34 openssl-1.1.0c.tar.gz</span><br><span class=\"line\">drwxr-xr-x  9 1169 1169  12K 12月 28 16:15 pcre-8.39</span><br><span class=\"line\">-rwxr-xr-x  1 root root 2.0M 12月 28 15:23 pcre-8.39.tar.gz</span><br><span class=\"line\">drwxr-xr-x  4 root root 4.0K 12月 28 15:32 share</span><br><span class=\"line\">drwxr-xr-x  5 root root 4.0K 12月 28 15:44 ssl</span><br><span class=\"line\">drwxr-xr-x 14 root root 4.0K 12月 28 15:30 zlib-1.2.8</span><br><span class=\"line\">-rwxr-xr-x  1 root root 679K 12月 28 15:28 zlib128.zip</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"3-_Tomcat多实例多应用部署\">3. Tomcat多实例多应用部署</h2><h3 id=\"3-1-_部署应用分类\">3.1. 部署应用分类</h3><p><code>单实例单应用</code>：一个tomcat目录，webapps目录下只跑一个war包，最基本的部署方式。<br><code>单实例多应用</code>：一个tomcat目录，webapps目录下跑多个war包。 启动、关闭 tomcat对所有war包起作用。<br><code>多实例单应用</code>：多个tomcat目录，每个tomcat只跑一个应用，并且是同一个应用。通过修改tomcat端口配合nginx进行负载均衡。<br><code>多实例多应用</code>：把一个tomcat分为2部分，一部分为公用的bin目录与lib目录，其余文件夹作为第二部分，可以复制多次，因此tomcat只有一个，但是实例可以有多个，每个实例在单独部署，与单实例多应用相似。</p>\n<blockquote>\n<ol>\n<li>一个tomcat，充分利用资源，对tomcat的更新维护也很方便</li>\n<li>多个实例，各个实例互不影响</li>\n<li>各个项目相互独立，启动关闭不影响</li>\n<li>部署容易，启动快速<h3 id=\"3-2_目录结构认识\">3.2 目录结构认识</h3>一个刚解压出来的tomcat打包文件应该有以下几个目录<br>bin:主要存放脚本文件，例如比较常用的windows和linux系统中启动和关闭脚本<br>conf:主要存放配置文件，其中最重要的两个配置文件是server.xml和web.xml<br>lib:主要存放tomcat运行所依赖的包<br>logs:主要存放运行时产生的日志文件，例如catalina.{date}.log等<br>temp:存放tomcat运行时产生的临时文件，例如开启了hibernate缓存的应用程序，会在该目录下生成一些文件<br>webapps:部署web应用程序的默认目录<br>work:主要存放由JSP文件生成的servlet（java文件以及最终编译生成的class文件）<h3 id=\"3-3_多实例原理\">3.3 多实例原理</h3>tomcat中两个比较重要的概念（通常也是两个系统变量）——CATALINA_HOME和CATALINA_BASE：<ul>\n<li>CATALINA_HOME：即指向Tomcat安装路径的系统变量</li>\n<li>CATALINA_BASE：即指向活跃配置路径的系统变量</li>\n</ul>\n</li>\n</ol>\n</blockquote>\n<p>通过设置这两个变量，就可以将tomcat的安装目录和工作目录分离，从而实现tomcat多实例的部署。</p>\n<p>Tomcat官方文档指出，CATALINA_HOME路径的路径下只需要包含bin和lib目录，这也就是支持tomcat软件运行的目录，而CATALINA_BASE设置的路径可以包括上述所有目录，不过其中bin和lib目录并不是必需的，缺省时会使用CATALINA_HOME中的bin和conf。如此，我们就可以使用一个tomcat安装目录部署多个tomcat实例，这样的好处在于方便升级，就可以在不影响tomcat实例的前提下，替换掉CATALINA_HOME指定的tomcat安装目录。</p>\n<p>简而言之：</p>\n<ul>\n<li>CATALINA_HOME：bin      lib</li>\n<li>CATALINA_BASE：conf      webapps      temp      logs      work</li>\n</ul>\n<blockquote>\n<p><strong>server.xml</strong></p>\n</blockquote>\n<p>这里部署多实例要修改的两个端口：</p>\n<ul>\n<li>Server Port：该端口用于监听关闭tomcat的shutdown命令，默认为8005</li>\n<li>Connector Port：该端口用于监听HTTP的请求，默认为8080</li>\n</ul>\n<p>简单的多实例只需要保证多实例中的Server Port和Connect Port不同即可。</p>\n<p>另外要修改的是Host配置，Host就是所谓的虚拟主机，对应包含了一个或者多个web应用程序。其中：</p>\n<ul>\n<li>name： 虚拟主机的名称，一台主机表示了完全限定的域名或IP地址，默认为localhost，同时也是唯一的host，进入tomcat的所有http请求都会映射到该主机上</li>\n<li>appBase：web应用程序目录的路径，可以是CATALINA_HOME的相对路径，也可以写成绝对路径，默认情况下为$CATALINA_HOME/webapps</li>\n<li>unpackWARs： 表示是否自动解压war包</li>\n<li>autoDeploy：所谓的热部署，即在tomcat正在运行的情况下，如果有新的war加入，则会立即执行部署操作</li>\n<li>另外再介绍一个Host中的属性—deployOnStartup：表示tomcat启动时是否自动部署appBase目录下所有的Web应用程序，默认为true。这个属性和autoDeploy会产生两次部署的“副作用”：一次是tomcat启动时就开始部署，第二次就是autoDeploy引起的热部署。因此最好将autoDeploy置为false</li>\n</ul>\n<p>最后再说明一下Context的配置，它出现在Host配置内，一个Context的配置就代表了一个web应用程序，如果配置多应用程序，就需要在Host下配置多个Context。其中：</p>\n<ul>\n<li>path：表示访问入口，例如，path=”/abc”，则访问localhost:8080/abc时，就可以访问该Context对应的应用程序。如果path=””，则直接用localhost:8080就可以访问。</li>\n<li>docBase：表示应用程序的解包目录或者war文件路径，是Host的appBase配置目录的相对路径，也可以是直接写成绝对路径，但是不要将appBase的值，作为docBase配置路径的前缀，例如appBase=”somedir”，docBase=”somedir-someapp.war”，这样的配置会导致部署错误。</li>\n</ul>\n<h3 id=\"3-4_多实例多应用部署\">3.4 多实例多应用部署</h3><p>假设一个完好的可以运行的web应用程序已经打包成test.war，放在/root/deploy/test目录下，其中包含一个简单的index.jsp<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Hello World!<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"创建tomcat实例\">创建tomcat实例</h4><p>之前我们已经在/opt/soft/下成功安装了tomcat<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># ls /opt/soft/apache-tomcat-7.0.73</span></span><br><span class=\"line\">bin  conf  lib    LICENSE  logs  NOTICE  RELEASE-NOTES  RUNNING.txt  temp  webapps  work</span><br></pre></td></tr></table></figure></p>\n<p>我们的实例目录放在/opt/web/test 下<br>复制相关实例文件夹到该目录下<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># ls /opt/web/test</span></span><br><span class=\"line\">conf  debug.sh\tlogs  restart.sh  run.sh  stop.sh  webapps  work</span><br></pre></td></tr></table></figure></p>\n<p>其中run.sh 、stop.sh、debug.sh、restart.sh 脚本文件本不属于tomcat实例的，是为了方便启动、停止tomcat实例而创建的脚本</p>\n<h4 id=\"创建启停脚本\">创建启停脚本</h4><p>run.sh 脚本文件内容：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">TOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">CATALINA_BASE=$(<span class=\"built_in\">cd</span> <span class=\"string\">\"<span class=\"variable\">$(dirname $0)</span>\"</span>; <span class=\"built_in\">pwd</span>)</span><br><span class=\"line\">CATALINA_PID=<span class=\"variable\">$CATALINA_BASE</span>/tomcat.pid</span><br><span class=\"line\">JAVA_HOME=/opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">CLASSPATH=<span class=\"variable\">$CLASSPATH</span>:<span class=\"variable\">$JAVA_HOME</span>/lib:<span class=\"variable\">$JAVA_HOME</span>/jre/lib</span><br><span class=\"line\">LD_LIBRARY_PATH=<span class=\"variable\">$LD_LIBRARY_PATH</span>:/usr/<span class=\"built_in\">local</span>/apr/lib</span><br><span class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#路径为【/opt/web/xxx】时，项目名则为【xxx】</span></span><br><span class=\"line\">PROJECT_NAME=`<span class=\"built_in\">echo</span> <span class=\"variable\">$CATALINA_BASE</span> | awk -F <span class=\"string\">\"/\"</span> <span class=\"string\">'&#123;print $NF&#125;'</span>`</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#检测temp目录是否存在，不存在则创建</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ ! <span class=\"_\">-d</span> <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/temp\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    mkdir <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/temp\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#日志目录名</span></span><br><span class=\"line\">PROJECT_LOG=/opt/<span class=\"built_in\">log</span>/<span class=\"variable\">$PROJECT_NAME</span>/catalina.out</span><br><span class=\"line\"></span><br><span class=\"line\">JAVA_OPTS=<span class=\"string\">\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH</span><br><span class=\"line\"></span><br><span class=\"line\">proj_dir=<span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -n <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">        ps aux | grep <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> | grep -v <span class=\"string\">\"grep\"</span> | grep -v <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\"</span> &gt; /dev/null</span><br><span class=\"line\">        status=$?</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span>  [ <span class=\"variable\">$status</span> <span class=\"_\">-eq</span> 0 ] &amp;&amp; [ <span class=\"_\">-s</span> <span class=\"variable\">$CATALINA_PID</span>  ]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"The <span class=\"variable\">$proj_dir</span> tomcat is running and the pid_file is exist !\"</span></span><br><span class=\"line\">                <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">        <span class=\"keyword\">elif</span> [ <span class=\"variable\">$status</span> <span class=\"_\">-eq</span> 0 ] || [ <span class=\"_\">-s</span> <span class=\"variable\">$CATALINA_PID</span>  ]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"kill one\"</span></span><br><span class=\"line\">                ps aux | grep <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> | grep -v <span class=\"string\">\"grep\"</span> | grep -v <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\"</span> | awk <span class=\"string\">'&#123;print $2&#125;'</span> | xargs -i <span class=\"built_in\">kill</span> -9 &#123;&#125;</span><br><span class=\"line\">                &gt; <span class=\"variable\">$CATALINA_PID</span></span><br><span class=\"line\">                <span class=\"variable\">$TOMCAT_HOME</span>/bin/catalina.sh start</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">                <span class=\"variable\">$TOMCAT_HOME</span>/bin/catalina.sh start</span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"start failt!!!\"</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure></p>\n<p>stop.sh脚本内容<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">TOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\"><span class=\"comment\">#CATALINA_BASE=/opt/web/test</span></span><br><span class=\"line\">CATALINA_BASE=$(<span class=\"built_in\">cd</span> <span class=\"string\">\"<span class=\"variable\">$(dirname $0)</span>\"</span>; <span class=\"built_in\">pwd</span>)</span><br><span class=\"line\">CATALINA_PID=<span class=\"variable\">$CATALINA_BASE</span>/tomcat.pid</span><br><span class=\"line\">JAVA_HOME=/opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">CLASSPATH=<span class=\"variable\">$CLASSPATH</span>:<span class=\"variable\">$JAVA_HOME</span>/lib:<span class=\"variable\">$JAVA_HOME</span>/jre/lib</span><br><span class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#路径为【/opt/web/xxx】时，项目名则为【xxx】</span></span><br><span class=\"line\">PROJECT_NAME=`<span class=\"built_in\">echo</span> <span class=\"variable\">$CATALINA_BASE</span> | awk -F <span class=\"string\">\"/\"</span> <span class=\"string\">'&#123;print $NF&#125;'</span>`</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$PROJECT_NAME</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#日志目录名</span></span><br><span class=\"line\">PROJECT_LOG=/opt/<span class=\"built_in\">log</span>/<span class=\"variable\">$PROJECT_NAME</span>/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG</span><br><span class=\"line\"></span><br><span class=\"line\">proj_dir=<span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\"><span class=\"variable\">$TOMCAT_HOME</span>/bin/catalina.sh stop</span><br><span class=\"line\">sleep 5</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -n <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">        ps aux | grep <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> | grep -v <span class=\"string\">\"grep\"</span> | grep -v <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\"</span> &gt; /dev/null</span><br><span class=\"line\">        status=$?</span><br><span class=\"line\">        <span class=\"keyword\">if</span> [ <span class=\"variable\">$status</span> <span class=\"_\">-eq</span> 0 ] || [ <span class=\"_\">-s</span> <span class=\"variable\">$CATALINA_PID</span>  ]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"kill it\"</span></span><br><span class=\"line\">                ps aux | grep <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> | grep -v <span class=\"string\">\"grep\"</span> | grep -v <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\"</span> |  awk <span class=\"string\">'&#123;print $2&#125;'</span> | xargs -i <span class=\"built_in\">kill</span> -9 &#123;&#125;</span><br><span class=\"line\">                &gt; <span class=\"variable\">$CATALINA_PID</span></span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"stop failt!!!\"</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure></p>\n<p>debug.sh 脚本内容<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">TOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">CATALINA_BASE=$(<span class=\"built_in\">cd</span> <span class=\"string\">\"<span class=\"variable\">$(dirname $0)</span>\"</span>; <span class=\"built_in\">pwd</span>)</span><br><span class=\"line\">CATALINA_PID=<span class=\"variable\">$CATALINA_BASE</span>/tomcat.pid</span><br><span class=\"line\">JAVA_HOME=/opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">CLASSPATH=<span class=\"variable\">$CLASSPATH</span>:<span class=\"variable\">$JAVA_HOME</span>/lib:<span class=\"variable\">$JAVA_HOME</span>/jre/lib</span><br><span class=\"line\">LD_LIBRARY_PATH=<span class=\"variable\">$LD_LIBRARY_PATH</span>:/usr/<span class=\"built_in\">local</span>/apr/lib</span><br><span class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#路径为【/opt/web/xxx】时，项目名则为【xxx】</span></span><br><span class=\"line\">PROJECT_NAME=`<span class=\"built_in\">echo</span> <span class=\"variable\">$CATALINA_BASE</span> | awk -F <span class=\"string\">\"/\"</span> <span class=\"string\">'&#123;print $NF&#125;'</span>`</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#日志目录名</span></span><br><span class=\"line\">PROJECT_LOG=/opt/<span class=\"built_in\">log</span>/<span class=\"variable\">$PROJECT_NAME</span>/catalina.out</span><br><span class=\"line\"></span><br><span class=\"line\">JAVA_OPTS=<span class=\"string\">\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH</span><br><span class=\"line\"></span><br><span class=\"line\">proj_dir=<span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [[ -n <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> ]]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">        ps aux | grep <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> | grep -v <span class=\"string\">\"grep\"</span> | grep -v <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\"</span> &gt; /dev/null</span><br><span class=\"line\">        status=$?</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span>  [[ <span class=\"variable\">$status</span> <span class=\"_\">-eq</span> 0 ]] &amp;&amp; [[ <span class=\"_\">-s</span> <span class=\"variable\">$CATALINA_PID</span>  ]]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"The <span class=\"variable\">$proj_dir</span> tomcat is running and the pid_file is exist !\"</span></span><br><span class=\"line\">                <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">        <span class=\"keyword\">elif</span> [[ <span class=\"variable\">$status</span> <span class=\"_\">-eq</span> 0 ]] || [[ <span class=\"_\">-s</span> <span class=\"variable\">$CATALINA_PID</span>  ]]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"kill one\"</span></span><br><span class=\"line\">                ps aux | grep <span class=\"string\">\"<span class=\"variable\">$proj_dir</span>\"</span> | grep -v <span class=\"string\">\"grep\"</span> | grep -v <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\"</span> | awk <span class=\"string\">'&#123;print $2&#125;'</span> | xargs -i <span class=\"built_in\">kill</span> -9 &#123;&#125;</span><br><span class=\"line\">                &gt; <span class=\"variable\">$CATALINA_PID</span></span><br><span class=\"line\">                <span class=\"variable\">$TOMCAT_HOME</span>/bin/catalina.sh jpda start</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">                <span class=\"variable\">$TOMCAT_HOME</span>/bin/catalina.sh jpda start</span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"start failt!!!\"</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure></p>\n<p>restart.sh 脚本内容<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">TOMCAT_HOME=/opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">CATALINA_BASE=$(<span class=\"built_in\">cd</span> <span class=\"string\">\"<span class=\"variable\">$(dirname $0)</span>\"</span>; <span class=\"built_in\">pwd</span>)</span><br><span class=\"line\">CATALINA_PID=<span class=\"variable\">$CATALINA_BASE</span>/tomcat.pid</span><br><span class=\"line\">JAVA_HOME=/opt/soft/jdk/1.8.11/jdk1.8.0_11</span><br><span class=\"line\">CLASSPATH=<span class=\"variable\">$CLASSPATH</span>:<span class=\"variable\">$JAVA_HOME</span>/lib:<span class=\"variable\">$JAVA_HOME</span>/jre/lib</span><br><span class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br><span class=\"line\">JAVA_OPTS=<span class=\"string\">\"-server -Xms1g -Xmx1g -Xmn512m -Xss1024K -XX:PermSize=256m -XX:MaxPermSize=512m -XX:ParallelGCThreads=8 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#路径为【/opt/web/xxx】时，项目名则为【xxx】</span></span><br><span class=\"line\">PROJECT_NAME=`<span class=\"built_in\">echo</span> <span class=\"variable\">$CATALINA_BASE</span> | awk -F <span class=\"string\">\"/\"</span> <span class=\"string\">'&#123;print $NF&#125;'</span>`</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#日志目录名</span></span><br><span class=\"line\">PROJECT_LOG=/opt/<span class=\"built_in\">log</span>/<span class=\"variable\">$PROJECT_NAME</span>/catalina.out</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG</span><br><span class=\"line\"></span><br><span class=\"line\">sh <span class=\"variable\">$CATALINA_BASE</span>/stop.sh</span><br><span class=\"line\">sh <span class=\"variable\">$CATALINA_BASE</span>/start.sh</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"修改conf文件夹下的server-xml\">修改conf文件夹下的server.xml</h4><p>把对应的Host节点修改为下面的内容，并修改相关的路径<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"localhost\"</span>  <span class=\"attr\">appBase</span>=<span class=\"string\">\"/opt/web/test/webapps\"</span> <span class=\"attr\">autoDeploy</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">deployOnStartup</span>=<span class=\"string\">\"false\"</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">Context</span> <span class=\"attr\">path</span>=<span class=\"string\">\"\"</span> <span class=\"attr\">docBase</span>=<span class=\"string\">\"/opt/web/test/webapps\"</span> <span class=\"attr\">crossContext</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">allowLinking</span>=<span class=\"string\">\"true\"</span><span class=\"attr\">reloadable</span>=<span class=\"string\">\"false\"</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">JarScanner</span> <span class=\"attr\">scanAllDirectories</span>=<span class=\"string\">\"true\"</span> /&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">Valve</span> <span class=\"attr\">className</span>=<span class=\"string\">\"org.apache.catalina.valves.AccessLogValve\"</span> <span class=\"attr\">directory</span>=<span class=\"string\">\"/opt/web/test/logs/\"</span> <span class=\"attr\">prefix</span>=<span class=\"string\">\"gh_access_log.\"</span> <span class=\"attr\">suffix</span>=<span class=\"string\">\".log\"</span> <span class=\"attr\">pattern</span>=<span class=\"string\">\"%a %A %t %S %b %r %s %&#123;Referer&#125;i %&#123;User-Agent&#125;i %D\"</span> <span class=\"attr\">resolveHosts</span>=<span class=\"string\">\"false\"</span> /&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;/<span class=\"name\">Context</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>除此之外，可选的修改Server的端口号以及Connector的端口号。<br>一个实例就这样完成，以后每次想要部署一个项目，就可以简单的复制这个实例文件夹，修改一下配置，就行了。</p>\n<p>注意：复制tomcat实例的时候webapps下面可能已经存在其他项目的文件，我们要清空webapps，然后把test.war解压到webapps下面，而不是直接放war包。</p>\n<p>我们再创建一个项目为test1</p>\n<h4 id=\"现在我们的目录结构如下:\">现在我们的目录结构如下:</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># ls test test1</span></span><br><span class=\"line\"><span class=\"built_in\">test</span>:</span><br><span class=\"line\">conf  debug.sh\tlogs  restart.sh  run.sh  stop.sh  webapps  work</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">test</span>1:</span><br><span class=\"line\">conf  debug.sh\tlogs  restart.sh  run.sh  stop.sh  webapps  work</span><br></pre></td></tr></table></figure>\n<h4 id=\"启动tomcat多实例\">启动tomcat多实例</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># test/run.sh</span></span><br><span class=\"line\">Using CATALINA_BASE:   /opt/web/<span class=\"built_in\">test</span></span><br><span class=\"line\">Using CATALINA_HOME:   /opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">Using CATALINA_TMPDIR: /opt/web/<span class=\"built_in\">test</span>/temp</span><br><span class=\"line\">Using JRE_HOME:        /opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">Using CLASSPATH:       /opt/soft/apache-tomcat-7.0.73/bin/bootstrap.jar:/opt/soft/apache-tomcat-7.0.73/bin/tomcat-juli.jar</span><br><span class=\"line\">Using CATALINA_PID:    /opt/web/<span class=\"built_in\">test</span>/tomcat.pid</span><br><span class=\"line\">Tomcat started.</span><br><span class=\"line\">ubuntu<span class=\"comment\"># test1/run.sh</span></span><br><span class=\"line\">Using CATALINA_BASE:   /opt/web/<span class=\"built_in\">test</span>1</span><br><span class=\"line\">Using CATALINA_HOME:   /opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\">Using CATALINA_TMPDIR: /opt/web/<span class=\"built_in\">test</span>1/temp</span><br><span class=\"line\">Using JRE_HOME:        /opt/soft/jdk1.8.0_11/</span><br><span class=\"line\">Using CLASSPATH:       /opt/soft/apache-tomcat-7.0.73/bin/bootstrap.jar:/opt/soft/apache-tomcat-7.0.73/bin/tomcat-juli.jar</span><br><span class=\"line\">Using CATALINA_PID:    /opt/web/<span class=\"built_in\">test</span>1/tomcat.pid</span><br><span class=\"line\">Tomcat started.</span><br><span class=\"line\">ubuntu<span class=\"comment\"># netstat -tunlp</span></span><br><span class=\"line\">激活Internet连接 (仅服务器)</span><br><span class=\"line\">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class=\"line\">tcp        0      0 127.0.1.1:53            0.0.0.0:*               LISTEN      7237/dnsmasq   </span><br><span class=\"line\">tcp6       0      0 :::8080                 :::*                    LISTEN      10182/java     </span><br><span class=\"line\">tcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      10258/java     </span><br><span class=\"line\">tcp6       0      0 :::8070                 :::*                    LISTEN      10258/java     </span><br><span class=\"line\">tcp6       0      0 127.0.0.1:8006          :::*                    LISTEN      10182/java     </span><br><span class=\"line\">tcp6       0      0 :::8009                 :::*                    LISTEN      10182/java     </span><br><span class=\"line\">udp        0      0 0.0.0.0:57782           0.0.0.0:*                           7062/avahi-daemon:</span><br><span class=\"line\">udp        0      0 0.0.0.0:49141           0.0.0.0:*                           7237/dnsmasq   </span><br><span class=\"line\">udp        0      0 0.0.0.0:41976           0.0.0.0:*                           7237/dnsmasq   </span><br><span class=\"line\">udp        0      0 127.0.1.1:53            0.0.0.0:*                           7237/dnsmasq   </span><br><span class=\"line\">udp        0      0 0.0.0.0:68              0.0.0.0:*                           9541/dhclient   </span><br><span class=\"line\">udp        0      0 0.0.0.0:48730           0.0.0.0:*                           7237/dnsmasq   </span><br><span class=\"line\">udp        0      0 0.0.0.0:631             0.0.0.0:*                           7120/cups-browsed</span><br><span class=\"line\">udp        0      0 0.0.0.0:47809           0.0.0.0:*                           7237/dnsmasq   </span><br><span class=\"line\">udp        0      0 0.0.0.0:5353            0.0.0.0:*                           7062/avahi-daemon:</span><br><span class=\"line\">udp        0      0 0.0.0.0:36600           0.0.0.0:*                           7237/dnsmasq   </span><br><span class=\"line\">udp6       0      0 :::46484                :::*                                7062/avahi-daemon:</span><br><span class=\"line\">udp6       0      0 :::5353                 :::*                                7062/avahi-daemon:</span><br><span class=\"line\">ubuntu<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n<p>可以看到8081，8082，8083等其他端口都已经启动，现在可以使用curl命令进行访问<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># curl localhost:8080</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"utf-8\"</span>&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h2&gt;Hello World!&lt;/h2&gt;</span><br><span class=\"line\">&lt;h2&gt;Test 项目!&lt;/h2&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br><span class=\"line\">ubuntu<span class=\"comment\"># curl localhost:8070</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"utf-8\"</span>&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h2&gt;Hello World!&lt;/h2&gt;</span><br><span class=\"line\">&lt;h2&gt;Test 项目!&lt;/h2&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br><span class=\"line\">ubuntu<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure></p>\n<p>多实例部署成功，以后可以简单的复制其中一个实例，修改相关配置即可。</p>\n<h2 id=\"4-_Nginx配置\">4. Nginx配置</h2><p>本篇文章重点不在Nginx,简单带过。</p>\n<p>在配置文件nginx.conf下的http节点中，引入了两行代码</p>\n<figure class=\"highlight profile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">                include       mime.types;</span><br><span class=\"line\">                default_type  application/octet-stream;</span><br><span class=\"line\"></span><br><span class=\"line\">\t            ......</span><br><span class=\"line\">\t            ......</span><br><span class=\"line\">\t            ......</span><br><span class=\"line\"></span><br><span class=\"line\">                #在以下两个文件具体配置</span><br><span class=\"line\">                include /usr/local/nginx/conf/conf.d/upstream.conf;</span><br><span class=\"line\">                include /usr/local/nginx/conf/conf.d/ld.conf;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>因此每个项目站点的具体配置是在<code>upstream.conf</code>与<code>ld.conf</code>中配置的。</p>\n<p>其中<code>ld.conf</code>下配置的是具体站点的server 站点映射关系<br><figure class=\"highlight profile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">......</span><br><span class=\"line\">other server</span><br><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\">server  &#123;</span><br><span class=\"line\">    listen  <span class=\"number\">80</span>;</span><br><span class=\"line\">    server_name  www.dongxiaoxia.xyz;</span><br><span class=\"line\">    server_name_in_redirect off;</span><br><span class=\"line\">    client_header_timeout  30;</span><br><span class=\"line\">    client_body_timeout  30;</span><br><span class=\"line\">    charset  UTF-8;</span><br><span class=\"line\">    client_max_body_size  10000k;</span><br><span class=\"line\">    allow  all;</span><br><span class=\"line\"></span><br><span class=\"line\">  location / &#123;</span><br><span class=\"line\">        index   index.html index.php index.jsp index.htm;</span><br><span class=\"line\">        proxy_pass      http://test_pool;</span><br><span class=\"line\">        proxy_redirect  off;</span><br><span class=\"line\">        proxy_set_header Host $host;</span><br><span class=\"line\">        proxy_set_header CURRENT_URL http://$Host$request_uri;</span><br><span class=\"line\">        proxy_set_header X-USER_IP $remote_addr;</span><br><span class=\"line\">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  access_log  /opt/web/test/logs/test.log  main;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">......</span><br><span class=\"line\">......</span><br></pre></td></tr></table></figure></p>\n<p>其中<code>upstream.conf</code>下配置的是具体站点的 pool 映射关系</p>\n<figure class=\"highlight profile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">......</span><br><span class=\"line\">other pool</span><br><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\">upstream test_pool &#123;</span><br><span class=\"line\">        server <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">8303</span> weight=<span class=\"number\">15</span> max_fails=<span class=\"number\">2</span> fail_timeout=<span class=\"number\">30</span>s;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">......</span><br><span class=\"line\">......</span><br></pre></td></tr></table></figure>\n<p>需要注意的是，在修改了Nginx配置文件后，一定要执行<code>/opt/soft/nginx/sbin/nginx -s reload</code>重新加载配置 </p>\n<h2 id=\"5-_自动化部署脚本\">5. 自动化部署脚本</h2><p> 服务器每次部署都要拷贝war包到服务器，停止服务器，再开启服务器，不太方便；而且服务器的配置文件应该相对于开发环境不太容易变动，或者开发人员根本无法得知服务器配置信息，因此带来另两个不好的原因，war包整体覆盖会有问题，war包体积太大。因此本地打包war包时要去掉相应文件， 服务器也要相应处理。 </p>\n<p>假设场景：本地编译打包项目war包。假如项目名为test，war包为test.war，部署时要求去除日志文件、项目配置文件、以及依赖的外部jar包。</p>\n<p>因此在项目根目录下创建<code>deploy.bat</code> 脚本，内容为：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@<span class=\"built_in\">echo</span> off</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> ...............................................................................................................................................................</span><br><span class=\"line\"><span class=\"built_in\">echo</span> This shell script does not put lib directory into package. If you want to, please just upload <span class=\"string\">'test.war'</span> <span class=\"keyword\">in</span> target directory.</span><br><span class=\"line\"><span class=\"built_in\">echo</span> ...............................................................................................................................................................</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">set</span> SVN_ROOT=D:\\svn\\<span class=\"built_in\">test</span></span><br><span class=\"line\"><span class=\"built_in\">set</span> TARGET_PATH=%SVN_ROOT%\\target\\<span class=\"built_in\">test</span></span><br><span class=\"line\"><span class=\"built_in\">set</span> DEPLOY=%SVN_ROOT%\\deploy</span><br><span class=\"line\"></span><br><span class=\"line\">rd /s /q %DEPLOY%</span><br><span class=\"line\">md %DEPLOY%</span><br><span class=\"line\"><span class=\"built_in\">echo</span> %TARGET_PATH%</span><br><span class=\"line\">xcopy %TARGET_PATH%\\* %DEPLOY%\\ /s /e</span><br><span class=\"line\">rd /s /q %DEPLOY%\\WEB-INF\\lib</span><br><span class=\"line\">del /f /s /q %DEPLOY%\\WEB-INF\\classes\\test.properties</span><br><span class=\"line\">del /f /s /q %DEPLOY%\\WEB-INF\\classes\\<span class=\"built_in\">log</span>4j.properties</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /d %DEPLOY%</span><br><span class=\"line\"></span><br><span class=\"line\">jar -cvf test.war *</span><br><span class=\"line\"></span><br><span class=\"line\">rd /s /q %DEPLOY%\\META-INF</span><br><span class=\"line\">rd /s /q %DEPLOY%\\WEB-INF</span><br><span class=\"line\">rd /s /q %DEPLOY%\\static</span><br><span class=\"line\">del /s /q %DEPLOY%\\index.jsp</span><br><span class=\"line\"></span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure></p>\n<p>这个脚本用来去掉lib下依赖的jar包，test.proterties，log4j.properties,再重新压缩为war包，去掉lib下的jar包，是因为项目的依赖包太大了，传输时很费时间，而jar包在部署过后很可能不会变动。<br> test.properties与log4j.properties 为项目的配置文件，开发环境与服务器的配置肯定是不一样的，因此不能直接覆盖掉，而是全量部署时放在项目上，以后增量部署的时候不覆盖即可。</p>\n<p>1.本地install为test.war，如果为增量部署还要执行一下deploy脚本。<br>2.把deploy过的war包通过Filezilla等传输到服务器指定的部署目录，我们这里服务器的下项目部署文件夹为/root/deploy，根据项目名创建一个文件夹test，因此我们的test项目的部署路径为/root/deploy/test，文件夹下有我们的test.war文件。<br>3.在/root/deploy/test文件夹下，会创建一个<code>deploy.sh</code> 脚本文件，与客户端的deploy.bat 相呼应。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">deploy_file_dir=/root/deploy/<span class=\"built_in\">test</span></span><br><span class=\"line\">deploy_dir=/opt/web/<span class=\"built_in\">test</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$&#123;deploy_dir&#125;</span>/deploy</span><br><span class=\"line\">rm -rf ./*</span><br><span class=\"line\">jar xvf <span class=\"variable\">$&#123;deploy_file_dir&#125;</span>/test.war</span><br><span class=\"line\">cp -rf ./* <span class=\"variable\">$&#123;deploy_dir&#125;</span>/webapps/</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ../</span><br><span class=\"line\">sh stop.sh</span><br><span class=\"line\">sh run.sh</span><br></pre></td></tr></table></figure></p>\n<p>查看脚本内容，我们可以得知deploy.sh 脚本的功能<br>1.由于客户端传送过来的可能不会是全量test.war包，因此不能简单的把test.war包直接放到、opt/web/test/webapps目录下，这样会覆盖掉服务器的项目配置，也会导致部分文件丢失。只能解压test.war包 把全部内容复制到webapps下，存在就覆盖，而不存在的也不会删掉webapps下存在的。<br>2.执行stop.sh 停止test项目，因为test项目之前可能已经启动了。<br>3.执行run.sh 启动项目。</p>\n<p>到此为止，我们已经用了脚本代替一部分手动操作，但还是不够完善，比如项目实例还是要自己手动搭建，启动脚本也要手动编写，下面提供了一键部署tomcat实例项目环境的脚本<code>build.sh</code>，最大化利用脚本，减少手动操作。(这里没有添加Nginx配置，所以有关Nginx的配置还要手动添加，并且重新加载！)<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\">#一键部署Tomcat实例项目环境</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#项目名称</span></span><br><span class=\"line\">PROJECT_NAME=www.dongxiaoxia.xyz</span><br><span class=\"line\"><span class=\"comment\">#tomcat关闭端口</span></span><br><span class=\"line\">SERVER_PORT=8006</span><br><span class=\"line\"><span class=\"comment\">#Http监听端口</span></span><br><span class=\"line\">HTTP_PORT=8080</span><br><span class=\"line\"><span class=\"comment\">##################以上三个参数需要修改############################</span></span><br><span class=\"line\"><span class=\"comment\">#项目基础路径</span></span><br><span class=\"line\">PROJECT_BASE_PATH=/opt/web/</span><br><span class=\"line\"><span class=\"comment\">#日志基础路径</span></span><br><span class=\"line\">LOG_BASE_PATH=/opt/<span class=\"built_in\">log</span>/</span><br><span class=\"line\"><span class=\"comment\">#部署基础路径</span></span><br><span class=\"line\">DEPLOY_BASE_PATH=/root/deploy/</span><br><span class=\"line\"><span class=\"comment\">#Java安装路径</span></span><br><span class=\"line\">JAVA_HOME=/opt/soft/jdk1.8.0_11/</span><br><span class=\"line\"><span class=\"comment\">#Tomcat安装路径</span></span><br><span class=\"line\">CATALINA_HOME=/opt/soft/apache-tomcat-7.0.73</span><br><span class=\"line\"><span class=\"comment\">#Tomcat活跃配置路径,也就是项目部署路径</span></span><br><span class=\"line\">CATALINA_BASE=<span class=\"variable\">$PROJECT_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span></span><br><span class=\"line\"><span class=\"comment\">#tomcat server.xml配置文件路径</span></span><br><span class=\"line\">SERVER_XML=<span class=\"variable\">$CATALINA_BASE</span>/conf/server.xml</span><br><span class=\"line\"><span class=\"comment\">#########################################################################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'Java安装路径:'</span><span class=\"variable\">$JAVA_HOME</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'Tomcat安装路径:'</span><span class=\"variable\">$CATALINA_HOME</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'Tomcat项目实例路径:'</span><span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'项目war包部署上传路径:'</span><span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'tomcat server.xml配置文件路径:'</span><span class=\"variable\">$SERVER_XML</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'项目日志路径:'</span><span class=\"variable\">$LOG_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'tomcat关闭端口:'</span><span class=\"variable\">$SERVER_PORT</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'Http监听端口:'</span><span class=\"variable\">$HTTP_PORT</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#################创建tomcat实例 修改server.xml配置##########################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#复制tomcat实例所需文件夹</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'复制tomcat实例所需文件夹'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ ! <span class=\"_\">-d</span> <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">mkdir -p <span class=\"string\">\"<span class=\"variable\">$CATALINA_BASE</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$CATALINA_HOME</span></span><br><span class=\"line\">cp -r conf <span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\">mkdir <span class=\"variable\">$CATALINA_BASE</span>/webapps</span><br><span class=\"line\">mkdir <span class=\"variable\">$CATALINA_BASE</span>/work</span><br><span class=\"line\">mkdir <span class=\"variable\">$CATALINA_BASE</span>/logs</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'修改server.xml配置'</span></span><br><span class=\"line\"><span class=\"comment\"># 修改tomcat关闭端口</span></span><br><span class=\"line\">sed -i 22s@8005@<span class=\"variable\">$&#123;SERVER_PORT&#125;</span>@ <span class=\"variable\">$SERVER_XML</span></span><br><span class=\"line\"><span class=\"comment\"># 修改Http监听端口</span></span><br><span class=\"line\">sed -i 71s@8080@<span class=\"variable\">$&#123;HTTP_PORT&#125;</span>@ <span class=\"variable\">$SERVER_XML</span></span><br><span class=\"line\"><span class=\"comment\"># 统一web应用程序的路径</span></span><br><span class=\"line\">sed -i <span class=\"string\">'125s@appBase=\"webapps\"@appBase=\"'</span><span class=\"variable\">$CATALINA_BASE</span><span class=\"string\">'/webapps\"@'</span> <span class=\"variable\">$SERVER_XML</span></span><br><span class=\"line\"><span class=\"comment\"># 关闭自动部署</span></span><br><span class=\"line\"><span class=\"comment\">#sed -i '126s@autoDeploy=\"true\"@autoDeploy=\"false\"@' $SERVER_XML</span></span><br><span class=\"line\">sed -i <span class=\"string\">'141a&lt;Host name=\"localhost\"  appBase=\"'</span><span class=\"variable\">$CATALINA_BASE</span><span class=\"string\">'/webapps\" autoDeploy=\"false\" deployOnStartup=\"false\"&gt;\\n     &lt;Context path=\"\" docBase=\"'</span><span class=\"variable\">$CATALINA_BASE</span><span class=\"string\">'/webapps\" crossContext=\"true\" allowLinking=\"true\" reloadable=\"false\"&gt;\\n         &lt;JarScanner scanAllDirectories=\"true\" /&gt;\\n         &lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"'</span><span class=\"variable\">$CATALINA_BASE</span><span class=\"string\">'/logs/\" prefix=\"gh_access_log.\" suffix=\".log\" pattern=\"%a %A %t %S %b %r %s %&#123;Referer&#125;i %&#123;User-Agent&#125;i %D\" resolveHosts=\"false\" /&gt;\\n     &lt;/Context&gt;\\n&lt;/Host&gt;</span><br><span class=\"line\">'</span> <span class=\"variable\">$SERVER_XML</span></span><br><span class=\"line\"></span><br><span class=\"line\">sed -i <span class=\"string\">'125,141d'</span> <span class=\"variable\">$SERVER_XML</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#######################创建run.sh脚本文件###################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'创建run.sh脚本文件'</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\">touch run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#!/bin/sh'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'TOMCAT_HOME='</span><span class=\"variable\">$CATALINA_HOME</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"comment\">#echo 'CATALINA_BASE='$CATALINA_BASE &gt;&gt; run.sh</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_PID=$CATALINA_BASE/tomcat.pid'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_HOME='</span><span class=\"variable\">$JAVA_HOME</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PATH=$PATH:$JAVA_HOME/bin'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#路径为【/opt/web/xxx】时，项目名则为【xxx】'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '&#123;print \\$NF&#125;'\\`\"</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#检测temp目录是否存在，不存在则创建'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'if [ ! -d \"$CATALINA_BASE/temp\" ]; then'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'    mkdir \"$CATALINA_BASE/temp\"'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'fi'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#日志目录名'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PROJECT_LOG='</span><span class=\"variable\">$LOG_BASE_PATH</span><span class=\"string\">'$PROJECT_NAME/catalina.out'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_OPTS=\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'proj_dir=$CATALINA_BASE'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'if [ -n \"$proj_dir\" ]'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'then'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"        ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" &gt; /dev/null\"</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        status=$?'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        if  [ $status -eq 0 ] &amp;&amp; [ -s $CATALINA_PID  ]'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        then'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                echo \"The $proj_dir tomcat is running and the pid_file is exist !\"'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                exit 1'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        elif [ $status -eq 0 ] || [ -s $CATALINA_PID  ]'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        then'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                echo \"kill one\"'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"                ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" | awk '&#123;print \\$2&#125;' | xargs -i kill -9 &#123;&#125;\"</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                &gt; $CATALINA_PID'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                $TOMCAT_HOME/bin/catalina.sh start'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        else'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                $TOMCAT_HOME/bin/catalina.sh start'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        fi'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'else'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        echo \"start failt!!!\"'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        exit 1'</span> &gt;&gt; run.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'fi'</span> &gt;&gt; run.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#######################创建stop.sh脚本文件###################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'创建stop.sh脚本文件'</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\">touch stop.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#!/bin/sh'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'TOMCAT_HOME='</span><span class=\"variable\">$CATALINA_HOME</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#CATALINA_BASE='</span><span class=\"variable\">$CATALINA_BASE</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_PID=$CATALINA_BASE/tomcat.pid'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_HOME='</span><span class=\"variable\">$JAVA_HOME</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PATH=$PATH:$JAVA_HOME/bin'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#路径为【/opt/web/xxx】时，项目名则为【xxx】'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '&#123;print \\$NF&#125;'\\`\"</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'echo $PROJECT_NAME'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#日志目录名'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PROJECT_LOG='</span><span class=\"variable\">$LOG_BASE_PATH</span><span class=\"string\">'$PROJECT_NAME/'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'proj_dir=$CATALINA_BASE'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'$TOMCAT_HOME/bin/catalina.sh stop'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'sleep 5'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'if [ -n \"$proj_dir\" ]'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'then'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"        ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" &gt; /dev/null\"</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        status=$?'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        if [ $status -eq 0 ] || [ -s $CATALINA_PID  ]'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        then'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                echo \"kill it\"'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"                ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" |  awk '&#123;print \\$2&#125;' | xargs -i kill -9 &#123;&#125;\"</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                &gt; $CATALINA_PID'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        fi'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'else'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        echo \"stop failt!!!\"'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        exit 1'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'fi'</span> &gt;&gt; stop.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#######################创建debug.sh脚本文件###################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'创建debug.sh脚本文件'</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\">touch debug.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#!/bin/sh'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'TOMCAT_HOME='</span><span class=\"variable\">$CATALINA_HOME</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_PID=$CATALINA_BASE/tomcat.pid'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_HOME='</span><span class=\"variable\">$JAVA_HOME</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PATH=$PATH:$JAVA_HOME/bin'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#路径为【/opt/web/xxx】时，项目名则为【xxx】'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '&#123;print \\$NF&#125;'\\`\"</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#日志目录名'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PROJECT_LOG='</span><span class=\"variable\">$LOG_BASE_PATH</span><span class=\"string\">'$PROJECT_NAME/catalina.out'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_OPTS=\"-server -Xms32m -Xmx512m -Xmn32m -Xss1024K -XX:PermSize=32m -XX:MaxPermSize=64m -XX:ParallelGCThreads=32 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG LD_LIBRARY_PATH'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'proj_dir=$CATALINA_BASE'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'if [[ -n \"$proj_dir\" ]]'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'then'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        ps aux | grep \"$proj_dir\" | grep -v \"grep\" | grep -v \"$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\" &gt; /dev/null'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        status=$?'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        if  [[ $status -eq 0 ]] &amp;&amp; [[ -s $CATALINA_PID  ]]'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        then'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                echo \"The $proj_dir tomcat is running and the pid_file is exist !\"'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                exit 1'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        elif [[ $status -eq 0 ]] || [[ -s $CATALINA_PID  ]]'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        then'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                echo \"kill one\"'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"                ps aux | grep \\\"\\$proj_dir\\\" | grep -v \\\"grep\\\" | grep -v \\\"\\$CATALINA_BASE/\\(start.sh\\|stop.sh\\|restart.sh\\|logs/catalina.out\\)\\\" | awk '&#123;print \\$2&#125;' | xargs -i kill -9 &#123;&#125;\"</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                &gt; $CATALINA_PID'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                $TOMCAT_HOME/bin/catalina.sh jpda start'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        else'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'                $TOMCAT_HOME/bin/catalina.sh jpda start'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        fi'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'else'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        echo \"start failt!!!\"'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'        exit 1'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'fi'</span> &gt;&gt; debug.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#######################创建restart.sh脚本文件###################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'创建restart.sh脚本文件'</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$CATALINA_BASE</span></span><br><span class=\"line\">touch restart.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#!/bin/sh'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'TOMCAT_HOME='</span><span class=\"variable\">$CATALINA_HOME</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_BASE=$(cd \"$(dirname $0)\"; pwd)'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CATALINA_PID=$CATALINA_BASE/tomcat.pid'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_HOME=/opt/soft/jdk/1.8.11/jdk1.8.0_11'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PATH=$PATH:$JAVA_HOME/bin'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'JAVA_OPTS=\"-server -Xms1g -Xmx1g -Xmn512m -Xss1024K -XX:PermSize=256m -XX:MaxPermSize=512m -XX:ParallelGCThreads=8 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=10 -XX:CMSInitiatingOccupancyFraction=80\"'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#路径为【/opt/web/xxx】时，项目名则为【xxx】'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"PROJECT_NAME=\\`echo \\$CATALINA_BASE | awk -F \\\"/\\\" '&#123;print \\$NF&#125;'\\`\"</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#日志目录名'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'PROJECT_LOG='</span><span class=\"variable\">$LOG_BASE_PATH</span><span class=\"string\">'$PROJECT_NAME/catalina.out'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export TOMCAT_HOME CATALINA_BASE CATALINA_PID JAVA_HOME CLASSPATH PATH JAVA_OPTS PROJECT_NAME PROJECT_LOG'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">''</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'sh $CATALINA_BASE/stop.sh'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'sh $CATALINA_BASE/start.sh'</span> &gt;&gt; restart.sh</span><br><span class=\"line\"><span class=\"comment\">#######################创建deploy.sh脚本文件###################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'创建deploy.sh脚本文件'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ ! <span class=\"_\">-d</span> <span class=\"string\">\"<span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span>\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">  mkdir -p <span class=\"string\">\"<span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span></span><br><span class=\"line\">touch deploy.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'#!/bin/sh'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"deploy_file_dir=<span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span>\"</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"deploy_dir=<span class=\"variable\">$CATALINA_BASE</span>\"</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"if [ ! -d \"</span>\\<span class=\"variable\">$&#123;deploy_dir&#125;</span>/deploy<span class=\"string\">\" ]; then\"</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"  mkdir -p \"</span>\\<span class=\"variable\">$&#123;deploy_dir&#125;</span>/deploy<span class=\"string\">\"\"</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"fi\"</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'cd $&#123;deploy_dir&#125;/deploy'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'rm -rf ./*'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'jar xvf $&#123;deploy_file_dir&#125;/'</span><span class=\"variable\">$PROJECT_NAME</span><span class=\"string\">'.war'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'cp -rf ./* $&#123;deploy_dir&#125;/webapps/'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'cd ../'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'sh stop.sh'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'sh run.sh'</span> &gt;&gt; deploy.sh</span><br><span class=\"line\"><span class=\"comment\">#########################################################################################</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'tomcat项目实例创建成功!'</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"请把war包放置到<span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span>目录下，执行<span class=\"variable\">$DEPLOY_BASE_PATH</span><span class=\"variable\">$PROJECT_NAME</span>/deploy脚本启动项目.\"</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"或者直接解压war包到<span class=\"variable\">$CATALINA_BASE</span>/webapps下。执行<span class=\"variable\">$CATALINA_BASE</span>/run脚本启动项目.\"</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"6-_部署总结\">6. 部署总结</h2><h3 id=\"为什么\">为什么</h3><p>本篇文章都是为了解决文章开头的问题及后续问题：本地开发完项目后如何简单部署到服务器？</p>\n<h3 id=\"怎么做\">怎么做</h3><ol>\n<li>服务器项目部署规范化，相关软件规范化，统一部署，集中管理。</li>\n<li>用脚本替代手动操作。</li>\n<li>部署文档清晰易懂。</li>\n</ol>\n<h3 id=\"怎么样\">怎么样</h3><p><strong>优点</strong></p>\n<ol>\n<li>tomcat多实例部署，启动、关闭一个项目站点不影响其他站点，没有耦合。</li>\n<li>对添加开放，对删除关闭。<br>要添加一个新的项目站点，只需简单的执行一下脚本就能够实现，不会影响其他站点配置。</li>\n<li>第一次部署及后续增量部署都极其简单、容易操作、全程脚本化。</li>\n<li>整个服务器规范化，各个项目部署路径、相关软件路径、日志路径清晰明了。</li>\n<li>项目日志集中管理，方便后续统计分析。 </li>\n</ol>\n<p><strong>劣势</strong></p>\n<ol>\n<li>要求部署人员具备一定的脚本语法基础，能够理解相关的脚本原理。</li>\n<li>脚本的创建是直接添加内容，如果之前已经存在相关的文件，没有采取替换而是追加，因此要确定相关路径上的文件是否正确。</li>\n</ol>\n<h3 id=\"几句话说明白部署\">几句话说明白部署</h3><p><strong>部署环境整体规划</strong></p>\n<ol>\n<li>项目目录 /opt/web</li>\n<li>日志目录 /opt/log</li>\n<li>jdk/tomcat/nginx等目录 安装环境 /opt/soft</li>\n<li>项目应用war包上传到服务器的目录 /root/deploy</li>\n</ol>\n<p>假设现在有3个项目 test test1 test2<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu<span class=\"comment\"># ls /opt/web /root/deploy/ /opt/soft /opt/log</span></span><br><span class=\"line\">/opt/<span class=\"built_in\">log</span>:</span><br><span class=\"line\"><span class=\"built_in\">test</span>  <span class=\"built_in\">test</span>1  <span class=\"built_in\">test</span>2</span><br><span class=\"line\"></span><br><span class=\"line\">/opt/soft:</span><br><span class=\"line\">apache-tomcat-7.0.73  include\t   lib\t  nginx-1.6.2\t      openssl-1.1.0c\t     pcre-8.39\t       share  zlib-1.2.8</span><br><span class=\"line\">bin\t\t      jdk1.8.0_11  nginx  nginx-1.6.2.tar.gz  openssl-1.1.0c.tar.gz  pcre-8.39.tar.gz  ssl    zlib128.zip</span><br><span class=\"line\"></span><br><span class=\"line\">/opt/web:</span><br><span class=\"line\">build.sh  <span class=\"built_in\">test</span>\t<span class=\"built_in\">test</span>1  <span class=\"built_in\">test</span>2</span><br><span class=\"line\"></span><br><span class=\"line\">/root/deploy/:</span><br><span class=\"line\"><span class=\"built_in\">test</span>  <span class=\"built_in\">test</span>1  <span class=\"built_in\">test</span>2</span><br><span class=\"line\">ubuntu<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure></p>\n<p><strong>全量部署(第一次部署)</strong></p>\n<ol>\n<li><strong>执行<code>build.sh</code>脚本一键部署项目</strong></li>\n<li>配置并重新加载Nginx代理配置</li>\n<li>开发环境install打包war包传输到服务器deploy目录</li>\n<li>执行<code>deploy.sh</code>脚本，打开项目日志查看启动情况</li>\n</ol>\n<p><strong>增量部署</strong></p>\n<ol>\n<li>开发环境install打包war包,<strong>执行开发环境<code>deploy.sh(mac)/deploy.bat(windows)</code>脚本</strong>，传输到服务器deploy目录 </li>\n<li>执行<code>deploy.sh</code>脚本，打开项目日志查看启动情况</li>\n</ol>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ciy431oks0003uco00e0l4zkd","category_id":"ciy431ol30008uco0s4phx2km","_id":"ciy431olk000huco0fpb55tt0"},{"post_id":"ciy431oky0005uco03wrxvh3a","category_id":"ciy431olh000fuco0yqym1chw","_id":"ciy431ols000puco0s7jizk0k"},{"post_id":"ciy431olp000muco0c4lf9gg9","category_id":"ciy431ol30008uco0s4phx2km","_id":"ciy431oly000uuco039tb6mu6"},{"post_id":"ciy431ol40009uco0aykdrsqo","category_id":"ciy431ol30008uco0s4phx2km","_id":"ciy431om2000yuco07dt0r5ni"},{"post_id":"ciy431ole000euco0e0bcs3sa","category_id":"ciy431ols000quco0rmvk25wq","_id":"ciy431om40012uco09gy6k5tu"},{"post_id":"ciy431oli000guco00ebgy3ju","category_id":"ciy431om1000xuco0fl1f76fe","_id":"ciy431om90019uco0xgk2oc95"},{"post_id":"ciy431om40011uco0zblptuvw","category_id":"ciy431ol30008uco0s4phx2km","_id":"ciy431omc001euco06b0z4nbk"},{"post_id":"ciy431om50015uco0xavt7ck1","category_id":"ciy431ols000quco0rmvk25wq","_id":"ciy431omf001huco0upn9gvg1"},{"post_id":"ciy431olr000ouco08q7m53c4","category_id":"ciy431om50014uco0yatygbhe","_id":"ciy431omi001muco0m82dnaty"},{"post_id":"ciy431oma001buco0zewpuvw7","category_id":"ciy431olh000fuco0yqym1chw","_id":"ciy431omq001puco0n4ywbfyj"},{"post_id":"ciy431olt000suco004vh9sq3","category_id":"ciy431oma001cuco0ey8611rc","_id":"ciy431oms001suco0oddu06rs"},{"post_id":"ciy431olz000vuco0zgib6eb6","category_id":"ciy431omi001kuco0o9g26413","_id":"ciy431omu001uuco0dgrvoqjr"},{"post_id":"ciy431om2000zuco0pbmntgup","category_id":"ciy431oms001ruco0jbav5zu5","_id":"ciy431omw001yuco0wbzhxnhg"},{"post_id":"ciy431om70017uco0d36l57fa","category_id":"ciy431omv001wuco0iwz9g0si","_id":"ciy431omx0022uco0p67hxcsd"},{"post_id":"ciy431omc001fuco04wavbjgp","category_id":"ciy431omx0020uco0ojdijxtu","_id":"ciy431omy0026uco080qj6v92"},{"post_id":"ciy431omg001iuco00w5qqjmr","category_id":"ciy431oms001ruco0jbav5zu5","_id":"ciy431omz002auco0ph6kehve"},{"post_id":"ciy431omk001nuco0jwp3w3lj","category_id":"ciy431omy0027uco01s8equgf","_id":"ciy431on0002duco0uw31vjnz"}],"PostTag":[{"post_id":"ciy431oks0003uco00e0l4zkd","tag_id":"ciy431ol10007uco0dffl98t2","_id":"ciy431olp000luco01nwc1999"},{"post_id":"ciy431oks0003uco00e0l4zkd","tag_id":"ciy431ole000duco0yu2sm8mg","_id":"ciy431olr000nuco07vcm895n"},{"post_id":"ciy431oky0005uco03wrxvh3a","tag_id":"ciy431olm000juco0xx3g068n","_id":"ciy431oly000tuco0rvkj11wc"},{"post_id":"ciy431ol40009uco0aykdrsqo","tag_id":"ciy431ol10007uco0dffl98t2","_id":"ciy431om30010uco0b6jnjawq"},{"post_id":"ciy431ole000euco0e0bcs3sa","tag_id":"ciy431om1000wuco0ey25o0yh","_id":"ciy431om60016uco0qcxktcfo"},{"post_id":"ciy431om40011uco0zblptuvw","tag_id":"ciy431ol10007uco0dffl98t2","_id":"ciy431om90018uco0ai8oyjkv"},{"post_id":"ciy431om50015uco0xavt7ck1","tag_id":"ciy431om1000wuco0ey25o0yh","_id":"ciy431omb001duco0gh3lrgeo"},{"post_id":"ciy431oli000guco00ebgy3ju","tag_id":"ciy431om40013uco0mfj0r0ll","_id":"ciy431omf001guco0tn4hzx2n"},{"post_id":"ciy431oma001buco0zewpuvw7","tag_id":"ciy431olm000juco0xx3g068n","_id":"ciy431omi001luco09rnmigee"},{"post_id":"ciy431oll000iuco0loxo8fg2","tag_id":"ciy431om9001auco0hrze08or","_id":"ciy431omq001ouco0rkzlesdq"},{"post_id":"ciy431olp000muco0c4lf9gg9","tag_id":"ciy431omh001juco0u7p4lx2d","_id":"ciy431omt001tuco0x8xo3prx"},{"post_id":"ciy431olr000ouco08q7m53c4","tag_id":"ciy431omr001quco0lyqgdt0r","_id":"ciy431omw001xuco0m1y5lz1s"},{"post_id":"ciy431olt000suco004vh9sq3","tag_id":"ciy431omv001vuco0yv84p71r","_id":"ciy431omx0021uco02lgd93q4"},{"post_id":"ciy431olz000vuco0zgib6eb6","tag_id":"ciy431omw001zuco0y27w8tqp","_id":"ciy431omy0025uco0777agtuy"},{"post_id":"ciy431om2000zuco0pbmntgup","tag_id":"ciy431omy0023uco0xk2uqnsh","_id":"ciy431omz0029uco0kq77pi0m"},{"post_id":"ciy431om70017uco0d36l57fa","tag_id":"ciy431omz0028uco0dhxv9zoa","_id":"ciy431on0002cuco0yrlqnuxp"},{"post_id":"ciy431omc001fuco04wavbjgp","tag_id":"ciy431omz002buco02a8o6mpn","_id":"ciy431on1002fuco0a0tnkd58"},{"post_id":"ciy431omg001iuco00w5qqjmr","tag_id":"ciy431on1002euco0e71jq4zp","_id":"ciy431on2002huco01cma82xa"},{"post_id":"ciy431omk001nuco0jwp3w3lj","tag_id":"ciy431on2002guco0z82y8wrb","_id":"ciy431on3002kuco05atpssm1"},{"post_id":"ciy431omk001nuco0jwp3w3lj","tag_id":"ciy431on2002iuco0hj37q01p","_id":"ciy431on3002luco0e7dc4lba"},{"post_id":"ciy431omk001nuco0jwp3w3lj","tag_id":"ciy431on2002juco0yz4hko8z","_id":"ciy431on3002muco0w1m0bw90"}],"Tag":[{"name":"java","_id":"ciy431ol10007uco0dffl98t2"},{"name":"html5","_id":"ciy431ole000duco0yu2sm8mg"},{"name":"Hexo","_id":"ciy431olm000juco0xx3g068n"},{"name":"Spring Boot","_id":"ciy431om1000wuco0ey25o0yh"},{"name":"Java","_id":"ciy431om40013uco0mfj0r0ll"},{"name":"test","_id":"ciy431om9001auco0hrze08or"},{"name":"支付","_id":"ciy431omh001juco0u7p4lx2d"},{"name":"Spring","_id":"ciy431omr001quco0lyqgdt0r"},{"name":"tips","_id":"ciy431omv001vuco0yv84p71r"},{"name":"github maven","_id":"ciy431omw001zuco0y27w8tqp"},{"name":"软件","_id":"ciy431omy0023uco0xk2uqnsh"},{"name":"hexo","_id":"ciy431omz0028uco0dhxv9zoa"},{"name":"html","_id":"ciy431omz002buco02a8o6mpn"},{"name":"软件推荐","_id":"ciy431on1002euco0e71jq4zp"},{"name":"linux","_id":"ciy431on2002guco0z82y8wrb"},{"name":"部署","_id":"ciy431on2002iuco0hj37q01p"},{"name":"服务器","_id":"ciy431on2002juco0yz4hko8z"}]}}